'use strict';
const B = b, C = b;
function a() {
    const G = [
        '6748BCnRTL',
        'node',
        'split',
        'attributes',
        'getTime',
        'fault',
        'T_FLOW_FOU',
        'nodeList',
        '114wczJzP',
        'VgNZM',
        'base64',
        'Rdnxa',
        '5363160spsapH',
        '56907CYrCcK',
        'rs/AppErro',
        'mediaUrl',
        '../../erro',
        'userId',
        'update',
        'bgArC',
        'length',
        'TlJJX',
        'findOne',
        'uBrao',
        '__esModule',
        'BkawQ',
        'erty',
        'util',
        'ls/ChatFlo',
        'where',
        'HBkgz',
        'reload',
        'type',
        'VawUX',
        'default',
        'krTNu',
        'value',
        'CfpKe',
        'path',
        '55NMbPzQ',
        'defineProp',
        'MediaField',
        '358351HvVmQD',
        '../../mode',
        'dswmR',
        'flow',
        'name',
        '3057542LxNAFt',
        'CVicZ',
        'join',
        'interactio',
        '2885HMkthy',
        'rLiGc',
        'promisify',
        '10105908ZxQBbt',
        'tenantId',
        'wXVvX',
        'data',
        '3KaAhRt',
        'isActive',
        'TMgZn',
        'media',
        'celularTes',
        '968vIXnLi',
        'ERR_NO_CHA',
        'public',
        'writeFile',
        '__importDe',
        '1510688KIayqc'
    ];
    a = function () {
        return G;
    };
    return a();
}
(function (c, d) {
    const z = b, A = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(z(0xa6)) / (-0x65 * -0x2f + -0x891 * -0x2 + 0xbe4 * -0x3) + parseInt(z(0xd6)) / (0x1 * -0x22e3 + 0x112 * 0x3 + 0x1faf) * (parseInt(z(0xe1)) / (0x9 * -0x5f + -0xa24 + 0x16 * 0x9d)) + parseInt(A(0xa7)) / (-0x6 * 0x4ee + 0x56e + 0x182a) * (-parseInt(z(0xda)) / (0x2e1 + 0x64a + 0x926 * -0x1)) + -parseInt(A(0xaf)) / (-0x1 * 0x831 + 0x8c7 + -0x90 * 0x1) * (parseInt(z(0xd1)) / (0x17b3 + 0x47 * 0x83 + -0x3c01)) + parseInt(z(0xa1)) / (0x137 * -0x10 + -0x73 * -0x3b + -0x709) * (-parseInt(A(0xb4)) / (0x2a5 * -0x7 + -0x1181 * 0x1 + 0x240d)) + -parseInt(z(0xb3)) / (-0x145c + 0x1c50 + 0x7ea * -0x1) + parseInt(A(0xce)) / (0x194 * 0xc + -0xe1a + -0x4cb) * (parseInt(A(0xdd)) / (0x10d3 + 0x451 * 0x9 + -0x10 * 0x37a));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x17a04f + 0xf46c * 0x3 + 0x23bcb0));
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x989 * -0x1 + -0x80 * -0x34 + -0xfda);
        let h = e[f];
        return h;
    }, b(c, d);
}
var __importDefault = this && this[B(0xa5) + C(0xac)] || function (c) {
    const D = C;
    return c && c[D(0xbf)] ? c : { 'default': c };
};
const k = {};
k[C(0xcb)] = !![], Object[C(0xcf) + C(0xc1)](exports, C(0xbf), k);
const util_1 = require(C(0xc2)), path_1 = require(C(0xcd)), fs_1 = require('fs'), ChatFlow_1 = __importDefault(require(C(0xd2) + B(0xc3) + 'w')), AppError_1 = __importDefault(require(C(0xb7) + B(0xb5) + 'r')), writeFileAsync = (-0x2 * 0x673 + -0x12e9 + -0x11 * -0x1df, util_1[C(0xdc)])(fs_1[C(0xa4)]), UpdateChatFlowService = async ({
        chatFlowData: g,
        chatFlowId: h,
        tenantId: i
    }) => {
        const E = C, F = C, j = {
                'krTNu': E(0xd5),
                'bgArC': F(0xd4),
                'TMgZn': E(0xb8),
                'wXVvX': E(0x9d),
                'CVicZ': E(0xa0) + 'te',
                'rLiGc': F(0xa2) + E(0xad) + 'ND',
                'dswmR': function (v, w) {
                    return v === w;
                },
                'HBkgz': F(0xa8),
                'Rdnxa': function (v, w) {
                    return v === w;
                },
                'VgNZM': F(0xd0),
                'uBrao': function (v, w, x, y) {
                    return v(w, x, y);
                },
                'TlJJX': F(0xa3),
                'BkawQ': E(0xb1),
                'CfpKe': function (v, w) {
                    return v === w;
                },
                'VawUX': function (v, w) {
                    return v - w;
                }
            }, {
                name: l,
                flow: m,
                userId: n,
                isActive: o,
                celularTeste: p
            } = g, q = {};
        q['id'] = h, q[F(0xde)] = i;
        const r = {};
        r[F(0xc4)] = q, r[E(0xaa)] = [
            'id',
            j[F(0xca)],
            j[F(0xba)],
            j[E(0x9e)],
            j[F(0xdf)],
            j[F(0xd7)]
        ];
        const s = await ChatFlow_1[E(0xc9)][F(0xbd)](r);
        if (!s)
            throw new AppError_1[(E(0xc9))](j[F(0xdb)], -0x1a88 + 0x1 * 0x446 + -0x7f2 * -0x3);
        for await (const v of m[E(0xd4)][F(0xae)]) {
            if (j[F(0xd3)](v[F(0xc7)], j[E(0xc5)]))
                for await (const w of v[E(0xd9) + 'ns']) {
                    if (j[F(0xb2)](w[F(0xc7)], j[E(0xb0)]) && w[E(0xe0)][E(0x9f)]) {
                        const x = new Date()[F(0xab)]() + '-' + w[E(0xe0)][E(0xd5)];
                        await j[F(0xbe)](writeFileAsync, (0x13c + 0x40b + 0x7 * -0xc1, path_1[F(0xd8)])(__dirname, '..', '..', '..', j[E(0xbc)], x), w[E(0xe0)][E(0x9f)][F(0xa9)](j[F(0xc0)])[0x10d * 0x16 + 0x47 * -0x17 + 0x2a * -0x66], j[E(0xc0)]), delete w[F(0xe0)][E(0x9f)], w[E(0xe0)][F(0xb6)] = x;
                    }
                    if (j[F(0xcc)](w[E(0xc7)], j[E(0xb0)]) && w[F(0xe0)][F(0xb6)]) {
                        const y = w[E(0xe0)][F(0xb6)][E(0xa9)]('/');
                        w[E(0xe0)][E(0xb6)] = y[j[E(0xc8)](y[E(0xbb)], 0x1 * -0x18f4 + 0x2 * 0xf76 + -0x5f7 * 0x1)];
                    }
                }
        }
        const t = {};
        t[F(0xd5)] = l, t[F(0xd4)] = m[E(0xd4)], t[E(0xb8)] = n, t[F(0x9d)] = m[F(0x9d)], t[F(0xa0) + 'te'] = m[F(0xa0) + 'te'], await s[F(0xb9)](t);
        const u = {};
        return u[E(0xaa)] = [
            'id',
            j[F(0xca)],
            j[F(0xba)],
            j[F(0x9e)],
            j[F(0xdf)],
            j[F(0xd7)]
        ], await s[E(0xc6)](u), s;
    };
exports[B(0xc9)] = UpdateChatFlowService;