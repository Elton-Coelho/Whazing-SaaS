'use strict';
function a() {
    const L = [
        'owenWebhoo',
        'owenToken',
        'model',
        '3269052uthVDZ',
        'Key',
        'txId',
        '-mainchann',
        'toFixed',
        '5563836XUDjzq',
        'default',
        'data',
        'axios',
        'tenant-',
        'https://pi',
        'erty',
        '385PMawMC',
        'fault',
        'super',
        'getDate',
        'stringify',
        'body',
        'findOne',
        'eral',
        '__esModule',
        '1698891GpPxqn',
        '__importDe',
        'valor',
        '../../mode',
        'ycDSr',
        'open',
        'on\x20error:\x20',
        'findByPk',
        'jKkXt',
        'owenCnpj',
        'ncontrado,',
        'Subscripti',
        'setDate',
        'json',
        'anAOD',
        'KSTJo',
        '#Fatura:',
        'ls/Tenant',
        'status',
        'MXvgQ',
        'get',
        'Invoice\x20no',
        'include',
        'tenantId',
        '/api/v1/qr',
        'ettingsGen',
        'qrcodeId',
        'nsCsH',
        'getIO',
        '../../help',
        'x.owenbras',
        '../../erro',
        'error',
        'rs/AppErro',
        'toISOStrin',
        'update',
        'contato\x20co',
        'reload',
        'owenSecret',
        '../../util',
        'owenCreate',
        'owen',
        '3593045gXVDoV',
        'SKOKu',
        'tenant',
        '-payment',
        '/socket',
        '16OHWeoz',
        'original',
        '\x20entre\x20em\x20',
        't\x20found',
        'RGunP',
        'dinamico',
        'ers/CheckS',
        'ls/Invoice',
        'dueDate',
        'value',
        'm\x20o\x20suport',
        'YzSua',
        '205598SXJBeU',
        'logger',
        'defineProp',
        'CONCLUIDA',
        'paid',
        'MnDFQ',
        'where',
        'LJPmT',
        'Problema\x20e',
        '159846zMKqQf',
        'aoFjd',
        'il.com.br',
        'emit',
        '11RuayEU',
        'qrcode',
        '../../libs',
        'oMPHZ',
        'PQXYU',
        'APPROVED',
        's/logger',
        '3829970fLbVlQ',
        '2LgloQW',
        'split',
        'FYznN'
    ];
    a = function () {
        return L;
    };
    return a();
}
const E = b, F = b;
(function (c, d) {
    const C = b, D = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(C(0xac)) / (0x1d9e + -0xe02 + -0xf9b) + parseInt(D(0xc1)) / (0xdfa + 0x2050 + -0x4 * 0xb92) * (-parseInt(D(0xdc)) / (0xd76 * 0x2 + 0x926 + -0x240f)) + -parseInt(D(0xc7)) / (-0x5 * -0x4fd + 0x18c8 + -0x31b5) + -parseInt(D(0x106)) / (0xce8 + 0x1b72 + -0x2855) + parseInt(C(0xb5)) / (0x506 * 0x1 + -0x5 * -0x14d + -0x24d * 0x5) * (parseInt(C(0xd3)) / (-0x789 + 0x1380 + -0xbf0 * 0x1)) + parseInt(C(0xa0)) / (0x1463 * -0x1 + 0x1831 + -0x15 * 0x2e) * (parseInt(D(0xcc)) / (-0x2 * 0x7b5 + 0x1d9b + -0xe28)) + parseInt(D(0xc0)) / (-0x329 * 0x2 + -0x1ec7 * -0x1 + 0x13 * -0x149) * (parseInt(C(0xb9)) / (-0x1217 + -0x173e + 0x2960));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0xe21c8 + -0x2a08 * -0x2 + -0x29b1b));
var __importDefault = this && this[E(0xdd) + F(0xd4)] || function (c) {
    const G = F;
    return c && c[G(0xdb)] ? c : { 'default': c };
};
const k = {};
k[E(0xa9)] = !![], Object[E(0xae) + E(0xd2)](exports, F(0xdb), k), exports[F(0x104) + E(0xe7) + 'on'] = exports[F(0xc4) + 'k'] = void (0x379 * 0x8 + 0x18a0 * -0x1 + -0x328);
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x45e + 0x1ac3 + 0x259 * -0xd);
        let h = e[f];
        return h;
    }, b(c, d);
}
const axios_1 = __importDefault(require(E(0xcf))), CheckSettingsGeneral_1 = __importDefault(require(E(0xf9) + F(0xa6) + E(0xf5) + F(0xda))), logger_1 = require(E(0x103) + E(0xbf)), socket_1 = require(F(0xbb) + F(0x9f)), Invoices_1 = __importDefault(require(E(0xdf) + E(0xa7) + 's')), Tenant_1 = __importDefault(require(E(0xdf) + F(0xed))), AppError_1 = __importDefault(require(E(0xfb) + F(0xfd) + 'r')), owenBaseURL = F(0xd1) + E(0xfa) + F(0xb7), owenWebhook = async (l, m) => {
        const H = E, I = E, n = {};
        n[H(0xf7)] = function (r, s) {
            return r === s;
        }, n[I(0xab)] = I(0xbe), n[H(0xb3)] = I(0xe1), n[H(0xbd)] = H(0x9d), n[H(0xb6)] = function (r, s) {
            return r < s;
        }, n[I(0xea)] = function (r, s) {
            return r + s;
        }, n[I(0xef)] = I(0xb0), n[I(0xe4)] = H(0xd5), n[H(0xe0)] = I(0xaf);
        const o = n, {data: p} = l[I(0xd8)];
        if (o[I(0xf7)](p[I(0xee)], o[I(0xab)])) {
            const {qrcodeId: r} = p, s = {};
            s[I(0xc9)] = r, s[I(0xee)] = o[I(0xb3)];
            const t = {};
            t[H(0xc6)] = Tenant_1[H(0xcd)], t['as'] = o[H(0xbd)];
            const u = {};
            u[I(0xb2)] = s, u[H(0xf2)] = [t];
            const v = await Invoices_1[I(0xcd)][I(0xd9)](u);
            if (!v || o[I(0xb6)](p[H(0xde)], v[H(0xa9)])) {
                const B = {};
                return B['ok'] = !![], m[I(0xe9)](B);
            }
            const w = new Date(v[H(0x9d)][H(0xa8)]);
            w[H(0xe8)](o[H(0xea)](w[H(0xd6)](), -0xc46 + -0xde5 + 0x1a49));
            const x = w[I(0xfe) + 'g']()[H(0xc2)]('T')[-0x1af1 + 0x2242 + 0x751 * -0x1], y = {};
            y[I(0xa8)] = x, await v[H(0x9d)][I(0xff)](y);
            const z = {};
            z[I(0xee)] = o[H(0xef)], await v[I(0xff)](z), await v[I(0x9d)][H(0x101)]();
            const A = (0xe6e + -0x5 * -0x6f0 + -0x2 * 0x188f, socket_1[H(0xf8)])();
            A['to'](I(0xd0) + v[H(0xf3)] + (I(0xca) + 'el'))['to'](o[H(0xe4)])[H(0xb8)](H(0xd0) + v[I(0xf3)] + I(0x9e), {
                'action': o[I(0xe0)],
                'tenant': v[I(0x9d)],
                'invoiceId': v['id']
            });
        }
        const q = {};
        return q['ok'] = !![], m[H(0xe9)](q);
    };
exports[F(0xc4) + 'k'] = owenWebhook;
const owenCreateSubscription = async (g, h) => {
    const J = E, K = F, i = {};
    i[J(0xa4)] = J(0xe5), i[K(0xeb)] = K(0xc5), i[J(0x9c)] = K(0x102) + K(0xc8), i[J(0xb1)] = K(0xf1) + K(0xa3), i[K(0xbc)] = K(0x105), i[K(0xc3)] = J(0xb4) + J(0xe6) + J(0xa2) + J(0x100) + K(0xaa) + 'e!';
    const j = i, {
            price: l,
            invoiceId: m
        } = g[J(0xd8)], n = {
            'params': {
                'valor': l[J(0xcb)]([-0x557 * -0x4 + 0xebc + -0x2416 * 0x1]),
                'minutos': 0x5,
                'mensagem': J(0xec) + m,
                'user': await (-0x3d6 + -0x1750 * 0x1 + 0x1b26, CheckSettingsGeneral_1[K(0xcd)])(j[J(0xa4)]),
                'password': await (-0x3e7 + 0x1b32 + 0x174b * -0x1, CheckSettingsGeneral_1[K(0xcd)])(j[K(0xeb)]),
                'secretkey': await (-0x1a21 + 0x111c + 0x905, CheckSettingsGeneral_1[K(0xcd)])(j[K(0x9c)])
            }
        };
    try {
        const o = await Invoices_1[J(0xcd)][K(0xe3)](m);
        if (!o)
            throw new Error(j[J(0xb1)]);
        const p = await axios_1[K(0xcd)][J(0xf0)](owenBaseURL + (J(0xf4) + J(0xa5)), n);
        o[J(0xff)]({
            'txId': p[J(0xce)][J(0xce)][J(0xf6)],
            'payGw': j[K(0xbc)],
            'payGwData': JSON[K(0xd7)](p[J(0xce)][K(0xce)])
        });
        const q = {};
        q[J(0xba)] = p[K(0xce)][J(0xce)][K(0xba)];
        const r = {};
        r[J(0xa1)] = l;
        const s = {};
        return s[J(0xba)] = q, s[J(0xde)] = r, h[J(0xe9)](s);
    } catch (t) {
        logger_1[K(0xad)][J(0xfc)](K(0x104) + K(0xe7) + J(0xe2) + t);
        throw new AppError_1[(K(0xcd))](j[K(0xc3)], -0x2 * 0x581 + 0xb7e * 0x3 + -0x15e8 * 0x1);
    }
};
exports[E(0x104) + F(0xe7) + 'on'] = owenCreateSubscription;