'use strict';
const Q = b, R = b;
(function (c, d) {
    const O = b, P = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(O(0xff)) / (0x2 * 0x7fc + 0x382 * 0x7 + 0x29 * -0xfd) * (parseInt(P(0xec)) / (0x29 * -0x9d + 0x1cd1 * 0x1 + 0x1 * -0x3aa)) + parseInt(P(0xc5)) / (-0xe5 * 0x8 + 0x17fe + -0x10d3) + parseInt(P(0x121)) / (0x1 * 0xef9 + -0x225f + 0x136a * 0x1) * (-parseInt(O(0xf0)) / (-0x2b * 0xd + 0xd5 * -0x3 + -0x191 * -0x3)) + parseInt(O(0xc4)) / (0x8d9 + 0x22fe + -0x2bd1) + parseInt(O(0x124)) / (0x2373 + 0x4f * 0x11 + -0x28ab) * (-parseInt(O(0x105)) / (0x14fb + 0x1a03 + 0x177b * -0x2)) + parseInt(P(0xd5)) / (0x1763 + -0x435 * 0x5 + -0x251) * (parseInt(P(0xce)) / (0xebc + -0x1 * 0xb03 + -0x3af)) + parseInt(P(0x11a)) / (0x74 * 0x17 + 0x1 * -0x1903 + 0xea2) * (-parseInt(O(0xd4)) / (0xdd4 + 0x27b * -0x3 + -0x657));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x15 * -0xa9f + 0x32eae + 0xce6d5));
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x8d2 + 0x10 * -0x105 + 0x1 * 0x19dd);
        let h = e[f];
        return h;
    }, b(c, d);
}
var __importDefault = this && this[Q(0xe3) + Q(0xc2)] || function (c) {
    const S = R;
    return c && c[S(0x112)] ? c : { 'default': c };
};
function a() {
    const V = [
        'ZZWfg',
        '3546512ieBQZC',
        'pending',
        'sendMessag',
        'default',
        'WxfDF',
        'Error\x20send',
        'tenantId',
        'Ansni',
        'ls/Message',
        'includes',
        'zjrby',
        'value',
        'nHmhX',
        '__esModule',
        'WSwiv',
        'xHUuz',
        'contact',
        'mediaType',
        'reply_to_m',
        'mediaName',
        'dataValues',
        '35101QmBXom',
        'mediaUrl',
        'sended',
        'status',
        'ASC',
        'source',
        'WiMeq',
        '24fFvTwA',
        'public',
        'OjIlS',
        '21ElTtyX',
        'type',
        'ptt',
        'info',
        'sequelize',
        'yELVd',
        'sivVZ',
        'lte',
        'NEnOd',
        'body',
        'nant:\x20',
        'path',
        'age\x20is\x20(te',
        'e\x20media',
        'DJBRc',
        'quotedMsg',
        'DRVFj',
        'mamws',
        'fault',
        'logger',
        '10634610RUTzuc',
        '3833430gTVzha',
        'telegram',
        'chat:ack',
        'chat',
        'sendVoice',
        'defineProp',
        'error',
        'image',
        'nLlHU',
        '30410gPlffw',
        'essage_id',
        'timestamp',
        'FKvAF',
        '\x20|\x20Ticket:',
        'sendDocume',
        '3624eeyqJR',
        '1035fPVIlr',
        'ls/Ticket',
        'ack',
        'audio',
        'Message\x20Up',
        'messageId',
        'ers/socket',
        's/logger',
        'ketMessage',
        'closed',
        'sendPhoto',
        'sendVideo',
        '\x20message\x20(',
        'qwDpM',
        '__importDe',
        '../../mode',
        'text',
        'Error\x20mess',
        'fddny',
        'date',
        'e\x20text',
        ')::\x20',
        'ers/SetTic',
        '8LPRbyN',
        'video',
        'telegramId',
        'findAll',
        '1585070RiLovW',
        'payload',
        '../../util',
        'join',
        'MUNnm',
        'aPhdc',
        'createdAt',
        'sAsRead',
        'update',
        'ZGnRn',
        'ticket',
        'date\x20ok',
        '../../help',
        'erty',
        'id:\x20',
        '448183xuDmpB',
        'Emit',
        'ZIDPf',
        'where',
        'message_id'
    ];
    a = function () {
        return V;
    };
    return a();
}
const q = {};
q[R(0x110)] = !![], Object[Q(0xca) + R(0xfd)](exports, R(0x112), q);
const path_1 = require(Q(0xbb)), sequelize_1 = require(R(0x128)), SetTicketMessagesAsRead_1 = __importDefault(require(R(0xfc) + Q(0xeb) + R(0xdd) + Q(0xf7))), socketEmit_1 = __importDefault(require(Q(0xfc) + Q(0xdb) + R(0x100))), Message_1 = __importDefault(require(R(0xe4) + R(0x10d))), Ticket_1 = __importDefault(require(Q(0xe4) + Q(0xd6))), logger_1 = require(R(0xf2) + Q(0xdc)), SendMessagesSystemWbot = async (m, n) => {
        const T = Q, U = R, o = {};
        o[T(0x12a)] = U(0x106), o[T(0xf4)] = T(0x115), o[U(0x12c)] = U(0xfa), o[T(0xc0)] = T(0xde), o[U(0x101)] = U(0xc6), o[U(0xf5)] = T(0xbf), o[T(0x113)] = U(0xf6), o[U(0x123)] = U(0x11e), o[U(0xcd)] = U(0xc8), o[T(0xc1)] = T(0xe5), o[T(0xf9)] = U(0x122), o[T(0xe7)] = function (v, w) {
            return v === w;
        }, o[T(0xd1)] = U(0xd8), o[U(0x10f)] = function (v, w) {
            return v === w;
        }, o[U(0x10c)] = U(0x126), o[T(0x129)] = U(0xcc), o[T(0xe2)] = U(0xed), o[T(0x114)] = U(0x107) + T(0xbd), o[T(0x109)] = U(0x107) + U(0xe9), o[T(0x120)] = function (v, w) {
            return v * w;
        }, o[U(0x111)] = T(0x11c), o[T(0xbe)] = U(0xc7), o[U(0x104)] = T(0xd9) + U(0xfb);
        const p = o, r = { [sequelize_1['Op']['is']]: null }, s = {
                'fromMe': !![],
                'messageId': r,
                'status': p[U(0x12a)],
                [sequelize_1['Op']['or']]: [
                    { 'scheduleDate': { [sequelize_1['Op'][T(0x12b)]]: new Date() } },
                    { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
                ]
            }, t = await Message_1[U(0x108)][T(0xef)]({
                'where': s,
                'include': [
                    p[T(0xf4)],
                    {
                        'model': Ticket_1[T(0x108)],
                        'as': p[T(0x12c)],
                        'where': {
                            'tenantId': n,
                            [sequelize_1['Op']['or']]: {
                                'status': { [sequelize_1['Op']['ne']]: p[T(0xc0)] },
                                'isFarewellMessage': !![]
                            },
                            'channel': p[T(0x101)],
                            'whatsappId': m['id']
                        },
                        'include': [p[T(0xf4)]]
                    },
                    {
                        'model': Message_1[T(0x108)],
                        'as': p[U(0xf5)],
                        'include': [p[U(0xf4)]]
                    }
                ],
                'order': [[
                        p[T(0x113)],
                        p[U(0x123)]
                    ]]
            });
        let u;
        for (const v of t) {
            const w = v, {ticket: x} = w, y = x[T(0x115)][U(0xee)], z = {};
            w[U(0xbf)] && (z[T(0x117) + U(0xcf)] = w[U(0xbf)][T(0xda)]);
            try {
                if (![
                        p[U(0xcd)],
                        p[U(0xc1)]
                    ][U(0x10e)](w[U(0x116)]) && w[T(0x118)]) {
                    const F = (-0x3d * 0x28 + 0x266f + -0x97 * 0x31, path_1[U(0xf3)])(__dirname, '..', '..', '..', p[U(0xf9)]), G = (-0x1f4 * -0xb + -0x2380 + 0x1 * 0xe04, path_1[U(0xf3)])(F, w[T(0x118)]);
                    if (p[T(0xe7)](w[U(0x116)], p[U(0xd1)]) || p[U(0x10f)](w[T(0x116)], p[T(0x10c)])) {
                        const H = {};
                        H[U(0x11f)] = G, u = await m[U(0xc6)][T(0xc9)](y, H, z);
                    } else {
                        if (p[T(0x10f)](w[U(0x116)], p[T(0x129)])) {
                            const I = {};
                            I[U(0x11f)] = G, u = await m[U(0xc6)][T(0xdf)](y, I, z);
                        } else {
                            if (p[U(0x10f)](w[T(0x116)], p[U(0xe2)])) {
                                const J = {};
                                J[T(0x11f)] = G, u = await m[U(0xc6)][U(0xe0)](y, J, z);
                            } else {
                                const K = {};
                                K[U(0x11f)] = G, u = await m[T(0xc6)][T(0xd3) + 'nt'](y, K, z);
                            }
                        }
                    }
                    logger_1[T(0xc3)][T(0x127)](p[U(0x114)]);
                } else
                    u = await m[U(0xc6)][U(0x107) + 'e'](y, w[U(0x12d)], z), logger_1[T(0xc3)][T(0x127)](p[U(0x109)]);
                const A = {
                        ...w,
                        ...u,
                        'id': w['id'],
                        'timestamp': p[U(0x120)](u[T(0xe8)], 0x1f8 + -0x8b5 * -0x2 + -0xf7a),
                        'messageId': u[T(0x103)],
                        'status': p[U(0x111)],
                        'ack': 0x2
                    }, B = { ...A }, C = {};
                C['id'] = w['id'];
                const D = {};
                D[U(0x102)] = C, await Message_1[U(0x108)][T(0xf8)](B, D);
                const E = {};
                E[T(0x10b)] = x[U(0x10b)], E[U(0x125)] = p[U(0xbe)], E[T(0xf1)] = { ...w[U(0x119)] }, E[T(0xf1)]['id'] = w['id'], E[T(0xf1)][U(0x11b)] = w[T(0x11b)], E[T(0xf1)][T(0xd0)] = A[U(0xd0)], E[T(0xf1)][U(0xda)] = u[T(0x103)], E[T(0xf1)][T(0x11d)] = p[T(0x111)], E[T(0xf1)][T(0xd7)] = 0x2, (0x141 * 0x3 + -0x1 * 0x1216 + 0xe53, socketEmit_1[U(0x108)])(E), logger_1[U(0xc3)][U(0x127)](p[U(0x104)]), await (0x1418 + 0x1b4f + -0x329 * 0xf, SetTicketMessagesAsRead_1[T(0x108)])(x);
            } catch (L) {
                const M = w['id'], N = w[T(0xfa)]['id'];
                logger_1[T(0xc3)][T(0xcb)](T(0xe6) + U(0xbc) + U(0x12e) + n + (T(0xd2) + '\x20') + N + ')'), logger_1[U(0xc3)][U(0xcb)](T(0x10a) + U(0xe1) + U(0xfe) + M + U(0xea) + L);
            }
        }
    };
exports[Q(0x108)] = SendMessagesSystemWbot;