'use strict';
function a() {
    const V = [
        'nant:\x20',
        's/logger',
        'sequelize',
        'Error\x20mess',
        '__esModule',
        'ls/Message',
        'date\x20ok',
        'body',
        'wUjeP',
        'Emit',
        'UemJq',
        'reply_to_m',
        'mediaUrl',
        'FMPfL',
        'mediaName',
        'video',
        'ptt',
        '../../util',
        'sended',
        'closed',
        'e\x20text',
        'update',
        'telegram',
        'image',
        'info',
        'Ekzzt',
        'FSiqA',
        '255648BxESgP',
        'createdAt',
        'Error\x20send',
        'sendVoice',
        'mediaType',
        'pRxzG',
        'ZSzWN',
        'ZFvFj',
        '278NQELYB',
        'tenantId',
        '886944fKuuct',
        'public',
        'audio',
        'source',
        'aPuMv',
        'defineProp',
        'age\x20is\x20(te',
        'DsZul',
        'FFZHD',
        'date',
        'error',
        'krVOS',
        'sendPhoto',
        'NqJye',
        'ls/Ticket',
        'ers/SetTic',
        '2416EHBXle',
        'ticket',
        'pending',
        'e\x20media',
        'where',
        'erty',
        '91Xvkybz',
        '242zTkKDX',
        'OBwGP',
        '../../help',
        'sAsRead',
        'dataValues',
        'value',
        'join',
        'WfjrB',
        'text',
        'ers/socket',
        'sendMessag',
        'essage_id',
        'message_id',
        'zLEGA',
        '__importDe',
        'path',
        'chat',
        'irZSQ',
        'bzfmg',
        '101544Cinili',
        'xbubt',
        ')::\x20',
        '../../mode',
        'WNXhG',
        'logger',
        'messageId',
        'includes',
        '40nUbthB',
        'default',
        'ketMessage',
        'AGCCK',
        'QLerl',
        'quotedMsg',
        '2525237cnbMRV',
        'Message\x20Up',
        'telegramId',
        'type',
        '900970tLGabZ',
        'fault',
        'ASC',
        'timestamp',
        'sendDocume',
        'ack',
        '1074540tIMgsn',
        'chat:ack',
        '\x20message\x20(',
        'contact',
        '3vsWfbW',
        'GDjol',
        'payload',
        'findAll',
        'sendVideo',
        'id:\x20',
        'lte',
        'status',
        '54aCUsuR',
        '\x20|\x20Ticket:'
    ];
    a = function () {
        return V;
    };
    return a();
}
const Q = b, R = b;
(function (c, d) {
    const O = b, P = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(O(0x1df)) / (-0xba * -0x10 + 0x6 * -0x4d3 + 0x1 * 0x1153) * (parseInt(P(0x1f1)) / (-0x3fe * 0x5 + -0x2d * 0xaf + 0x32bb)) + -parseInt(P(0x227)) / (0x1 * 0x19fe + -0x1c19 * 0x1 + 0x21e) * (parseInt(P(0x223)) / (0x211c + 0x4 * 0x948 + -0x282 * 0x1c)) + parseInt(O(0x213)) / (-0x22e6 * 0x1 + 0x1a03 * 0x1 + 0x8e8) * (parseInt(O(0x1e1)) / (-0x68f + -0x7 * 0xd3 + -0x5d * -0x22)) + parseInt(P(0x1f7)) / (0x3c9 * 0x9 + 0x14c5 + -0x1245 * 0x3) * (parseInt(P(0x20b)) / (0x27f + 0x2 * 0x79f + -0x11b5)) + parseInt(O(0x22f)) / (-0x205d * -0x1 + 0x1193 + -0x49 * 0xaf) * (parseInt(P(0x21d)) / (0x2354 + 0xd6 * 0xb + -0x2c7c)) + parseInt(O(0x1f8)) / (-0x1b * 0x10f + 0x43 * 0x4f + 0x7f3) * (-parseInt(O(0x24c)) / (-0x47c + -0x10be + -0xaa3 * -0x2)) + -parseInt(P(0x219)) / (-0x270d + 0x10bb + 0x165f);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x38ab6 + 0x5ffc7 + -0x1 * -0x703e2));
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x123c + -0x2 * -0x72 + 0x1336);
        let h = e[f];
        return h;
    }, b(c, d);
}
var __importDefault = this && this[Q(0x206) + Q(0x21e)] || function (c) {
    const S = Q;
    return c && c[S(0x235)] ? c : { 'default': c };
};
const q = {};
q[Q(0x1fd)] = !![], Object[R(0x1e6) + Q(0x1f6)](exports, R(0x235), q);
const path_1 = require(Q(0x207)), sequelize_1 = require(R(0x233)), SetTicketMessagesAsRead_1 = __importDefault(require(Q(0x1fa) + R(0x1f0) + R(0x215) + Q(0x1fb))), socketEmit_1 = __importDefault(require(Q(0x1fa) + Q(0x201) + R(0x23a))), Message_1 = __importDefault(require(R(0x20e) + Q(0x236))), Ticket_1 = __importDefault(require(Q(0x20e) + Q(0x1ef))), logger_1 = require(R(0x242) + R(0x232)), SendMessagesSystemWbot = async (m, n) => {
        const T = Q, U = R, o = {};
        o[T(0x209)] = T(0x1f3), o[U(0x216)] = T(0x226), o[T(0x1f9)] = U(0x1f2), o[T(0x252)] = T(0x244), o[T(0x23b)] = T(0x247), o[T(0x239)] = U(0x218), o[T(0x24b)] = U(0x24d), o[U(0x24a)] = T(0x21f), o[U(0x1ee)] = U(0x208), o[U(0x228)] = U(0x200), o[T(0x1e8)] = U(0x1e2), o[U(0x205)] = function (v, w) {
            return v === w;
        }, o[T(0x251)] = U(0x1e3), o[T(0x1e5)] = T(0x241), o[T(0x23e)] = function (v, w) {
            return v === w;
        }, o[T(0x1e9)] = U(0x248), o[T(0x1ec)] = U(0x240), o[T(0x20a)] = U(0x202) + U(0x1f4), o[U(0x217)] = U(0x202) + U(0x245), o[T(0x1de)] = function (v, w) {
            return v * w;
        }, o[T(0x1ff)] = T(0x243), o[U(0x20c)] = T(0x224), o[U(0x20f)] = T(0x21a) + U(0x237);
        const p = o, r = { [sequelize_1['Op']['is']]: null }, s = {
                'fromMe': !![],
                'messageId': r,
                'status': p[U(0x209)],
                [sequelize_1['Op']['or']]: [
                    { 'scheduleDate': { [sequelize_1['Op'][U(0x22d)]]: new Date() } },
                    { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
                ]
            }, t = await Message_1[U(0x214)][U(0x22a)]({
                'where': s,
                'include': [
                    p[U(0x216)],
                    {
                        'model': Ticket_1[U(0x214)],
                        'as': p[U(0x1f9)],
                        'where': {
                            'tenantId': n,
                            [sequelize_1['Op']['or']]: {
                                'status': { [sequelize_1['Op']['ne']]: p[T(0x252)] },
                                'isFarewellMessage': !![]
                            },
                            'channel': p[T(0x23b)],
                            'whatsappId': m['id']
                        },
                        'include': [p[T(0x216)]]
                    },
                    {
                        'model': Message_1[U(0x214)],
                        'as': p[T(0x239)],
                        'include': [p[T(0x216)]]
                    }
                ],
                'order': [[
                        p[U(0x24b)],
                        p[T(0x24a)]
                    ]]
            });
        let u;
        for (const v of t) {
            const w = v, {ticket: x} = w, y = x[U(0x226)][U(0x21b)], z = {};
            w[U(0x218)] && (z[U(0x23c) + T(0x203)] = w[U(0x218)][U(0x211)]);
            try {
                if (![
                        p[U(0x1ee)],
                        p[U(0x228)]
                    ][U(0x212)](w[U(0x250)]) && w[U(0x23f)]) {
                    const F = (0x1 * -0x17a9 + 0x1d * 0x15 + -0xe3 * -0x18, path_1[U(0x1fe)])(__dirname, '..', '..', '..', p[T(0x1e8)]), G = (0x1622 + -0x16e * -0x7 + 0xb * -0x2ec, path_1[U(0x1fe)])(F, w[U(0x23f)]);
                    if (p[T(0x205)](w[T(0x250)], p[T(0x251)]) || p[U(0x205)](w[T(0x250)], p[U(0x1e5)])) {
                        const H = {};
                        H[U(0x1e4)] = G, u = await m[U(0x247)][U(0x24f)](y, H, z);
                    } else {
                        if (p[T(0x23e)](w[U(0x250)], p[T(0x1e9)])) {
                            const I = {};
                            I[U(0x1e4)] = G, u = await m[U(0x247)][U(0x1ed)](y, I, z);
                        } else {
                            if (p[U(0x23e)](w[T(0x250)], p[T(0x1ec)])) {
                                const J = {};
                                J[U(0x1e4)] = G, u = await m[T(0x247)][T(0x22b)](y, J, z);
                            } else {
                                const K = {};
                                K[T(0x1e4)] = G, u = await m[T(0x247)][T(0x221) + 'nt'](y, K, z);
                            }
                        }
                    }
                    logger_1[T(0x210)][T(0x249)](p[T(0x20a)]);
                } else
                    u = await m[T(0x247)][U(0x202) + 'e'](y, w[U(0x238)], z), logger_1[T(0x210)][T(0x249)](p[U(0x217)]);
                const A = {
                        ...w,
                        ...u,
                        'id': w['id'],
                        'timestamp': p[U(0x1de)](u[T(0x1ea)], 0x2 * -0x4b1 + -0x12df + -0x2029 * -0x1),
                        'messageId': u[T(0x204)],
                        'status': p[T(0x1ff)],
                        'ack': 0x2
                    }, B = { ...A }, C = {};
                C['id'] = w['id'];
                const D = {};
                D[T(0x1f5)] = C, await Message_1[T(0x214)][T(0x246)](B, D);
                const E = {};
                E[U(0x1e0)] = x[T(0x1e0)], E[T(0x21c)] = p[T(0x20c)], E[U(0x229)] = { ...w[U(0x1fc)] }, E[U(0x229)]['id'] = w['id'], E[U(0x229)][T(0x23d)] = w[T(0x23d)], E[U(0x229)][T(0x220)] = A[T(0x220)], E[U(0x229)][T(0x211)] = u[U(0x204)], E[U(0x229)][T(0x22e)] = p[U(0x1ff)], E[U(0x229)][T(0x222)] = 0x2, (0x1836 * 0x1 + 0x871 * -0x1 + -0xfc5, socketEmit_1[T(0x214)])(E), logger_1[T(0x210)][U(0x249)](p[T(0x20f)]), await (0x1 * 0x1116 + -0x200c + 0xef6, SetTicketMessagesAsRead_1[U(0x214)])(x);
            } catch (L) {
                const M = w['id'], N = w[T(0x1f2)]['id'];
                logger_1[T(0x210)][U(0x1eb)](T(0x234) + U(0x1e7) + U(0x231) + n + (T(0x230) + '\x20') + N + ')'), logger_1[T(0x210)][U(0x1eb)](T(0x24e) + T(0x225) + U(0x22c) + M + T(0x20d) + L);
            }
        }
    };
exports[R(0x214)] = SendMessagesSystemWbot;