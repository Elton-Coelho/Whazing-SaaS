'use strict';
const Q = b, R = b;
(function (c, d) {
    const O = b, P = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(O(0x1fe)) / (-0x5 * -0x305 + 0x5 * 0x25b + -0x1adf * 0x1) + -parseInt(P(0x22a)) / (-0x1 * 0x774 + -0x254b + 0x3 * 0xeeb) * (-parseInt(O(0x206)) / (-0x1 * 0x3d1 + -0x2 * 0x33d + -0xa4e * -0x1)) + -parseInt(O(0x218)) / (0x75 * 0x4f + 0x1 * -0x26b6 + -0x1 * -0x29f) * (-parseInt(P(0x246)) / (-0xf44 * 0x2 + 0x1e57 + 0x36)) + -parseInt(P(0x24a)) / (0x3b * -0x7 + 0x21e * 0x10 + -0x203d) * (parseInt(P(0x20a)) / (0x2192 + -0x60f * 0x2 + 0x5 * -0x449)) + parseInt(P(0x23b)) / (-0x1 * -0x26a6 + 0x1 * 0x1d89 + 0x4427 * -0x1) * (-parseInt(O(0x1df)) / (-0x4 * 0xe3 + 0x47 * 0x4a + -0x10f1 * 0x1)) + -parseInt(O(0x204)) / (0x2b * 0xa6 + 0x620 * 0x6 + 0x13e * -0x34) * (parseInt(O(0x20b)) / (-0x2 * -0x44e + 0x1fa9 + -0x283a)) + -parseInt(O(0x216)) / (0x1 * -0x19b1 + 0x1fd3 + -0x616);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0xac63 * -0x14 + -0x2bc3 * 0x33 + -0xa33 * -0x39e));
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0xb76 + -0x263 + 0x39e * -0x2);
        let h = e[f];
        return h;
    }, b(c, d);
}
function a() {
    const V = [
        'sendPhoto',
        'defineProp',
        '__importDe',
        'telegram',
        'LHzhc',
        'createdAt',
        'chat',
        '1772432VbFQah',
        'sendVoice',
        'mediaUrl',
        'image',
        'e\x20text',
        'join',
        'telegramId',
        'status',
        '\x20message\x20(',
        'e\x20media',
        'CInmS',
        '55CqvHlH',
        'epbIA',
        'fault',
        'sequelize',
        '22434spDsQq',
        'text',
        'mediaName',
        'RxJwJ',
        'cIsrC',
        'erty',
        '\x20|\x20Ticket:',
        'qbkDw',
        'mediaType',
        '9rHTDDp',
        'path',
        '../../mode',
        'quotedMsg',
        'lte',
        '../../help',
        'sendDocume',
        'pending',
        'ptt',
        'BjnUh',
        'sAsRead',
        'where',
        'ASC',
        'fPRHB',
        'ack',
        'payload',
        'ticket',
        'id:\x20',
        'Error\x20send',
        'chat:ack',
        'public',
        'sendVideo',
        'tenantId',
        'Message\x20Up',
        'age\x20is\x20(te',
        'findAll',
        'xmUQu',
        'QXdKX',
        'update',
        'includes',
        'date\x20ok',
        '1183656gMVZOq',
        'ketMessage',
        'XHSAd',
        'type',
        'timestamp',
        'oXbqO',
        '854810mJSTgq',
        'kccJe',
        '33abkRcy',
        'messageId',
        'video',
        'hXbDQ',
        '1092yPScsu',
        '33kEHbLo',
        'essage_id',
        '../../util',
        'Error\x20mess',
        'JqxeL',
        'body',
        'ls/Message',
        'contact',
        'closed',
        'ers/socket',
        'oJrkZ',
        '15484080QNlJdz',
        'reply_to_m',
        '207652QnNNWK',
        'nant:\x20',
        'value',
        'error',
        'Emit',
        'RYxfN',
        'omrXt',
        'info',
        'PJDas',
        'default',
        'source',
        'YMJsV',
        's/logger',
        'dataValues',
        'sended',
        'Ogbds',
        'audio',
        'ers/SetTic',
        '283770XDNbQU',
        'uwsso',
        'logger',
        'sendMessag',
        'date',
        'ls/Ticket',
        'mGbXj',
        '__esModule',
        ')::\x20',
        'message_id'
    ];
    a = function () {
        return V;
    };
    return a();
}
var __importDefault = this && this[Q(0x236) + R(0x248)] || function (c) {
    const S = R;
    return c && c[S(0x231)] ? c : { 'default': c };
};
const q = {};
q[Q(0x21a)] = !![], Object[Q(0x235) + Q(0x1db)](exports, R(0x231), q);
const path_1 = require(Q(0x1e0)), sequelize_1 = require(Q(0x249)), SetTicketMessagesAsRead_1 = __importDefault(require(R(0x1e4) + R(0x229) + R(0x1ff) + Q(0x1e9))), socketEmit_1 = __importDefault(require(R(0x1e4) + Q(0x214) + Q(0x21c))), Message_1 = __importDefault(require(R(0x1e1) + Q(0x211))), Ticket_1 = __importDefault(require(Q(0x1e1) + Q(0x22f))), logger_1 = require(Q(0x20d) + Q(0x224)), SendMessagesSystemWbot = async (m, n) => {
        const T = Q, U = Q, o = {};
        o[T(0x21d)] = T(0x1e6), o[U(0x227)] = T(0x212), o[T(0x1ec)] = T(0x1ef), o[T(0x203)] = U(0x213), o[U(0x205)] = U(0x237), o[T(0x220)] = U(0x1e2), o[U(0x1fa)] = U(0x239), o[U(0x1f9)] = T(0x1eb), o[U(0x230)] = T(0x23a), o[U(0x223)] = U(0x1d7), o[U(0x200)] = U(0x1f3), o[U(0x1dd)] = function (v, w) {
            return v === w;
        }, o[T(0x21e)] = T(0x228), o[T(0x22b)] = U(0x1e7), o[T(0x247)] = function (v, w) {
            return v === w;
        }, o[U(0x1d9)] = T(0x23e), o[U(0x1e8)] = U(0x208), o[U(0x1da)] = T(0x22d) + T(0x244), o[T(0x20f)] = U(0x22d) + U(0x23f), o[T(0x215)] = function (v, w) {
            return v * w;
        }, o[U(0x238)] = T(0x226), o[U(0x209)] = T(0x1f2), o[T(0x245)] = T(0x1f6) + U(0x1fd);
        const p = o, r = { [sequelize_1['Op']['is']]: null }, s = {
                'fromMe': !![],
                'messageId': r,
                'status': p[T(0x21d)],
                [sequelize_1['Op']['or']]: [
                    { 'scheduleDate': { [sequelize_1['Op'][T(0x1e3)]]: new Date() } },
                    { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
                ]
            }, t = await Message_1[T(0x221)][U(0x1f8)]({
                'where': s,
                'include': [
                    p[U(0x227)],
                    {
                        'model': Ticket_1[T(0x221)],
                        'as': p[T(0x1ec)],
                        'where': {
                            'tenantId': n,
                            [sequelize_1['Op']['or']]: {
                                'status': { [sequelize_1['Op']['ne']]: p[T(0x203)] },
                                'isFarewellMessage': !![]
                            },
                            'channel': p[U(0x205)],
                            'whatsappId': m['id']
                        },
                        'include': [p[U(0x227)]]
                    },
                    {
                        'model': Message_1[U(0x221)],
                        'as': p[U(0x220)],
                        'include': [p[U(0x227)]]
                    }
                ],
                'order': [[
                        p[T(0x1fa)],
                        p[T(0x1f9)]
                    ]]
            });
        let u;
        for (const v of t) {
            const w = v, {ticket: x} = w, y = x[U(0x212)][U(0x241)], z = {};
            w[U(0x1e2)] && (z[U(0x217) + U(0x20c)] = w[U(0x1e2)][U(0x207)]);
            try {
                if (![
                        p[U(0x230)],
                        p[U(0x223)]
                    ][T(0x1fc)](w[T(0x1de)]) && w[T(0x1d8)]) {
                    const F = (-0x12 * 0xcd + -0x10 * 0x17f + 0x265a, path_1[T(0x240)])(__dirname, '..', '..', '..', p[T(0x200)]), G = (0x19 * -0x63 + 0xddf + -0x434, path_1[U(0x240)])(F, w[T(0x1d8)]);
                    if (p[U(0x1dd)](w[U(0x1de)], p[T(0x21e)]) || p[U(0x1dd)](w[U(0x1de)], p[U(0x22b)])) {
                        const H = {};
                        H[T(0x222)] = G, u = await m[U(0x237)][T(0x23c)](y, H, z);
                    } else {
                        if (p[T(0x247)](w[T(0x1de)], p[T(0x1d9)])) {
                            const I = {};
                            I[U(0x222)] = G, u = await m[U(0x237)][T(0x234)](y, I, z);
                        } else {
                            if (p[U(0x1dd)](w[U(0x1de)], p[U(0x1e8)])) {
                                const J = {};
                                J[T(0x222)] = G, u = await m[T(0x237)][T(0x1f4)](y, J, z);
                            } else {
                                const K = {};
                                K[U(0x222)] = G, u = await m[U(0x237)][U(0x1e5) + 'nt'](y, K, z);
                            }
                        }
                    }
                    logger_1[T(0x22c)][U(0x21f)](p[T(0x1da)]);
                } else
                    u = await m[T(0x237)][U(0x22d) + 'e'](y, w[U(0x210)], z), logger_1[T(0x22c)][T(0x21f)](p[U(0x20f)]);
                const A = {
                        ...w,
                        ...u,
                        'id': w['id'],
                        'timestamp': p[T(0x215)](u[T(0x22e)], -0xf92 + 0x1b1 * -0x3 + -0xf * -0x1a3),
                        'messageId': u[T(0x233)],
                        'status': p[T(0x238)],
                        'ack': 0x2
                    }, B = { ...A }, C = {};
                C['id'] = w['id'];
                const D = {};
                D[T(0x1ea)] = C, await Message_1[U(0x221)][T(0x1fb)](B, D);
                const E = {};
                E[T(0x1f5)] = x[U(0x1f5)], E[T(0x201)] = p[U(0x209)], E[U(0x1ee)] = { ...w[U(0x225)] }, E[U(0x1ee)]['id'] = w['id'], E[U(0x1ee)][T(0x23d)] = w[T(0x23d)], E[U(0x1ee)][U(0x202)] = A[T(0x202)], E[U(0x1ee)][T(0x207)] = u[U(0x233)], E[U(0x1ee)][U(0x242)] = p[U(0x238)], E[U(0x1ee)][T(0x1ed)] = 0x2, (0x2 * -0x35b + -0x1 * 0x215b + -0x315 * -0xd, socketEmit_1[U(0x221)])(E), logger_1[T(0x22c)][T(0x21f)](p[U(0x245)]), await (-0x48a * -0x8 + -0x155c + -0xef4, SetTicketMessagesAsRead_1[T(0x221)])(x);
            } catch (L) {
                const M = w['id'], N = w[U(0x1ef)]['id'];
                logger_1[T(0x22c)][T(0x21b)](U(0x20e) + U(0x1f7) + U(0x219) + n + (U(0x1dc) + '\x20') + N + ')'), logger_1[U(0x22c)][T(0x21b)](T(0x1f1) + U(0x243) + U(0x1f0) + M + U(0x232) + L);
            }
        }
    };
exports[R(0x221)] = SendMessagesSystemWbot;