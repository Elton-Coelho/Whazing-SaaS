'use strict';
const a4 = b, a5 = b;
(function (c, d) {
    const a2 = b, a3 = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(a2(0xb5)) / (-0xf * 0x175 + -0x1 * -0xeb1 + 0x72b) + -parseInt(a3(0xc4)) / (0x77e + 0x115 + -0x891) + -parseInt(a2(0xd8)) / (-0x239f * 0x1 + 0xcb0 + 0x16f2) * (-parseInt(a2(0xd4)) / (0x1379 + 0x1 * 0xf67 + -0x2e * 0xc2)) + -parseInt(a3(0xef)) / (0x5 * 0x46 + 0xc38 + -0xd91) * (parseInt(a3(0xed)) / (0x2b2 * 0x4 + 0x1a * 0x14e + -0x12d * 0x26)) + parseInt(a2(0x95)) / (-0x9de + 0x2c + 0x83 * 0x13) * (-parseInt(a2(0xc0)) / (-0x75f + -0x1f * 0x51 + -0x89b * -0x2)) + -parseInt(a3(0x98)) / (0xa1 * 0x29 + 0x135d + -0x2d1d) * (-parseInt(a2(0x99)) / (0x32 * 0x11 + 0xe7f + -0x11c7)) + parseInt(a3(0xd9)) / (-0x4 * 0x44b + -0x1ce0 + -0x1b5 * -0x1b);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x1 * -0x1d91a + -0x27 * -0xd32 + 0x6a6ac));
function a() {
    const ab = [
        'VLqMs',
        '25375lcaEuL',
        'contact',
        'MJvmQ',
        'WvWWe',
        'EhxGO',
        'bkqCA',
        'lIofx',
        'IGqff',
        'ls/Contact',
        'rZJYX',
        'VKGjF',
        '7ZNKdSW',
        'EyFbU',
        'model',
        '1634355qTWOIC',
        '20WdesCh',
        'ls/Message',
        'ERR_CREATI',
        'stNWo',
        'payload',
        'akDOq',
        'edited',
        'jrTOw',
        'editedMess',
        'tenantId',
        'ssage',
        'include',
        'JoXYY',
        'type',
        'riginal\x20nÃ£',
        '../../mode',
        'XZjHw',
        'QmVJY',
        'mRIxl',
        'default',
        'ls/Ticket',
        'ageId\x20do\x20d',
        'age',
        'where',
        'contactId',
        'pEoWC',
        'Mensagem\x20o',
        'tyQDG',
        '347555KKynJv',
        'dmyVL',
        'value',
        'WPfBP',
        'yBcxR',
        'KFScp',
        'hxGfs',
        'NG_MESSAGE',
        'tAJTM',
        'protocolMe',
        'ticket',
        '6702704oEdmUk',
        'trair\x20mess',
        'zKzSW',
        'dataJson',
        '146344BJnVPn',
        'fault',
        'ers/socket',
        'Emit',
        'create',
        'o\x20encontra',
        'fromMe',
        'chat:updat',
        'AGJHK',
        'erty',
        'JUzIa',
        'rTuPJ',
        'defineProp',
        'lpnba',
        'Erro\x20ao\x20ex',
        'quotedMsg',
        '132fVSMmv',
        'body',
        'iyJtg',
        'KoUCF',
        '73398RToJjL',
        '10289774yqnIVp',
        'fuKLt',
        '../../help',
        'mediaType',
        'wzlPa',
        'key',
        'update',
        'tBYgr',
        '__importDe',
        'aCmdQ',
        'zWjbo',
        'chat:creat',
        'ataJson',
        'WNSjH',
        '__esModule',
        'message',
        'messageId',
        'parse',
        'findOne',
        'pbIAG',
        '474irUFET'
    ];
    a = function () {
        return ab;
    };
    return a();
}
var __importDefault = this && this[a4(0xe1) + a5(0xc5)] || function (c) {
    const a6 = a5;
    return c && c[a6(0xe7)] ? c : { 'default': c };
};
const o = {};
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x278 + -0x2443 + -0x2 * -0x13a5);
        let h = e[f];
        return h;
    }, b(c, d);
}
o[a5(0xb7)] = !![], Object[a4(0xd0) + a4(0xcd)](exports, a5(0xe7), o);
const Message_1 = __importDefault(require(a4(0xa8) + a5(0x9a))), Ticket_1 = __importDefault(require(a5(0xa8) + a4(0xad))), socketEmit_1 = __importDefault(require(a4(0xdb) + a5(0xc6) + a4(0xc7))), Contact_1 = __importDefault(require(a4(0xa8) + a5(0x92)));
function extractMessageId(d) {
    const a7 = a4, a8 = a5, e = {};
    e[a7(0x93)] = a8(0xbf), e[a7(0xf1)] = a7(0xf0), e[a7(0x90)] = a8(0xd3), e[a8(0xe3)] = a7(0xd2) + a7(0xc1) + a8(0xae) + a8(0xe5), e[a7(0xda)] = function (g, h) {
        return g !== h;
    }, e[a7(0xa5)] = a8(0xee), e[a8(0xf2)] = a7(0xb4);
    const f = e;
    try {
        if (f[a8(0xda)](f[a8(0xa5)], f[a8(0xa5)])) {
            const h = {};
            h[a8(0xa2)] = i;
            const i = {};
            i[a8(0x97)] = h[a7(0xac)], i['as'] = f[a8(0x93)], i[a7(0xb0)] = h, i[a7(0xa4)] = [f[a7(0xf1)]];
            const j = {};
            j[a8(0x97)] = j[a8(0xac)], j['as'] = f[a8(0x90)], j[a8(0xa4)] = [f[a8(0xf1)]], g = [
                i,
                j
            ];
        } else {
            const h = JSON[a8(0xea)](d);
            return h[a8(0xe8)][a7(0xa1) + a8(0xaf)][a8(0xe8)][a8(0xbe) + a7(0xa3)][a8(0xde)]['id'];
        }
    } catch (i) {
        if (f[a7(0xda)](f[a8(0xf2)], f[a7(0xf2)]))
            throw new d(f[a8(0xe3)]);
        else
            throw new Error(f[a7(0xe3)]);
    }
}
const CreateMessageService = async ({
    messageData: v,
    tenantId: w
}) => {
    const a9 = a4, aa = a4, x = {
            'wzlPa': a9(0xd2) + aa(0xc1) + aa(0xae) + aa(0xe5),
            'zKzSW': a9(0xbf),
            'bkqCA': a9(0xf0),
            'rTuPJ': a9(0xd3),
            'hxGfs': aa(0xb3) + a9(0xa7) + aa(0xc9) + 'da',
            'AGJHK': a9(0x9b) + aa(0xbc),
            'dmyVL': function (G, H) {
                return G === H;
            },
            'EyFbU': a9(0xa1) + a9(0xaf),
            'WNSjH': function (G, H) {
                return G === H;
            },
            'iyJtg': aa(0xba),
            'XZjHw': function (G, H) {
                return G(H);
            },
            'JUzIa': a9(0xd1),
            'pEoWC': a9(0xbd),
            'aCmdQ': a9(0xcb) + 'e',
            'stNWo': function (G, H) {
                return G !== H;
            },
            'WPfBP': a9(0xb9),
            'pbIAG': a9(0x91),
            'EhxGO': function (G, H) {
                return G === H;
            },
            'KoUCF': a9(0xa0),
            'VKGjF': aa(0x9e),
            'tBYgr': a9(0xab),
            'QmVJY': aa(0xe4) + 'e'
        };
    if (x[aa(0xb6)](v[aa(0xdc)], x[aa(0x96)]) && v[a9(0xc3)]) {
        if (x[a9(0xe6)](x[aa(0xd6)], x[aa(0xd6)])) {
            const G = v[a9(0xc3)], H = x[aa(0xa9)](extractMessageId, G), I = {};
            I[a9(0xe9)] = H, I[aa(0xa2)] = w;
            const J = {};
            J[aa(0xb0)] = I;
            const K = await Message_1[a9(0xac)][aa(0xeb)](J);
            if (K) {
                if (x[aa(0xe6)](x[aa(0xce)], x[aa(0xb2)]))
                    try {
                        const M = i[a9(0xea)](j);
                        return M[a9(0xe8)][aa(0xa1) + a9(0xaf)][a9(0xe8)][aa(0xbe) + aa(0xa3)][a9(0xde)]['id'];
                    } catch (N) {
                        throw new l(x[aa(0xdd)]);
                    }
                else {
                    const M = {};
                    M[a9(0x9f)] = v[aa(0xd5)], await K[a9(0xdf)](M);
                    const N = {};
                    return N[a9(0xa2)] = w, N[a9(0xa6)] = x[aa(0xe2)], N[a9(0x9d)] = K, (0x17c6 + 0x11 * 0x2 + -0x5 * 0x4c8, socketEmit_1[a9(0xac)])(N), K;
                }
            } else {
                if (x[aa(0x9c)](x[aa(0xb8)], x[a9(0xb8)])) {
                    const P = {};
                    P[aa(0xa2)] = T;
                    const Q = {};
                    Q[aa(0x97)] = S[a9(0xac)], Q['as'] = x[a9(0xc2)], Q[a9(0xb0)] = P, Q[aa(0xa4)] = [x[aa(0x8f)]];
                    const R = {};
                    R[a9(0x97)] = l[aa(0xac)], R['as'] = x[aa(0xcf)], R[aa(0xa4)] = [x[a9(0x8f)]];
                    const S = {};
                    S['id'] = n[a9(0xb1)];
                    const T = {};
                    T[a9(0x97)] = m[a9(0xac)], T['as'] = x[a9(0x8f)], T[a9(0xb0)] = S, R = [
                        Q,
                        R,
                        T
                    ];
                } else
                    throw new Error(x[a9(0xbb)]);
            }
        } else {
            const Q = {};
            return Q[a9(0xac)] = j, Q && z[aa(0xe7)] ? i : Q;
        }
    }
    const y = {};
    y[a9(0xe9)] = v[aa(0xe9)], y[a9(0xa2)] = w;
    const z = {};
    z[aa(0xb0)] = y;
    let A = await Message_1[a9(0xac)][aa(0xeb)](z);
    if (!A) {
        if (x[a9(0xb6)](x[a9(0xec)], x[a9(0xec)])) {
            const Q = { ...v };
            Q[a9(0xa2)] = w, A = await Message_1[a9(0xac)][a9(0xc8)](Q);
        } else {
            const S = e[a9(0xea)](f);
            return S[aa(0xe8)][a9(0xa1) + a9(0xaf)][aa(0xe8)][a9(0xbe) + aa(0xa3)][aa(0xde)]['id'];
        }
    } else {
        if (x[aa(0xf3)](x[aa(0xd7)], x[a9(0xd7)]))
            await A[a9(0xdf)](v);
        else
            throw new d(x[aa(0xbb)]);
    }
    let B;
    if (!v[a9(0xca)]) {
        if (x[aa(0xe6)](x[a9(0x94)], x[a9(0xe0)]))
            throw new d(x[a9(0xcc)]);
        else {
            const U = {};
            U[aa(0xa2)] = w;
            const V = {};
            V[aa(0x97)] = Ticket_1[aa(0xac)], V['as'] = x[aa(0xc2)], V[a9(0xb0)] = U, V[a9(0xa4)] = [x[aa(0x8f)]];
            const W = {};
            W[a9(0x97)] = Message_1[a9(0xac)], W['as'] = x[a9(0xcf)], W[a9(0xa4)] = [x[a9(0x8f)]];
            const X = {};
            X['id'] = v[aa(0xb1)];
            const Y = {};
            Y[a9(0x97)] = Contact_1[aa(0xac)], Y['as'] = x[aa(0x8f)], Y[a9(0xb0)] = X, B = [
                V,
                W,
                Y
            ];
        }
    } else {
        const Z = {};
        Z[aa(0xa2)] = w;
        const a0 = {};
        a0[aa(0x97)] = Ticket_1[aa(0xac)], a0['as'] = x[aa(0xc2)], a0[aa(0xb0)] = Z, a0[a9(0xa4)] = [x[aa(0x8f)]];
        const a1 = {};
        a1[aa(0x97)] = Message_1[aa(0xac)], a1['as'] = x[a9(0xcf)], a1[a9(0xa4)] = [x[a9(0x8f)]], B = [
            a0,
            a1
        ];
    }
    const C = {};
    C[aa(0xe9)] = v[aa(0xe9)], C[aa(0xa2)] = w;
    const D = {};
    D[aa(0xb0)] = C, D[aa(0xa4)] = B;
    const E = await Message_1[aa(0xac)][a9(0xeb)](D);
    if (!E)
        throw new Error(x[aa(0xcc)]);
    const F = {};
    return F[a9(0xa2)] = w, F[aa(0xa6)] = x[a9(0xaa)], F[a9(0x9d)] = E, (0x1e * 0xa7 + 0xb * -0x1b2 + -0xec, socketEmit_1[aa(0xac)])(F), A;
};
exports[a5(0xac)] = CreateMessageService;