'use strict';
const a4 = b, a5 = b;
(function (c, d) {
    const a2 = b, a3 = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(a2(0xfd)) / (0x1f61 + -0x137a + -0xbe6) + parseInt(a2(0x13b)) / (-0x206e + 0x18ed + 0x783) + parseInt(a3(0x114)) / (0xdf1 + -0x7a0 + -0x64e) + parseInt(a3(0x105)) / (-0xe * -0x1cd + -0x33 * 0x14 + 0x712 * -0x3) * (parseInt(a3(0x113)) / (-0x129 * -0x14 + -0x1ef9 + -0x3e5 * -0x2)) + -parseInt(a2(0x102)) / (0x78d * -0x3 + -0x267b * 0x1 + 0x3d28) + parseInt(a2(0x10d)) / (-0x25a3 + 0x199c + 0xc0e) * (-parseInt(a2(0x13e)) / (0x8d4 + 0x1e71 + -0x273d)) + parseInt(a2(0x121)) / (0x2197 + -0x2692 + 0x504);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0xfb37 * 0xc + -0x172fe + -0x1 * -0x14f127));
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x3 * -0x527 + -0x1 * -0x240d + -0x1 * 0x328d);
        let h = e[f];
        return h;
    }, b(c, d);
}
var __importDefault = this && this[a4(0x116) + a5(0x134)] || function (c) {
    const a6 = a4;
    return c && c[a6(0x10e)] ? c : { 'default': c };
};
const o = {};
o[a4(0x11c)] = !![], Object[a4(0x112) + a4(0x12b)](exports, a5(0x10e), o);
function a() {
    const ab = [
        'SfjoC',
        'ls/Ticket',
        'ngtnY',
        'xwXwQ',
        'kRYzA',
        'Mensagem\x20o',
        'hKMaF',
        'findOne',
        'jpCIF',
        'dataJson',
        'IZnqG',
        'pgdXW',
        'default',
        'JfPcl',
        'messageId',
        '987324asFgbd',
        'type',
        'HUkuy',
        'include',
        'SmbcC',
        '5063016FkdHdV',
        'body',
        'otkHD',
        '12JxfzGA',
        'protocolMe',
        'edited',
        'ERR_CREATI',
        'editedMess',
        'glBBm',
        'ypuSb',
        'UEBUp',
        '823123GGcnqf',
        '__esModule',
        'key',
        'MBRMK',
        'QOHaF',
        'defineProp',
        '1157305XSSZAe',
        '441351RGSxRY',
        'chat:updat',
        '__importDe',
        'JifXL',
        'MVfFj',
        'ageId\x20do\x20d',
        'ENKbG',
        'AJNtB',
        'value',
        'diuzl',
        'ticket',
        'riginal\x20nÃ£',
        'MWIvb',
        '9035820ivWfFZ',
        'cujOK',
        'mYoOt',
        'ovPzf',
        'o\x20encontra',
        'ers/socket',
        'age',
        'uXnbf',
        'Wgcra',
        'trair\x20mess',
        'erty',
        'update',
        'NG_MESSAGE',
        'ylpYm',
        'Emit',
        'bZMoR',
        'where',
        'contact',
        'CFvNk',
        'fault',
        'YIzjX',
        'Erro\x20ao\x20ex',
        'VwnSb',
        'wopLW',
        'quotedMsg',
        'dItZY',
        '1453214SaOcSm',
        'aeHtX',
        'KpspT',
        '16cwtCBn',
        'ataJson',
        'wNzxy',
        'parse',
        'message',
        'create',
        'czYSA',
        'pYxGr',
        'UYSre',
        'BkuNh',
        'model',
        'XAwJI',
        'mediaType',
        'tenantId',
        '../../mode',
        'fromMe',
        'QbPKk',
        'chat:creat',
        'oarsU',
        'contactId',
        'ls/Message',
        'ssage',
        'VvcmD',
        'aZIPN',
        'ls/Contact',
        'payload',
        'MYWwO',
        '../../help'
    ];
    a = function () {
        return ab;
    };
    return a();
}
const Message_1 = __importDefault(require(a5(0x14c) + a5(0x152))), Ticket_1 = __importDefault(require(a5(0x14c) + a4(0x15b))), socketEmit_1 = __importDefault(require(a4(0x159) + a4(0x126) + a5(0x12f))), Contact_1 = __importDefault(require(a5(0x14c) + a4(0x156)));
function extractMessageId(d) {
    const a7 = a5, a8 = a5, e = {};
    e[a7(0x149)] = a8(0x11e), e[a7(0x137)] = a7(0x132), e[a8(0x15d)] = a7(0x139), e[a8(0x140)] = function (g, h) {
        return g === h;
    }, e[a7(0x135)] = a7(0x10c), e[a7(0x10b)] = a8(0xf6), e[a7(0x122)] = function (g, h) {
        return g !== h;
    }, e[a7(0x110)] = a8(0x158), e[a8(0x104)] = a7(0x10a), e[a8(0x146)] = a8(0x136) + a7(0x12a) + a8(0x119) + a7(0x13f);
    const f = e;
    try {
        if (f[a7(0x140)](f[a8(0x135)], f[a8(0x10b)])) {
            const h = {};
            h[a8(0x14b)] = i;
            const i = {};
            i[a7(0x148)] = h[a7(0xfa)], i['as'] = f[a7(0x149)], i[a8(0x131)] = h, i[a8(0x100)] = [f[a7(0x137)]];
            const j = {};
            j[a8(0x148)] = j[a7(0xfa)], j['as'] = f[a7(0x15d)], j[a7(0x100)] = [f[a7(0x137)]], g = [
                i,
                j
            ];
        } else {
            const h = JSON[a8(0x141)](d);
            return h[a7(0x142)][a8(0x109) + a7(0x127)][a8(0x142)][a7(0x106) + a8(0x153)][a8(0x10f)]['id'];
        }
    } catch (i) {
        if (f[a8(0x122)](f[a7(0x110)], f[a8(0x104)]))
            throw new Error(f[a8(0x146)]);
        else {
            const k = {};
            return k[a8(0xfa)] = j, g && h[a7(0x10e)] ? i : k;
        }
    }
}
const CreateMessageService = async ({
    messageData: v,
    tenantId: w
}) => {
    const a9 = a4, aa = a4, x = {
            'diuzl': a9(0x11e),
            'VvcmD': aa(0x132),
            'pYxGr': a9(0x139),
            'ovPzf': aa(0x108) + aa(0x12d),
            'JifXL': aa(0x136) + aa(0x12a) + a9(0x119) + aa(0x13f),
            'QOHaF': aa(0x15f) + aa(0x11f) + a9(0x125) + 'da',
            'MWIvb': function (G, H) {
                return G === H;
            },
            'KpspT': a9(0x109) + aa(0x127),
            'Wgcra': function (G, H) {
                return G !== H;
            },
            'uXnbf': aa(0x11a),
            'mYoOt': a9(0xff),
            'kRYzA': function (G, H) {
                return G(H);
            },
            'hKMaF': function (G, H) {
                return G === H;
            },
            'aeHtX': aa(0xf9),
            'wopLW': aa(0x115) + 'e',
            'aZIPN': function (G, H) {
                return G !== H;
            },
            'QbPKk': a9(0x130),
            'MVfFj': a9(0x11b),
            'IZnqG': aa(0x101),
            'dItZY': function (G, H) {
                return G === H;
            },
            'JfPcl': aa(0x144),
            'ngtnY': function (G, H) {
                return G !== H;
            },
            'ylpYm': a9(0x147),
            'CFvNk': aa(0x150),
            'SfjoC': aa(0x14f) + 'e'
        };
    if (x[a9(0x120)](v[aa(0x14a)], x[a9(0x13d)]) && v[aa(0xf7)]) {
        if (x[a9(0x129)](x[aa(0x128)], x[aa(0x123)])) {
            const G = v[a9(0xf7)], H = x[aa(0x15e)](extractMessageId, G), I = {};
            I[a9(0xfc)] = H, I[aa(0x14b)] = w;
            const J = {};
            J[a9(0x131)] = I;
            const K = await Message_1[aa(0xfa)][a9(0xf5)](J);
            if (K) {
                if (x[a9(0x160)](x[a9(0x13c)], x[aa(0x13c)])) {
                    const L = {};
                    L[a9(0x107)] = v[a9(0x103)], await K[aa(0x12c)](L);
                    const M = {};
                    return M[a9(0x14b)] = w, M[a9(0xfe)] = x[aa(0x138)], M[aa(0x157)] = K, (-0xcb0 * -0x2 + -0x2 * -0x61f + 0x2 * -0x12cf, socketEmit_1[aa(0xfa)])(M), K;
                } else {
                    const O = {};
                    O[aa(0x14b)] = S;
                    const P = {};
                    P[a9(0x148)] = R[a9(0xfa)], P['as'] = x[a9(0x11d)], P[aa(0x131)] = O, P[a9(0x100)] = [x[aa(0x154)]];
                    const Q = {};
                    Q[aa(0x148)] = l[a9(0xfa)], Q['as'] = x[a9(0x145)], Q[a9(0x100)] = [x[a9(0x154)]];
                    const R = {};
                    R['id'] = n[aa(0x151)];
                    const S = {};
                    S[a9(0x148)] = m[a9(0xfa)], S['as'] = x[aa(0x154)], S[a9(0x131)] = R, Q = [
                        P,
                        Q,
                        S
                    ];
                }
            } else {
                if (x[a9(0x155)](x[a9(0x14e)], x[aa(0x118)]))
                    throw new Error(x[a9(0x111)]);
                else
                    throw new J(x[a9(0x124)]);
            }
        } else
            throw new d(x[aa(0x117)]);
    }
    const y = {};
    y[a9(0xfc)] = v[aa(0xfc)], y[a9(0x14b)] = w;
    const z = {};
    z[a9(0x131)] = y;
    let A = await Message_1[aa(0xfa)][a9(0xf5)](z);
    if (!A) {
        if (x[aa(0x160)](x[aa(0xf8)], x[aa(0xf8)])) {
            const Q = { ...v };
            Q[a9(0x14b)] = w, A = await Message_1[aa(0xfa)][a9(0x143)](Q);
        } else {
            const S = e[aa(0x141)](f);
            return S[a9(0x142)][a9(0x109) + aa(0x127)][aa(0x142)][aa(0x106) + aa(0x153)][a9(0x10f)]['id'];
        }
    } else {
        if (x[a9(0x13a)](x[a9(0xfb)], x[aa(0xfb)]))
            await A[a9(0x12c)](v);
        else
            try {
                const T = i[aa(0x141)](j);
                return T[a9(0x142)][a9(0x109) + aa(0x127)][aa(0x142)][a9(0x106) + a9(0x153)][aa(0x10f)]['id'];
            } catch (U) {
                throw new l(x[a9(0x117)]);
            }
    }
    let B;
    if (!v[a9(0x14d)]) {
        if (x[aa(0x15c)](x[aa(0x12e)], x[a9(0x133)])) {
            const T = {};
            T[a9(0x14b)] = w;
            const U = {};
            U[a9(0x148)] = Ticket_1[aa(0xfa)], U['as'] = x[aa(0x11d)], U[a9(0x131)] = T, U[a9(0x100)] = [x[a9(0x154)]];
            const V = {};
            V[a9(0x148)] = Message_1[a9(0xfa)], V['as'] = x[aa(0x145)], V[aa(0x100)] = [x[aa(0x154)]];
            const W = {};
            W['id'] = v[a9(0x151)];
            const X = {};
            X[aa(0x148)] = Contact_1[aa(0xfa)], X['as'] = x[aa(0x154)], X[aa(0x131)] = W, B = [
                U,
                V,
                X
            ];
        } else
            throw new d(x[aa(0x111)]);
    } else {
        const Z = {};
        Z[a9(0x14b)] = w;
        const a0 = {};
        a0[a9(0x148)] = Ticket_1[a9(0xfa)], a0['as'] = x[a9(0x11d)], a0[a9(0x131)] = Z, a0[a9(0x100)] = [x[aa(0x154)]];
        const a1 = {};
        a1[a9(0x148)] = Message_1[a9(0xfa)], a1['as'] = x[aa(0x145)], a1[aa(0x100)] = [x[a9(0x154)]], B = [
            a0,
            a1
        ];
    }
    const C = {};
    C[aa(0xfc)] = v[aa(0xfc)], C[a9(0x14b)] = w;
    const D = {};
    D[a9(0x131)] = C, D[aa(0x100)] = B;
    const E = await Message_1[aa(0xfa)][a9(0xf5)](D);
    if (!E)
        throw new Error(x[a9(0x124)]);
    const F = {};
    return F[a9(0x14b)] = w, F[aa(0xfe)] = x[a9(0x15a)], F[a9(0x157)] = E, (-0x1 * 0x32b + 0x1a3 * -0xb + 0x152c, socketEmit_1[aa(0xfa)])(F), A;
};
exports[a5(0xfa)] = CreateMessageService;