'use strict';
const a4 = b, a5 = b;
(function (c, d) {
    const a2 = b, a3 = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(a2(0x7f)) / (0x2 * 0x685 + -0x478 + -0x1 * 0x891) * (parseInt(a3(0xcd)) / (-0x159e + -0x255a + 0x1 * 0x3afa)) + parseInt(a2(0xce)) / (0x8e7 * -0x1 + 0x18e9 + -0xd * 0x13b) + -parseInt(a2(0xa2)) / (-0x2355 + -0x427 * -0x1 + 0x1f32) + parseInt(a3(0x96)) / (0xf25 * 0x1 + 0x250 * -0x4 + -0x20 * 0x2f) + parseInt(a2(0xb0)) / (0x7f0 + -0x1ee5 + 0x16fb) * (parseInt(a3(0x76)) / (-0x265a + -0x110f + 0x2 * 0x1bb8)) + parseInt(a3(0x73)) / (0x1f68 + -0x15cf + 0x4f * -0x1f) * (parseInt(a3(0xab)) / (0xd36 + -0x51b * 0x1 + -0x812 * 0x1)) + parseInt(a3(0x95)) / (-0x1 * -0x2ef + 0xd47 * 0x1 + -0x5 * 0x33c) * (-parseInt(a3(0x7a)) / (-0x104f + -0xefc + -0x539 * -0x6));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0xcd * 0x1503 + 0x51064 + -0x1 * 0xb7212));
function a() {
    const ab = [
        'IVDMJ',
        'Emit',
        'trair\x20mess',
        'fromMe',
        'update',
        'findOne',
        'xlhvh',
        'GIADv',
        'ageId\x20do\x20d',
        'ls/Ticket',
        '6spuvHG',
        '947835bBIzXt',
        'SnHnc',
        'QjVEx',
        'YlOmc',
        'Erro\x20ao\x20ex',
        'Rdwed',
        'VWLCU',
        'quotedMsg',
        'age',
        'UbVgS',
        'tKlNC',
        'qDudk',
        'KQBIE',
        'where',
        'rLJOo',
        'iPVEX',
        '8dbPkwt',
        'NAQwU',
        'bDuKn',
        '7liikzR',
        'value',
        'erty',
        'EhtAl',
        '33dkhwkV',
        'ataJson',
        'messageId',
        'include',
        'mcsgR',
        '310087yVWQPO',
        'editedMess',
        'ls/Contact',
        'wvsTq',
        'YxcOb',
        'ePNJx',
        'ticket',
        'ls/Message',
        'contact',
        'ers/socket',
        'MjfKL',
        'mediaType',
        'gTdVT',
        'NVEsW',
        'gKhzW',
        '../../help',
        'aBmrT',
        '../../mode',
        'chat:creat',
        'vmLhC',
        'key',
        'kdedu',
        '1858210KqtFcg',
        '2833995bbkIBJ',
        'aBsLk',
        'model',
        'pmzMa',
        'o\x20encontra',
        'dataJson',
        'body',
        'edited',
        'ssage',
        'JTURM',
        'wMKxW',
        'ZKBnS',
        '3776204miGYsu',
        'defineProp',
        'tenantId',
        'aKtmN',
        'parse',
        'Mensagem\x20o',
        'ERR_CREATI',
        'NG_MESSAGE',
        'iGKGs',
        '11286423icqwvs',
        'DIwBs',
        'gaJDK',
        'default',
        'fault',
        '5876742HOTheI',
        'rxUDn',
        'Ezfyt',
        'azwQN',
        'ttgMz',
        'payload',
        'QQQzB',
        'message',
        'contactId',
        '__esModule',
        'mIhdW',
        'type',
        'create',
        'chat:updat',
        '__importDe',
        'EFLHs',
        'riginal\x20nÃ£',
        'bCQrd',
        'protocolMe'
    ];
    a = function () {
        return ab;
    };
    return a();
}
var __importDefault = this && this[a4(0xbe) + a5(0xaf)] || function (c) {
    const a6 = a5;
    return c && c[a6(0xb9)] ? c : { 'default': c };
};
const o = {};
o[a4(0x77)] = !![], Object[a5(0xa3) + a5(0x78)](exports, a5(0xb9), o);
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x854 + -0xa * 0xe + -0x75c);
        let h = e[f];
        return h;
    }, b(c, d);
}
const Message_1 = __importDefault(require(a4(0x90) + a4(0x86))), Ticket_1 = __importDefault(require(a4(0x90) + a5(0xcc))), socketEmit_1 = __importDefault(require(a5(0x8e) + a4(0x88) + a4(0xc4))), Contact_1 = __importDefault(require(a5(0x90) + a4(0x81)));
function extractMessageId(d) {
    const a7 = a5, a8 = a5, e = {};
    e[a7(0xb1)] = a8(0x85), e[a7(0x8b)] = a7(0x87), e[a7(0x8d)] = a8(0xd5), e[a7(0xc9)] = a8(0xd2) + a7(0xc5) + a7(0xcb) + a7(0x7b), e[a7(0x6d)] = function (g, h) {
        return g !== h;
    }, e[a7(0xd0)] = a8(0xaa), e[a8(0x71)] = function (g, h) {
        return g === h;
    }, e[a7(0xb3)] = a7(0x92);
    const f = e;
    try {
        if (f[a8(0x6d)](f[a8(0xd0)], f[a7(0xd0)])) {
            const i = {};
            i[a8(0xa4)] = k;
            const j = {};
            j[a7(0x98)] = j[a7(0xae)], j['as'] = f[a7(0xb1)], j[a7(0x70)] = i, j[a8(0x7d)] = [f[a7(0x8b)]];
            const k = {};
            k[a8(0x98)] = l[a8(0xae)], k['as'] = f[a7(0x8d)], k[a7(0x7d)] = [f[a7(0x8b)]];
            const l = {};
            l['id'] = n[a7(0xb8)];
            const m = {};
            m[a8(0x98)] = m[a7(0xae)], m['as'] = f[a7(0x8b)], m[a8(0x70)] = l, i = [
                j,
                k,
                m
            ];
        } else {
            const h = JSON[a8(0xa6)](d);
            return h[a7(0xb7)][a7(0x80) + a8(0xd6)][a7(0xb7)][a8(0xc2) + a7(0x9e)][a7(0x93)]['id'];
        }
    } catch (i) {
        if (f[a7(0x71)](f[a7(0xb3)], f[a8(0xb3)]))
            throw new Error(f[a7(0xc9)]);
        else
            throw new d(f[a8(0xc9)]);
    }
}
const CreateMessageService = async ({
    messageData: v,
    tenantId: w
}) => {
    const a9 = a5, aa = a4, x = {
            'wvsTq': a9(0xd2) + a9(0xc5) + a9(0xcb) + aa(0x7b),
            'iPVEX': aa(0x85),
            'Rdwed': a9(0x87),
            'NVEsW': aa(0xd5),
            'gaJDK': a9(0xa8) + a9(0xa9),
            'mIhdW': a9(0xa7) + a9(0xc0) + a9(0x9a) + 'da',
            'bDuKn': function (G, H) {
                return G === H;
            },
            'YxcOb': aa(0x80) + a9(0xd6),
            'bCQrd': function (G, H) {
                return G !== H;
            },
            'EhtAl': aa(0xbf),
            'aBsLk': a9(0x84),
            'UbVgS': function (G, H) {
                return G(H);
            },
            'aBmrT': a9(0x7e),
            'NAQwU': a9(0xca),
            'pmzMa': aa(0xbd) + 'e',
            'wMKxW': function (G, H) {
                return G !== H;
            },
            'Ezfyt': a9(0x94),
            'KQBIE': a9(0xa5),
            'QQQzB': a9(0x6e),
            'SnHnc': function (G, H) {
                return G !== H;
            },
            'ttgMz': a9(0xac),
            'YlOmc': function (G, H) {
                return G === H;
            },
            'MjfKL': aa(0xd4),
            'JTURM': aa(0xa1),
            'IVDMJ': a9(0x91) + 'e'
        };
    if (x[aa(0x75)](v[a9(0x8a)], x[a9(0x83)]) && v[a9(0x9b)]) {
        if (x[a9(0xc1)](x[a9(0x79)], x[a9(0x97)])) {
            const G = v[a9(0x9b)], H = x[aa(0x6c)](extractMessageId, G), I = {};
            I[aa(0x7c)] = H, I[a9(0xa4)] = w;
            const J = {};
            J[aa(0x70)] = I;
            const K = await Message_1[aa(0xae)][aa(0xc8)](J);
            if (K) {
                if (x[aa(0x75)](x[aa(0x8f)], x[aa(0x74)]))
                    try {
                        const M = i[a9(0xa6)](j);
                        return M[aa(0xb7)][aa(0x80) + a9(0xd6)][aa(0xb7)][a9(0xc2) + aa(0x9e)][a9(0x93)]['id'];
                    } catch (N) {
                        throw new l(x[aa(0x82)]);
                    }
                else {
                    const M = {};
                    M[aa(0x9d)] = v[a9(0x9c)], await K[a9(0xc7)](M);
                    const N = {};
                    return N[aa(0xa4)] = w, N[aa(0xbb)] = x[aa(0x99)], N[aa(0xb5)] = K, (-0x1 * -0x11d1 + 0x1 * -0x26dd + 0x150c, socketEmit_1[a9(0xae)])(N), K;
                }
            } else {
                if (x[aa(0xa0)](x[a9(0xb2)], x[aa(0x6f)]))
                    throw new Error(x[a9(0xba)]);
                else {
                    const P = e[a9(0xa6)](f);
                    return P[aa(0xb7)][aa(0x80) + aa(0xd6)][a9(0xb7)][a9(0xc2) + a9(0x9e)][a9(0x93)]['id'];
                }
            }
        } else {
            const Q = {};
            Q[a9(0xa4)] = i, Q = [
                {
                    'model': z[aa(0xae)],
                    'as': x[aa(0x72)],
                    'where': Q,
                    'include': [x[a9(0xd3)]]
                },
                {
                    'model': j[a9(0xae)],
                    'as': x[a9(0x8c)],
                    'include': [x[aa(0xd3)]]
                }
            ];
        }
    }
    const y = {};
    y[a9(0x7c)] = v[aa(0x7c)], y[a9(0xa4)] = w;
    const z = {};
    z[a9(0x70)] = y;
    let A = await Message_1[a9(0xae)][aa(0xc8)](z);
    if (!A) {
        if (x[aa(0xc1)](x[a9(0xb6)], x[a9(0xb6)]))
            throw new d(x[a9(0xad)]);
        else {
            const R = { ...v };
            R[aa(0xa4)] = w, A = await Message_1[a9(0xae)][aa(0xbc)](R);
        }
    } else {
        if (x[aa(0xcf)](x[aa(0xb4)], x[aa(0xb4)]))
            throw new d(x[a9(0xba)]);
        else
            await A[aa(0xc7)](v);
    }
    let B;
    if (!v[aa(0xc6)]) {
        if (x[a9(0xd1)](x[aa(0x89)], x[aa(0x9f)])) {
            const U = {};
            return U[a9(0xae)] = U, y && z[aa(0xb9)] ? i : U;
        } else {
            const U = {};
            U[a9(0xa4)] = w;
            const V = {};
            V[aa(0x98)] = Ticket_1[aa(0xae)], V['as'] = x[aa(0x72)], V[aa(0x70)] = U, V[a9(0x7d)] = [x[aa(0xd3)]];
            const W = {};
            W[aa(0x98)] = Message_1[a9(0xae)], W['as'] = x[aa(0x8c)], W[a9(0x7d)] = [x[aa(0xd3)]];
            const X = {};
            X['id'] = v[a9(0xb8)];
            const Y = {};
            Y[aa(0x98)] = Contact_1[aa(0xae)], Y['as'] = x[aa(0xd3)], Y[aa(0x70)] = X, B = [
                V,
                W,
                Y
            ];
        }
    } else {
        const Z = {};
        Z[a9(0xa4)] = w;
        const a0 = {};
        a0[a9(0x98)] = Ticket_1[aa(0xae)], a0['as'] = x[aa(0x72)], a0[a9(0x70)] = Z, a0[aa(0x7d)] = [x[aa(0xd3)]];
        const a1 = {};
        a1[aa(0x98)] = Message_1[a9(0xae)], a1['as'] = x[aa(0x8c)], a1[a9(0x7d)] = [x[aa(0xd3)]], B = [
            a0,
            a1
        ];
    }
    const C = {};
    C[a9(0x7c)] = v[a9(0x7c)], C[a9(0xa4)] = w;
    const D = {};
    D[a9(0x70)] = C, D[aa(0x7d)] = B;
    const E = await Message_1[a9(0xae)][aa(0xc8)](D);
    if (!E)
        throw new Error(x[a9(0xad)]);
    const F = {};
    return F[aa(0xa4)] = w, F[a9(0xbb)] = x[a9(0xc3)], F[a9(0xb5)] = E, (0xccf + -0x34f + 0x40 * -0x26, socketEmit_1[aa(0xae)])(F), A;
};
exports[a5(0xae)] = CreateMessageService;