'use strict';
const U = b, V = b;
(function (c, d) {
    const S = b, T = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(S(0x1b7)) / (-0xac8 + -0x107e + 0x1b47) * (parseInt(S(0x176)) / (-0xe54 + 0x1112 + -0x2bc)) + parseInt(T(0x1c0)) / (-0x1 * -0xdfb + -0x413 * -0x2 + -0x95 * 0x26) * (-parseInt(T(0x1ee)) / (-0x24d7 + 0xa6f * -0x1 + 0x17a5 * 0x2)) + parseInt(T(0x183)) / (-0x2 * 0x1139 + 0x2370 + 0x3 * -0x53) * (parseInt(S(0x193)) / (-0x7a * 0x3b + -0x24fe + 0x4122)) + parseInt(S(0x160)) / (-0x1 * -0x169d + 0x17 * 0x134 + -0x72e * 0x7) + parseInt(S(0x21d)) / (-0x4 * 0x8d2 + -0x1a30 + -0x520 * -0xc) + parseInt(T(0x1fc)) / (0x4 * -0x8ff + 0x77a + 0x1c8b * 0x1) + -parseInt(S(0x1a9)) / (0x25 * -0x8b + 0x1fd8 + -0xbb7);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x9 * -0x4817 + 0x2e973 + 0x4 * 0x1bdd6));
function a() {
    const ad = [
        'createWrit',
        'ztWcM',
        'eStream',
        'OJLbA',
        'DhRmY',
        'externalKe',
        'CreateMess',
        'scheduleDa',
        'JKUQX',
        '5UQQenh',
        'YUXOC',
        'body',
        'yrJlG',
        'OfIjz',
        'message',
        'ers/socket',
        'hookMessag',
        'Emit',
        '1791CWywcc',
        'Tiagx',
        'QOERI',
        'ack',
        'model',
        'filename',
        'status',
        'iCMbw',
        'update',
        'uuid',
        'finish',
        'LVIlu',
        'error',
        'responseTy',
        'vKYwo',
        'EQWkX',
        'iUkpu',
        'eStatus',
        'oXDkk',
        'Ruajo',
        'media',
        'value',
        'yQIOt',
        'extension',
        'all',
        'indexOf',
        'TXoSS',
        'rmdirSync',
        'axios',
        'tvbKq',
        'dXjgg',
        'default',
        'glJAM',
        'fiKBt',
        'mhFzf',
        'authToken',
        'wtzgD',
        'pipe',
        'wBSoH',
        'qcNtX',
        'QExgE',
        'fxmXL',
        'rGktm',
        'create',
        'logger',
        'number',
        '1796bZgXNg',
        'IwANY',
        'RQPDn',
        'public',
        '../../mode',
        '../../help',
        'push',
        'ocol',
        'fault',
        'lPUfB',
        'eMhPG',
        'idation',
        'anPyi',
        'KMeqa',
        '4803129xngLqG',
        'WncBc',
        'nTkIa',
        'url',
        'findByPk',
        'yBCpt',
        'cozBE',
        'pupa',
        'AWpIS',
        'YEwdT',
        'include',
        'quotedMsg',
        'cixKn',
        'contact',
        'ZrzuZ',
        'StUJv',
        'mediaUrl',
        'kmylE',
        'recursive',
        'qovkA',
        's/pupa',
        'originalna',
        'erty',
        'type',
        'ERR_CREATI',
        'where',
        'XjGjx',
        'WebHooksAP',
        'SXCpo',
        'WypYc',
        'ervice',
        'stream',
        'IgGkv',
        '3337888qUpXZS',
        'fryTo',
        'FckfK',
        'messageId',
        '../../util',
        'TMYAv',
        'payload',
        'pbuMi',
        'API',
        'CwNqL',
        'fromMe',
        'OMbkL',
        'Status',
        '4707745nMNmfD',
        'fyMHq',
        'contactId',
        'mediaType',
        'mimetype',
        'ZnBKb',
        'mfFQt',
        'whatsappId',
        '__importDe',
        'unknown',
        'Peogv',
        'content-ty',
        'map',
        'wyfbV',
        '_SYSTEM',
        'eyoAo',
        'GDwyI',
        'fZwoX',
        'data',
        'join',
        'VavCe',
        'IpWdE',
        '22690QwaiHc',
        'substr',
        'ageSystemS',
        'mGYbk',
        'ls/Message',
        'urlMessage',
        'LOAD',
        'ApiCq',
        'WGBTR',
        'yIJfV',
        'response',
        '../../libs',
        'LAjRu',
        '60zJwoDe',
        'apiConfig',
        'WjYiK',
        'sfySy',
        'tenantId',
        'name',
        'GaWZg',
        'split',
        'YjKQu',
        'gxbau',
        'chat',
        'osfym',
        'protocol',
        'cCyyA',
        'ERROR\x20DONW',
        'headers',
        '2784GWYYhP',
        'FLEKZ',
        'dFfmK',
        'NG_MESSAGE',
        'add',
        'chat:creat',
        'qWOPk',
        's/queueVal',
        '__esModule',
        'ensureProt',
        'ticket',
        '/Queue',
        'gTcQy',
        'lookup',
        'dPEWX',
        'BQyNv',
        'ls/Ticket',
        'getTime',
        'path',
        'get',
        's/logger',
        'sUBcP',
        '8229660evXQxc',
        'TbLoz',
        'mime',
        'OvoYC',
        'defineProp'
    ];
    a = function () {
        return ad;
    };
    return a();
}
var __importDefault = this && this[U(0x168) + U(0x1f6)] || function (c) {
    const W = U;
    return c && c[W(0x19b)] ? c : { 'default': c };
};
const J = {};
J[U(0x1d5)] = !![], Object[U(0x1ad) + V(0x212)](exports, U(0x19b), J);
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x230b * 0x1 + 0xc * 0x1a + 0xe * 0x283);
        let h = e[f];
        return h;
    }, b(c, d);
}
const fs_1 = __importDefault(require('fs')), path_1 = require(U(0x1a5)), axios_1 = __importDefault(require(V(0x1dc))), mime_1 = __importDefault(require(V(0x1ab))), uuid_1 = require(V(0x1c9)), logger_1 = require(V(0x157) + U(0x1a7)), Ticket_1 = __importDefault(require(U(0x1f2) + U(0x1a3))), Message_1 = __importDefault(require(U(0x1f2) + U(0x17a))), socketEmit_1 = __importDefault(require(U(0x1f3) + V(0x1bd) + V(0x1bf))), Queue_1 = __importDefault(require(U(0x181) + U(0x19e))), pupa_1 = require(V(0x157) + U(0x210)), queueValidation_1 = __importDefault(require(V(0x157) + V(0x19a) + U(0x1f9))), downloadMedia = async g => {
        const X = V, Y = U, h = {
                'OfIjz': function (i, j) {
                    return i !== j;
                },
                'WjYiK': X(0x1ea),
                'osfym': function (i, j) {
                    return i(j);
                },
                'ZrzuZ': function (i, j) {
                    return i === j;
                },
                'tvbKq': X(0x182),
                'iCMbw': X(0x1a8),
                'yQIOt': X(0x191) + X(0x17c),
                'RQPDn': function (i, j) {
                    return i(j);
                },
                'eMhPG': X(0x1b4) + X(0x178) + Y(0x21a),
                'JKUQX': Y(0x1be) + X(0x1d1),
                'nTkIa': X(0x217) + 'I',
                'fiKBt': function (i, j) {
                    return i === j;
                },
                'wtzgD': X(0x218),
                'anPyi': X(0x1ca),
                'wBSoH': Y(0x1cc),
                'vKYwo': function (i, j) {
                    return i(j);
                },
                'mfFQt': Y(0x214) + X(0x196) + X(0x16e),
                'TXoSS': Y(0x1ac),
                'dFfmK': Y(0x15a),
                'qcNtX': X(0x21b),
                'Peogv': Y(0x16b) + 'pe',
                'TMYAv': Y(0x1f1),
                'eyoAo': function (i, j) {
                    return i === j;
                },
                'LVIlu': X(0x208),
                'yBCpt': function (i, j) {
                    return i === j;
                },
                'ZnBKb': X(0x1de),
                'iUkpu': Y(0x1b1),
                'dPEWX': X(0x1aa)
            };
        try {
            if (h[X(0x1e1)](h[Y(0x1da)], h[X(0x195)])) {
                if (!g[X(0x1c5)]) {
                    const j = k[Y(0x164)][Y(0x18a)]('/')[0xbab + -0x1 * -0x80b + -0x3f1 * 0x5][X(0x18a)](';')[0x970 * 0x3 + 0xa55 * -0x3 + -0x2af * -0x1];
                    l[X(0x1c5)] = new m()[X(0x1a4)]() + '.' + j;
                }
            } else {
                const j = {};
                j[X(0x1cd) + 'pe'] = h[Y(0x1e7)];
                const k = await axios_1[X(0x1df)][Y(0x1a6)](g[X(0x20c)], j), l = k[X(0x192)][h[Y(0x16a)]], m = mime_1[X(0x1df)], n = m[X(0x1d7)](l), o = (-0xb * 0x2f2 + 0xa21 * 0x3 + 0x203, uuid_1['v4'])(), p = (0x15a + 0x1e4 + -0x1 * 0x33e, path_1[Y(0x173)])(__dirname, '..', '..', '..', h[Y(0x158)]), q = o + '.' + n, r = (0x9f * 0x21 + 0x3 * 0x151 + -0x1bf * 0xe, path_1[X(0x173)])(p, q), s = {};
                s[X(0x211) + 'me'] = q, s[Y(0x1c5)] = q, s[X(0x163)] = n;
                const t = s;
                return await new Promise((u, v) => {
                    const Z = Y, a0 = Y, w = {};
                    w[Z(0x15c)] = h[Z(0x1f8)], w[a0(0x1cf)] = h[a0(0x1b6)], w[a0(0x216)] = h[a0(0x1fe)];
                    const x = w;
                    h[Z(0x1e1)](h[Z(0x1e4)], h[a0(0x1e4)]) ? k[a0(0x172)][Z(0x1e5)](fs_1[a0(0x1df)][a0(0x1ae) + a0(0x1b0)](r))['on'](h[a0(0x1fa)], async () => {
                        const a1 = a0, a2 = Z;
                        h[a1(0x1bb)](h[a1(0x185)], h[a1(0x185)]) ? w[a2(0x1ec)][a1(0x1cc)](x[a2(0x15c)], f) : h[a1(0x18e)](u, t);
                    })['on'](h[a0(0x1e6)], y => {
                        const a3 = a0, a4 = Z;
                        if (h[a3(0x20a)](h[a4(0x1dd)], h[a4(0x1c7)])) {
                            const A = {};
                            A[a3(0x1c3)] = -(0x2253 + 0x1e2a + -0x407c), A[a3(0x1b9)] = k[a4(0x1b9)], A[a3(0x220)] = '', A[a3(0x1ed)] = l[a3(0x1ed)], A[a4(0x1b3) + 'y'] = m[a4(0x1b3) + 'y'], A[a4(0x1cc)] = n[a3(0x1bc)], A[a4(0x1e3)] = o[a3(0x184)][a3(0x1e3)], A[a3(0x213)] = x[a4(0x1cf)];
                            const B = A;
                            if (p?.[a3(0x184)]?.[a4(0x17b) + a4(0x15f)]) {
                                const C = {};
                                C[a3(0x1ff)] = t[a3(0x184)][a3(0x17b) + a4(0x15f)], C[a4(0x213)] = B[a3(0x213)], C[a4(0x159)] = B, s[a4(0x1df)][a3(0x197)](x[a4(0x216)], C);
                            }
                            return {};
                        } else {
                            console[a3(0x1cc)](h[a3(0x1d6)], y);
                            const A = {};
                            A[a3(0x20e)] = !![], fs_1[a4(0x1df)][a4(0x1db)](r, A), h[a4(0x1f0)](v, new Error(y));
                        }
                    }) : (f = [], g[a0(0x1f4)](h[a0(0x1d4)]));
                }), t;
            }
        } catch (u) {
            if (h[X(0x16f)](h[Y(0x1cb)], h[X(0x1cb)])) {
                if (h[Y(0x201)](u[X(0x180)][X(0x1c6)], 0x23e7 + -0x2 * -0xea3 + 0x1533 * -0x3)) {
                    if (h[X(0x16f)](h[Y(0x165)], h[Y(0x1d0)])) {
                        j[Y(0x1cc)](h[X(0x1d6)], k);
                        const w = {};
                        w[Y(0x20e)] = !![], l[X(0x1df)][Y(0x1db)](m, w), h[Y(0x1f0)](n, new o(p));
                    } else {
                        const w = {};
                        w[Y(0x1c3)] = -(-0x9 * 0x198 + 0x1 * -0x80e + -0x1 * -0x1667), w[X(0x1b9)] = g[X(0x1b9)], w[Y(0x220)] = '', w[Y(0x1ed)] = g[X(0x1ed)], w[Y(0x1b3) + 'y'] = g[X(0x1b3) + 'y'], w[Y(0x1cc)] = u[Y(0x1bc)], w[X(0x1e3)] = g[X(0x184)][X(0x1e3)], w[X(0x213)] = h[Y(0x1b6)];
                        const x = w;
                        if (g?.[X(0x184)]?.[Y(0x17b) + Y(0x15f)]) {
                            if (h[Y(0x1bb)](h[X(0x1a1)], h[Y(0x1a1)]))
                                m[X(0x172)][Y(0x1e5)](n[X(0x1df)][Y(0x1ae) + Y(0x1b0)](o))['on'](h[Y(0x1fa)], async () => {
                                    const a5 = X;
                                    h[a5(0x1ce)](w, x);
                                })['on'](h[X(0x1e6)], D => {
                                    const a6 = Y, a7 = X;
                                    w[a6(0x1cc)](h[a6(0x1d6)], D);
                                    const E = {};
                                    E[a6(0x20e)] = !![], x[a7(0x1df)][a7(0x1db)](y, E), h[a6(0x1ce)](z, new A(D));
                                });
                            else {
                                const z = {};
                                z[X(0x1ff)] = g[X(0x184)][Y(0x17b) + Y(0x15f)], z[Y(0x213)] = x[X(0x213)], z[Y(0x159)] = x, Queue_1[Y(0x1df)][X(0x197)](h[Y(0x1fe)], z);
                            }
                        }
                        return {};
                    }
                }
                throw new Error(u);
            } else
                throw new d(h[X(0x166)]);
        }
    }, CreateMessageSystemService = async ({
        msg: l,
        tenantId: m,
        medias: n,
        ticket: o,
        userId: p,
        scheduleDate: q,
        sendType: r,
        status: s,
        idFront: t
    }) => {
        const a8 = U, a9 = U, u = {
                'qWOPk': function (w, z) {
                    return w === z;
                },
                'GDwyI': a8(0x1be) + a9(0x1d1),
                'QOERI': a9(0x217) + 'I',
                'IpWdE': a9(0x214) + a8(0x196) + a8(0x16e),
                'WncBc': function (w, x) {
                    return w(x);
                },
                'OMbkL': function (w, z) {
                    return w !== z;
                },
                'StUJv': a9(0x21f),
                'ApiCq': a8(0x1ba),
                'Ruajo': function (w, z) {
                    return w !== z;
                },
                'QExgE': a8(0x190),
                'IwANY': a9(0x1fb),
                'lPUfB': function (w, z) {
                    return w !== z;
                },
                'WGBTR': a9(0x171),
                'YEwdT': a9(0x1c1),
                'YjKQu': a9(0x161),
                'DhRmY': a9(0x19d),
                'gxbau': a9(0x209),
                'wyfbV': a9(0x207),
                'oXDkk': a9(0x1e2),
                'GaWZg': a9(0x198) + 'e',
                'BQyNv': a9(0x19f),
                'fxmXL': function (w, z) {
                    return w === z;
                },
                'VavCe': a8(0x15b),
                'sfySy': a9(0x18d),
                'mGYbk': function (w, z) {
                    return w !== z;
                },
                'WypYc': a8(0x20f),
                'fryTo': a8(0x202),
                'IgGkv': function (w, x) {
                    return w(x);
                },
                'kmylE': a8(0x1b8),
                'ztWcM': a8(0x169),
                'FLEKZ': a8(0x1b4) + a8(0x178) + a8(0x21a)
            }, v = {
                'ticketId': o['id'],
                'body': l[a9(0x1b9)],
                'contactId': l?.[a9(0x15d)] ? null : o[a8(0x162)],
                'fromMe': u[a8(0x1e9)](r, u[a9(0x174)]) ? !![] : l?.[a8(0x15d)],
                'read': !![],
                'mediaType': u[a8(0x186)],
                'mediaUrl': undefined,
                'timestamp': new Date()[a8(0x1a4)](),
                'quotedMsgId': l?.[a8(0x207)]?.['id'],
                'userId': p,
                'scheduleDate': q,
                'sendType': r,
                'status': s,
                'tenantId': m,
                'idFront': t
            };
        try {
            const w = await o[a8(0x19c) + a9(0x1f5)](), x = {};
            x[a8(0x18f)] = w, x[a8(0x188)] = o[a9(0x209)][a9(0x188)], v[a8(0x1b9)] = (0x2666 + -0xab * -0x2d + 0x1 * -0x4475, pupa_1[a9(0x203)])(l[a9(0x1b9)] || '', x);
            if (u[a8(0x1e9)](r, u[a9(0x174)]) && l[a9(0x20c)]) {
                if (u[a8(0x179)](u[a8(0x219)], u[a8(0x21e)])) {
                    n = [];
                    const y = await u[a8(0x21c)](downloadMedia, l);
                    n[a8(0x1f4)](y);
                } else {
                    if (u[a8(0x199)](n[a8(0x180)][a9(0x1c6)], 0xcf7 * -0x2 + -0x143 * -0x1d + -0x915)) {
                        const A = {};
                        A[a9(0x1c3)] = -(0x1 * 0x1b6b + -0x1844 + -0x326), A[a8(0x1b9)] = y[a9(0x1b9)], A[a8(0x220)] = '', A[a9(0x1ed)] = z[a9(0x1ed)], A[a8(0x1b3) + 'y'] = A[a8(0x1b3) + 'y'], A[a8(0x1cc)] = B[a9(0x1bc)], A[a8(0x1e3)] = C[a9(0x184)][a9(0x1e3)], A[a8(0x213)] = u[a8(0x170)];
                        const B = A;
                        if (D?.[a9(0x184)]?.[a9(0x17b) + a8(0x15f)]) {
                            const C = {};
                            C[a9(0x1ff)] = H[a8(0x184)][a9(0x17b) + a9(0x15f)], C[a8(0x213)] = B[a8(0x213)], C[a8(0x159)] = B, G[a8(0x1df)][a9(0x197)](u[a9(0x1c2)], C);
                        }
                        return {};
                    }
                    throw new w(x);
                }
            }
            if (u[a9(0x199)](r, u[a8(0x174)]) && !l[a8(0x20c)] && l[a9(0x1d4)]) {
                if (u[a9(0x199)](u[a9(0x20d)], u[a8(0x20d)]))
                    n = [], n[a8(0x1f4)](l[a9(0x1d4)]);
                else
                    throw new d(u[a8(0x175)]);
            }
            if (n)
                await Promise[a8(0x1d8)](n[a9(0x16c)](async B => {
                    const ab = a8, ac = a8, C = {
                            'glJAM': function (D, E) {
                                const aa = b;
                                return u[aa(0x1fd)](D, E);
                            },
                            'yIJfV': u[ab(0x1c2)],
                            'AWpIS': u[ab(0x175)]
                        };
                    if (u[ac(0x15e)](u[ab(0x20b)], u[ac(0x17d)])) {
                        try {
                            if (u[ac(0x1d3)](u[ab(0x1e8)], u[ac(0x1ef)])) {
                                if (!B[ab(0x1c5)]) {
                                    if (u[ab(0x1f7)](u[ab(0x17e)], u[ab(0x205)])) {
                                        const K = B[ab(0x164)][ab(0x18a)]('/')[-0x166c + 0x1334 + -0x21 * -0x19][ab(0x18a)](';')[-0x2db + 0x1e * 0x56 + -0x2b * 0x2b];
                                        B[ab(0x1c5)] = new Date()[ac(0x1a4)]() + '.' + K;
                                    } else {
                                        const M = {};
                                        return M[ac(0x1df)] = j, g && h[ab(0x19b)] ? i : M;
                                    }
                                }
                            } else {
                                const N = I[ac(0x164)][ab(0x18a)]('/')[0xd * 0x11c + 0x5 * -0x5f1 + 0x2 * 0x7a5][ac(0x18a)](';')[-0x7d6 + -0x2f1 * 0x5 + 0x168b];
                                g[ac(0x1c5)] = new h()[ac(0x1a4)]() + '.' + N;
                            }
                        } catch (N) {
                            u[ab(0x199)](u[ab(0x18b)], u[ac(0x18b)]) ? logger_1[ac(0x1ec)][ac(0x1cc)](N) : G[ab(0x1ec)][ac(0x1cc)](I);
                        }
                        const D = {
                                ...v,
                                'body': '',
                                'mediaUrl': B[ab(0x1c5)],
                                'mediaType': B[ac(0x163)] || B[ab(0x164)][ac(0x177)](-0xf45 + -0x7 * -0x1f2 + 0x1a7, B[ab(0x164)][ab(0x1d9)]('/'))
                            }, E = await Message_1[ab(0x1df)][ac(0x1eb)](D), F = {};
                        F[ab(0x187)] = m;
                        const G = {};
                        G[ab(0x1c4)] = Ticket_1[ac(0x1df)], G['as'] = u[ab(0x1b2)], G[ab(0x215)] = F, G[ab(0x206)] = [u[ac(0x18c)]];
                        const H = await Message_1[ac(0x1df)][ac(0x200)](E['id'], {
                            'include': [
                                G,
                                {
                                    'model': Message_1[ac(0x1df)],
                                    'as': u[ab(0x16d)],
                                    'include': [u[ab(0x18c)]]
                                }
                            ]
                        });
                        if (!H) {
                            if (u[ac(0x15e)](u[ab(0x1d2)], u[ab(0x1d2)]))
                                C[ab(0x1e0)](G, I);
                            else
                                throw new Error(u[ab(0x175)]);
                        }
                        await o[ab(0x1c8)]({
                            'lastMessage': H[ac(0x1b9)],
                            'lastMessageAt': new Date()[ac(0x1a4)]()
                        });
                        const I = {};
                        I[ac(0x187)] = m, I[ab(0x213)] = u[ac(0x189)], I[ab(0x159)] = H, (-0x1f60 + -0x1c9 * -0x12 + -0x1 * 0xc2, socketEmit_1[ac(0x1df)])(I);
                        if (!H[ab(0x1b5) + 'te']) {
                            if (u[ac(0x15e)](u[ac(0x1a2)], u[ac(0x1a2)])) {
                                const R = {};
                                R[ab(0x1ff)] = h[ac(0x184)][ac(0x17b) + ab(0x15f)], R[ac(0x213)] = i[ac(0x213)], R[ac(0x159)] = j, R[ac(0x1df)][ac(0x197)](C[ac(0x17f)], R);
                            } else
                                await (-0x1b0e + 0x1e07 * 0x1 + -0x2f9, queueValidation_1[ab(0x1df)])(o[ac(0x167)], m, [H]);
                        }
                        return H;
                    } else
                        throw new d(C[ac(0x204)]);
                }));
            else {
                if (l[a9(0x20c)]) {
                    const H = mime_1[a9(0x1df)][a9(0x1a0)](l[a9(0x20c)]), I = {
                            'originalname': l[a8(0x20c)],
                            'filename': l[a8(0x20c)],
                            'mediaType': H ? H[a9(0x18a)]('/')[0xce6 + 0x399 + -0x107f] : u[a8(0x1af)]
                        }, K = { ...v };
                    K[a8(0x20c)] = I[a9(0x1c5)], K[a9(0x163)] = I[a9(0x163)];
                    const L = K, M = await Message_1[a8(0x1df)][a8(0x1eb)](L), N = {};
                    N[a9(0x187)] = m;
                    const O = {};
                    O[a9(0x1c4)] = Ticket_1[a8(0x1df)], O['as'] = u[a8(0x1b2)], O[a8(0x215)] = N, O[a8(0x206)] = [u[a8(0x18c)]];
                    const P = await Message_1[a9(0x1df)][a8(0x200)](M['id'], {
                        'include': [
                            O,
                            {
                                'model': Message_1[a8(0x1df)],
                                'as': u[a9(0x16d)],
                                'include': [u[a8(0x18c)]]
                            }
                        ]
                    });
                    if (!P)
                        throw new Error(u[a8(0x175)]);
                    await o[a8(0x1c8)]({
                        'lastMessage': P[a8(0x1b9)],
                        'lastMessageAt': new Date()[a9(0x1a4)]()
                    });
                    const Q = {};
                    return Q[a9(0x187)] = m, Q[a8(0x213)] = u[a8(0x189)], Q[a8(0x159)] = P, (0x261b + 0x1 * -0x38e + 0x1d * -0x131, socketEmit_1[a8(0x1df)])(Q), !P[a9(0x1b5) + 'te'] && await (-0x8d + 0x1 * -0x1a7d + -0x1b0a * -0x1, queueValidation_1[a8(0x1df)])(o[a8(0x167)], m, [P]), P;
                }
                const B = { ...v };
                B[a8(0x163)] = u[a9(0x186)];
                const C = await Message_1[a9(0x1df)][a9(0x1eb)](B), D = {};
                D[a9(0x187)] = m;
                const E = {};
                E[a8(0x1c4)] = Ticket_1[a8(0x1df)], E['as'] = u[a8(0x1b2)], E[a8(0x215)] = D, E[a8(0x206)] = [u[a9(0x18c)]];
                const F = await Message_1[a9(0x1df)][a9(0x200)](C['id'], {
                    'include': [
                        E,
                        {
                            'model': Message_1[a9(0x1df)],
                            'as': u[a9(0x16d)],
                            'include': [u[a8(0x18c)]]
                        }
                    ]
                });
                if (!F)
                    throw new Error(u[a8(0x175)]);
                await o[a9(0x1c8)]({
                    'lastMessage': F[a8(0x1b9)],
                    'lastMessageAt': new Date()[a8(0x1a4)](),
                    'answered': !![]
                }), F[a8(0x19d)] = o;
                const G = {};
                return G[a9(0x187)] = m, G[a8(0x213)] = u[a8(0x189)], G[a9(0x159)] = F, (0x2658 + 0x1572 + -0x3bca, socketEmit_1[a8(0x1df)])(G), !F[a8(0x1b5) + 'te'] && await (-0x237d + -0x29 + 0x23a6, queueValidation_1[a8(0x1df)])(o[a9(0x167)], m, [F]), F;
            }
        } catch (R) {
            logger_1[a8(0x1ec)][a9(0x1cc)](u[a9(0x194)], R);
        }
    };
exports[U(0x1df)] = CreateMessageSystemService;