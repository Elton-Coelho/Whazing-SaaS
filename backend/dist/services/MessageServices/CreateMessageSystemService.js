'use strict';
const U = b, V = b;
function a() {
    const ag = [
        'xuyad',
        'HyqCb',
        'rmdirSync',
        'okSZP',
        'vAbSU',
        'externalKe',
        'name',
        'rwvdE',
        'OgRBp',
        'getTime',
        'push',
        'extension',
        'eStatus',
        'OCWCf',
        'defineProp',
        'ers/socket',
        'responseTy',
        'lookup',
        'eQqNj',
        'uujHD',
        's/logger',
        'UpgfF',
        'bJhnB',
        '../../help',
        '154472FZDPWJ',
        'Status',
        'split',
        'chat:creat',
        'etAfs',
        'error',
        'HzdGL',
        'response',
        'ticket',
        'recursive',
        '_SYSTEM',
        'ZJixe',
        'cIoHf',
        'API',
        '2771334eliwnq',
        'WGgOV',
        'UXgsb',
        'Emit',
        '../../util',
        'stream',
        'ocol',
        'update',
        'wYkiB',
        'messageId',
        'url',
        'idation',
        '__importDe',
        'xwjTW',
        'chat',
        'wfUMB',
        'diuAL',
        'nOdfN',
        'ievSP',
        'gQQxc',
        'pjVUK',
        '2252410TTSAfi',
        'headers',
        'value',
        'EkiNb',
        'ZgaBN',
        'UmfAn',
        'RCCmq',
        'Mimob',
        'oQTzf',
        'kjfmM',
        'WsaOl',
        's/pupa',
        'MiCaG',
        'NZbMr',
        'RrCsV',
        'YYzuM',
        'YFfPR',
        'mime',
        'ERR_CREATI',
        '__esModule',
        'inPPN',
        'createWrit',
        'mmDfk',
        'kacEG',
        'tenantId',
        'logger',
        'XTnHp',
        'OsMZI',
        'oxkAQ',
        'public',
        'cJVDz',
        '1VkdlzU',
        's/queueVal',
        'EfDpK',
        'hookMessag',
        'payload',
        'WebHooksAP',
        'include',
        'status',
        'join',
        'LOAD',
        'all',
        'mediaUrl',
        'pVMtr',
        'fault',
        'nrDfC',
        'csRDk',
        'media',
        'lztem',
        'dUDjD',
        'VOSLG',
        'gcolt',
        'contact',
        'path',
        '3589776Xfysfk',
        'eStream',
        'NFfUr',
        'ovhCl',
        'gDadl',
        'ugKnY',
        '75694Iychqb',
        'JNmaf',
        'Zysmz',
        'quotedMsg',
        '/Queue',
        'ThbFM',
        'findByPk',
        'scheduleDa',
        'KdIYQ',
        'map',
        'create',
        'FFJxf',
        'originalna',
        'ihfgO',
        'axios',
        'mimetype',
        'get',
        'ageSystemS',
        'authToken',
        'ZMuSo',
        'erty',
        'UokgD',
        'iSzSs',
        'apiConfig',
        'data',
        'KLRaI',
        'GBjvp',
        'NG_MESSAGE',
        '764460OmDmVY',
        'default',
        'fqRNG',
        'content-ty',
        'message',
        'whatsappId',
        'ls/Message',
        'indexOf',
        'ensureProt',
        'unknown',
        'model',
        'ervice',
        'yjeQo',
        'finish',
        '329xYbuUJ',
        'uuid',
        '../../libs',
        'pupa',
        'ERROR\x20DONW',
        'nXRls',
        'substr',
        'XBtxQ',
        'AmdUR',
        'pLvsG',
        'Tnysp',
        'ack',
        'urlMessage',
        'body',
        'add',
        '../../mode',
        'wKdMW',
        '10468uXrSBv',
        'filename',
        'qyRPy',
        'hSclR',
        'mediaType',
        'jRMcn',
        'zJmaa',
        'contactId',
        'protocol',
        'ZwDEX',
        'ZXnCK',
        'pipe',
        'ls/Ticket',
        'CreateMess',
        'URQJP',
        'where',
        'lhVLL',
        'GHhBV',
        'type',
        'fromMe',
        'number',
        'bxKzk',
        'KouuZ',
        'jHWUz',
        'HdRnq',
        'KOXBr',
        '1704YbYbEc',
        'OzlBq'
    ];
    a = function () {
        return ag;
    };
    return a();
}
(function (c, d) {
    const S = b, T = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(S(0x282)) / (-0x590 * -0x2 + 0x6ad * -0x1 + -0x472 * 0x1) * (-parseInt(T(0x29f)) / (0x3 * 0x57c + 0x4fd * 0x4 + -0x2466)) + -parseInt(T(0x226)) / (0x1389 + 0xdbb + -0x1 * 0x2141) * (-parseInt(T(0x20c)) / (-0x1d13 + 0x5e9 + 0x172e * 0x1)) + -parseInt(T(0x263)) / (-0x733 * 0x2 + 0x11 * 0x59 + -0x63 * -0x16) + -parseInt(T(0x299)) / (0x1 * 0xa39 + -0xc1d + 0xe * 0x23) + -parseInt(T(0x1fb)) / (-0x1798 + 0x667 + 0x1138) * (-parseInt(T(0x240)) / (0x18c7 + 0x727 + -0x1fe6)) + -parseInt(S(0x24e)) / (0x27b + 0x24bf + 0x1 * -0x2731) + -parseInt(T(0x1ed)) / (-0xdd9 + 0x1810 + -0xa2d);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x1baae * 0x5 + -0x355ca + 0x1a1096));
var __importDefault = this && this[U(0x25a) + V(0x28f)] || function (c) {
    const W = U;
    return c && c[W(0x276)] ? c : { 'default': c };
};
const J = {};
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0xd2b + 0x159f + 0x3b * -0x8f);
        let h = e[f];
        return h;
    }, b(c, d);
}
J[U(0x265)] = !![], Object[U(0x236) + U(0x1e5)](exports, U(0x276), J);
const fs_1 = __importDefault(require('fs')), path_1 = require(U(0x298)), axios_1 = __importDefault(require(V(0x1df))), mime_1 = __importDefault(require(U(0x274))), uuid_1 = require(V(0x1fc)), logger_1 = require(V(0x252) + V(0x23c)), Ticket_1 = __importDefault(require(V(0x20a) + V(0x218))), Message_1 = __importDefault(require(V(0x20a) + V(0x1f3))), socketEmit_1 = __importDefault(require(U(0x23f) + U(0x237) + V(0x251))), Queue_1 = __importDefault(require(V(0x1fd) + U(0x1d5))), pupa_1 = require(V(0x252) + V(0x26e)), queueValidation_1 = __importDefault(require(U(0x252) + V(0x283) + V(0x259))), downloadMedia = async g => {
        const X = U, Y = V, h = {
                'NFfUr': X(0x219) + Y(0x1e2) + X(0x1f8),
                'vAbSU': function (i, j) {
                    return i === j;
                },
                'KdIYQ': Y(0x22b),
                'nrDfC': X(0x1ff) + X(0x28b),
                'xuyad': function (i, j) {
                    return i(j);
                },
                'iSzSs': function (i, j) {
                    return i !== j;
                },
                'NZbMr': X(0x244),
                'bxKzk': Y(0x275) + Y(0x1ec) + X(0x24a),
                'ZgaBN': X(0x287) + 'I',
                'eQqNj': Y(0x20f),
                'wYkiB': Y(0x1e6),
                'HdRnq': Y(0x1fa),
                'GBjvp': Y(0x245),
                'ZJixe': function (i, j) {
                    return i === j;
                },
                'YFfPR': Y(0x285) + X(0x234),
                'AmdUR': Y(0x200),
                'Tnysp': X(0x295),
                'lhVLL': X(0x253),
                'cIoHf': Y(0x1f0) + 'pe',
                'csRDk': X(0x280),
                'lztem': X(0x22f),
                'mmDfk': function (i, j) {
                    return i === j;
                },
                'ovhCl': function (i, j) {
                    return i === j;
                },
                'XTnHp': X(0x1ea),
                'kjfmM': X(0x271),
                'URQJP': function (i, j) {
                    return i !== j;
                },
                'OgRBp': X(0x235),
                'FFJxf': Y(0x20e)
            };
        try {
            if (h[X(0x22c)](h[Y(0x203)], h[Y(0x205)]))
                e[X(0x27c)][X(0x245)](h[X(0x29b)], f);
            else {
                const j = {};
                j[X(0x238) + 'pe'] = h[X(0x21c)];
                const k = await axios_1[X(0x1ee)][Y(0x1e1)](g[X(0x28d)], j), l = k[Y(0x264)][h[Y(0x24c)]], m = mime_1[X(0x1ee)], n = m[Y(0x233)](l), o = (-0xfd4 + 0x24c0 + 0x1 * -0x14ec, uuid_1['v4'])(), p = (0x2485 + -0xa96 * 0x2 + -0xf59, path_1[Y(0x28a)])(__dirname, '..', '..', '..', h[Y(0x291)]), q = o + '.' + n, r = (0x2220 + -0x1 * 0xcca + -0x1556, path_1[Y(0x28a)])(p, q), s = {};
                s[Y(0x1dd) + 'me'] = q, s[Y(0x20d)] = q, s[Y(0x210)] = n;
                const t = s;
                return await new Promise((u, v) => {
                    const a1 = X, a2 = X, w = {
                            'ugKnY': function (x, y) {
                                const Z = b;
                                return h[Z(0x228)](x, y);
                            },
                            'ThbFM': function (z, A) {
                                const a0 = b;
                                return h[a0(0x1e7)](z, A);
                            },
                            'gDadl': h[a1(0x270)],
                            'Zysmz': h[a1(0x221)],
                            'JNmaf': h[a2(0x267)]
                        };
                    if (h[a1(0x1e7)](h[a2(0x23a)], h[a1(0x256)]))
                        k[a2(0x1e9)][a1(0x217)](fs_1[a1(0x1ee)][a2(0x278) + a1(0x29a)](r))['on'](h[a1(0x224)], async () => {
                            const a4 = a2, a5 = a2, x = {
                                    'GHhBV': function (y, z) {
                                        const a3 = b;
                                        return w[a3(0x29e)](y, z);
                                    }
                                };
                            w[a4(0x1d6)](w[a5(0x29d)], w[a4(0x29d)]) ? x[a5(0x21d)](e, f) : w[a5(0x29e)](u, t);
                        })['on'](h[a2(0x1eb)], x => {
                            const a6 = a1, a7 = a2;
                            if (h[a6(0x22c)](h[a7(0x1d9)], h[a7(0x1d9)])) {
                                console[a6(0x245)](h[a6(0x290)], x);
                                const y = {};
                                y[a6(0x249)] = !![], fs_1[a6(0x1ee)][a6(0x22a)](r, y), h[a6(0x228)](v, new Error(x));
                            } else
                                throw new s(w[a7(0x2a1)]);
                        });
                    else {
                        const y = {};
                        y[a2(0x258)] = h[a1(0x1e8)][a1(0x207) + a1(0x241)], y[a2(0x21e)] = i[a1(0x21e)], y[a2(0x286)] = j, g[a2(0x1ee)][a2(0x209)](w[a1(0x2a0)], y);
                    }
                }), t;
            }
        } catch (u) {
            if (h[X(0x1e7)](h[Y(0x293)], h[Y(0x293)])) {
                if (h[Y(0x24b)](n[X(0x247)][Y(0x289)], -0x1 * 0x107e + 0x2 * 0xe06 + -0x9fa)) {
                    const w = {};
                    w[Y(0x206)] = -(-0x191b * -0x1 + -0x12a * 0x17 + 0x1ac), w[Y(0x208)] = y[Y(0x208)], w[Y(0x257)] = '', w[X(0x220)] = z[X(0x220)], w[Y(0x22d) + 'y'] = A[Y(0x22d) + 'y'], w[X(0x245)] = B[Y(0x1f1)], w[X(0x1e3)] = C[Y(0x1e8)][Y(0x1e3)], w[X(0x21e)] = h[X(0x273)];
                    const x = w;
                    if (D?.[Y(0x1e8)]?.[Y(0x207) + X(0x241)]) {
                        const y = {};
                        y[X(0x258)] = H[Y(0x1e8)][X(0x207) + X(0x241)], y[X(0x21e)] = x[Y(0x21e)], y[X(0x286)] = x, G[X(0x1ee)][X(0x209)](h[X(0x267)], y);
                    }
                    return {};
                }
                throw new w(x);
            } else {
                if (h[X(0x279)](u[X(0x247)][Y(0x289)], 0x5f * 0xd + -0x2 * -0xc13 + -0x1b65)) {
                    if (h[X(0x29c)](h[Y(0x27d)], h[Y(0x26c)])) {
                        j[X(0x245)](h[X(0x290)], k);
                        const x = {};
                        x[X(0x249)] = !![], l[Y(0x1ee)][Y(0x22a)](m, x), h[X(0x228)](n, new o(p));
                    } else {
                        const x = {};
                        x[X(0x206)] = -(0x4f * 0x72 + 0x20d6 + 0x1 * -0x4403), x[Y(0x208)] = g[X(0x208)], x[Y(0x257)] = '', x[X(0x220)] = g[X(0x220)], x[X(0x22d) + 'y'] = g[Y(0x22d) + 'y'], x[Y(0x245)] = u[Y(0x1f1)], x[X(0x1e3)] = g[X(0x1e8)][X(0x1e3)], x[X(0x21e)] = h[X(0x273)];
                        const y = x;
                        if (g?.[X(0x1e8)]?.[X(0x207) + Y(0x241)]) {
                            if (h[X(0x21a)](h[X(0x230)], h[X(0x1dc)])) {
                                const z = {};
                                z[Y(0x258)] = g[X(0x1e8)][Y(0x207) + X(0x241)], z[Y(0x21e)] = y[Y(0x21e)], z[X(0x286)] = y, Queue_1[X(0x1ee)][Y(0x209)](h[X(0x267)], z);
                            } else
                                x[Y(0x27c)][Y(0x245)](f);
                        }
                        return {};
                    }
                }
                throw new Error(u);
            }
        }
    }, CreateMessageSystemService = async ({
        msg: l,
        tenantId: m,
        medias: n,
        ticket: o,
        userId: p,
        scheduleDate: q,
        sendType: r,
        status: s,
        idFront: t
    }) => {
        const a8 = U, a9 = V, u = {
                'KouuZ': a8(0x285) + a8(0x234),
                'zJmaa': a9(0x287) + 'I',
                'HzdGL': a8(0x275) + a9(0x1ec) + a9(0x24a),
                'MiCaG': function (w, x) {
                    return w(x);
                },
                'ihfgO': a8(0x1ff) + a8(0x28b),
                'nOdfN': a9(0x1fa),
                'oQTzf': a9(0x245),
                'bJhnB': function (w, z) {
                    return w === z;
                },
                'ZwDEX': a9(0x20b),
                'WGgOV': a9(0x25e),
                'Mimob': a8(0x27f),
                'pjVUK': function (w, z) {
                    return w !== z;
                },
                'gQQxc': a8(0x26d),
                'kacEG': function (w, z) {
                    return w === z;
                },
                'pVMtr': a8(0x294),
                'cJVDz': a8(0x248),
                'wfUMB': a8(0x297),
                'YYzuM': a9(0x2a2),
                'UpgfF': function (w, z) {
                    return w === z;
                },
                'xwjTW': a9(0x266),
                'inPPN': a8(0x243) + 'e',
                'pLvsG': a9(0x296),
                'UmfAn': function (w, z) {
                    return w === z;
                },
                'ZXnCK': a9(0x24d),
                'jHWUz': a8(0x25c),
                'HyqCb': function (w, z) {
                    return w === z;
                },
                'fqRNG': a9(0x211),
                'UXgsb': a9(0x23b),
                'OsMZI': a8(0x284),
                'XBtxQ': a8(0x1f6),
                'ZMuSo': a8(0x219) + a8(0x1e2) + a9(0x1f8)
            }, v = {
                'ticketId': o['id'],
                'body': l[a8(0x208)],
                'contactId': l?.[a9(0x21f)] ? null : o[a8(0x213)],
                'fromMe': u[a9(0x268)](r, u[a9(0x216)]) ? !![] : l?.[a9(0x21f)],
                'read': !![],
                'mediaType': u[a8(0x223)],
                'mediaUrl': undefined,
                'timestamp': new Date()[a8(0x231)](),
                'quotedMsgId': l?.[a9(0x2a2)]?.['id'],
                'userId': p,
                'scheduleDate': q,
                'sendType': r,
                'status': s,
                'tenantId': m,
                'idFront': t
            };
        try {
            const w = await o[a9(0x1f5) + a8(0x254)](), x = {};
            x[a9(0x214)] = w, x[a9(0x22e)] = o[a8(0x297)][a8(0x22e)], v[a9(0x208)] = (-0x101c * 0x1 + -0x181b + -0x1d * -0x163, pupa_1[a8(0x1fe)])(l[a9(0x208)] || '', x);
            if (u[a9(0x23e)](r, u[a8(0x216)]) && l[a8(0x28d)]) {
                if (u[a9(0x229)](u[a8(0x1ef)], u[a9(0x1ef)])) {
                    n = [];
                    const y = await u[a9(0x26f)](downloadMedia, l);
                    n[a9(0x232)](y);
                } else {
                    const A = {};
                    A[a8(0x206)] = -(0x73 * 0x29 + 0x5a7 * -0x1 + -0xcc3), A[a8(0x208)] = k[a9(0x208)], A[a9(0x257)] = '', A[a9(0x220)] = l[a8(0x220)], A[a9(0x22d) + 'y'] = m[a8(0x22d) + 'y'], A[a8(0x245)] = n[a9(0x1f1)], A[a9(0x1e3)] = o[a8(0x1e8)][a8(0x1e3)], A[a9(0x21e)] = u[a8(0x222)];
                    const B = A;
                    if (p?.[a8(0x1e8)]?.[a8(0x207) + a9(0x241)]) {
                        const C = {};
                        C[a9(0x258)] = t[a9(0x1e8)][a8(0x207) + a9(0x241)], C[a9(0x21e)] = B[a9(0x21e)], C[a8(0x286)] = B, s[a9(0x1ee)][a9(0x209)](u[a9(0x212)], C);
                    }
                    return {};
                }
            }
            if (u[a9(0x23d)](r, u[a8(0x216)]) && !l[a9(0x28d)] && l[a9(0x292)]) {
                if (u[a9(0x262)](u[a8(0x250)], u[a8(0x27e)]))
                    n = [], n[a8(0x232)](l[a8(0x292)]);
                else {
                    const B = f[a8(0x1e0)][a8(0x242)]('/')[-0x1d8c * -0x1 + -0x2444 + -0x6b9 * -0x1][a9(0x242)](';')[0xdae + -0x2 * 0x458 + -0x4fe];
                    g[a8(0x20d)] = new h()[a9(0x231)]() + '.' + B;
                }
            }
            if (n)
                await Promise[a8(0x28c)](n[a8(0x1da)](async B => {
                    const ab = a9, ac = a9, C = {
                            'ievSP': function (D, E) {
                                const aa = b;
                                return u[aa(0x26f)](D, E);
                            },
                            'OzlBq': u[ab(0x1de)],
                            'RCCmq': u[ab(0x25f)],
                            'KOXBr': u[ac(0x26b)],
                            'yjeQo': u[ac(0x246)]
                        };
                    if (u[ab(0x23e)](u[ab(0x215)], u[ac(0x24f)]))
                        f = [], g[ac(0x232)](h[ab(0x292)]);
                    else {
                        try {
                            if (u[ac(0x23e)](u[ac(0x26a)], u[ac(0x26a)])) {
                                if (!B[ab(0x20d)]) {
                                    if (u[ab(0x262)](u[ac(0x261)], u[ac(0x261)])) {
                                        if (!g[ac(0x20d)]) {
                                            const M = k[ab(0x1e0)][ac(0x242)]('/')[0x16c9 + 0x1ff3 + 0x1 * -0x36bb][ac(0x242)](';')[-0x1c97 + -0xda9 + -0x10 * -0x2a4];
                                            l[ab(0x20d)] = new m()[ac(0x231)]() + '.' + M;
                                        }
                                    } else {
                                        const M = B[ac(0x1e0)][ab(0x242)]('/')[0xff2 + 0x25 * 0x43 + -0x19a0][ac(0x242)](';')[-0x18b8 + 0x17c + -0x2 * -0xb9e];
                                        B[ac(0x20d)] = new Date()[ab(0x231)]() + '.' + M;
                                    }
                                }
                            } else
                                throw new G(u[ac(0x246)]);
                        } catch (O) {
                            u[ac(0x27a)](u[ac(0x28e)], u[ab(0x28e)]) ? logger_1[ab(0x27c)][ac(0x245)](O) : m[ab(0x1e9)][ac(0x217)](n[ab(0x1ee)][ac(0x278) + ab(0x29a)](o))['on'](C[ac(0x269)], async () => {
                                const ad = ab;
                                C[ad(0x260)](w, x);
                            })['on'](C[ac(0x225)], Q => {
                                const ae = ac, af = ab;
                                w[ae(0x245)](C[af(0x227)], Q);
                                const R = {};
                                R[ae(0x249)] = !![], x[ae(0x1ee)][af(0x22a)](y, R), C[af(0x260)](z, new A(Q));
                            });
                        }
                        const E = {
                                ...v,
                                'body': '\x20',
                                'mediaUrl': B[ac(0x20d)],
                                'mediaType': B[ab(0x210)] || B[ac(0x1e0)][ab(0x201)](-0x1 * 0x1888 + -0x21b1 + -0xb * -0x54b, B[ab(0x1e0)][ac(0x1f4)]('/'))
                            }, F = await Message_1[ac(0x1ee)][ab(0x1db)](E), G = {};
                        G[ac(0x27b)] = m;
                        const H = {};
                        H[ac(0x1f7)] = Ticket_1[ab(0x1ee)], H['as'] = u[ab(0x281)], H[ab(0x21b)] = G, H[ac(0x288)] = [u[ab(0x25d)]];
                        const I = await Message_1[ab(0x1ee)][ab(0x1d7)](F['id'], {
                            'include': [
                                H,
                                {
                                    'model': Message_1[ab(0x1ee)],
                                    'as': u[ab(0x272)],
                                    'include': [u[ab(0x25d)]]
                                }
                            ]
                        });
                        if (!I) {
                            if (u[ac(0x23d)](u[ac(0x25b)], u[ab(0x25b)]))
                                throw new Error(u[ac(0x246)]);
                            else {
                                const R = {};
                                return R[ab(0x1ee)] = j, g && h[ac(0x276)] ? i : R;
                            }
                        }
                        await o[ab(0x255)]({
                            'lastMessage': I[ac(0x208)],
                            'lastMessageAt': new Date()[ab(0x231)]()
                        });
                        const K = {};
                        K[ab(0x27b)] = m, K[ac(0x21e)] = u[ac(0x277)], K[ab(0x286)] = I, (-0x2200 + 0x15a2 + 0xc5e, socketEmit_1[ac(0x1ee)])(K);
                        if (!I[ab(0x1d8) + 'te']) {
                            if (u[ab(0x23d)](u[ab(0x204)], u[ac(0x204)]))
                                await (-0x1f8b + 0x1 * 0xb67 + -0xa12 * -0x2, queueValidation_1[ab(0x1ee)])(o[ac(0x1f2)], m, [I]);
                            else
                                throw new G(C[ab(0x1f9)]);
                        }
                        return I;
                    }
                }));
            else {
                if (l[a8(0x28d)]) {
                    const H = mime_1[a8(0x1ee)][a8(0x239)](l[a8(0x28d)]), I = {
                            'originalname': l[a9(0x28d)],
                            'filename': l[a8(0x28d)],
                            'mediaType': H ? H[a8(0x242)]('/')[0x15b * 0x10 + 0x188e + -0x171f * 0x2] : u[a8(0x202)]
                        }, K = { ...v };
                    K[a8(0x28d)] = I[a9(0x20d)], K[a8(0x210)] = I[a8(0x210)];
                    const L = K, M = await Message_1[a8(0x1ee)][a9(0x1db)](L), N = {};
                    N[a8(0x27b)] = m;
                    const O = {};
                    O[a8(0x1f7)] = Ticket_1[a8(0x1ee)], O['as'] = u[a9(0x281)], O[a8(0x21b)] = N, O[a8(0x288)] = [u[a9(0x25d)]];
                    const P = await Message_1[a8(0x1ee)][a8(0x1d7)](M['id'], {
                        'include': [
                            O,
                            {
                                'model': Message_1[a9(0x1ee)],
                                'as': u[a8(0x272)],
                                'include': [u[a9(0x25d)]]
                            }
                        ]
                    });
                    if (!P)
                        throw new Error(u[a9(0x246)]);
                    await o[a9(0x255)]({
                        'lastMessage': P[a9(0x208)],
                        'lastMessageAt': new Date()[a8(0x231)]()
                    });
                    const Q = {};
                    return Q[a8(0x27b)] = m, Q[a8(0x21e)] = u[a9(0x277)], Q[a9(0x286)] = P, (-0x4cf * 0x1 + -0x17c0 + -0x3 * -0x985, socketEmit_1[a8(0x1ee)])(Q), !P[a9(0x1d8) + 'te'] && await (-0x11b5 + 0xbc3 * 0x1 + 0x5f2, queueValidation_1[a8(0x1ee)])(o[a9(0x1f2)], m, [P]), P;
                }
                const B = { ...v };
                B[a9(0x210)] = u[a9(0x223)];
                const C = await Message_1[a8(0x1ee)][a9(0x1db)](B), D = {};
                D[a8(0x27b)] = m;
                const E = {};
                E[a8(0x1f7)] = Ticket_1[a9(0x1ee)], E['as'] = u[a8(0x281)], E[a8(0x21b)] = D, E[a8(0x288)] = [u[a8(0x25d)]];
                const F = await Message_1[a9(0x1ee)][a9(0x1d7)](C['id'], {
                    'include': [
                        E,
                        {
                            'model': Message_1[a9(0x1ee)],
                            'as': u[a8(0x272)],
                            'include': [u[a9(0x25d)]]
                        }
                    ]
                });
                if (!F)
                    throw new Error(u[a8(0x246)]);
                await o[a9(0x255)]({
                    'lastMessage': F[a8(0x208)],
                    'lastMessageAt': new Date()[a8(0x231)](),
                    'answered': !![]
                }), F[a8(0x248)] = o;
                const G = {};
                return G[a8(0x27b)] = m, G[a9(0x21e)] = u[a8(0x277)], G[a9(0x286)] = F, (0x2 * 0x1e8 + -0x1a66 + -0x1 * -0x1696, socketEmit_1[a8(0x1ee)])(G), !F[a9(0x1d8) + 'te'] && await (0x1654 + 0x916 + 0x1 * -0x1f6a, queueValidation_1[a8(0x1ee)])(o[a9(0x1f2)], m, [F]), F;
            }
        } catch (R) {
            logger_1[a8(0x27c)][a8(0x245)](u[a9(0x1e4)], R);
        }
    };
exports[U(0x1ee)] = CreateMessageSystemService;