'use strict';
const V = b, W = b;
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x4 * -0x8a3 + -0x1cd2 + -0x4ea);
        let h = e[f];
        return h;
    }, b(c, d);
}
(function (c, d) {
    const T = b, U = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(T(0xf8)) / (0x407 + -0xca + -0x33c * 0x1) + parseInt(T(0xfd)) / (0xd36 + 0x686 + -0x13ba) * (-parseInt(U(0x197)) / (0x2447 + -0x1801 + -0xc43)) + -parseInt(T(0xd6)) / (-0x1 * 0x1867 + -0x1396 + 0x2c01) * (-parseInt(U(0x15a)) / (0x2d7 + -0x247 * 0x2 + 0x1bc)) + -parseInt(U(0x162)) / (0x18 * 0x9f + 0x266 + -0x1148) * (parseInt(T(0x127)) / (0x2600 + -0x2443 + 0x92 * -0x3)) + -parseInt(U(0x119)) / (0xe77 + 0x65f + 0x2 * -0xa67) * (parseInt(T(0x19b)) / (-0x2 * 0x105 + -0x1c5b + 0x19a * 0x13)) + parseInt(T(0xfe)) / (0x1 * -0x1f4e + -0xa79 * 0x3 + -0x1 * -0x3ec3) * (parseInt(T(0x14b)) / (0x53b * 0x7 + 0x8e4 + 0xfd * -0x2e)) + parseInt(T(0x11a)) / (-0x1104 + 0x16af + -0x59f);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x1 * -0x69732 + 0x6a2b * 0x2 + -0x3f971));
function a() {
    const ag = [
        '10cklyrH',
        'hookMessag',
        'fViJN',
        'HNHZY',
        'SHaKN',
        'ERROR\x20DONW',
        'fromMe',
        'findByPk',
        'TIEOv',
        'vQXex',
        'include',
        'koVcn',
        'GRGkg',
        'odlXS',
        'EIczU',
        'NG_MESSAGE',
        'pupa',
        'zkepA',
        'message',
        '../../util',
        'slKnM',
        'fault',
        'number',
        'MKtVw',
        'protocol',
        'pipe',
        'mimetype',
        '632328aLpZZz',
        '6776952hDNzeN',
        'GgNeh',
        'cFQdo',
        'eStream',
        'headers',
        'rmdirSync',
        'create',
        'response',
        'pDdBD',
        'fFuIV',
        'axios',
        'all',
        'quotedMsg',
        '196HniHOz',
        'powft',
        'wuFdw',
        'ZDFIq',
        'FUplo',
        'url',
        'lzMmh',
        'add',
        'scheduleDa',
        'Emit',
        'ERR_CREATI',
        'fALzx',
        'BtHZS',
        'filename',
        'YZIMR',
        'keILt',
        'mediaType',
        'error',
        'media',
        'ls/Message',
        'EUQwL',
        's/pupa',
        'eCVOt',
        'qskpK',
        'RtOvf',
        'bLFks',
        'fIBEf',
        'UhTjH',
        'lookup',
        'psiHS',
        'xuoJw',
        'where',
        'IHbUd',
        'update',
        'path',
        'contact',
        '1845965Gbumkr',
        'responseTy',
        'QKjFF',
        'ls/Ticket',
        's/queueVal',
        'cKrLW',
        'ervice',
        'join',
        'qMjUw',
        'API',
        '__importDe',
        'ixUUo',
        'erty',
        'externalKe',
        'zOJGt',
        '76885CcyYIF',
        'pBHQI',
        'tenantId',
        'BnqRZ',
        'whatsappId',
        's/logger',
        'extension',
        'HLvMK',
        '61014vukRsO',
        'Flado',
        'iQDOe',
        'Gzccd',
        'CreateMess',
        'qyeUr',
        'CkSAx',
        'LOAD',
        'aSQPI',
        'kIQuI',
        'bEtSU',
        '__esModule',
        'chat',
        'ttdqf',
        '/Queue',
        'mediaUrl',
        'status',
        'mfWPk',
        'fyvgG',
        '_SYSTEM',
        'urlMessage',
        'uuid',
        'EZzNG',
        'get',
        'stream',
        'xthHA',
        'Cjuxb',
        'tNYsq',
        'recursive',
        '../../help',
        'WvufC',
        'idation',
        'Nthrb',
        'value',
        'eStatus',
        'VqhhK',
        'hajwV',
        'tzTek',
        'KnPWU',
        'EZoqz',
        'XiXuS',
        'name',
        'chat:creat',
        'content-ty',
        'unknown',
        'apiConfig',
        'szeoE',
        'push',
        'vyuIF',
        'map',
        'ticket',
        '../../mode',
        'ensureProt',
        '6JBzeRn',
        'mime',
        '../../libs',
        'sukkh',
        '18INPOmr',
        'logger',
        'ZWqmR',
        'cLPdF',
        'payload',
        'Status',
        'indexOf',
        'messageId',
        'ack',
        'contactId',
        '40fvMGyS',
        'KFGrT',
        'PYNrg',
        'finish',
        'substr',
        'ers/socket',
        'authToken',
        'originalna',
        'model',
        'WebHooksAP',
        'TIRMa',
        'ocol',
        'fZLke',
        'getTime',
        'public',
        'ageSystemS',
        'WiqES',
        'GbgTj',
        'body',
        'BmqfY',
        'kaPhD',
        'defineProp',
        'tBlHF',
        'FmTRA',
        'split',
        'nMEJj',
        'BuZTy',
        'data',
        'default',
        'Ysjkh',
        'WdDaA',
        'type',
        'LVjMv',
        'LSkrS',
        '40802YRllER',
        'JqyDj',
        'JFRlx',
        'createWrit',
        'VgSSG',
        '258504AcUPNG'
    ];
    a = function () {
        return ag;
    };
    return a();
}
var __importDefault = this && this[V(0x155) + V(0x113)] || function (c) {
    const X = V;
    return c && c[X(0x16d)] ? c : { 'default': c };
};
const J = {};
J[W(0x183)] = !![], Object[V(0xeb) + V(0x157)](exports, V(0x16d), J);
const fs_1 = __importDefault(require('fs')), path_1 = require(V(0x149)), axios_1 = __importDefault(require(W(0x124))), mime_1 = __importDefault(require(V(0x198))), uuid_1 = require(V(0x177)), logger_1 = require(W(0x111) + V(0x15f)), Ticket_1 = __importDefault(require(V(0x195) + V(0x14e))), Message_1 = __importDefault(require(V(0x195) + V(0x13a))), socketEmit_1 = __importDefault(require(V(0x17f) + V(0xdb) + V(0x130))), Queue_1 = __importDefault(require(W(0x199) + V(0x170))), pupa_1 = require(V(0x111) + V(0x13c)), queueValidation_1 = __importDefault(require(V(0x111) + V(0x14f) + W(0x181))), downloadMedia = async g => {
        const Y = W, Z = W, h = {
                'EUQwL': Y(0x166) + Y(0xe5) + Z(0x151),
                'KnPWU': Y(0xdf) + 'I',
                'TIEOv': Y(0xff) + Y(0x184),
                'aSQPI': function (i, j) {
                    return i !== j;
                },
                'PYNrg': Z(0xf6),
                'GbgTj': function (i, j) {
                    return i(j);
                },
                'UhTjH': function (i, j) {
                    return i !== j;
                },
                'fIBEf': Z(0x19e),
                'Flado': Y(0xd7),
                'GRGkg': Z(0x103) + Y(0x169),
                'HNHZY': function (i, j) {
                    return i(j);
                },
                'pDdBD': Y(0x12d),
                'mfWPk': Y(0xd9),
                'fZLke': Z(0x138),
                'Nthrb': function (i, j) {
                    return i === j;
                },
                'Ysjkh': function (i, j) {
                    return i !== j;
                },
                'tNYsq': Z(0x187),
                'GgNeh': Z(0x17a),
                'TIRMa': Z(0x18d) + 'pe',
                'FmTRA': Y(0xe4),
                'qMjUw': function (i, j) {
                    return i === j;
                },
                'powft': Z(0x164),
                'fFuIV': function (i, j) {
                    return i === j;
                },
                'zOJGt': function (i, j) {
                    return i === j;
                },
                'qskpK': Z(0x174),
                'fViJN': Y(0x18a),
                'FUplo': function (i, j) {
                    return i !== j;
                },
                'slKnM': Y(0xf9),
                'HLvMK': Y(0x16f)
            };
        try {
            if (h[Y(0xf3)](h[Y(0x17d)], h[Y(0x17d)]))
                e[Z(0x19c)][Z(0x138)](h[Z(0x13b)], f);
            else {
                const j = {};
                j[Z(0x14c) + 'pe'] = h[Z(0x11b)];
                const k = await axios_1[Y(0xf2)][Y(0x179)](g[Z(0x171)], j), l = k[Z(0x11e)][h[Y(0xe0)]], m = mime_1[Y(0xf2)], n = m[Z(0x160)](l), o = (0xd11 + 0x1666 + -0x2377 * 0x1, uuid_1['v4'])(), p = (0x1 * -0x269 + 0x15d * -0x13 + 0x1c50, path_1[Z(0x152)])(__dirname, '..', '..', '..', h[Y(0xed)]), q = o + '.' + n, r = (-0xa36 + 0x95 * -0x23 + 0x1e95, path_1[Y(0x152)])(p, q), s = {};
                s[Y(0xdd) + 'me'] = q, s[Y(0x134)] = q, s[Z(0x137)] = n;
                const t = s;
                return await new Promise((u, v) => {
                    const a0 = Y, a2 = Z, w = {
                            'EIczU': h[a0(0x10a)],
                            'kIQuI': function (x, y) {
                                const a1 = a0;
                                return h[a1(0xe7)](x, y);
                            }
                        };
                    if (h[a0(0x142)](h[a0(0x122)], h[a0(0x122)])) {
                        const y = {};
                        y[a0(0x12c)] = h[a0(0x18f)][a0(0x176) + a0(0xd1)], y[a0(0xf5)] = i[a0(0xf5)], y[a2(0xd0)] = j, g[a2(0xf2)][a0(0x12e)](h[a2(0x188)], y);
                    } else
                        k[a0(0xf1)][a2(0x117)](fs_1[a0(0xf2)][a0(0xfb) + a2(0x11d)](r))['on'](h[a0(0x173)], async () => {
                            const a3 = a2, a4 = a0, y = {};
                            y[a3(0xfc)] = h[a4(0x106)], y[a4(0xf7)] = h[a4(0x188)];
                            const z = y;
                            if (h[a4(0x16a)](h[a3(0xd8)], h[a4(0xd8)])) {
                                const B = {};
                                B[a3(0xd4)] = -(0x6 * 0x561 + 0x1923 + -0x3968), B[a4(0xe8)] = k[a3(0xe8)], B[a3(0xd3)] = '', B[a4(0x114)] = l[a3(0x114)], B[a3(0x158) + 'y'] = m[a4(0x158) + 'y'], B[a3(0x138)] = n[a3(0x110)], B[a3(0xdc)] = o[a3(0x18f)][a3(0xdc)], B[a3(0xf5)] = z[a4(0xfc)];
                                const C = B;
                                if (p?.[a4(0x18f)]?.[a4(0x176) + a4(0xd1)]) {
                                    const D = {};
                                    D[a3(0x12c)] = t[a4(0x18f)][a4(0x176) + a3(0xd1)], D[a4(0xf5)] = C[a3(0xf5)], D[a4(0xd0)] = C, s[a3(0xf2)][a4(0x12e)](z[a4(0xf7)], D);
                                }
                                return {};
                            } else
                                h[a3(0xe7)](u, t);
                        })['on'](h[a0(0xe2)], y => {
                            const a5 = a2, a6 = a0;
                            if (h[a5(0x142)](h[a6(0x141)], h[a5(0x163)])) {
                                console[a5(0x138)](h[a5(0x10a)], y);
                                const z = {};
                                z[a6(0x17e)] = !![], fs_1[a5(0xf2)][a5(0x11f)](r, z), h[a5(0x101)](v, new Error(y));
                            } else {
                                j[a6(0x138)](w[a6(0x10c)], k);
                                const B = {};
                                B[a5(0x17e)] = !![], l[a5(0xf2)][a6(0x11f)](m, B), w[a6(0x16b)](n, new o(p));
                            }
                        });
                }), t;
            }
        } catch (u) {
            if (h[Z(0x153)](h[Z(0x128)], h[Z(0x128)])) {
                if (h[Y(0x123)](u[Z(0x121)][Y(0x172)], 0x18d2 * -0x1 + -0x25b * -0x1 + 0x180b)) {
                    if (h[Y(0x159)](h[Y(0x13e)], h[Y(0x100)]))
                        f = [], g[Y(0x191)](h[Y(0x139)]);
                    else {
                        const w = {};
                        w[Y(0xd4)] = -(-0x2 * -0xe3c + -0x2495 * 0x1 + 0x81e), w[Y(0xe8)] = g[Z(0xe8)], w[Z(0xd3)] = '', w[Z(0x114)] = g[Z(0x114)], w[Z(0x158) + 'y'] = g[Z(0x158) + 'y'], w[Y(0x138)] = u[Y(0x110)], w[Y(0xdc)] = g[Z(0x18f)][Z(0xdc)], w[Y(0xf5)] = h[Y(0x106)];
                        const x = w;
                        if (g?.[Z(0x18f)]?.[Y(0x176) + Y(0xd1)]) {
                            if (h[Z(0x12b)](h[Z(0x112)], h[Z(0x161)])) {
                                const y = {};
                                y[Z(0x12c)] = g[Y(0x18f)][Z(0x176) + Y(0xd1)], y[Z(0xf5)] = x[Y(0xf5)], y[Z(0xd0)] = x, Queue_1[Y(0xf2)][Z(0x12e)](h[Z(0x188)], y);
                            } else {
                                if (h[Y(0x182)](n[Z(0x121)][Y(0x172)], -0x647 + -0x2 * 0x691 + 0x6ff * 0x3)) {
                                    const A = {};
                                    A[Y(0xd4)] = -(-0x1fc * -0xb + -0x67 * 0xb + -0x1166), A[Z(0xe8)] = y[Z(0xe8)], A[Y(0xd3)] = '', A[Y(0x114)] = z[Y(0x114)], A[Y(0x158) + 'y'] = A[Y(0x158) + 'y'], A[Y(0x138)] = B[Y(0x110)], A[Y(0xdc)] = C[Y(0x18f)][Z(0xdc)], A[Z(0xf5)] = h[Z(0x106)];
                                    const B = A;
                                    if (D?.[Y(0x18f)]?.[Z(0x176) + Y(0xd1)]) {
                                        const C = {};
                                        C[Z(0x12c)] = H[Y(0x18f)][Z(0x176) + Z(0xd1)], C[Y(0xf5)] = B[Y(0xf5)], C[Z(0xd0)] = B, G[Y(0xf2)][Y(0x12e)](h[Z(0x188)], C);
                                    }
                                    return {};
                                }
                                throw new w(x);
                            }
                        }
                        return {};
                    }
                }
                throw new Error(u);
            } else {
                const B = {};
                return B[Z(0xf2)] = j, B && h[Y(0x16d)] ? i : B;
            }
        }
    }, CreateMessageSystemService = async ({
        msg: l,
        tenantId: m,
        medias: n,
        ticket: o,
        userId: p,
        scheduleDate: q,
        sendType: r,
        status: s,
        idFront: t
    }) => {
        const a7 = V, a8 = V, u = {
                'vyuIF': a7(0x131) + a8(0x10d) + a7(0x175),
                'fALzx': function (w, x) {
                    return w(x);
                },
                'sukkh': a8(0x103) + a8(0x169),
                'RtOvf': a7(0xd9),
                'WiqES': a7(0x138),
                'psiHS': function (w, z) {
                    return w === z;
                },
                'VqhhK': a7(0x145),
                'bLFks': function (w, z) {
                    return w !== z;
                },
                'BuZTy': a7(0x14d),
                'Cjuxb': a7(0x129),
                'JFRlx': function (w, z) {
                    return w === z;
                },
                'WdDaA': a7(0x168),
                'hajwV': a8(0x115),
                'Gzccd': a7(0x194),
                'IHbUd': a7(0x14a),
                'bEtSU': a7(0x126),
                'tBlHF': function (w, z) {
                    return w === z;
                },
                'vQXex': a8(0x167),
                'pBHQI': a7(0x156),
                'keILt': a8(0x18c) + 'e',
                'koVcn': function (w, z) {
                    return w !== z;
                },
                'xthHA': a7(0x10b),
                'ZDFIq': a8(0x154),
                'YZIMR': a7(0x16e),
                'zkepA': function (w, z) {
                    return w === z;
                },
                'szeoE': a7(0x150),
                'kaPhD': function (w, z) {
                    return w === z;
                },
                'eCVOt': a8(0x102),
                'ZWqmR': a7(0x18e),
                'BnqRZ': a8(0x166) + a7(0xe5) + a7(0x151)
            }, v = {
                'ticketId': o['id'],
                'body': l[a7(0xe8)],
                'contactId': l?.[a7(0x104)] ? null : o[a8(0xd5)],
                'fromMe': u[a7(0x144)](r, u[a7(0x12a)]) ? !![] : l?.[a8(0x104)],
                'read': !![],
                'mediaType': u[a7(0x135)],
                'mediaUrl': undefined,
                'timestamp': new Date()[a7(0xe3)](),
                'quotedMsgId': l?.[a8(0x126)]?.['id'],
                'userId': p,
                'scheduleDate': q,
                'sendType': r,
                'status': s,
                'tenantId': m,
                'idFront': t
            };
        try {
            const w = await o[a7(0x196) + a8(0xe1)](), x = {};
            x[a8(0x116)] = w, x[a8(0x18b)] = o[a8(0x14a)][a7(0x18b)], v[a7(0xe8)] = (-0x153c + 0x1519 * -0x1 + 0x1 * 0x2a55, pupa_1[a7(0x10e)])(l[a7(0xe8)] || '', x);
            if (u[a8(0x10f)](r, u[a7(0x12a)]) && l[a8(0x171)]) {
                if (u[a7(0xec)](u[a8(0x190)], u[a8(0x190)])) {
                    n = [];
                    const y = await u[a8(0x132)](downloadMedia, l);
                    n[a8(0x191)](y);
                } else
                    throw new d(u[a8(0x192)]);
            }
            u[a8(0xea)](r, u[a7(0x12a)]) && !l[a8(0x171)] && l[a7(0x139)] && (u[a7(0x10f)](u[a8(0x13d)], u[a8(0x13d)]) ? (n = [], n[a8(0x191)](l[a7(0x139)])) : e[a7(0x19c)][a8(0x138)](f));
            if (n)
                await Promise[a8(0x125)](n[a7(0x193)](async B => {
                    const aa = a8, ab = a8, C = {
                            'cFQdo': function (D, E) {
                                const a9 = b;
                                return u[a9(0x132)](D, E);
                            },
                            'EZzNG': u[aa(0x19a)],
                            'EZoqz': u[ab(0x13f)],
                            'BmqfY': u[aa(0xe6)],
                            'nMEJj': u[aa(0x192)]
                        };
                    if (u[aa(0x144)](u[aa(0x185)], u[aa(0x185)])) {
                        try {
                            if (u[aa(0x140)](u[ab(0xf0)], u[ab(0x17c)])) {
                                if (!B[aa(0x134)]) {
                                    if (u[ab(0xfa)](u[ab(0xf4)], u[aa(0xf4)])) {
                                        const K = B[aa(0x118)][ab(0xee)]('/')[-0x2467 * -0x1 + -0x1722 + -0xd44][ab(0xee)](';')[0x2224 + -0x1cee + 0x29b * -0x2];
                                        B[aa(0x134)] = new Date()[aa(0xe3)]() + '.' + K;
                                    } else
                                        throw new F(u[aa(0x192)]);
                                }
                            } else {
                                if (!g[aa(0x134)]) {
                                    const N = k[aa(0x118)][ab(0xee)]('/')[0xa61 * -0x2 + -0x809 + 0x1ccc][aa(0xee)](';')[-0xc13 + -0x3e * 0x8b + 0x2dbd];
                                    l[aa(0x134)] = new m()[ab(0xe3)]() + '.' + N;
                                }
                            }
                        } catch (N) {
                            if (u[aa(0x140)](u[ab(0x186)], u[ab(0x186)])) {
                                const P = I[ab(0x118)][ab(0xee)]('/')[0x24b * 0x11 + -0x1ab1 + 0xb9 * -0x11][ab(0xee)](';')[0x551 * -0x3 + -0x13 * 0x107 + -0xa * -0x38c];
                                g[ab(0x134)] = new h()[ab(0xe3)]() + '.' + P;
                            } else
                                logger_1[ab(0x19c)][ab(0x138)](N);
                        }
                        const D = {
                                ...v,
                                'body': '',
                                'mediaUrl': B[ab(0x134)],
                                'mediaType': B[ab(0x137)] || B[aa(0x118)][aa(0xda)](0x1e9 + -0x1987 + 0x179e, B[aa(0x118)][ab(0xd2)]('/'))
                            }, E = await Message_1[aa(0xf2)][ab(0x120)](D), F = {};
                        F[aa(0x15c)] = m;
                        const G = {};
                        G[aa(0xde)] = Ticket_1[ab(0xf2)], G['as'] = u[aa(0x165)], G[aa(0x146)] = F, G[aa(0x108)] = [u[ab(0x147)]];
                        const H = await Message_1[aa(0xf2)][ab(0x105)](E['id'], {
                            'include': [
                                G,
                                {
                                    'model': Message_1[ab(0xf2)],
                                    'as': u[aa(0x16c)],
                                    'include': [u[aa(0x147)]]
                                }
                            ]
                        });
                        if (!H) {
                            if (u[ab(0xec)](u[ab(0x107)], u[aa(0x15b)])) {
                                const Q = {
                                    'WvufC': function (R, S) {
                                        const ac = ab;
                                        return C[ac(0x11c)](R, S);
                                    },
                                    'BtHZS': C[ab(0x178)]
                                };
                                m[ab(0xf1)][ab(0x117)](n[aa(0xf2)][ab(0xfb) + aa(0x11d)](o))['on'](C[aa(0x189)], async () => {
                                    const ad = ab;
                                    Q[ad(0x180)](w, x);
                                })['on'](C[aa(0xe9)], R => {
                                    const ae = ab, af = ab;
                                    w[ae(0x138)](Q[ae(0x133)], R);
                                    const S = {};
                                    S[ae(0x17e)] = !![], x[ae(0xf2)][af(0x11f)](y, S), Q[af(0x180)](z, new A(R));
                                });
                            } else
                                throw new Error(u[aa(0x192)]);
                        }
                        await o[aa(0x148)]({
                            'lastMessage': H[aa(0xe8)],
                            'lastMessageAt': new Date()[aa(0xe3)]()
                        });
                        const I = {};
                        I[aa(0x15c)] = m, I[aa(0xf5)] = u[aa(0x136)], I[ab(0xd0)] = H, (0x1a16 + 0x1f51 + -0x3967, socketEmit_1[ab(0xf2)])(I);
                        if (!H[aa(0x12f) + 'te']) {
                            if (u[aa(0x109)](u[ab(0x17b)], u[aa(0x17b)]))
                                throw new F(C[ab(0xef)]);
                            else
                                await (-0x2 * -0x29e + -0x23c + 0x1 * -0x300, queueValidation_1[ab(0xf2)])(o[ab(0x15e)], m, [H]);
                        }
                        return H;
                    } else
                        C[aa(0x11c)](e, f);
                }));
            else {
                if (l[a8(0x171)]) {
                    const H = mime_1[a7(0xf2)][a7(0x143)](l[a8(0x171)]), I = {
                            'originalname': l[a7(0x171)],
                            'filename': l[a8(0x171)],
                            'mediaType': H ? H[a7(0xee)]('/')[0x61 * -0x47 + 0x1ac * -0xb + -0x305 * -0xf] : u[a8(0x19d)]
                        }, K = { ...v };
                    K[a7(0x171)] = I[a8(0x134)], K[a8(0x137)] = I[a7(0x137)];
                    const L = K, M = await Message_1[a7(0xf2)][a7(0x120)](L), N = {};
                    N[a7(0x15c)] = m;
                    const O = {};
                    O[a8(0xde)] = Ticket_1[a8(0xf2)], O['as'] = u[a7(0x165)], O[a8(0x146)] = N, O[a7(0x108)] = [u[a7(0x147)]];
                    const P = await Message_1[a7(0xf2)][a7(0x105)](M['id'], {
                        'include': [
                            O,
                            {
                                'model': Message_1[a8(0xf2)],
                                'as': u[a7(0x16c)],
                                'include': [u[a7(0x147)]]
                            }
                        ]
                    });
                    if (!P)
                        throw new Error(u[a8(0x192)]);
                    await o[a7(0x148)]({
                        'lastMessage': P[a8(0xe8)],
                        'lastMessageAt': new Date()[a8(0xe3)]()
                    });
                    const Q = {};
                    return Q[a7(0x15c)] = m, Q[a7(0xf5)] = u[a7(0x136)], Q[a8(0xd0)] = P, (0x3f8 + 0x1 * 0xe2 + 0x2e * -0x1b, socketEmit_1[a7(0xf2)])(Q), !P[a8(0x12f) + 'te'] && await (-0x2200 + 0x194f * 0x1 + 0x1 * 0x8b1, queueValidation_1[a7(0xf2)])(o[a8(0x15e)], m, [P]), P;
                }
                const B = { ...v };
                B[a8(0x137)] = u[a8(0x135)];
                const C = await Message_1[a8(0xf2)][a8(0x120)](B), D = {};
                D[a7(0x15c)] = m;
                const E = {};
                E[a8(0xde)] = Ticket_1[a8(0xf2)], E['as'] = u[a7(0x165)], E[a8(0x146)] = D, E[a7(0x108)] = [u[a8(0x147)]];
                const F = await Message_1[a7(0xf2)][a7(0x105)](C['id'], {
                    'include': [
                        E,
                        {
                            'model': Message_1[a8(0xf2)],
                            'as': u[a7(0x16c)],
                            'include': [u[a7(0x147)]]
                        }
                    ]
                });
                if (!F)
                    throw new Error(u[a8(0x192)]);
                await o[a8(0x148)]({
                    'lastMessage': F[a7(0xe8)],
                    'lastMessageAt': new Date()[a8(0xe3)](),
                    'answered': !![]
                }), F[a7(0x194)] = o;
                const G = {};
                return G[a8(0x15c)] = m, G[a8(0xf5)] = u[a8(0x136)], G[a8(0xd0)] = F, (0x2673 + 0x24b6 + -0x4b29, socketEmit_1[a7(0xf2)])(G), !F[a8(0x12f) + 'te'] && await (0x1 * -0xa04 + 0x2fb * 0xa + -0x12a * 0x11, queueValidation_1[a7(0xf2)])(o[a8(0x15e)], m, [F]), F;
            }
        } catch (R) {
            logger_1[a8(0x19c)][a8(0x138)](u[a7(0x15d)], R);
        }
    };
exports[V(0xf2)] = CreateMessageSystemService;