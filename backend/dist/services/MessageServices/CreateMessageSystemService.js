'use strict';
const V = b, W = b;
(function (c, d) {
    const T = b, U = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(T(0x141)) / (-0x6 * -0x47a + 0x815 + 0x1a * -0x158) + -parseInt(T(0x135)) / (-0x13a + -0x1592 + 0x16ce) + parseInt(U(0xd6)) / (-0x14c4 * -0x1 + 0xc1f + -0x20e0) + parseInt(T(0xfe)) / (-0x1ccd + -0x1 * 0x1a33 + -0x7 * -0x7dc) * (parseInt(U(0xb4)) / (-0x3 * -0x1cd + -0x659 * 0x6 + 0x284 * 0xd)) + parseInt(U(0x93)) / (-0x4 * 0x69b + -0x21e + 0xe48 * 0x2) * (-parseInt(T(0x126)) / (-0x8c9 + 0x85c + 0x74)) + parseInt(U(0xac)) / (0x19da + -0x14c0 + -0x512) * (parseInt(T(0xc7)) / (0x1 * 0x5db + 0x2 * -0x1db + 0xa * -0x36)) + -parseInt(T(0xcd)) / (0x9fd + -0xdd3 + -0x1f0 * -0x2);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x4eda9 + 0xd5178 * -0x1 + 0x1b5e78));
var __importDefault = this && this[V(0xfb) + V(0xbe)] || function (c) {
    const X = V;
    return c && c[X(0x12d)] ? c : { 'default': c };
};
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x118d + -0x1d * 0xb1 + 0x261b);
        let h = e[f];
        return h;
    }, b(c, d);
}
const J = {};
function a() {
    const ah = [
        'ls/Message',
        'push',
        'nVKdP',
        'WjDkR',
        'messageId',
        'PkCER',
        'whatsappId',
        'ouTIQ',
        'pupa',
        'API',
        'EvQnx',
        'wVzUt',
        '7HcPvnm',
        'pDIHi',
        'nuRuv',
        'GZskV',
        'response',
        'extension',
        'ZAWAJ',
        '__esModule',
        'CiJEv',
        'tenantId',
        'htpoX',
        'QPqOm',
        'ticket',
        'cDwwx',
        'ErkVo',
        '458996KeLOuh',
        'join',
        'bzXGj',
        'iBqLl',
        'idation',
        'bYKUT',
        'nZfln',
        'authToken',
        'VlrKL',
        'value',
        's/queueVal',
        'defineProp',
        '557049WwRnSH',
        'model',
        'Status',
        'QPYPU',
        'tnwph',
        'nXkpc',
        'pljjH',
        'hHhpY',
        'filename',
        'EQbCl',
        'uuid',
        'rmdirSync',
        'XhiqQ',
        'create',
        'Fqawk',
        'erty',
        'substr',
        'iKfdv',
        'QEvdl',
        'responseTy',
        'GSMNO',
        'get',
        'update',
        'mediaType',
        'ebmYg',
        'recursive',
        'VEaSK',
        'name',
        'PLWnT',
        'eStatus',
        'logger',
        'QDDMU',
        'type',
        'SaEfJ',
        'ocol',
        '3625266shcGQO',
        'fromMe',
        'kDmUo',
        'protocol',
        'media',
        'CDueq',
        'default',
        'JjuVB',
        '../../util',
        'yQhpA',
        'oUZdL',
        'setTa',
        'externalKe',
        'finish',
        'number',
        'orVHM',
        'XkdnW',
        'fMxOo',
        'aEYce',
        'mPRGa',
        'vbzFV',
        'ERR_CREATI',
        'tmTOj',
        's/logger',
        'JFNCy',
        '8xpdOnC',
        'createWrit',
        'ervice',
        'scheduleDa',
        'content-ty',
        'ls/Ticket',
        'IKUvB',
        'zGIAe',
        '5ueIWmB',
        'rZkjg',
        'mFgTR',
        '../../libs',
        '../../mode',
        'GtNni',
        'UxFjE',
        'eStream',
        'HTYMh',
        'TpixL',
        'fault',
        'message',
        'contactId',
        'xGnko',
        '../../help',
        'error',
        'contact',
        'pWQMn',
        'data',
        '4409901cujshz',
        'sIkEO',
        'IeMIA',
        'yRTai',
        '/Queue',
        'HsReT',
        '6327190gAgtZU',
        'LOAD',
        'VkfhZ',
        'LfwST',
        'FtDMb',
        'rdjFw',
        'NG_MESSAGE',
        'ERROR\x20DONW',
        'ers/socket',
        '1589322Jovxgx',
        '_SYSTEM',
        'TKMdT',
        'indexOf',
        'urlMessage',
        'public',
        'quotedMsg',
        'PKjNt',
        'Emit',
        'ack',
        'where',
        'wSXes',
        'dlvOM',
        'OnQFf',
        'all',
        'body',
        'ZUvSe',
        'map',
        'url',
        'lookup',
        'QKcai',
        'UYdRF',
        'axios',
        'iHoIZ',
        'ZIgNo',
        'headers',
        'OnSZe',
        'ensureProt',
        'NfBLS',
        'path',
        'AvEHv',
        'mime',
        'apiConfig',
        'hookMessag',
        'ageSystemS',
        'BTLHU',
        'CreateMess',
        '__importDe',
        'LJOuW',
        'getTime',
        '1949852GYSfQA',
        'IATLj',
        'include',
        'cHldu',
        'payload',
        'gwzxA',
        'qXIZW',
        'WebHooksAP',
        'originalna',
        'eCWNG',
        'status',
        's/pupa',
        'split',
        'stream',
        'findByPk',
        'chat:creat',
        'add',
        'IsZVc',
        'chat',
        'pipe',
        'unknown',
        'mimetype',
        'KCgGd',
        'pjGKf',
        'ScWps',
        'nLVGV',
        'mediaUrl',
        'fIixY'
    ];
    a = function () {
        return ah;
    };
    return a();
}
J[W(0x13e)] = !![], Object[W(0x140) + W(0x150)](exports, W(0x12d), J);
const fs_1 = __importDefault(require('fs')), path_1 = require(V(0xf3)), axios_1 = __importDefault(require(V(0xec))), mime_1 = __importDefault(require(W(0xf5))), uuid_1 = require(W(0x14b)), logger_1 = require(W(0x9b) + V(0xaa)), Ticket_1 = __importDefault(require(V(0xb8) + V(0xb1))), Message_1 = __importDefault(require(W(0xb8) + W(0x11a))), socketEmit_1 = __importDefault(require(W(0xc2) + V(0xd5) + W(0xde))), Queue_1 = __importDefault(require(W(0xb7) + W(0xcb))), pupa_1 = require(V(0x9b) + V(0x109)), queueValidation_1 = __importDefault(require(V(0x9b) + V(0x13f) + W(0x139))), downloadMedia = async g => {
        const Y = W, Z = W, h = {
                'cDwwx': function (i, j) {
                    return i(j);
                },
                'XhiqQ': Y(0xfa) + Z(0xf8) + Y(0xae),
                'bYKUT': function (i, j) {
                    return i === j;
                },
                'PKjNt': Y(0xca),
                'pDIHi': Z(0xd2),
                'WjDkR': function (i, j) {
                    return i(j);
                },
                'gwzxA': Y(0xcf),
                'Fqawk': Y(0xd4) + Y(0xce),
                'QPYPU': function (i, j) {
                    return i !== j;
                },
                'ZIgNo': Y(0x134),
                'FtDMb': Z(0xa0),
                'QDDMU': Y(0xc3),
                'aEYce': Z(0xa8) + Z(0xd3) + Z(0xd7),
                'CDueq': Y(0x105) + 'I',
                'kDmUo': Y(0x116),
                'wSXes': Y(0x81),
                'ZAWAJ': Z(0x10b),
                'IsZVc': Y(0xb0) + 'pe',
                'LfwST': Z(0xdb),
                'GZskV': Y(0xc5),
                'GtNni': Z(0x88),
                'VEaSK': Y(0xf7) + Z(0x8d),
                'IeMIA': function (i, j) {
                    return i !== j;
                },
                'pljjH': Z(0x119),
                'XkdnW': Y(0xab)
            };
        try {
            if (h[Z(0x144)](h[Z(0x95)], h[Y(0xe1)])) {
                const i = {};
                i[Y(0x83) + 'pe'] = h[Z(0x12c)];
                const j = await axios_1[Z(0x99)][Y(0x85)](g[Y(0x118)], i), k = j[Z(0xef)][h[Z(0x10f)]], l = mime_1[Z(0x99)], m = l[Z(0x12b)](k), n = (0x62 * -0x25 + 0xbbc + 0x26e, uuid_1['v4'])(), o = (0xd * -0x1d5 + 0x11 * -0x1ab + 0x2e6 * 0x12, path_1[Z(0x136)])(__dirname, '..', '..', '..', h[Y(0xd0)]), p = n + '.' + m, q = (0xff6 + 0x1 * 0x1063 + 0x27d * -0xd, path_1[Y(0x136)])(o, p), r = {};
                r[Z(0x106) + 'me'] = p, r[Y(0x149)] = p, r[Y(0x87)] = m;
                const s = r;
                return await new Promise((t, u) => {
                    const a0 = Z, a2 = Y, v = {
                            'iBqLl': h[a0(0x14d)],
                            'mFgTR': function (w, z) {
                                const a1 = a0;
                                return h[a1(0x13a)](w, z);
                            },
                            'IKUvB': h[a0(0xdd)],
                            'mPRGa': h[a2(0x127)],
                            'tnwph': function (w, x) {
                                const a3 = a2;
                                return h[a3(0x11d)](w, x);
                            },
                            'HsReT': h[a0(0x103)],
                            'zGIAe': h[a0(0x14f)]
                        };
                    h[a0(0x144)](h[a2(0xee)], h[a2(0xee)]) ? h[a2(0x133)](e, f) : j[a0(0xc6)][a2(0x111)](fs_1[a2(0x99)][a0(0xad) + a2(0xbb)](q))['on'](h[a0(0xd1)], async () => {
                        const a4 = a2, a5 = a2, x = {};
                        x[a4(0x14a)] = v[a4(0x138)];
                        const y = x;
                        v[a4(0xb6)](v[a5(0xb2)], v[a4(0xa6)]) ? x[a5(0x8e)][a5(0xc3)](y[a4(0x14a)], f) : v[a4(0x145)](t, s);
                    })['on'](h[a2(0x8f)], x => {
                        const a6 = a2, a7 = a0;
                        if (v[a6(0xb6)](v[a7(0xcc)], v[a7(0xcc)])) {
                            console[a6(0xc3)](v[a6(0xb3)], x);
                            const y = {};
                            y[a6(0x89)] = !![], fs_1[a7(0x99)][a7(0x14c)](q, y), v[a7(0x145)](u, new Error(x));
                        } else
                            e[a6(0x8e)][a6(0xc3)](f);
                    });
                }), s;
            } else {
                if (!g[Z(0x149)]) {
                    const u = k[Y(0x113)][Y(0x10a)]('/')[0xd5a * -0x2 + -0xf76 + 0x2a2b][Y(0x10a)](';')[-0x2 * -0xec + 0xf5 * -0x13 + 0x1057];
                    l[Z(0x149)] = new m()[Z(0xfd)]() + '.' + u;
                }
            }
        } catch (u) {
            if (h[Z(0x144)](h[Y(0x129)], h[Z(0x129)]))
                throw new d(h[Y(0xa5)]);
            else {
                if (h[Y(0x13a)](u[Z(0x12a)][Z(0x108)], -0x21 * -0xb7 + 0x235f + 0x2 * -0x1cb1)) {
                    if (h[Y(0x144)](h[Z(0xb9)], h[Y(0xb9)])) {
                        const x = {};
                        x[Z(0xe8)] = h[Y(0xf6)][Y(0xda) + Y(0x143)], x[Y(0x90)] = i[Z(0x90)], x[Z(0x102)] = j, g[Z(0x99)][Y(0x10e)](h[Z(0x98)], x);
                    } else {
                        const x = {};
                        x[Z(0xdf)] = -(-0x1842 + 0x17ad + 0x96), x[Z(0xe5)] = g[Z(0xe5)], x[Z(0x11e)] = '', x[Z(0xa1)] = g[Z(0xa1)], x[Z(0x9f) + 'y'] = g[Z(0x9f) + 'y'], x[Z(0xc3)] = u[Y(0xbf)], x[Y(0x13c)] = g[Z(0xf6)][Y(0x13c)], x[Y(0x90)] = h[Y(0x8a)];
                        const y = x;
                        if (g?.[Y(0xf6)]?.[Z(0xda) + Z(0x143)]) {
                            if (h[Y(0xc9)](h[Y(0x147)], h[Y(0xa3)])) {
                                const z = {};
                                z[Z(0xe8)] = g[Z(0xf6)][Z(0xda) + Y(0x143)], z[Y(0x90)] = y[Z(0x90)], z[Z(0x102)] = y, Queue_1[Z(0x99)][Z(0x10e)](h[Y(0x98)], z);
                            } else {
                                const B = {};
                                return B[Z(0x99)] = j, B && h[Y(0x12d)] ? i : B;
                            }
                        }
                        return {};
                    }
                }
                throw new Error(u);
            }
        }
    }, CreateMessageSystemService = async ({
        msg: l,
        tenantId: m,
        medias: n,
        ticket: o,
        userId: p,
        scheduleDate: q,
        sendType: r,
        status: s,
        idFront: t
    }) => {
        const a8 = W, a9 = W, u = {
                'oUZdL': function (w, z) {
                    return w === z;
                },
                'NfBLS': a8(0xf7) + a8(0x8d),
                'QKcai': a9(0x105) + 'I',
                'nLVGV': a9(0xa8) + a9(0xd3) + a9(0xd7),
                'hHhpY': a8(0xd4) + a8(0xce),
                'PLWnT': function (w, x) {
                    return w(x);
                },
                'JjuVB': a8(0xa0),
                'wVzUt': a9(0xc3),
                'ouTIQ': function (w, x) {
                    return w(x);
                },
                'OnSZe': a9(0xf9),
                'PkCER': a9(0x131),
                'HTYMh': function (w, z) {
                    return w !== z;
                },
                'xGnko': a8(0x13b),
                'UYdRF': a9(0x107),
                'UxFjE': function (w, z) {
                    return w !== z;
                },
                'AvEHv': a8(0x13d),
                'htpoX': a8(0xfc),
                'OnQFf': function (w, z) {
                    return w === z;
                },
                'qXIZW': a9(0x124),
                'TpixL': a9(0x132),
                'ZUvSe': a9(0xc4),
                'cHldu': a8(0xdc),
                'IATLj': function (w, z) {
                    return w !== z;
                },
                'vbzFV': a9(0x146),
                'sIkEO': a9(0x10d) + 'e',
                'tmTOj': a8(0xa2),
                'KCgGd': a8(0xb5),
                'bzXGj': a9(0x123),
                'nVKdP': a8(0x110),
                'iHoIZ': function (w, z) {
                    return w === z;
                },
                'yQhpA': a9(0x84),
                'setTa': function (w, z) {
                    return w === z;
                },
                'TKMdT': a9(0x82),
                'pjGKf': a9(0x112),
                'SaEfJ': a8(0xfa) + a9(0xf8) + a8(0xae)
            }, v = {
                'ticketId': o['id'],
                'body': l[a8(0xe5)],
                'contactId': l?.[a9(0x94)] ? null : o[a8(0xc0)],
                'fromMe': u[a9(0x9d)](r, u[a8(0x137)]) ? !![] : l?.[a8(0x94)],
                'read': !![],
                'mediaType': u[a9(0x11c)],
                'mediaUrl': undefined,
                'timestamp': new Date()[a9(0xfd)](),
                'quotedMsgId': l?.[a9(0xdc)]?.['id'],
                'userId': p,
                'scheduleDate': q,
                'sendType': r,
                'status': s,
                'tenantId': m,
                'idFront': t
            };
        try {
            const w = await o[a9(0xf1) + a8(0x92)](), x = {};
            x[a9(0x96)] = w, x[a8(0x8b)] = o[a8(0xc4)][a8(0x8b)], v[a9(0xe5)] = (0x1e08 + 0x1cf9 + -0x3b01, pupa_1[a9(0x122)])(l[a8(0xe5)] || '', x);
            if (u[a8(0xed)](r, u[a8(0x137)]) && l[a8(0x118)]) {
                if (u[a9(0xed)](u[a9(0x9c)], u[a9(0x9c)])) {
                    n = [];
                    const y = await u[a8(0x121)](downloadMedia, l);
                    n[a8(0x11b)](y);
                } else {
                    if (u[a8(0x9d)](n[a8(0x12a)][a9(0x108)], -0xe7 * -0xf + -0x6e9 + -0x50c)) {
                        const A = {};
                        A[a9(0xdf)] = -(-0x160e + 0x264d + 0x81f * -0x2), A[a9(0xe5)] = y[a8(0xe5)], A[a9(0x11e)] = '', A[a8(0xa1)] = z[a8(0xa1)], A[a9(0x9f) + 'y'] = A[a8(0x9f) + 'y'], A[a9(0xc3)] = B[a8(0xbf)], A[a8(0x13c)] = C[a8(0xf6)][a8(0x13c)], A[a9(0x90)] = u[a9(0xf2)];
                        const B = A;
                        if (D?.[a9(0xf6)]?.[a8(0xda) + a8(0x143)]) {
                            const C = {};
                            C[a9(0xe8)] = H[a9(0xf6)][a9(0xda) + a8(0x143)], C[a8(0x90)] = B[a8(0x90)], C[a8(0x102)] = B, G[a9(0x99)][a9(0x10e)](u[a9(0xea)], C);
                        }
                        return {};
                    }
                    throw new w(x);
                }
            }
            if (u[a8(0x9e)](r, u[a8(0x137)]) && !l[a8(0x118)] && l[a9(0x97)]) {
                if (u[a9(0x9d)](u[a8(0xd8)], u[a8(0xd8)]))
                    n = [], n[a9(0x11b)](l[a8(0x97)]);
                else
                    throw new d(u[a9(0x117)]);
            }
            if (n)
                await Promise[a9(0xe4)](n[a8(0xe7)](async B => {
                    const aa = a9, ac = a9, C = {
                            'nuRuv': u[aa(0x117)],
                            'CiJEv': function (D, E) {
                                const ab = aa;
                                return u[ab(0x8c)](D, E);
                            },
                            'fMxOo': u[aa(0x148)],
                            'dlvOM': function (D, E) {
                                const ad = ac;
                                return u[ad(0x121)](D, E);
                            }
                        };
                    if (u[aa(0x9d)](u[ac(0xf0)], u[aa(0x11f)])) {
                        const E = f[ac(0x113)][aa(0x10a)]('/')[-0x6e + 0xe79 + -0xe0a][ac(0x10a)](';')[-0xf5a + -0x161e + 0x8 * 0x4af];
                        g[ac(0x149)] = new h()[aa(0xfd)]() + '.' + E;
                    } else {
                        try {
                            if (u[ac(0xbc)](u[ac(0xc1)], u[aa(0xeb)])) {
                                if (!B[ac(0x149)]) {
                                    if (u[aa(0xba)](u[aa(0xf4)], u[ac(0x130)])) {
                                        const L = B[aa(0x113)][aa(0x10a)]('/')[0x2439 + -0x1689 + -0xdaf][ac(0x10a)](';')[0x423 * 0x1 + 0x1 * 0x1808 + -0x1 * 0x1c2b];
                                        B[aa(0x149)] = new Date()[aa(0xfd)]() + '.' + L;
                                    } else
                                        throw new G(C[ac(0x128)]);
                                }
                            } else {
                                j[aa(0xc3)](u[ac(0x148)], k);
                                const O = {};
                                O[ac(0x89)] = !![], l[ac(0x99)][ac(0x14c)](m, O), u[ac(0x8c)](n, new o(p));
                            }
                        } catch (O) {
                            if (u[aa(0xe3)](u[aa(0x104)], u[ac(0x104)]))
                                logger_1[aa(0x8e)][ac(0xc3)](O);
                            else {
                                const Q = {};
                                Q[aa(0xdf)] = -(-0x281 * -0x3 + 0x22be + -0xd0 * 0x34), Q[aa(0xe5)] = k[ac(0xe5)], Q[ac(0x11e)] = '', Q[aa(0xa1)] = l[aa(0xa1)], Q[aa(0x9f) + 'y'] = m[ac(0x9f) + 'y'], Q[aa(0xc3)] = n[ac(0xbf)], Q[aa(0x13c)] = o[ac(0xf6)][ac(0x13c)], Q[aa(0x90)] = u[aa(0xf2)];
                                const R = Q;
                                if (p?.[ac(0xf6)]?.[ac(0xda) + aa(0x143)]) {
                                    const S = {};
                                    S[ac(0xe8)] = t[aa(0xf6)][ac(0xda) + ac(0x143)], S[aa(0x90)] = R[ac(0x90)], S[aa(0x102)] = R, s[aa(0x99)][aa(0x10e)](u[aa(0xea)], S);
                                }
                                return {};
                            }
                        }
                        const E = {
                                ...v,
                                'body': '',
                                'mediaUrl': B[aa(0x149)],
                                'mediaType': B[aa(0x87)] || B[aa(0x113)][ac(0x151)](0x1ab3 + -0xb20 + -0xf93 * 0x1, B[aa(0x113)][aa(0xd9)]('/'))
                            }, F = await Message_1[ac(0x99)][ac(0x14e)](E), G = {};
                        G[aa(0x12f)] = m;
                        const H = {};
                        H[ac(0x142)] = Ticket_1[aa(0x99)], H['as'] = u[aa(0xbd)], H[aa(0xe0)] = G, H[aa(0x100)] = [u[ac(0xe6)]];
                        const I = await Message_1[aa(0x99)][ac(0x10c)](F['id'], {
                            'include': [
                                H,
                                {
                                    'model': Message_1[ac(0x99)],
                                    'as': u[ac(0x101)],
                                    'include': [u[ac(0xe6)]]
                                }
                            ]
                        });
                        if (!I) {
                            if (u[ac(0xff)](u[ac(0xa7)], u[ac(0xa7)]))
                                m[ac(0xc6)][ac(0x111)](n[aa(0x99)][ac(0xad) + aa(0xbb)](o))['on'](u[ac(0x9a)], async () => {
                                    const ae = ac;
                                    C[ae(0x12e)](w, x);
                                })['on'](u[aa(0x125)], R => {
                                    const af = aa, ag = ac;
                                    w[af(0xc3)](C[af(0xa4)], R);
                                    const S = {};
                                    S[ag(0x89)] = !![], x[af(0x99)][ag(0x14c)](y, S), C[af(0xe2)](z, new A(R));
                                });
                            else
                                throw new Error(u[ac(0x117)]);
                        }
                        await o[ac(0x86)]({
                            'lastMessage': I[ac(0xe5)],
                            'lastMessageAt': new Date()[aa(0xfd)]()
                        });
                        const K = {};
                        return K[ac(0x12f)] = m, K[aa(0x90)] = u[aa(0xc8)], K[aa(0x102)] = I, (-0x2 * -0xacc + 0x32d * -0x1 + -0x126b, socketEmit_1[aa(0x99)])(K), !I[aa(0xaf) + 'te'] && (u[ac(0xba)](u[ac(0xa9)], u[aa(0x114)]) ? await (-0x1 * 0x14e7 + 0xc08 + -0x1 * -0x8df, queueValidation_1[aa(0x99)])(o[aa(0x120)], m, [I]) : (K = [], g[ac(0x11b)](h[ac(0x97)]))), I;
                    }
                }));
            else {
                if (l[a9(0x118)]) {
                    const H = mime_1[a8(0x99)][a9(0xe9)](l[a9(0x118)]), I = {
                            'originalname': l[a8(0x118)],
                            'filename': l[a8(0x118)],
                            'mediaType': H ? H[a9(0x10a)]('/')[0x3 * -0xc03 + 0xc47 * 0x2 + 0xb7b] : u[a8(0x115)]
                        }, K = { ...v };
                    K[a8(0x118)] = I[a8(0x149)], K[a9(0x87)] = I[a8(0x87)];
                    const L = K, M = await Message_1[a8(0x99)][a9(0x14e)](L), N = {};
                    N[a9(0x12f)] = m;
                    const O = {};
                    O[a8(0x142)] = Ticket_1[a8(0x99)], O['as'] = u[a8(0xbd)], O[a9(0xe0)] = N, O[a9(0x100)] = [u[a9(0xe6)]];
                    const P = await Message_1[a9(0x99)][a9(0x10c)](M['id'], {
                        'include': [
                            O,
                            {
                                'model': Message_1[a8(0x99)],
                                'as': u[a9(0x101)],
                                'include': [u[a8(0xe6)]]
                            }
                        ]
                    });
                    if (!P)
                        throw new Error(u[a9(0x117)]);
                    await o[a8(0x86)]({
                        'lastMessage': P[a9(0xe5)],
                        'lastMessageAt': new Date()[a8(0xfd)]()
                    });
                    const Q = {};
                    return Q[a9(0x12f)] = m, Q[a8(0x90)] = u[a9(0xc8)], Q[a9(0x102)] = P, (0x2158 + -0x4c7 * 0x1 + -0x67 * 0x47, socketEmit_1[a9(0x99)])(Q), !P[a9(0xaf) + 'te'] && await (-0x6 * 0x315 + -0x1d27 + -0x2fa5 * -0x1, queueValidation_1[a9(0x99)])(o[a9(0x120)], m, [P]), P;
                }
                const B = { ...v };
                B[a8(0x87)] = u[a8(0x11c)];
                const C = await Message_1[a8(0x99)][a8(0x14e)](B), D = {};
                D[a8(0x12f)] = m;
                const E = {};
                E[a9(0x142)] = Ticket_1[a9(0x99)], E['as'] = u[a8(0xbd)], E[a9(0xe0)] = D, E[a9(0x100)] = [u[a8(0xe6)]];
                const F = await Message_1[a8(0x99)][a8(0x10c)](C['id'], {
                    'include': [
                        E,
                        {
                            'model': Message_1[a8(0x99)],
                            'as': u[a9(0x101)],
                            'include': [u[a9(0xe6)]]
                        }
                    ]
                });
                if (!F)
                    throw new Error(u[a8(0x117)]);
                await o[a9(0x86)]({
                    'lastMessage': F[a9(0xe5)],
                    'lastMessageAt': new Date()[a8(0xfd)](),
                    'answered': !![]
                }), F[a8(0x132)] = o;
                const G = {};
                return G[a8(0x12f)] = m, G[a9(0x90)] = u[a8(0xc8)], G[a8(0x102)] = F, (-0x12e0 + 0x5 * -0x6c3 + 0x34af, socketEmit_1[a9(0x99)])(G), !F[a8(0xaf) + 'te'] && await (-0x1 * -0xbb9 + 0x1467 + 0x1 * -0x2020, queueValidation_1[a9(0x99)])(o[a8(0x120)], m, [F]), F;
            }
        } catch (R) {
            logger_1[a8(0x8e)][a9(0xc3)](u[a8(0x91)], R);
        }
    };
exports[V(0x99)] = CreateMessageSystemService;