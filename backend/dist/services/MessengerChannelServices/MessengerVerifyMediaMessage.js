'use strict';
const D = b, E = b;
(function (c, d) {
    const B = b, C = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(B(0x1dd)) / (-0x588 + -0x5 * -0xa7 + 0x6 * 0x61) * (-parseInt(B(0x1a6)) / (0x240d * 0x1 + 0x1592 + -0x399d)) + parseInt(C(0x1c0)) / (0x1 * 0xd97 + 0x1c69 + -0xdff * 0x3) * (-parseInt(B(0x182)) / (-0x29 * 0x2b + 0x123d * 0x2 + 0x71 * -0x43)) + -parseInt(C(0x1dc)) / (0x6a6 * 0x3 + -0x1215 + -0x1d8) * (-parseInt(B(0x1ac)) / (-0x430 * 0x6 + 0x7 * 0x593 + -0xddf)) + -parseInt(C(0x1c6)) / (0x1 * -0x2233 + -0x2435 + -0x49 * -0xf7) * (-parseInt(B(0x17d)) / (0x1f * -0x9d + 0x1a23 + 0x8 * -0xe3)) + parseInt(C(0x17c)) / (0x3aa + 0x1c9d + -0x101f * 0x2) + -parseInt(B(0x1e0)) / (0x7a * 0x14 + -0x599 * 0x2 + 0x1b4) * (parseInt(C(0x19a)) / (0x2077 * -0x1 + -0x19f5 + -0x1 * -0x3a77)) + -parseInt(C(0x1bd)) / (-0x3 * -0x63f + -0x1 * -0x70f + -0x67 * 0x40) * (parseInt(B(0x1eb)) / (-0x1 * -0x20a1 + -0x1e86 + 0x2 * -0x107));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0xe611c + -0x4afad + 0x1d * -0x6e6));
function a() {
    const V = [
        '2108JbgPcs',
        'received',
        'join',
        'TlzcH',
        'ZoxVM',
        'axios',
        'sposition',
        'erty',
        'type',
        'ODnnn',
        'reply_to',
        'GET',
        'upGpy',
        'hkJbI',
        'rXfti',
        'reateMessa',
        'ANkgi',
        'pipe',
        'eUZJx',
        'ers/getQuo',
        'LPPGx',
        'zxXEE',
        'eStream',
        'klbJG',
        '329131RvrobR',
        'method',
        'tenantId',
        'parse',
        'DVoqf',
        '../Message',
        'public',
        'DEFMH',
        'Juece',
        'message_id',
        'update',
        '__esModule',
        '2PhZKur',
        'messageDat',
        'mid',
        'gWDpF',
        'error',
        'fromMe',
        '1831254WaNAGa',
        'uyeNF',
        'payload',
        'finish',
        'timestamp',
        'headers',
        'all',
        'path',
        'filename',
        'ruyLI',
        'hQlGO',
        'text',
        'zbjoH',
        'parameters',
        'default',
        'GvjqX',
        'Services/C',
        '11364XniqiB',
        'geService',
        'tedForMess',
        '4791UhzbPT',
        'bGeFg',
        'getTime',
        'map',
        'message',
        'qiogG',
        '3474037piiUra',
        'responseTy',
        'NTFqR',
        'createWrit',
        'url',
        'GosMG',
        'defineProp',
        'value',
        'dtMqA',
        'MPUdu',
        'data',
        '../../help',
        'nAGdq',
        'fault',
        'KNhnt',
        'content-ty',
        'nxRnb',
        'split',
        'wnLJH',
        'clgKd',
        'Uxsvf',
        'bnOsK',
        '5IPFsbf',
        '946081Dtaahk',
        'wXJAK',
        'EqIIS',
        '140KtXDQX',
        'jrFkR',
        '__importDe',
        'ageId',
        'content-di',
        'LOAD',
        'stream',
        'SJRAW',
        'attachment',
        'YMMgp',
        'BmijN',
        '2171kQEKzt',
        'YxcMu',
        'Dbyfa',
        '2296026NEdspj',
        '8uHqEDR',
        'ERROR\x20DONW',
        'QdrZT',
        'XJNaQ',
        'STIwY'
    ];
    a = function () {
        return V;
    };
    return a();
}
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x2 * -0x1d + 0x18a9 + 0x1 * -0x1769);
        let h = e[f];
        return h;
    }, b(c, d);
}
var __importDefault = this && this[D(0x1e2) + E(0x1d3)] || function (c) {
    const F = D;
    return c && c[F(0x1a5)] ? c : { 'default': c };
};
const w = {};
w[D(0x1cd)] = !![], Object[E(0x1cc) + E(0x189)](exports, E(0x1a5), w);
const path_1 = require(E(0x1b3)), axios_1 = __importDefault(require(E(0x187))), fs_1 = require('fs'), content_disposition_1 = __importDefault(require(D(0x1e4) + E(0x188))), CreateMessageService_1 = __importDefault(require(D(0x19f) + E(0x1bc) + E(0x191) + E(0x1be))), getQuotedForMessageId_1 = __importDefault(require(D(0x1d1) + D(0x195) + D(0x1bf) + D(0x1e3))), downloadFile = async (e, f) => {
        const G = E, H = E, g = {
                'zbjoH': G(0x1d5) + 'pe',
                'Juece': function (o, p) {
                    return o === p;
                },
                'uyeNF': H(0x1d4),
                'EqIIS': G(0x1ea),
                'zxXEE': H(0x17e) + H(0x1e5),
                'DVoqf': function (o, p) {
                    return o(p);
                },
                'eUZJx': function (o, p) {
                    return o(p);
                },
                'MPUdu': H(0x1af),
                'ruyLI': H(0x1aa),
                'Uxsvf': function (o, p) {
                    return o !== p;
                },
                'YMMgp': H(0x18e),
                'nxRnb': H(0x1e1),
                'YxcMu': G(0x18d),
                'ANkgi': H(0x1e6),
                'gWDpF': H(0x1e4) + H(0x188),
                'wnLJH': function (o, p) {
                    return o !== p;
                },
                'rXfti': H(0x1c5),
                'GosMG': H(0x18b),
                'bnOsK': function (o, p) {
                    return o !== p;
                },
                'XJNaQ': G(0x196),
                'clgKd': G(0x1a0)
            }, h = {};
        h[G(0x1ca)] = e, h[H(0x19b)] = g[G(0x17a)], h[G(0x1c7) + 'pe'] = g[G(0x192)];
        const i = await (0x798 + 0x11 * -0x1e + 0x3 * -0x1de, axios_1[G(0x1ba)])(h), j = {};
        j[G(0x1b9)] = {};
        const k = i[H(0x1b1)][g[G(0x1a9)]] ? content_disposition_1[H(0x1ba)][G(0x19d)](i[G(0x1b1)][g[G(0x1a9)]] || '') : j;
        let l = '';
        const m = k?.[G(0x1b9)]?.[G(0x1b4)];
        if (m) {
            if (g[G(0x1d8)](g[G(0x190)], g[G(0x1cb)])) {
                const o = k[G(0x1b9)][G(0x1b4)];
                l = new Date()[H(0x1c2)]() + '-' + o;
            } else {
                const q = g[G(0x1b1)][g[H(0x1b8)]], r = q[G(0x1d7)]('/')[0xa7d + 0x24c2 + -0x2f3e];
                h = i + '-' + new j()[G(0x1c2)]() + '.' + r;
            }
        } else {
            if (g[G(0x1db)](g[G(0x180)], g[G(0x180)])) {
                const r = {};
                return r[H(0x1ba)] = j, g && h[G(0x1a5)] ? i : r;
            } else {
                const r = i[H(0x1b1)][g[G(0x1b8)]], s = r[H(0x1d7)]('/')[0xe6c + 0x1599 * 0x1 + -0x1202 * 0x2];
                l = f + '-' + new Date()[H(0x1c2)]() + '.' + s;
            }
        }
        const n = (-0x355 * -0x1 + 0x1fb8 + -0x230d, path_1[H(0x184)])(__dirname, '..', '..', '..', g[H(0x1d9)], l);
        return await new Promise((t, u) => {
            const I = H, K = G, v = {
                    'hkJbI': g[I(0x197)],
                    'STIwY': function (x, y) {
                        const J = I;
                        return g[J(0x194)](x, y);
                    },
                    'SJRAW': g[K(0x1cf)],
                    'wXJAK': g[I(0x1b5)]
                };
            if (g[K(0x1da)](g[K(0x1e9)], g[I(0x1d6)]))
                i[K(0x1d0)][K(0x193)]((-0xfcd + -0x2035 + 0x3002, fs_1[K(0x1c9) + I(0x198)])(n))['on'](g[K(0x1cf)], async () => t(l))['on'](g[I(0x1b5)], x => {
                    const L = K, M = K;
                    if (g[L(0x1a2)](g[L(0x1ad)], g[L(0x1df)])) {
                        const z = f[M(0x1b9)][L(0x1b4)];
                        g = new h()[L(0x1c2)]() + '-' + z;
                    } else
                        console[M(0x1aa)](g[M(0x197)], x), g[L(0x19e)](u, new Error(x));
                });
            else {
                const y = {
                    'nAGdq': v[K(0x18f)],
                    'dtMqA': function (z, A) {
                        const N = I;
                        return v[N(0x181)](z, A);
                    }
                };
                k[K(0x1d0)][I(0x193)]((-0x1 * 0xf41 + 0x1f * -0x137 + 0x34ea, l[I(0x1c9) + K(0x198)])(m))['on'](v[I(0x1e7)], async () => s(t))['on'](v[I(0x1de)], z => {
                    const O = I, P = K;
                    s[O(0x1aa)](y[O(0x1d2)], z), y[O(0x1ce)](t, new u(z));
                });
            }
        }), l;
    }, MessengerVerifyMediaMessage = async (c, d, e, f) => {
        const Q = E, R = E, g = {
                'NTFqR': Q(0x17e) + R(0x1e5),
                'TlzcH': function (i, j) {
                    return i(j);
                },
                'GvjqX': function (i, j, k) {
                    return i(j, k);
                },
                'QdrZT': function (i, j) {
                    return i !== j;
                },
                'klbJG': Q(0x186),
                'DEFMH': function (i, j) {
                    return i > j;
                },
                'Dbyfa': Q(0x183)
            };
        let h;
        await Promise[R(0x1b2)](d[R(0x1c4)][Q(0x1e8) + 's'][Q(0x1c3)](async (i, j) => {
            const S = Q, U = R, k = {
                    'hQlGO': g[S(0x1c8)],
                    'bGeFg': function (p, q) {
                        const T = S;
                        return g[T(0x185)](p, q);
                    }
                }, l = e['id'] + '_' + d[U(0x1a3)];
            h = await g[S(0x1bb)](downloadFile, i[U(0x1ae)][S(0x1ca)], l);
            let m;
            if (d?.[S(0x1c4)]?.[U(0x18c)]?.[S(0x1a8)]) {
                if (g[U(0x17f)](g[S(0x199)], g[S(0x199)]))
                    h[U(0x1aa)](k[S(0x1b6)], i), k[S(0x1c1)](j, new k(l));
                else {
                    const q = await (0x12b3 + 0x61 * 0xf + -0xc31 * 0x2, getQuotedForMessageId_1[U(0x1ba)])(d[S(0x1c4)][U(0x18c)][U(0x1a8)], e[U(0x19c)]);
                    m = q?.['id'] || undefined;
                }
            }
            const n = {
                'messageId': g[S(0x1a1)](j, -0x7 * -0x269 + -0x12ea + 0x20b * 0x1) ? d[S(0x1a3)] + '__' + j : d[U(0x1a3)] || '',
                'ticketId': e['id'],
                'contactId': f['id'],
                'body': d[S(0x1c4)]?.[S(0x1b7)] || '',
                'fromMe': d[U(0x1ab)],
                'read': ![],
                'mediaUrl': h,
                'mediaType': d[S(0x18a)],
                'quotedMsgId': m,
                'timestamp': +d[U(0x1b0)],
                'status': g[U(0x17b)]
            };
            await e[U(0x1a4)]({
                'lastMessage': d[S(0x1c4)]?.[U(0x1b7)] || h || '',
                'lastMessageAt': new Date()[S(0x1c2)](),
                'answered': ![]
            });
            const o = {};
            o[S(0x1a7) + 'a'] = n, o[U(0x19c)] = e[S(0x19c)], await (-0x20a1 * 0x1 + -0x913 + 0x29b4, CreateMessageService_1[S(0x1ba)])(o);
        }));
    };
exports[D(0x1ba)] = MessengerVerifyMediaMessage;