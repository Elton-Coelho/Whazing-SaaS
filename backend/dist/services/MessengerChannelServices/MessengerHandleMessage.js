'use strict';
const C = b, D = b;
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x17ba + 0x1a3 * 0xe + 0x75 * -0x62);
        let h = e[f];
        return h;
    }, b(c, d);
}
(function (c, d) {
    const A = b, B = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(A(0x267)) / (-0x56 + 0x233 + -0x1dc) + -parseInt(B(0x231)) / (-0x2d + 0x130 * 0x4 + -0x491) * (parseInt(B(0x26a)) / (0xb7 + 0x16c3 + -0x1777)) + -parseInt(B(0x20c)) / (0x1 * -0x3cc + 0x64 + 0xdb * 0x4) * (-parseInt(A(0x1e2)) / (-0x3e * -0x7 + -0x206c + 0x1ebf)) + parseInt(A(0x20f)) / (-0x144 + -0x2 * 0x5cf + 0xce8) * (parseInt(B(0x22c)) / (0xe78 + 0x1ae7 + -0x2958)) + parseInt(B(0x1f3)) / (-0x128f + 0x6 * -0x2c + 0x139f) + -parseInt(A(0x26d)) / (-0x301 * 0xa + -0x7ff + 0x2612) + -parseInt(A(0x201)) / (0xcbc + 0x314 + -0xfc6);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x485fc + -0x8cee2 + 0x150169));
var __importDefault = this && this[C(0x260) + C(0x1eb)] || function (c) {
    const E = D;
    return c && c[E(0x1f8)] ? c : { 'default': c };
};
function a() {
    const a8 = [
        'aEWms',
        'mid',
        '../../libs',
        'xjPqb',
        'loCDV',
        'PRgBD',
        'BusinessHo',
        '5315304rWiqNK',
        'DTcEc',
        'LOtyV',
        'WnMeE',
        'zORbC',
        '__esModule',
        'iaMessage',
        'defineProp',
        'NEenH',
        'mnvuh',
        'LIqki',
        'erBot',
        'icket',
        'DmRUE',
        '2760480ceLEjq',
        'tBsab',
        'contact',
        'qwxIO',
        'hsSun',
        'CMfBK',
        'length',
        'fbPageId',
        'aRjfB',
        'YxeBc',
        'page',
        '53376tBKvPL',
        'iClPW',
        '../ChatFlo',
        '5158938eZXTaP',
        'ySBAU',
        'vices/help',
        'CHsjM',
        'bIUOH',
        '../TicketS',
        'location',
        'rVerifyMed',
        'image',
        'entry',
        'OvUXx',
        'apFgD',
        'BHOAX',
        'rVerifyMes',
        'QPlyx',
        'whatsappId',
        'aNjBQ',
        'messenger',
        'Bot',
        'ndOrCreate',
        's/logger',
        'Message',
        'ojbfk',
        'cBweK',
        'EGgoV',
        'PXWyO',
        'object',
        'xUCxg',
        'fzAPr',
        '7GpxKWd',
        'timestamp',
        'audio',
        'tact',
        'gjWer',
        '4upzRmA',
        'ervices/Fi',
        'value',
        'error',
        'messaging',
        './Messenge',
        'iOIgZ',
        'AvHpz',
        'TXbGP',
        'xPjCh',
        'sZYYE',
        'sChatFlowT',
        'BQmCX',
        'FVinw',
        'getMesseng',
        'uhjwh',
        'zaRvh',
        'logger',
        'bHJNN',
        'qOncp',
        'Kmdxg',
        'dBEnB',
        'UXBfa',
        'urs',
        'text',
        'iFerL',
        'rSBfx',
        'EfFEP',
        'ers/Verify',
        'VerifyStep',
        'isFarewell',
        'oXHsj',
        'nGofb',
        'unreadMess',
        'CQVni',
        'read',
        'gkSmj',
        'shift',
        'upBKR',
        'eAWsX',
        'HZGLg',
        'riJkR',
        'BxsWP',
        'QZWAk',
        'eDZAO',
        'wServices/',
        'ages',
        '__importDe',
        'sender',
        'SvVxd',
        'sage',
        '../WbotSer',
        'lSCnG',
        'PFEWy',
        '279442cdzQZW',
        'message',
        'CEapn',
        '1009059ZxhGij',
        'yJaIn',
        'file',
        '1500741kCxEoR',
        'TicketServ',
        'ice',
        'ueQSb',
        'FfkQp',
        'JGEsH',
        'isCampaign',
        '../../util',
        'rVerifyCon',
        'fyZdU',
        'EXSmZ',
        'erty',
        'DtfRX',
        'tenantId',
        'ZTOCN',
        'type',
        'AiNux',
        'OMIYE',
        'srwVV',
        'cMfsE',
        '/messenger',
        'msg',
        'rShowChann',
        'eeStg',
        'fallback',
        'vTNDM',
        'KZjvN',
        'WWtVN',
        'djPSd',
        'yelJA',
        'channel',
        'prBEl',
        'zXvUd',
        'wlJVE',
        'hFKhK',
        'hqZAu',
        'srrhm',
        'SePmR',
        '140wBQOQh',
        'video',
        'default',
        'BRBpE',
        'sMfvk',
        'pdoVy',
        'rMarkRead',
        'wAboL',
        'VfoOF',
        'fault'
    ];
    a = function () {
        return a8;
    };
    return a();
}
const k = {};
k[C(0x233)] = !![], Object[C(0x1fa) + D(0x278)](exports, C(0x1f8), k);
const logger_1 = require(D(0x274) + C(0x223)), FindOrCreateTicketService_1 = __importDefault(require(D(0x214) + D(0x232) + C(0x222) + D(0x26e) + C(0x26f))), messengerBot_1 = require(D(0x1ee) + D(0x281) + C(0x221)), MessengerVerifyContact_1 = __importDefault(require(C(0x236) + C(0x275) + D(0x22f))), MessengerVerifyMessage_1 = __importDefault(require(C(0x236) + D(0x21c) + D(0x263))), MessengerVerifyMediaMessage_1 = __importDefault(require(D(0x236) + C(0x216) + D(0x1f9))), VerifyStepsChatFlowTicket_1 = __importDefault(require(D(0x20e) + D(0x25e) + C(0x24e) + D(0x23c) + C(0x1ff))), MessengerMarkRead_1 = __importDefault(require(D(0x236) + C(0x1e8))), MessengerShowChannel_1 = __importDefault(require(D(0x236) + D(0x283) + 'el')), VerifyBusinessHours_1 = __importDefault(require(C(0x264) + D(0x211) + C(0x24d) + D(0x1f2) + D(0x248))), getMessageType = d => {
        const F = D, G = D, e = {};
        e[F(0x1f1)] = function (i, j) {
            return i > j;
        }, e[F(0x262)] = G(0x249), e[G(0x237)] = function (i, j) {
            return i === j;
        }, e[G(0x23b)] = G(0x217), e[G(0x244)] = G(0x22e), e[G(0x1dc)] = function (i, j) {
            return i === j;
        }, e[F(0x1ec)] = G(0x1e3), e[G(0x1f7)] = F(0x215), e[G(0x1f0)] = G(0x26c), e[F(0x250)] = function (i, j) {
            return i === j;
        }, e[F(0x25c)] = G(0x285);
        const f = e, {attachments: g} = d, h = g && f[G(0x1f1)](g[G(0x207)], -0x1 * -0x11d5 + 0x457 * -0x3 + -0x4d0);
        if (d[G(0x249)] && !h)
            return f[G(0x262)];
        if (h && f[G(0x237)](g[-0x2 * 0x7d9 + -0x2 * 0x205 + -0x3 * -0x694][G(0x27c)], f[G(0x23b)]))
            return f[G(0x23b)];
        if (h && f[G(0x237)](g[-0xadc + 0x1b53 + -0x1077][G(0x27c)], f[F(0x244)]))
            return f[G(0x244)];
        if (h && f[G(0x1dc)](g[0x1c12 * 0x1 + 0x1af9 * -0x1 + -0x119][G(0x27c)], f[G(0x1ec)]))
            return f[F(0x1ec)];
        if (h && f[F(0x1dc)](g[0xfd * 0x1f + -0x1847 + 0x32e * -0x2][F(0x27c)], f[F(0x1f7)]))
            return f[F(0x1f7)];
        if (h && f[F(0x1dc)](g[0x103c + 0xdf4 + -0xa10 * 0x3][G(0x27c)], f[F(0x1f0)]))
            return f[F(0x1f0)];
        if (h && f[G(0x250)](g[-0x1 * 0x162b + 0x1cbd + -0x1 * 0x692][F(0x27c)], f[G(0x25c)]))
            return f[F(0x25c)];
    }, MessengerHandleMessage = async c => {
        const H = C, I = D, d = {
                'ZTOCN': function (e) {
                    return e();
                },
                'xPjCh': function (e, f) {
                    return e > f;
                },
                'DtfRX': H(0x249),
                'fzAPr': function (e, f) {
                    return e === f;
                },
                'dBEnB': I(0x217),
                'iFerL': I(0x22e),
                'hsSun': H(0x1e3),
                'yelJA': I(0x215),
                'BRBpE': function (e, f) {
                    return e === f;
                },
                'FVinw': I(0x26c),
                'bHJNN': H(0x285),
                'bIUOH': function (e, f) {
                    return e(f);
                },
                'apFgD': function (e, f) {
                    return e === f;
                },
                'CQVni': I(0x269),
                'riJkR': function (e, f) {
                    return e !== f;
                },
                'ySBAU': I(0x20b),
                'DTcEc': H(0x1f6),
                'FfkQp': I(0x1de),
                'nGofb': I(0x220),
                'eAWsX': H(0x272),
                'cMfsE': H(0x219),
                'UXBfa': I(0x21d),
                'EGgoV': function (e) {
                    return e();
                },
                'LOtyV': function (e, f) {
                    return e !== f;
                },
                'ueQSb': H(0x276),
                'xjPqb': H(0x1e9),
                'DmRUE': I(0x206),
                'VfoOF': H(0x27d)
            };
        return new Promise((e, f) => {
            const L = H, N = H, g = {
                    'aNjBQ': function (h) {
                        const J = b;
                        return d[J(0x27b)](h);
                    },
                    'vTNDM': function (h, i) {
                        const K = b;
                        return d[K(0x23a)](h, i);
                    },
                    'gjWer': d[L(0x279)],
                    'OMIYE': function (h, i) {
                        const M = L;
                        return d[M(0x22b)](h, i);
                    },
                    'eeStg': d[L(0x246)],
                    'BxsWP': d[N(0x24a)],
                    'HZGLg': d[N(0x205)],
                    'uhjwh': d[L(0x28a)],
                    'eDZAO': function (h, i) {
                        const O = L;
                        return d[O(0x1e5)](h, i);
                    },
                    'EfFEP': d[N(0x23e)],
                    'AvHpz': d[L(0x243)],
                    'srwVV': function (h, i) {
                        const P = L;
                        return d[P(0x213)](h, i);
                    },
                    'wlJVE': function (h, i) {
                        const Q = N;
                        return d[Q(0x21a)](h, i);
                    },
                    'hqZAu': d[N(0x253)],
                    'lSCnG': function (h, i) {
                        const R = L;
                        return d[R(0x25a)](h, i);
                    },
                    'cBweK': d[N(0x210)],
                    'rSBfx': d[L(0x1f4)],
                    'upBKR': d[N(0x271)],
                    'yJaIn': function (h, i) {
                        const S = N;
                        return d[S(0x213)](h, i);
                    },
                    'srrhm': d[L(0x251)],
                    'Kmdxg': d[N(0x258)],
                    'LIqki': d[L(0x280)],
                    'mnvuh': function (h) {
                        const T = N;
                        return d[T(0x27b)](h);
                    },
                    'qwxIO': d[N(0x247)],
                    'SePmR': function (h) {
                        const U = N;
                        return d[U(0x227)](h);
                    },
                    'BQmCX': function (h, i) {
                        const V = L;
                        return d[V(0x1f5)](h, i);
                    },
                    'PXWyO': d[L(0x270)],
                    'zaRvh': d[L(0x1ef)],
                    'xUCxg': function (h, i) {
                        const W = L;
                        return d[W(0x22b)](h, i);
                    },
                    'prBEl': d[N(0x200)],
                    'aRjfB': d[L(0x1ea)],
                    'BHOAX': function (h) {
                        const X = L;
                        return d[X(0x27b)](h);
                    },
                    'PFEWy': function (h, i) {
                        const Y = N;
                        return d[Y(0x213)](h, i);
                    }
                };
            ((async () => {
                const a0 = N, a2 = N, h = {
                        'gkSmj': function (m, n) {
                            const Z = b;
                            return g[Z(0x286)](m, n);
                        },
                        'WWtVN': g[a0(0x230)],
                        'NEenH': function (m, n) {
                            const a1 = a0;
                            return g[a1(0x27e)](m, n);
                        },
                        'EXSmZ': g[a2(0x284)],
                        'TXbGP': g[a0(0x25b)],
                        'ojbfk': function (m, n) {
                            const a3 = a2;
                            return g[a3(0x27e)](m, n);
                        },
                        'djPSd': g[a0(0x259)],
                        'CHsjM': g[a2(0x240)],
                        'tBsab': function (m, n) {
                            const a4 = a2;
                            return g[a4(0x25d)](m, n);
                        },
                        'iClPW': g[a0(0x24c)],
                        'KZjvN': function (m, n) {
                            const a5 = a0;
                            return g[a5(0x27e)](m, n);
                        },
                        'pdoVy': g[a0(0x238)],
                        'YxeBc': function (m, n) {
                            const a6 = a2;
                            return g[a6(0x27f)](m, n);
                        },
                        'sMfvk': function (m) {
                            const a7 = a0;
                            return g[a7(0x21f)](m);
                        }
                    };
                let i, j;
                const l = -0x153 * -0x2 + -0x1b52 + -0x1 * -0x18ad;
                try {
                    if (g[a2(0x1dd)](g[a0(0x1df)], g[a2(0x1df)])) {
                        if (g[a0(0x265)](c[a2(0x229)], g[a2(0x226)]))
                            return;
                        const m = c[a0(0x218)][a2(0x256)](), n = m?.[a0(0x235)][a2(0x256)](), o = {};
                        o[a2(0x208)] = m['id'], i = await (-0x3 * 0x7ff + 0x1a73 * 0x1 + -0x276, MessengerShowChannel_1[a2(0x1e4)])(o);
                        if (!i)
                            return;
                        const p = await (0x8 * -0x53 + 0x4b7 + -0x1 * 0x21f, messengerBot_1[a0(0x23f) + a2(0x1fe)])(i['id']);
                        if (!n?.[a2(0x268)] && n[a2(0x254)]) {
                            if (g[a2(0x265)](g[a0(0x24b)], g[a2(0x257)])) {
                                (-0x2595 + 0xd41 + -0x615 * -0x4, MessengerMarkRead_1[a2(0x1e4)])(n, i[a2(0x27a)]);
                                return;
                            } else {
                                (0x1f + -0x1c57 + 0xe1c * 0x2, f[a2(0x1e4)])(g, h[a2(0x27a)]);
                                return;
                            }
                        }
                        j = await (-0x39 * -0x6b + 0x1a1b + -0x31ee, MessengerVerifyContact_1[a2(0x1e4)])(n[a2(0x261)], p, i[a0(0x27a)]);
                        const q = {
                                ...n,
                                'type': g[a2(0x26b)](getMessageType, n[a2(0x268)]),
                                'fromMe': ![],
                                'body': n?.[a2(0x268)]?.[a0(0x249)] || '',
                                'timestamp': n[a0(0x22d)],
                                'message_id': n[a0(0x268)][a0(0x1ed)]
                            }, r = {};
                        r[a2(0x203)] = j, r[a0(0x21e)] = i['id'], r[a0(0x252) + a0(0x25f)] = l, r[a0(0x27a)] = i[a0(0x27a)], r[a2(0x282)] = q, r[a2(0x1da)] = g[a2(0x1e0)];
                        const s = await (0x131 * 0x1 + 0x761 + -0x892, FindOrCreateTicketService_1[a0(0x1e4)])(r);
                        if (s?.[a0(0x273) + a0(0x224)]) {
                            if (g[a2(0x265)](g[a0(0x245)], g[a2(0x1fd)])) {
                                g[a0(0x1fc)](e);
                                return;
                            } else {
                                const {attachments: v} = e, w = v && h[a0(0x255)](v[a2(0x207)], 0x225e + 0x13a5 + -0x1 * 0x3603);
                                if (f[a2(0x249)] && !w)
                                    return h[a2(0x288)];
                                if (w && h[a2(0x1fb)](v[-0x11 * -0xc1 + -0x1 * -0xeac + -0x1 * 0x1b7d][a0(0x27c)], h[a0(0x277)]))
                                    return h[a0(0x277)];
                                if (w && h[a2(0x1fb)](v[-0xa05 + 0x1a6a + -0x1065][a2(0x27c)], h[a0(0x239)]))
                                    return h[a2(0x239)];
                                if (w && h[a2(0x225)](v[0x823 * 0x4 + 0xd3 * -0x13 + -0x10e3][a2(0x27c)], h[a0(0x289)]))
                                    return h[a0(0x289)];
                                if (w && h[a0(0x225)](v[-0x24a2 + -0x823 + 0x2cc5][a2(0x27c)], h[a2(0x212)]))
                                    return h[a0(0x212)];
                                if (w && h[a2(0x202)](v[0x168c + -0x1 * -0x1de5 + -0x3471][a2(0x27c)], h[a2(0x20d)]))
                                    return h[a0(0x20d)];
                                if (w && h[a2(0x287)](v[-0x103a + 0x2f * 0x1 + -0x1 * -0x100b][a0(0x27c)], h[a0(0x1e7)]))
                                    return h[a2(0x1e7)];
                            }
                        }
                        if (s?.[a0(0x24f) + a0(0x224)]) {
                            if (g[a2(0x265)](g[a0(0x204)], g[a2(0x204)]))
                                g[a2(0x242)][a2(0x234)](h), h[a2(0x20a)](i, j);
                            else {
                                g[a0(0x1e1)](e);
                                return;
                            }
                        }
                        if (g[a2(0x265)](q[a2(0x27c)], g[a0(0x230)])) {
                            if (g[a2(0x23d)](g[a2(0x228)], g[a0(0x241)]))
                                await (0x5cf * -0x2 + -0x2 * 0xaf1 + 0x2180, MessengerVerifyMediaMessage_1[a0(0x1e4)])(i, q, s, j);
                            else {
                                const x = {};
                                return x[a2(0x1e4)] = j, g && h[a0(0x1f8)] ? i : x;
                            }
                        } else {
                            if (g[a2(0x22a)](g[a0(0x1db)], g[a0(0x209)])) {
                                g[a0(0x21f)](r);
                                return;
                            } else
                                await (-0x18d0 + -0x6b0 * 0x4 + 0x44c * 0xc, MessengerVerifyMessage_1[a0(0x1e4)])(q, s, j);
                        }
                        await (0xc24 + -0xd * 0x6 + 0x3 * -0x3f2, VerifyStepsChatFlowTicket_1[a2(0x1e4)])(q, s), await (-0x44f + 0x20e3 + -0x2 * 0xe4a, VerifyBusinessHours_1[a2(0x1e4)])(q, s), g[a0(0x21b)](e);
                    } else {
                        h[a0(0x1e6)](d);
                        return;
                    }
                } catch (z) {
                    logger_1[a0(0x242)][a2(0x234)](z), g[a2(0x266)](f, z);
                }
            })());
        });
    };
exports[C(0x1e4)] = MessengerHandleMessage;