'use strict';
const D = b, E = b;
(function (c, d) {
    const B = b, C = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(B(0x191)) / (0x1 * 0xc29 + -0x56 * 0x1c + -0x2c0) + -parseInt(B(0x137)) / (-0x105b * -0x1 + -0x15 * 0x1a1 + 0x11dc) + parseInt(C(0x1b7)) / (-0x16f6 + -0xd * 0x2e1 + 0x3c66) + -parseInt(C(0x155)) / (0x274 + 0x165 + -0x3d5) * (-parseInt(B(0x13e)) / (-0x2174 + -0xe9 * 0x1d + 0x3bde)) + parseInt(B(0x1ca)) / (-0x25e1 * -0x1 + 0x249c + -0x6c5 * 0xb) + parseInt(B(0x153)) / (0xfbe + 0xe99 + -0x1e50) + -parseInt(C(0x151)) / (0x114 + -0x293 * 0xd + 0x206b) * (parseInt(B(0x18c)) / (0x67f * 0x5 + -0x34 * 0x25 + 0x2 * -0xc77));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x49d01 * 0x2 + -0xaea37 * -0x1 + -0xe7aba));
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0xf0 * -0x1e + -0xc0f + -0xedb);
        let h = e[f];
        return h;
    }, b(c, d);
}
function a() {
    const a4 = [
        'Message',
        'grBpS',
        'aopmJ',
        'ers/Verify',
        'ice',
        'GuxTE',
        '15SRSOgl',
        'video',
        'mcERe',
        'hhVfz',
        'oFuQy',
        'defineProp',
        'ages',
        'jreao',
        'xpPLY',
        's/logger',
        'image',
        'sender',
        'message',
        'messenger',
        'QWVJm',
        'zwsqh',
        'getMesseng',
        'rMarkRead',
        'isFarewell',
        '608vrSceb',
        'yKoYn',
        '4966234kGxKqY',
        '/messenger',
        '57880WSElOA',
        'MObUu',
        'NEcas',
        'RcFng',
        'aEkMB',
        'entry',
        'shift',
        './Messenge',
        'error',
        'DfEEq',
        'tenantId',
        'dtEzX',
        'mid',
        'hPSbe',
        'logger',
        'FRWyV',
        'fbPageId',
        'vtsiO',
        '../WbotSer',
        'default',
        'rVerifyMes',
        'erBot',
        'ZjQWA',
        'rShowChann',
        'Bot',
        'TicketServ',
        'StQuL',
        'isCampaign',
        'text',
        'Mtahu',
        'KYECg',
        'KnDyJ',
        'IMxSP',
        'doORo',
        'CuiAO',
        'gkTLs',
        'contact',
        'zdljY',
        'msg',
        'YMSXH',
        'fallback',
        'ndOrCreate',
        'EZjUO',
        'yBKeK',
        'messaging',
        'uzClZ',
        'AOTLm',
        'uMiGA',
        'lhKyp',
        'sChatFlowT',
        'vzjVr',
        'REeLM',
        'cllyK',
        '../../libs',
        'htZYV',
        '42327mQRViW',
        'Mzyle',
        'audio',
        'page',
        'PjrQt',
        '690952IMSrZD',
        'iaMessage',
        'RzmzL',
        'type',
        'WVfpS',
        'object',
        'rVerifyMed',
        'ymuQt',
        'vbcMi',
        'icket',
        'dWvac',
        'fbaRM',
        '../TicketS',
        'unreadMess',
        'AFJjX',
        'WdGUO',
        'ofQEE',
        'urs',
        'dhshM',
        'fault',
        'TUKKZ',
        'channel',
        'ExKnR',
        'QJWxa',
        'fAAtx',
        'ohdsT',
        'vices/help',
        'tNFak',
        'YrlLL',
        'xKUnO',
        'gRYiW',
        'location',
        'OPQzy',
        'AOvoL',
        'read',
        'ervices/Fi',
        'WemJi',
        'cTLyg',
        '1036587edityN',
        'yurhp',
        'jXgFs',
        '../../util',
        'eIYTP',
        '__esModule',
        'VerifyStep',
        'file',
        'timestamp',
        'sage',
        '__importDe',
        'gyJax',
        'Wltmg',
        'dUecv',
        'XJGNH',
        'dRsBL',
        'length',
        'erty',
        '../ChatFlo',
        '2323092xvuUQP',
        'value',
        'yXYzS',
        'rVerifyCon',
        'ZqhZW',
        'FHfvr',
        'zGCdc',
        'xKwFP',
        'wServices/',
        'OyqrA',
        'whatsappId',
        'tact',
        'BusinessHo',
        'dZvKJ',
        'Odgrc',
        'iivqV',
        '132264UUIBEJ'
    ];
    a = function () {
        return a4;
    };
    return a();
}
var __importDefault = this && this[D(0x1c1) + E(0x1a4)] || function (c) {
    const F = D;
    return c && c[F(0x1bc)] ? c : { 'default': c };
};
const k = {};
k[E(0x1cb)] = !![], Object[E(0x143) + E(0x1c8)](exports, E(0x1bc), k);
const logger_1 = require(D(0x1ba) + E(0x147)), FindOrCreateTicketService_1 = __importDefault(require(E(0x19d) + D(0x1b4) + D(0x17e) + D(0x16e) + D(0x13c))), messengerBot_1 = require(D(0x18a) + E(0x154) + E(0x16d)), MessengerVerifyContact_1 = __importDefault(require(E(0x15c) + D(0x1cd) + D(0x1d5))), MessengerVerifyMessage_1 = __importDefault(require(E(0x15c) + E(0x169) + E(0x1c0))), MessengerVerifyMediaMessage_1 = __importDefault(require(E(0x15c) + D(0x197) + D(0x192))), VerifyStepsChatFlowTicket_1 = __importDefault(require(D(0x1c9) + D(0x1d2) + D(0x1bd) + E(0x186) + E(0x19a))), MessengerMarkRead_1 = __importDefault(require(E(0x15c) + E(0x14f))), MessengerShowChannel_1 = __importDefault(require(E(0x15c) + D(0x16c) + 'el')), VerifyBusinessHours_1 = __importDefault(require(E(0x167) + E(0x1ab) + E(0x13b) + D(0x1d6) + D(0x1a2))), getMessageType = d => {
        const G = D, H = E, e = {};
        e[G(0x175)] = function (i, j) {
            return i > j;
        }, e[H(0x14d)] = H(0x171), e[H(0x1d8)] = function (i, j) {
            return i === j;
        }, e[G(0x1cf)] = G(0x148), e[H(0x13d)] = function (i, j) {
            return i === j;
        }, e[G(0x1c3)] = H(0x18e), e[G(0x178)] = H(0x13f), e[H(0x1b6)] = function (i, j) {
            return i === j;
        }, e[G(0x18d)] = H(0x1b0), e[G(0x1ae)] = function (i, j) {
            return i === j;
        }, e[G(0x156)] = G(0x1be), e[G(0x184)] = H(0x17d);
        const f = e, {attachments: g} = d, h = g && f[G(0x175)](g[H(0x1c7)], -0x1cad + 0xc2f * -0x1 + 0x28dc);
        if (d[G(0x171)] && !h)
            return f[G(0x14d)];
        if (h && f[H(0x1d8)](g[-0x5 * 0x5 + 0x26 * -0xad + 0x19c7][G(0x194)], f[G(0x1cf)]))
            return f[G(0x1cf)];
        if (h && f[H(0x13d)](g[-0x5 * 0x71d + 0x1587 + 0xe0a][H(0x194)], f[G(0x1c3)]))
            return f[G(0x1c3)];
        if (h && f[H(0x1d8)](g[-0xc23 + -0x1 * 0x1a8 + -0x6b * -0x21][G(0x194)], f[H(0x178)]))
            return f[G(0x178)];
        if (h && f[G(0x1b6)](g[0x1 * 0xda5 + 0xb0e + -0x18b3][G(0x194)], f[H(0x18d)]))
            return f[G(0x18d)];
        if (h && f[G(0x1ae)](g[0x3b * 0xa3 + 0x850 + 0x9 * -0x519][H(0x194)], f[G(0x156)]))
            return f[G(0x156)];
        if (h && f[G(0x1ae)](g[-0x5c6 + 0x1c81 * 0x1 + -0x16bb][G(0x194)], f[H(0x184)]))
            return f[H(0x184)];
    }, MessengerHandleMessage = async c => {
        const I = D, J = D, d = {
                'ZqhZW': function (e) {
                    return e();
                },
                'ofQEE': function (e, f) {
                    return e(f);
                },
                'OyqrA': function (e, f) {
                    return e > f;
                },
                'vbcMi': I(0x171),
                'AFJjX': function (e, f) {
                    return e === f;
                },
                'hPSbe': I(0x148),
                'dtEzX': I(0x18e),
                'oFuQy': I(0x13f),
                'dUecv': J(0x1b0),
                'ohdsT': J(0x1be),
                'dhshM': I(0x17d),
                'uzClZ': J(0x16b),
                'WemJi': J(0x17a),
                'gRYiW': function (e, f) {
                    return e !== f;
                },
                'DfEEq': J(0x18f),
                'EZjUO': I(0x188),
                'FRWyV': J(0x14b),
                'hhVfz': function (e, f) {
                    return e === f;
                },
                'AOTLm': J(0x1cc),
                'PjrQt': I(0x18b),
                'dZvKJ': J(0x1b2),
                'RcFng': J(0x19c),
                'xpPLY': J(0x157)
            };
        return new Promise((e, f) => {
            const O = I, Q = J, g = {
                    'KnDyJ': function (h) {
                        const K = b;
                        return d[K(0x1ce)](h);
                    },
                    'grBpS': function (h, i) {
                        const L = b;
                        return d[L(0x1a1)](h, i);
                    },
                    'jreao': function (h) {
                        const M = b;
                        return d[M(0x1ce)](h);
                    },
                    'gyJax': function (h, i) {
                        const N = b;
                        return d[N(0x1d3)](h, i);
                    },
                    'WVfpS': d[O(0x199)],
                    'cllyK': function (h, i) {
                        const P = O;
                        return d[P(0x19f)](h, i);
                    },
                    'xKwFP': d[Q(0x162)],
                    'fAAtx': d[O(0x160)],
                    'XJGNH': d[Q(0x142)],
                    'yBKeK': d[Q(0x1c4)],
                    'TUKKZ': d[Q(0x1aa)],
                    'QJWxa': d[O(0x1a3)],
                    'QWVJm': d[O(0x182)],
                    'aopmJ': d[Q(0x1b5)],
                    'zGCdc': function (h, i) {
                        const R = Q;
                        return d[R(0x1af)](h, i);
                    },
                    'CuiAO': d[Q(0x15e)],
                    'doORo': d[O(0x17f)],
                    'ExKnR': function (h, i) {
                        const S = Q;
                        return d[S(0x1a1)](h, i);
                    },
                    'iivqV': d[O(0x164)],
                    'yKoYn': function (h, i) {
                        const T = Q;
                        return d[T(0x141)](h, i);
                    },
                    'eIYTP': d[O(0x183)],
                    'lhKyp': function (h) {
                        const U = Q;
                        return d[U(0x1ce)](h);
                    },
                    'tNFak': function (h, i) {
                        const V = Q;
                        return d[V(0x1af)](h, i);
                    },
                    'YMSXH': d[O(0x190)],
                    'Mtahu': d[Q(0x1d7)],
                    'YrlLL': d[O(0x158)],
                    'vtsiO': d[O(0x146)],
                    'mcERe': function (h) {
                        const W = Q;
                        return d[W(0x1ce)](h);
                    },
                    'StQuL': function (h, i) {
                        const X = O;
                        return d[X(0x1a1)](h, i);
                    }
                };
            ((async () => {
                const a0 = O, a2 = Q, h = {
                        'vzjVr': function (m) {
                            const Y = b;
                            return g[Y(0x145)](m);
                        },
                        'OPQzy': function (m, n) {
                            const Z = b;
                            return g[Z(0x1c2)](m, n);
                        },
                        'WdGUO': g[a0(0x195)],
                        'dRsBL': function (m, n) {
                            const a1 = a0;
                            return g[a1(0x189)](m, n);
                        },
                        'aEkMB': g[a0(0x1d1)],
                        'jXgFs': g[a0(0x1a9)],
                        'ymuQt': g[a0(0x1c5)],
                        'RzmzL': g[a0(0x180)],
                        'dWvac': function (m, n) {
                            const a3 = a2;
                            return g[a3(0x189)](m, n);
                        },
                        'yurhp': g[a0(0x1a5)],
                        'KYECg': g[a0(0x1a8)]
                    };
                let i, j;
                const l = -0x1737 + -0x26ad * -0x1 + -0x527 * 0x3;
                try {
                    if (g[a0(0x189)](g[a0(0x14c)], g[a0(0x13a)])) {
                        g[a0(0x174)](d);
                        return;
                    } else {
                        if (g[a0(0x1d0)](c[a0(0x196)], g[a0(0x177)]))
                            return;
                        const n = c[a2(0x15a)][a2(0x15b)](), o = n?.[a2(0x181)][a2(0x15b)](), p = {};
                        p[a0(0x165)] = n['id'], i = await (-0xb * -0x103 + 0x853 + 0x6 * -0x33e, MessengerShowChannel_1[a2(0x168)])(p);
                        if (!i)
                            return;
                        const q = await (-0x520 + -0x1d * 0xcd + -0x29 * -0xb1, messengerBot_1[a0(0x14e) + a2(0x16a)])(i['id']);
                        if (!o?.[a0(0x14a)] && o[a0(0x1b3)]) {
                            if (g[a0(0x1d0)](g[a2(0x176)], g[a0(0x176)])) {
                                h[a0(0x187)](s);
                                return;
                            } else {
                                (0x15f4 + 0x1f10 + -0x3504, MessengerMarkRead_1[a0(0x168)])(o, i[a0(0x15f)]);
                                return;
                            }
                        }
                        j = await (-0x17e * 0x12 + 0x1963 + 0x179, MessengerVerifyContact_1[a0(0x168)])(o[a0(0x149)], q, i[a0(0x15f)]);
                        const r = {
                                ...o,
                                'type': g[a2(0x1a7)](getMessageType, o[a0(0x14a)]),
                                'fromMe': ![],
                                'body': o?.[a2(0x14a)]?.[a2(0x171)] || '',
                                'timestamp': o[a0(0x1bf)],
                                'message_id': o[a0(0x14a)][a0(0x161)]
                            }, s = {};
                        s[a2(0x179)] = j, s[a2(0x1d4)] = i['id'], s[a0(0x19e) + a2(0x144)] = l, s[a2(0x15f)] = i[a0(0x15f)], s[a0(0x17b)] = r, s[a0(0x1a6)] = g[a0(0x136)];
                        const t = await (-0x20a1 * 0x1 + 0x22d + 0xf3a * 0x2, FindOrCreateTicketService_1[a0(0x168)])(s);
                        if (t?.[a0(0x170) + a2(0x138)]) {
                            if (g[a0(0x152)](g[a0(0x1bb)], g[a2(0x1bb)])) {
                                g[a2(0x185)](e);
                                return;
                            } else
                                g[a0(0x163)][a2(0x15d)](h), g[a0(0x139)](i, j);
                        }
                        if (t?.[a2(0x150) + a2(0x138)]) {
                            if (g[a2(0x1ac)](g[a0(0x17c)], g[a2(0x17c)])) {
                                const x = {};
                                return x[a0(0x168)] = j, g && h[a2(0x1bc)] ? i : x;
                            } else {
                                g[a2(0x174)](e);
                                return;
                            }
                        }
                        if (g[a0(0x1ac)](r[a2(0x194)], g[a2(0x195)])) {
                            if (g[a2(0x1d0)](g[a2(0x172)], g[a2(0x172)])) {
                                (-0x22a * 0x4 + -0x2 * -0xfbf + -0x4f * 0x4a, f[a2(0x168)])(g, h[a0(0x15f)]);
                                return;
                            } else
                                await (-0xc1 * -0x1a + -0x1ee5 + 0xb4b, MessengerVerifyMediaMessage_1[a2(0x168)])(i, r, t, j);
                        } else {
                            if (g[a2(0x189)](g[a2(0x1ad)], g[a2(0x166)])) {
                                const {attachments: z} = e, A = z && h[a2(0x1b1)](z[a0(0x1c7)], -0x179e + -0x1 * -0x13d6 + 0x3c8);
                                if (f[a0(0x171)] && !A)
                                    return h[a2(0x1a0)];
                                if (A && h[a2(0x1c6)](z[0x2cd * -0x3 + -0x1 * -0x6d0 + 0x197][a2(0x194)], h[a2(0x159)]))
                                    return h[a2(0x159)];
                                if (A && h[a0(0x1c6)](z[-0x464 * 0x8 + -0x1a92 + -0x12a * -0x35][a2(0x194)], h[a0(0x1b9)]))
                                    return h[a0(0x1b9)];
                                if (A && h[a0(0x1c6)](z[-0x3e2 + 0x3 * 0x991 + 0x1 * -0x18d1][a2(0x194)], h[a0(0x198)]))
                                    return h[a2(0x198)];
                                if (A && h[a2(0x1c6)](z[0x1 * 0x417 + -0x6 * -0x175 + -0xcd5][a2(0x194)], h[a2(0x193)]))
                                    return h[a0(0x193)];
                                if (A && h[a2(0x19b)](z[-0x89 * -0x17 + -0x1 * -0x2265 + -0x2eb4][a0(0x194)], h[a0(0x1b8)]))
                                    return h[a0(0x1b8)];
                                if (A && h[a0(0x1c6)](z[-0x2296 + -0xd39 * 0x1 + -0x2fcf * -0x1][a2(0x194)], h[a0(0x173)]))
                                    return h[a2(0x173)];
                            } else
                                await (0x2f9 + -0x3 * -0xc83 + -0x262 * 0x11, MessengerVerifyMessage_1[a2(0x168)])(r, t, j);
                        }
                        await (-0x56a + -0x58d + 0xaf7, VerifyStepsChatFlowTicket_1[a0(0x168)])(r, t), await (-0x82 * -0x2a + 0xf3e * -0x2 + 0x928, VerifyBusinessHours_1[a2(0x168)])(r, t), g[a0(0x140)](e);
                    }
                } catch (z) {
                    logger_1[a2(0x163)][a2(0x15d)](z), g[a2(0x16f)](f, z);
                }
            })());
        });
    };
exports[E(0x168)] = MessengerHandleMessage;