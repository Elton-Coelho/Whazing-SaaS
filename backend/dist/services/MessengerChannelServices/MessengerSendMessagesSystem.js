'use strict';
const S = b, T = b;
(function (c, d) {
    const Q = b, R = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(Q(0x1eb)) / (-0x10af * -0x2 + 0x1 * 0x2405 + 0x6b * -0xa6) * (parseInt(R(0x1cc)) / (-0x1e54 + 0xdac + 0x10aa)) + parseInt(R(0x1d5)) / (0x1 * -0x23a9 + 0x918 * -0x3 + -0x3b4 * -0x11) * (parseInt(Q(0x1bc)) / (-0x1346 + -0x14ed + 0x2837)) + -parseInt(R(0x18b)) / (-0x13 * 0x21 + 0x1 * -0x215b + 0x23d3) * (-parseInt(R(0x1c5)) / (0x122 * -0x1b + 0x162b + -0x871 * -0x1)) + parseInt(R(0x1e9)) / (-0x99f * 0x2 + -0x870 + 0x1bb5) + -parseInt(Q(0x183)) / (-0x138e + 0x2118 + -0xd82) * (-parseInt(R(0x1b9)) / (-0x1 * -0xb73 + 0x114d + -0x1cb7 * 0x1)) + -parseInt(Q(0x191)) / (-0x18da * -0x1 + 0xcd3 * -0x1 + 0x3ff * -0x3) * (parseInt(R(0x17e)) / (-0x212c + 0x4ef * 0x1 + 0x1c48)) + -parseInt(Q(0x190)) / (0x4f7 * 0x5 + 0x19e4 + 0x7 * -0x73d);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0xa182f + -0x7b79 + -0x21f6f));
var __importDefault = this && this[S(0x1bd) + S(0x17c)] || function (c) {
    const U = T;
    return c && c[U(0x1bb)] ? c : { 'default': c };
};
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0xd * -0x5d + 0x1327 + -0x1a * 0xdd);
        let h = e[f];
        return h;
    }, b(c, d);
}
const q = {};
function a() {
    const Z = [
        'sequelize',
        'chat',
        'ack',
        'contact',
        'ryoXM',
        'findAll',
        'sendAudio',
        '../../mode',
        'ASC',
        'FjIaV',
        'ls/Message',
        'toBuffer',
        'image',
        'text',
        'public',
        'Message\x20Up',
        'qdxBO',
        'ticket',
        'fluent-ffm',
        'mediaName',
        'ers/socket',
        'sendText',
        'NRGmB',
        'JUDFk',
        ')::\x20',
        'rBFOj',
        'path',
        '\x20|\x20Ticket:',
        'log',
        'file',
        'messageId',
        'update',
        '968985pgIuIC',
        'date\x20ok',
        '__esModule',
        '117652TSMRVx',
        '__importDe',
        'closed',
        'KEBWA',
        'id:\x20',
        'value',
        'age\x20is\x20(te',
        'mp4',
        'readFile',
        '78hGOtBZ',
        's/sleepRan',
        's/logger',
        'sendImage',
        'erty',
        'Error\x20mess',
        'mediaUrl',
        '92jfYRdH',
        'iTDew',
        'mTime',
        'end',
        'akxUH',
        'sleepRando',
        'VBvgH',
        'ls/Ticket',
        'tenantId',
        '99adQdUl',
        'defineProp',
        'default',
        'logger',
        'AAOIK',
        'where',
        'filename',
        'video',
        'eJTtO',
        'error',
        'applicatio',
        'document',
        'Error\x20send',
        'fs/promise',
        'PqRtW',
        'type',
        'jpeg',
        'pending',
        'sendVideo',
        'toFormat',
        '6719979QGCjQl',
        'sended',
        '11914edwatC',
        '../../util',
        'iZXdc',
        'ntnWI',
        'TXQnR',
        'audio',
        'Emit',
        'payload',
        'oSorY',
        'vwVYF',
        'GSLQm',
        'rTDfL',
        'ptt',
        'kDQWo',
        'nant:\x20',
        'EsCLR',
        '../../help',
        'join',
        'JNQwO',
        'saveToFile',
        'createdAt',
        'quotedMsg',
        'fault',
        'lte',
        '66HMnbiH',
        'dataValues',
        'peg',
        'HmcMG',
        '.mp4',
        '8BWArCj',
        'sendFile',
        'info',
        'includes',
        'chat:ack',
        'yepAZ',
        'messenger',
        'body',
        '65470ZviMSe',
        'BdRXa',
        '\x20message\x20(',
        'mediaType',
        'domTime',
        '17620512LWmLoU',
        '1328930gJqEBw',
        'dsJoc',
        'timestamp',
        'ygOLO',
        'messengerI',
        'split',
        'status',
        'sharp'
    ];
    a = function () {
        return Z;
    };
    return a();
}
q[T(0x1c1)] = !![], Object[T(0x1d6) + T(0x1c9)](exports, S(0x1bb), q);
const promises_1 = require(S(0x1e2) + 's'), fluent_ffmpeg_1 = __importDefault(require(T(0x1ab) + S(0x180))), path_1 = require(T(0x1b3)), sequelize_1 = require(S(0x199)), sharp_1 = __importDefault(require(T(0x198))), socketEmit_1 = __importDefault(require(T(0x176) + T(0x1ad) + T(0x1f1))), Message_1 = __importDefault(require(S(0x1a0) + S(0x1a3))), Ticket_1 = __importDefault(require(S(0x1a0) + S(0x1d3))), logger_1 = require(T(0x1ec) + S(0x1c7)), sleepRandomTime_1 = require(T(0x1ec) + T(0x1c6) + S(0x18f)), MessengerSendMessagesSystem = async (l, m) => {
        const V = S, W = T, n = {
                'VBvgH': V(0x1c3),
                'AAOIK': V(0x1de),
                'iZXdc': W(0x1cf),
                'rTDfL': V(0x1e6),
                'GSLQm': V(0x19c),
                'EsCLR': V(0x1aa),
                'iTDew': V(0x1be),
                'FjIaV': V(0x189),
                'JUDFk': W(0x17b),
                'oSorY': W(0x17a),
                'NRGmB': W(0x1a1),
                'rBFOj': W(0x19a),
                'ryoXM': V(0x1a6),
                'BdRXa': W(0x1a7),
                'dsJoc': function (t, u) {
                    return t === u;
                },
                'HmcMG': W(0x1f0),
                'PqRtW': function (t, u) {
                    return t === u;
                },
                'ygOLO': V(0x172),
                'yepAZ': function (t, u) {
                    return t === u;
                },
                'ntnWI': W(0x1a5),
                'akxUH': W(0x1dc),
                'qdxBO': W(0x1df) + 'n',
                'eJTtO': V(0x1b6),
                'kDQWo': V(0x1e0),
                'JNQwO': W(0x1ea),
                'TXQnR': W(0x187),
                'vwVYF': W(0x1a8) + V(0x1ba),
                'KEBWA': function (t, u) {
                    return t(u);
                }
            }, o = { [sequelize_1['Op']['is']]: null }, p = {
                'fromMe': !![],
                'messageId': o,
                'status': n[W(0x171)],
                [sequelize_1['Op']['or']]: [
                    { 'scheduleDate': { [sequelize_1['Op'][V(0x17d)]]: new Date() } },
                    { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
                ]
            }, r = await Message_1[V(0x1d7)][V(0x19e)]({
                'where': p,
                'include': [
                    n[V(0x170)],
                    {
                        'model': Ticket_1[W(0x1d7)],
                        'as': n[V(0x175)],
                        'where': {
                            'tenantId': m,
                            [sequelize_1['Op']['or']]: {
                                'status': { [sequelize_1['Op']['ne']]: n[V(0x1cd)] },
                                'isFarewellMessage': !![]
                            },
                            'channel': n[V(0x1a2)],
                            'whatsappId': l['id']
                        },
                        'include': [n[W(0x170)]]
                    },
                    {
                        'model': Message_1[V(0x1d7)],
                        'as': n[W(0x1b0)],
                        'include': [n[V(0x170)]]
                    }
                ],
                'order': [[
                        n[W(0x16e)],
                        n[W(0x1af)]
                    ]]
            });
        let s;
        for (const t of r) {
            const u = t, {ticket: v} = u, w = v[V(0x19c)][V(0x195) + 'd'];
            try {
                if (![
                        n[V(0x1b2)],
                        n[V(0x19d)]
                    ][W(0x186)](u[W(0x18e)]) && u[V(0x1ac)]) {
                    const D = (-0x359 * -0x3 + 0x6f0 * -0x3 + 0xac5, path_1[V(0x177)])(__dirname, '..', '..', '..', n[V(0x18c)]), E = (0x87e * -0x1 + -0x62f + 0xead, path_1[W(0x177)])(D, u[V(0x1ac)]), F = await (-0x5f6 + 0x3b6 + 0x240, promises_1[W(0x1c4)])(E);
                    console[V(0x1b5)](E);
                    if (n[W(0x192)](u[V(0x18e)], n[V(0x181)]) || n[W(0x1e3)](u[V(0x18e)], n[V(0x194)])) {
                        const G = u[V(0x1ac)][W(0x196)]('.'), H = (-0x16 + -0x4 * -0x3 + 0xa, path_1[W(0x177)])(D, G[0x830 + 0x1c65 + -0x2495 * 0x1] + V(0x182));
                        await new Promise((J, K) => {
                            const X = W, Y = V;
                            (0x18e * -0x9 + 0xeb7 + -0xb9, fluent_ffmpeg_1[X(0x1d7)])(E)[Y(0x1e8)](n[Y(0x1d2)])['on'](n[Y(0x1d9)], L => K(L))['on'](n[Y(0x1ed)], () => J(!![]))[Y(0x179)](H);
                        });
                        const I = await (0x10ea + 0x334 + -0x141e * 0x1, promises_1[W(0x1c4)])(H);
                        s = await l[V(0x19f)](w, I);
                    }
                    if (n[W(0x188)](u[V(0x18e)], n[V(0x1ee)])) {
                        const J = await (0xad3 + -0xa * -0x369 + 0x1f * -0x173, sharp_1[W(0x1d7)])(F)[W(0x1e5)]()[V(0x1a4)](), K = {};
                        K[V(0x1db)] = u[V(0x1ac)], s = await l[V(0x1c8)](w, J, K);
                    }
                    if (n[W(0x188)](u[W(0x18e)], n[W(0x1d0)])) {
                        const L = {};
                        L[W(0x1db)] = u[W(0x1ac)], s = await l[V(0x1e7)](w, F, L);
                    }
                    if ([
                            n[W(0x1a9)],
                            n[W(0x1dd)],
                            n[V(0x173)]
                        ][W(0x186)](u[V(0x18e)])) {
                        const M = {};
                        M[W(0x1db)] = u[V(0x1ac)], s = await l[W(0x184)](w, F, M);
                    }
                }
                [
                    n[V(0x1b2)],
                    n[V(0x19d)]
                ][V(0x186)](u[W(0x18e)]) && !u[V(0x1ac)] && (s = await l[V(0x1ae)](w, u[V(0x18a)]));
                const x = {
                    ...u,
                    ...s
                };
                x['id'] = u['id'], x[V(0x193)] = u[V(0x193)], x[V(0x1b7)] = s[W(0x1b7)], x[W(0x197)] = n[V(0x178)], x[W(0x19b)] = 0x2;
                const y = x, z = { ...y }, A = {};
                A['id'] = u['id'];
                const B = {};
                B[W(0x1da)] = A, await Message_1[W(0x1d7)][V(0x1b8)](z, B);
                const C = {};
                C[W(0x1d4)] = v[V(0x1d4)], C[W(0x1e4)] = n[V(0x1ef)], C[W(0x1f2)] = { ...u[V(0x17f)] }, C[W(0x1f2)][W(0x1cb)] = u[W(0x1cb)], C[W(0x1f2)]['id'] = u['id'], C[W(0x1f2)][W(0x193)] = u[V(0x193)], C[W(0x1f2)][W(0x1b7)] = s[W(0x1b7)], C[W(0x1f2)][W(0x197)] = n[W(0x178)], C[W(0x1f2)][W(0x19b)] = 0x2, (0x1b * 0x14e + 0x133d + -0x3677, socketEmit_1[W(0x1d7)])(C), logger_1[V(0x1d8)][W(0x185)](n[V(0x16f)]), await (-0x2479 * -0x1 + 0x2 * -0x946 + -0x11ed, sleepRandomTime_1[W(0x1d1) + V(0x1ce)])({
                    'minMilliseconds': n[W(0x1bf)](Number, -0x1 * 0x31f + 0x617 * -0x6 + 0x299d),
                    'maxMilliseconds': n[V(0x1bf)](Number, -0x1cce + -0x1e2b + 0x40d5)
                });
            } catch (N) {
                const O = u['id'], P = u[W(0x1aa)]['id'];
                logger_1[V(0x1d8)][V(0x1de)](V(0x1ca) + W(0x1c2) + W(0x174) + m + (W(0x1b4) + '\x20') + P + ')'), logger_1[V(0x1d8)][W(0x1de)](W(0x1e1) + W(0x18d) + W(0x1c0) + O + W(0x1b1) + N);
            }
        }
    };
exports[S(0x1d7)] = MessengerSendMessagesSystem;