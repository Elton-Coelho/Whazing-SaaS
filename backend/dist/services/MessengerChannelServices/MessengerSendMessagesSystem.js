'use strict';
const S = b, T = b;
(function (c, d) {
    const Q = b, R = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(Q(0xd6)) / (0x2152 + -0x96c + -0x17e5) * (-parseInt(Q(0xf5)) / (-0x1f23 + 0xa * -0xc2 + -0x1 * -0x26b9)) + parseInt(Q(0x88)) / (0x7 * -0x1e9 + -0x1776 + 0x24d8) * (-parseInt(R(0x96)) / (-0x1b65 + -0x1 * -0x1e3b + 0x169 * -0x2)) + -parseInt(Q(0xc9)) / (0x1854 + -0x1c58 + 0x409 * 0x1) * (parseInt(R(0x7f)) / (0x40d + -0x1f47 + 0x1b40)) + parseInt(R(0xa5)) / (-0xd7e + 0x1fed + -0x1268) + parseInt(Q(0x100)) / (-0x1e29 + -0x1219 * 0x1 + -0x2 * -0x1825) * (-parseInt(R(0xc7)) / (0x31 * -0x51 + 0x1 * 0x698 + 0x8f2)) + -parseInt(Q(0xbc)) / (-0x166 * -0xb + 0x5 * -0x373 + 0x1e7) * (-parseInt(Q(0x98)) / (-0x1283 + 0x1e00 + -0xa * 0x125)) + -parseInt(R(0xad)) / (-0x13 * 0x15b + 0x139d + -0x2 * -0x318) * (-parseInt(R(0xd5)) / (0x1 * 0x24ed + 0x4 * 0x80 + 0x4dc * -0x8));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x413ba + 0x10084 * -0x1 + 0x6864));
var __importDefault = this && this[S(0xb1) + S(0x101)] || function (c) {
    const U = S;
    return c && c[U(0x94)] ? c : { 'default': c };
};
const q = {};
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0xf7e * -0x2 + -0x2219 + 0x4191);
        let h = e[f];
        return h;
    }, b(c, d);
}
q[S(0xbb)] = !![], Object[T(0x8b) + S(0xbe)](exports, S(0x94), q);
function a() {
    const Z = [
        'ls/Message',
        'uEzQl',
        'age\x20is\x20(te',
        'timestamp',
        'toFormat',
        'chat',
        '2QsRQUi',
        'sended',
        's/sleepRan',
        'closed',
        'image',
        'sendImage',
        'VyFFq',
        'cXfYA',
        'ers/socket',
        'FUELs',
        'RlMou',
        '3050832GPoUpw',
        'fault',
        'createdAt',
        'error',
        'jpeg',
        '444948nJJkQc',
        'sYbom',
        'mJvOz',
        'PBqlp',
        'toBuffer',
        'fluent-ffm',
        'sendVideo',
        'path',
        'Error\x20send',
        '10743nfBMSv',
        'dataValues',
        'aNkyr',
        'defineProp',
        'fs/promise',
        'audio',
        'gdCiI',
        'body',
        'log',
        '../../help',
        'ptt',
        's/logger',
        '__esModule',
        '../../util',
        '376EdvlFa',
        'quotedMsg',
        '956890oqmLZe',
        'update',
        'file',
        '\x20message\x20(',
        'messageId',
        'video',
        'id:\x20',
        'document',
        'join',
        'ZJdjk',
        'XFOiQ',
        'ls/Ticket',
        '.mp4',
        '116662vGtcpt',
        'status',
        'sleepRando',
        'date\x20ok',
        '\x20|\x20Ticket:',
        'mediaType',
        'Message\x20Up',
        'domTime',
        '1956516qJOTyP',
        'meXCs',
        'mp4',
        'lte',
        '__importDe',
        'rYqwz',
        'tUdjh',
        'ack',
        'nant:\x20',
        'sequelize',
        'rDECu',
        'end',
        'findAll',
        'messenger',
        'value',
        '50fxzpmv',
        'jeftR',
        'erty',
        'info',
        'contact',
        'split',
        'chat:ack',
        'Emit',
        'public',
        'text',
        'applicatio',
        '9qsCtdc',
        'sendText',
        '15yPuCTN',
        'messengerI',
        'includes',
        'JnQci',
        'filename',
        'peg',
        'ZmhYm',
        'type',
        'nMRIl',
        'smwrA',
        'sendFile',
        'logger',
        '39NYncNc',
        '227947HJaYVD',
        ')::\x20',
        'QRdyh',
        'where',
        'pending',
        'default',
        'payload',
        'Error\x20mess',
        'sharp',
        'ILJll',
        'wLPuk',
        '../../mode',
        'mTime',
        'mediaName',
        'ybMgS',
        'sendAudio',
        'tenantId',
        'JAgVa',
        'readFile',
        'ASC',
        'saveToFile',
        'hflQi',
        'ticket',
        'miRsG',
        'mediaUrl'
    ];
    a = function () {
        return Z;
    };
    return a();
}
const promises_1 = require(T(0x8c) + 's'), fluent_ffmpeg_1 = __importDefault(require(S(0x84) + T(0xce))), path_1 = require(T(0x86)), sequelize_1 = require(T(0xb6)), sharp_1 = __importDefault(require(T(0xde))), socketEmit_1 = __importDefault(require(T(0x91) + T(0xfd) + T(0xc3))), Message_1 = __importDefault(require(T(0xe1) + T(0xef))), Ticket_1 = __importDefault(require(S(0xe1) + T(0xa3))), logger_1 = require(T(0x95) + S(0x93)), sleepRandomTime_1 = require(T(0x95) + T(0xf7) + T(0xac)), MessengerSendMessagesSystem = async (l, m) => {
        const V = T, W = T, n = {
                'meXCs': V(0xaf),
                'JAgVa': V(0x7d),
                'FUELs': W(0xb8),
                'uEzQl': V(0xda),
                'rDECu': V(0xc0),
                'ybMgS': W(0xec),
                'cXfYA': W(0xf8),
                'mJvOz': V(0xba),
                'ZmhYm': W(0x97),
                'gdCiI': W(0x7c),
                'ILJll': V(0xe9),
                'QRdyh': V(0xf4),
                'jeftR': V(0xc5),
                'RlMou': V(0xc4),
                'miRsG': function (t, u) {
                    return t === u;
                },
                'wLPuk': W(0x8d),
                'smwrA': function (t, u) {
                    return t === u;
                },
                'nMRIl': W(0x92),
                'JnQci': function (t, u) {
                    return t === u;
                },
                'ZJdjk': W(0xf9),
                'hflQi': V(0x9d),
                'XFOiQ': W(0xc6) + 'n',
                'rYqwz': V(0x9a),
                'PBqlp': V(0x9f),
                'aNkyr': V(0xf6),
                'sYbom': W(0xc2),
                'tUdjh': V(0xab) + V(0xa8),
                'VyFFq': function (t, u) {
                    return t(u);
                }
            }, o = { [sequelize_1['Op']['is']]: null }, p = {
                'fromMe': !![],
                'messageId': o,
                'status': n[V(0xf0)],
                [sequelize_1['Op']['or']]: [
                    { 'scheduleDate': { [sequelize_1['Op'][V(0xb0)]]: new Date() } },
                    { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
                ]
            }, r = await Message_1[V(0xdb)][W(0xb9)]({
                'where': p,
                'include': [
                    n[V(0xb7)],
                    {
                        'model': Ticket_1[W(0xdb)],
                        'as': n[V(0xe4)],
                        'where': {
                            'tenantId': m,
                            [sequelize_1['Op']['or']]: {
                                'status': { [sequelize_1['Op']['ne']]: n[W(0xfc)] },
                                'isFarewellMessage': !![]
                            },
                            'channel': n[W(0x81)],
                            'whatsappId': l['id']
                        },
                        'include': [n[W(0xb7)]]
                    },
                    {
                        'model': Message_1[V(0xdb)],
                        'as': n[V(0xcf)],
                        'include': [n[W(0xb7)]]
                    }
                ],
                'order': [[
                        n[V(0x8e)],
                        n[V(0xdf)]
                    ]]
            });
        let s;
        for (const t of r) {
            const u = t, {ticket: v} = u, w = v[V(0xc0)][W(0xca) + 'd'];
            try {
                if (![
                        n[W(0xd8)],
                        n[W(0xbd)]
                    ][W(0xcb)](u[W(0xaa)]) && u[W(0xe3)]) {
                    const D = (0x1d87 + -0x17ba + -0x5cd, path_1[W(0xa0)])(__dirname, '..', '..', '..', n[W(0xff)]), E = (0xb * 0x2cf + -0x11fe + -0xce7, path_1[W(0xa0)])(D, u[W(0xe3)]), F = await (0xdbe + -0xa93 * 0x1 + 0x32b * -0x1, promises_1[V(0xe8)])(E);
                    console[V(0x90)](E);
                    if (n[W(0xed)](u[V(0xaa)], n[W(0xe0)]) || n[W(0xd2)](u[V(0xaa)], n[V(0xd1)])) {
                        const G = u[W(0xe3)][W(0xc1)]('.'), H = (0x2687 * 0x1 + -0x1763 + -0xf24, path_1[V(0xa0)])(D, G[-0x261f + 0x113f + 0x14e0] + W(0xa4));
                        await new Promise((J, K) => {
                            const X = V, Y = V;
                            (-0x1bac + -0x3 * 0x6fe + 0x30a6, fluent_ffmpeg_1[X(0xdb)])(E)[X(0xf3)](n[Y(0xae)])['on'](n[Y(0xe7)], L => K(L))['on'](n[X(0xfe)], () => J(!![]))[Y(0xea)](H);
                        });
                        const I = await (0x6a * 0x8 + 0xc3a + -0x66 * 0x27, promises_1[V(0xe8)])(H);
                        s = await l[V(0xe5)](w, I);
                    }
                    if (n[V(0xcc)](u[V(0xaa)], n[V(0xa1)])) {
                        const J = await (-0x23e + 0x963 + -0x725, sharp_1[V(0xdb)])(F)[W(0x7e)]()[W(0x83)](), K = {};
                        K[V(0xcd)] = u[W(0xe3)], s = await l[V(0xfa)](w, J, K);
                    }
                    if (n[W(0xd2)](u[V(0xaa)], n[W(0xeb)])) {
                        const L = {};
                        L[V(0xcd)] = u[W(0xe3)], s = await l[V(0x85)](w, F, L);
                    }
                    if ([
                            n[W(0xa2)],
                            n[V(0xb2)],
                            n[W(0x82)]
                        ][V(0xcb)](u[V(0xaa)])) {
                        const M = {};
                        M[V(0xcd)] = u[V(0xe3)], s = await l[W(0xd3)](w, F, M);
                    }
                }
                [
                    n[W(0xd8)],
                    n[W(0xbd)]
                ][V(0xcb)](u[W(0xaa)]) && !u[W(0xe3)] && (s = await l[V(0xc8)](w, u[W(0x8f)]));
                const x = {
                    ...u,
                    ...s
                };
                x['id'] = u['id'], x[V(0xf2)] = u[V(0xf2)], x[W(0x9c)] = s[V(0x9c)], x[V(0xa6)] = n[V(0x8a)], x[W(0xb4)] = 0x2;
                const y = x, z = { ...y }, A = {};
                A['id'] = u['id'];
                const B = {};
                B[V(0xd9)] = A, await Message_1[V(0xdb)][W(0x99)](z, B);
                const C = {};
                C[V(0xe6)] = v[V(0xe6)], C[W(0xd0)] = n[W(0x80)], C[V(0xdc)] = { ...u[W(0x89)] }, C[V(0xdc)][V(0xee)] = u[W(0xee)], C[V(0xdc)]['id'] = u['id'], C[V(0xdc)][W(0xf2)] = u[W(0xf2)], C[V(0xdc)][V(0x9c)] = s[W(0x9c)], C[V(0xdc)][V(0xa6)] = n[W(0x8a)], C[V(0xdc)][V(0xb4)] = 0x2, (-0x18 * -0x9b + 0x10d * 0x22 + 0x3242 * -0x1, socketEmit_1[W(0xdb)])(C), logger_1[W(0xd4)][W(0xbf)](n[W(0xb3)]), await (-0x1 * 0xd5f + -0xf88 + 0x7 * 0x421, sleepRandomTime_1[V(0xa7) + V(0xe2)])({
                    'minMilliseconds': n[V(0xfb)](Number, -0x2 * -0x557 + -0xfc3 + 0x709),
                    'maxMilliseconds': n[V(0xfb)](Number, -0x700 + 0x2 * -0x13d + 0xf56)
                });
            } catch (N) {
                const O = u['id'], P = u[W(0xec)]['id'];
                logger_1[W(0xd4)][V(0x7d)](W(0xdd) + V(0xf1) + V(0xb5) + m + (W(0xa9) + '\x20') + P + ')'), logger_1[W(0xd4)][V(0x7d)](V(0x87) + W(0x9b) + V(0x9e) + O + W(0xd7) + N);
            }
        }
    };
exports[T(0xdb)] = MessengerSendMessagesSystem;