'use strict';
const a3 = b, a4 = b;
(function (c, d) {
    const a1 = b, a2 = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(a1(0xa5)) / (0x116 + 0x35d + -0x1 * 0x472) * (-parseInt(a1(0xd1)) / (0x2 * 0x853 + -0x362 + -0xd42)) + parseInt(a1(0x105)) / (0x179b + 0x860 + -0x1ff8) * (parseInt(a2(0xf9)) / (-0xfe * -0x26 + 0x16a6 + 0x1 * -0x3c56)) + parseInt(a2(0x10b)) / (-0x1 * -0xe0e + 0x1150 * -0x2 + -0x1 * -0x1497) * (-parseInt(a1(0x111)) / (0xe3 * -0x22 + -0x15b4 * -0x1 + -0x878 * -0x1)) + parseInt(a1(0xf8)) / (-0xe26 * 0x2 + -0xca0 + -0x1 * -0x28f3) * (-parseInt(a1(0x104)) / (-0x73d + 0xcb5 * -0x1 + -0x9fd * -0x2)) + -parseInt(a1(0xfc)) / (0x1d * -0xc1 + -0x180f + 0x2df5) + -parseInt(a2(0xe6)) / (0x710 + 0x1a9 + -0x8af) * (parseInt(a2(0x11b)) / (0x12fc + -0x349 * 0x2 + -0xc5f)) + parseInt(a1(0x9f)) / (-0x26a0 + -0x1013 * 0x1 + 0x36bf) * (parseInt(a2(0xd6)) / (-0x15d7 + 0x664 + 0x1f0 * 0x8));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x11 * 0x981a + 0x72fd5 + 0xeb6dd));
var __importDefault = this && this[a3(0xb1) + a4(0xd5)] || function (c) {
    const a5 = a4;
    return c && c[a5(0xd4)] ? c : { 'default': c };
};
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x2 * -0xf22 + -0x8 * -0x421 + 0x3 * -0x14e5);
        let h = e[f];
        return h;
    }, b(c, d);
}
const k = {};
k[a3(0xf4)] = !![], Object[a4(0xf1) + a3(0xe3)](exports, a3(0xd4), k);
function a() {
    const a8 = [
        'FTWSS',
        '5oTtUIi',
        'oldStatus',
        'KET_FOUND',
        'LJdTW',
        'autoReplyI',
        'rs/AppErro',
        '2995494qEyMcj',
        'payload',
        'ls/User',
        'mFzel',
        'TNMnr',
        'stepAutoRe',
        'uTBLq',
        'status',
        'ansfer',
        'SpvPp',
        '891oEhgNZ',
        'closedAt',
        'fwKGj',
        'vcoxA',
        'YBwDj',
        'whatsapp',
        '49652844PmDeIJ',
        'dIILv',
        'pending',
        'queueId',
        'ticketId',
        'wallets',
        '1sidmGX',
        'LeyHP',
        'ticket:upd',
        'ExBcf',
        'KsFJM',
        'ence',
        'MOPUW',
        'update',
        'tags',
        'notificati',
        'receivedTr',
        'name',
        '__importDe',
        'ers/socket',
        'userId',
        'ontactOpen',
        'on:new',
        'extraInfo',
        'isDeleted',
        '../../erro',
        'where',
        'Lzeei',
        'ls/Contact',
        'gVIdv',
        'VdFIa',
        'iwzbs',
        'aTszz',
        './CreateLo',
        'gTicketSer',
        'model',
        'nfFeP',
        'fgjAM',
        'Tickets',
        'vice',
        'feNYC',
        'XgfaV',
        'getTime',
        'setDataVal',
        'VQcSr',
        'legjE',
        'isTransfer',
        'tenantId',
        'EaMBP',
        '../../mode',
        '1680402kYtAnE',
        'attributes',
        'OuOGF',
        '__esModule',
        'fault',
        '13kDoHTV',
        'AoFXh',
        'default',
        'YesmG',
        'HArKF',
        'close',
        'FcqfX',
        'findOne',
        'ers/SetTic',
        'associatio',
        'iKevk',
        'CJXtY',
        'ls/Ticket',
        'erty',
        'nWiSN',
        'user',
        '81780uwqdjh',
        'EHccw',
        'ate',
        'WWHQq',
        'open',
        'closed',
        'WyYQX',
        'endanceAt',
        'plyId',
        'gqgWA',
        'type',
        'defineProp',
        'contact',
        'ers/CheckC',
        'value',
        'startedAtt',
        'oldUserId',
        '../../help',
        '11543BYrGeD',
        '19736iQNUqe',
        'include',
        'ketMessage',
        '13731732wqAhsS',
        'ticket',
        'transfered',
        'sAsRead',
        'Emit',
        'DlSBG',
        'ERR_NO_TIC',
        'fwlMO',
        '5288lkiNSI',
        '762BxBhiE',
        'reload',
        'PUlnJ',
        'uTtpP',
        'QcTVt'
    ];
    a = function () {
        return a8;
    };
    return a();
}
const AppError_1 = __importDefault(require(a3(0xb8) + a3(0x110) + 'r')), CheckContactOpenTickets_1 = __importDefault(require(a4(0xf7) + a3(0xf3) + a4(0xb4) + a3(0xc5))), SetTicketMessagesAsRead_1 = __importDefault(require(a3(0xf7) + a3(0xde) + a4(0xfb) + a3(0xff))), Contact_1 = __importDefault(require(a4(0xd0) + a4(0xbb))), Ticket_1 = __importDefault(require(a3(0xd0) + a3(0xe2))), User_1 = __importDefault(require(a4(0xd0) + a4(0x113))), socketEmit_1 = __importDefault(require(a3(0xf7) + a3(0xb2) + a3(0x100))), CreateLogTicketService_1 = __importDefault(require(a4(0xc0) + a3(0xc1) + a3(0xc6))), UpdateTicketService = async ({
        ticketData: s,
        ticketId: t,
        isTransference: u,
        userIdRequest: v
    }) => {
        const a6 = a4, a7 = a3, w = {};
        w[a6(0xe7)] = a7(0xae) + a7(0xb5), w[a7(0x107)] = a7(0x102) + a6(0x10d), w[a7(0xec)] = a6(0xf2), w[a6(0xe0)] = a6(0xb6), w[a6(0xe1)] = a6(0xad), w[a6(0x114)] = a7(0xa4), w[a7(0xbe)] = a7(0xb0), w[a7(0xcf)] = a6(0xe5), w[a7(0xa9)] = a7(0x9e), w[a7(0xe4)] = a7(0xb7), w[a6(0xdc)] = function (Q, R) {
            return Q === R;
        }, w[a6(0xd9)] = a7(0xc4), w[a7(0x11a)] = function (Q, R) {
            return Q !== R;
        }, w[a6(0x103)] = a6(0xa1), w[a6(0xcb)] = function (Q, R) {
            return Q === R;
        }, w[a6(0x117)] = function (Q, R) {
            return Q === R;
        }, w[a6(0xbf)] = a7(0xeb), w[a6(0x10a)] = function (Q, R) {
            return Q === R;
        }, w[a7(0xa8)] = a6(0xd3), w[a6(0xcc)] = a6(0xc3), w[a6(0xa0)] = function (Q, R) {
            return Q === R;
        }, w[a7(0x108)] = a7(0xdb), w[a7(0xda)] = function (Q, R) {
            return Q === R;
        }, w[a6(0x11e)] = a7(0xef), w[a7(0xc8)] = function (Q, R) {
            return Q === R;
        }, w[a6(0xab)] = function (Q, R) {
            return Q === R;
        }, w[a7(0xbd)] = a7(0xea), w[a7(0x101)] = function (Q, R) {
            return Q === R;
        }, w[a6(0x109)] = a7(0xa6), w[a7(0x9d)] = function (Q, R) {
            return Q === R;
        }, w[a6(0xd7)] = a7(0x115), w[a6(0xbc)] = a6(0x10e), w[a6(0xc7)] = a7(0xfe), w[a6(0x11d)] = a7(0xaf) + a6(0x119), w[a7(0xe9)] = a7(0xcd) + a7(0xaa), w[a7(0xba)] = a7(0xa7) + a6(0xe8);
        const x = w, {
                status: y,
                userId: z,
                tenantId: A,
                queueId: B
            } = s, C = {};
        C['id'] = t, C[a6(0xce)] = A;
        const D = {};
        D[a6(0xc2)] = Contact_1[a7(0xd8)], D['as'] = x[a6(0xec)], D[a6(0xfa)] = [
            x[a6(0xe0)],
            x[a7(0xe1)],
            {
                'association': x[a6(0x114)],
                'attributes': [
                    'id',
                    x[a7(0xbe)]
                ]
            }
        ];
        const E = {};
        E[a7(0xc2)] = User_1[a6(0xd8)], E['as'] = x[a7(0xcf)], E[a6(0xd2)] = [
            'id',
            x[a7(0xbe)]
        ];
        const F = {};
        F[a7(0xdf) + 'n'] = x[a7(0xa9)], F[a6(0xd2)] = [
            'id',
            x[a6(0xbe)],
            x[a6(0xe4)]
        ];
        const G = {};
        G[a7(0xb9)] = C, G[a6(0xfa)] = [
            D,
            E,
            F
        ];
        const H = await Ticket_1[a7(0xd8)][a6(0xdd)](G);
        if (!H) {
            if (x[a6(0xdc)](x[a7(0xd9)], x[a6(0xd9)]))
                throw new AppError_1[(a6(0xd8))](x[a7(0x107)], -0x2 * 0x6cd + -0xc49 + -0x4f * -0x59);
            else
                F[a7(0x10f) + 'd'] = null, G[a7(0x116) + a7(0xee)] = null, M[a7(0xf5) + a7(0xed)] = new j()[a6(0xc9)]();
        }
        await (-0x804 + 0x1035 + -0x831, SetTicketMessagesAsRead_1[a7(0xd8)])(H);
        const I = x[a7(0x11a)](H[a6(0x118)], x[a6(0x103)]) && x[a7(0xcb)](s[a6(0x118)], x[a7(0x103)]), J = H[a7(0x118)], K = H[a6(0xe5)]?.['id'];
        x[a6(0x117)](J, x[a6(0xbf)]) && (x[a7(0x10a)](x[a7(0xa8)], x[a7(0xcc)]) ? D[a7(0x11c)] = new E()[a7(0xc9)]() : await (-0x963 * 0x1 + -0x1d * -0x6e + 0x1 * -0x313, CheckContactOpenTickets_1[a7(0xd8)])(H[a6(0xf2)]['id']));
        const L = x[a6(0xa0)](y, x[a7(0x108)]) ? x[a7(0xbf)] : y, M = {};
        M[a7(0x118)] = L, M[a6(0xa2)] = B, M[a6(0xb3)] = z;
        const N = M;
        if (x[a6(0xa0)](L, x[a6(0xbf)])) {
            if (x[a7(0xda)](x[a7(0x11e)], x[a6(0x11e)]))
                N[a7(0x11c)] = new Date()[a7(0xc9)]();
            else {
                const T = {};
                return T[a7(0xd8)] = T, F && G[a6(0xd4)] ? M : T;
            }
        }
        if (x[a7(0xc8)](J, x[a7(0x103)]) && x[a6(0xab)](L, x[a7(0xbd)])) {
            if (x[a6(0x101)](x[a6(0x109)], x[a7(0x109)]))
                N[a6(0x10f) + 'd'] = null, N[a6(0x116) + a7(0xee)] = null, N[a7(0xf5) + a6(0xed)] = new Date()[a7(0xc9)]();
            else {
                const U = {};
                U[a7(0xce)] = F, U[a7(0xf0)] = x[a6(0xe7)], U[a6(0x112)] = G, (0xbb * -0x17 + -0x9b8 + 0x1a85, E[a7(0xd8)])(U);
            }
        }
        await H[a6(0xac)](N);
        if (x[a6(0xa0)](J, x[a7(0x103)]) && x[a6(0x117)](L, x[a6(0xbd)])) {
            if (x[a6(0x9d)](x[a7(0xd7)], x[a6(0xbc)]))
                throw new C[(a6(0xd8))](x[a6(0x107)], 0xafd * -0x2 + 0x4 * 0x435 + 0x6ba);
            else {
                const V = {};
                V[a7(0xb3)] = v, V[a7(0xa3)] = t, V[a7(0xf0)] = x[a7(0xbd)], await (-0x12d9 + -0x439 * -0x7 + -0xab6, CreateLogTicketService_1[a7(0xd8)])(V);
            }
        }
        if (x[a7(0xdc)](L, x[a6(0xbf)])) {
            const W = {};
            W[a7(0xb3)] = v, W[a7(0xa3)] = t, W[a6(0xf0)] = x[a7(0xbf)], await (0x22a9 * 0x1 + -0x1d2 * -0x10 + -0x3fc9, CreateLogTicketService_1[a6(0xd8)])(W);
        }
        if (x[a7(0xa0)](J, x[a7(0xbd)]) && x[a7(0xda)](L, x[a7(0x103)])) {
            const X = {};
            X[a6(0xb3)] = v, X[a7(0xa3)] = t, X[a6(0xf0)] = x[a7(0x103)], await (0x169 * -0x4 + 0x222 + 0x382, CreateLogTicketService_1[a7(0xd8)])(X);
        }
        if (u) {
            const Y = {};
            Y[a7(0xb3)] = v, Y[a6(0xa3)] = t, Y[a7(0xf0)] = x[a6(0xc7)], await (-0xe03 + -0xb * 0x29f + 0xc * 0x392, CreateLogTicketService_1[a6(0xd8)])(Y);
            if (z) {
                const Z = {};
                Z[a6(0xb3)] = z, Z[a6(0xa3)] = t, Z[a6(0xf0)] = x[a7(0x11d)], await (0x20 * 0x9d + 0x1 * 0x24d9 + -0x3879, CreateLogTicketService_1[a7(0xd8)])(Z);
            }
        }
        await H[a6(0x106)]();
        u && await H[a7(0xca) + 'ue'](x[a6(0xe9)], !![]);
        if (I) {
            const a0 = {};
            a0[a7(0xce)] = A, a0[a7(0xf0)] = x[a7(0xe7)], a0[a7(0x112)] = H, (-0x21c6 + 0x1e0 + -0xaa2 * -0x3, socketEmit_1[a7(0xd8)])(a0);
        }
        const O = {};
        O[a6(0xce)] = A, O[a7(0xf0)] = x[a7(0xba)], O[a6(0x112)] = H, (0x240f + -0xc * -0x1f3 + -0x3b73, socketEmit_1[a6(0xd8)])(O);
        const P = {};
        return P[a6(0xfd)] = H, P[a6(0x10c)] = J, P[a7(0xf6)] = K, P;
    };
exports[a4(0xd8)] = UpdateTicketService;