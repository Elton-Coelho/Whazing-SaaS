'use strict';
const a3 = b, a4 = b;
(function (c, d) {
    const a1 = b, a2 = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(a1(0xa4)) / (-0x1ca8 + -0x1 * -0xda7 + -0xe2 * -0x11) + parseInt(a2(0x9c)) / (-0x1 * 0x2198 + 0xd * -0x20e + -0x182 * -0x28) * (parseInt(a1(0xeb)) / (-0x1b19 * -0x1 + 0x964 + -0x1 * 0x247a)) + -parseInt(a1(0xca)) / (-0x233e + 0x1592 * -0x1 + 0x1c6a * 0x2) * (-parseInt(a1(0xd3)) / (-0x1948 + -0x3 * -0x8f + 0x17a0)) + -parseInt(a2(0xde)) / (0x5 * 0x493 + -0x12c1 * -0x1 + -0x299a) * (-parseInt(a1(0x10f)) / (0x1556 + -0x392 + -0x1 * 0x11bd)) + -parseInt(a2(0xb2)) / (-0xada + 0x2700 + -0x1c1e) + parseInt(a2(0xd4)) / (0x4cd * 0x1 + 0xd1 * 0x20 + 0x4 * -0x7b9) * (-parseInt(a2(0x109)) / (-0x50 * 0x16 + 0xdc9 + 0x6df * -0x1)) + -parseInt(a2(0xe3)) / (0x1 * 0x1a7b + -0xdf5 + -0xc7b) * (-parseInt(a1(0x102)) / (0xb26 * 0x1 + -0xa19 + 0x1 * -0x101));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x17e5e + -0x27e6 * -0x24 + 0x1d26c));
function a() {
    const a8 = [
        'status',
        'closed',
        'ketMessage',
        '236396RFXdYB',
        'default',
        'qeqad',
        'VeAgD',
        'where',
        'closedAt',
        'include',
        'ontactOpen',
        'qhtbI',
        'associatio',
        'DosPQ',
        'whatsapp',
        'YUSZa',
        'oldUserId',
        '6686296AcyuCq',
        'contact',
        'fxqJt',
        'name',
        'tVwST',
        'model',
        'AKDLn',
        'NCBqF',
        'ticket',
        'NIDRR',
        'zEFMP',
        'isDeleted',
        'CKJCf',
        'KGRVc',
        'gTicketSer',
        'erty',
        'KET_FOUND',
        'ls/Contact',
        'open',
        'shWqN',
        'VcRSV',
        'ate',
        'receivedTr',
        'rLsTh',
        '1936kprHeL',
        'mdhZL',
        'payload',
        'Tickets',
        'enQaO',
        'ticket:upd',
        'MGftV',
        'update',
        'pending',
        '7465vBeggN',
        '8136ESXxxr',
        'attributes',
        'notificati',
        'wdBxd',
        'RzeYF',
        'GcRAA',
        'NikhD',
        'ewifJ',
        'rBuQA',
        'userId',
        '273918JjeEfY',
        'isTransfer',
        'stepAutoRe',
        'getTime',
        'ls/Ticket',
        '308OtjZLg',
        'SJYcv',
        'plyId',
        'fault',
        'eeeKU',
        'syLlR',
        'close',
        './CreateLo',
        '30NPzSyD',
        'tags',
        'oldStatus',
        'setDataVal',
        'type',
        'ticketId',
        'HckgQ',
        '../../mode',
        'ls/User',
        'LBXJQ',
        'startedAtt',
        'ansfer',
        'PGwXK',
        'transfered',
        '../../help',
        'findOne',
        'tenantId',
        'rs/AppErro',
        'value',
        'extraInfo',
        'eVwjN',
        '__importDe',
        'zsrOn',
        '148692OHiDzW',
        'sAsRead',
        'ERR_NO_TIC',
        'endanceAt',
        'lcRKo',
        'ers/SetTic',
        'DQIMj',
        '5770SonWJx',
        'queueId',
        'HBiJR',
        'user',
        'baLOl',
        'vice',
        '35zRcsQB',
        'autoReplyI',
        'ers/CheckC',
        'qfxdt',
        'mxXVE',
        'Emit',
        '../../erro',
        '__esModule',
        'on:new',
        'reload',
        'defineProp',
        'fYZRE',
        'OYXrw',
        '176192DQlknB',
        'guKYl',
        'ers/socket',
        'wallets',
        'ence'
    ];
    a = function () {
        return a8;
    };
    return a();
}
var __importDefault = this && this[a3(0x100) + a4(0xe6)] || function (c) {
    const a5 = a4;
    return c && c[a5(0x96)] ? c : { 'default': c };
};
const k = {};
k[a4(0xfd)] = !![], Object[a3(0x99) + a4(0xc1)](exports, a4(0x96), k);
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x1360 + -0xa * 0x181 + -0x22fe * -0x1);
        let h = e[f];
        return h;
    }, b(c, d);
}
const AppError_1 = __importDefault(require(a4(0x95) + a4(0xfc) + 'r')), CheckContactOpenTickets_1 = __importDefault(require(a4(0xf9) + a4(0x111) + a4(0xab) + a4(0xcd))), SetTicketMessagesAsRead_1 = __importDefault(require(a4(0xf9) + a3(0x107) + a3(0xa3) + a3(0x103))), Contact_1 = __importDefault(require(a3(0xf2) + a4(0xc3))), Ticket_1 = __importDefault(require(a4(0xf2) + a4(0xe2))), User_1 = __importDefault(require(a3(0xf2) + a4(0xf3))), socketEmit_1 = __importDefault(require(a3(0xf9) + a4(0x9e) + a4(0x94))), CreateLogTicketService_1 = __importDefault(require(a4(0xea) + a3(0xc0) + a3(0x10e))), UpdateTicketService = async ({
        ticketData: s,
        ticketId: t,
        isTransference: u,
        userIdRequest: v
    }) => {
        const a6 = a4, a7 = a3, w = {};
        w[a6(0x113)] = a6(0xd6) + a6(0x97), w[a6(0xc5)] = a6(0x104) + a6(0xc2), w[a6(0xd7)] = a6(0xb3), w[a6(0xce)] = a7(0xfe), w[a6(0xb9)] = a6(0xec), w[a6(0xbc)] = a6(0x9f), w[a7(0xbf)] = a7(0xb5), w[a7(0xac)] = a6(0x10c), w[a7(0xb8)] = a7(0xaf), w[a6(0xe7)] = a6(0xbd), w[a6(0xb6)] = function (Q, R) {
            return Q !== R;
        }, w[a6(0x108)] = a7(0xf7), w[a6(0x10b)] = function (Q, R) {
            return Q !== R;
        }, w[a7(0xdb)] = a6(0xd2), w[a7(0xdc)] = function (Q, R) {
            return Q === R;
        }, w[a6(0x9a)] = function (Q, R) {
            return Q === R;
        }, w[a6(0xae)] = a6(0xa2), w[a6(0x112)] = function (Q, R) {
            return Q === R;
        }, w[a6(0xda)] = a7(0xe4), w[a7(0x9b)] = function (Q, R) {
            return Q === R;
        }, w[a6(0xcb)] = a7(0xe9), w[a7(0xa6)] = a7(0x9d), w[a7(0xff)] = a6(0xc4), w[a7(0xb4)] = function (Q, R) {
            return Q === R;
        }, w[a6(0xb0)] = a7(0xe8), w[a7(0xd9)] = function (Q, R) {
            return Q === R;
        }, w[a6(0xd0)] = function (Q, R) {
            return Q === R;
        }, w[a6(0xbe)] = a6(0x106), w[a6(0xf4)] = a6(0xd8), w[a7(0x10d)] = function (Q, R) {
            return Q === R;
        }, w[a6(0xf1)] = function (Q, R) {
            return Q === R;
        }, w[a7(0xa7)] = function (Q, R) {
            return Q === R;
        }, w[a6(0xc6)] = a7(0xf8), w[a6(0xc9)] = a7(0xc8) + a7(0xf6), w[a7(0x101)] = a7(0xdf) + a7(0xa0), w[a6(0xbb)] = a6(0xcf) + a7(0xc7);
        const x = w, {
                status: y,
                userId: z,
                tenantId: A,
                queueId: B
            } = s, C = {};
        C['id'] = t, C[a7(0xfb)] = A;
        const D = {};
        D[a6(0xb7)] = Contact_1[a7(0xa5)], D['as'] = x[a7(0xd7)], D[a7(0xaa)] = [
            x[a7(0xce)],
            x[a6(0xb9)],
            {
                'association': x[a7(0xbc)],
                'attributes': [
                    'id',
                    x[a6(0xbf)]
                ]
            }
        ];
        const E = {};
        E[a7(0xb7)] = User_1[a7(0xa5)], E['as'] = x[a7(0xac)], E[a6(0xd5)] = [
            'id',
            x[a6(0xbf)]
        ];
        const F = {};
        F[a7(0xad) + 'n'] = x[a7(0xb8)], F[a6(0xd5)] = [
            'id',
            x[a7(0xbf)],
            x[a6(0xe7)]
        ];
        const G = {};
        G[a7(0xa8)] = C, G[a6(0xaa)] = [
            D,
            E,
            F
        ];
        const H = await Ticket_1[a7(0xa5)][a6(0xfa)](G);
        if (!H) {
            if (x[a7(0xb6)](x[a7(0x108)], x[a7(0x108)])) {
                const R = {};
                return R[a6(0xa5)] = j, F && G[a6(0x96)] ? R : R;
            } else
                throw new AppError_1[(a6(0xa5))](x[a7(0xc5)], 0x1 * 0x31d + -0x3d * 0x11 + -0xa1 * -0x4);
        }
        await (-0x1c1 + -0x1 * 0x118d + 0x2 * 0x9a7, SetTicketMessagesAsRead_1[a7(0xa5)])(H);
        const I = x[a7(0x10b)](H[a7(0xa1)], x[a7(0xdb)]) && x[a7(0xdc)](s[a6(0xa1)], x[a6(0xdb)]), J = H[a7(0xa1)], K = H[a6(0x10c)]?.['id'];
        x[a6(0x9a)](J, x[a6(0xae)]) && (x[a6(0x112)](x[a6(0xda)], x[a6(0xda)]) ? await (0x504 + -0x1b80 + -0x167c * -0x1, CheckContactOpenTickets_1[a7(0xa5)])(H[a6(0xb3)]['id']) : D[a6(0xa9)] = new E()[a6(0xe1)]());
        const L = x[a7(0x9b)](y, x[a6(0xcb)]) ? x[a7(0xae)] : y, M = {};
        M[a6(0xa1)] = L, M[a7(0x10a)] = B, M[a7(0xdd)] = z;
        const N = M;
        if (x[a7(0xdc)](L, x[a7(0xae)])) {
            if (x[a6(0xdc)](x[a7(0xa6)], x[a6(0xa6)]))
                N[a6(0xa9)] = new Date()[a7(0xe1)]();
            else {
                const T = {};
                T[a7(0xfb)] = F, T[a7(0xef)] = x[a7(0x113)], T[a7(0xcc)] = G, (-0xc1e + -0x233a * -0x1 + -0x171c, E[a7(0xa5)])(T);
            }
        }
        x[a7(0xdc)](J, x[a6(0xdb)]) && x[a7(0x112)](L, x[a7(0xff)]) && (x[a7(0xb4)](x[a6(0xb0)], x[a6(0xb0)]) ? (N[a7(0x110) + 'd'] = null, N[a6(0xe0) + a7(0xe5)] = null, N[a7(0xf5) + a6(0x105)] = new Date()[a6(0xe1)]()) : (F[a7(0x110) + 'd'] = null, G[a6(0xe0) + a7(0xe5)] = null, M[a7(0xf5) + a7(0x105)] = new j()[a7(0xe1)]()));
        await H[a6(0xd1)](N);
        if (x[a7(0x9b)](J, x[a7(0xdb)]) && x[a6(0xd9)](L, x[a7(0xff)])) {
            if (x[a6(0xd0)](x[a6(0xbe)], x[a7(0xf4)]))
                throw new C[(a6(0xa5))](x[a6(0xc5)], 0x7 * 0x1 + -0x40 * -0x6d + 0x183 * -0x11);
            else {
                const V = {};
                V[a6(0xdd)] = v, V[a7(0xf0)] = t, V[a7(0xef)] = x[a6(0xff)], await (-0x2 * 0x3b3 + -0x1154 * -0x2 + -0x1b42, CreateLogTicketService_1[a6(0xa5)])(V);
            }
        }
        if (x[a7(0x10d)](L, x[a7(0xae)])) {
            const W = {};
            W[a7(0xdd)] = v, W[a6(0xf0)] = t, W[a7(0xef)] = x[a6(0xae)], await (0x2e * 0x53 + -0x17aa + 0x140 * 0x7, CreateLogTicketService_1[a6(0xa5)])(W);
        }
        if (x[a6(0xf1)](J, x[a7(0xff)]) && x[a7(0xa7)](L, x[a6(0xdb)])) {
            const X = {};
            X[a7(0xdd)] = v, X[a6(0xf0)] = t, X[a7(0xef)] = x[a7(0xdb)], await (-0x22f7 + 0x875 + 0x1a82, CreateLogTicketService_1[a7(0xa5)])(X);
        }
        if (u) {
            const Y = {};
            Y[a6(0xdd)] = v, Y[a7(0xf0)] = t, Y[a7(0xef)] = x[a7(0xc6)], await (-0x2 * -0xb9d + 0xe3b + 0xdf * -0x2b, CreateLogTicketService_1[a6(0xa5)])(Y);
            if (z) {
                const Z = {};
                Z[a7(0xdd)] = z, Z[a7(0xf0)] = t, Z[a7(0xef)] = x[a6(0xc9)], await (-0x361 * 0x5 + 0x1b03 + -0x25 * 0x46, CreateLogTicketService_1[a6(0xa5)])(Z);
            }
        }
        await H[a6(0x98)]();
        u && await H[a6(0xee) + 'ue'](x[a6(0x101)], !![]);
        if (I) {
            const a0 = {};
            a0[a6(0xfb)] = A, a0[a7(0xef)] = x[a6(0x113)], a0[a6(0xcc)] = H, (0x962 + -0x1093 * 0x1 + 0x731, socketEmit_1[a6(0xa5)])(a0);
        }
        const O = {};
        O[a7(0xfb)] = A, O[a6(0xef)] = x[a7(0xbb)], O[a6(0xcc)] = H, (-0x23e9 + 0x2158 + -0x3 * -0xdb, socketEmit_1[a7(0xa5)])(O);
        const P = {};
        return P[a6(0xba)] = H, P[a7(0xed)] = J, P[a6(0xb1)] = K, P;
    };
exports[a3(0xa5)] = UpdateTicketService;