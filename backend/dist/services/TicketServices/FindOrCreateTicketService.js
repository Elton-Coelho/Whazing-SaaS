'use strict';
const aE = b, aF = b;
(function (c, d) {
    const aC = b, aD = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(aC(0x16b)) / (-0x1ee0 + -0x1c6e + 0x3b4f) * (parseInt(aD(0x176)) / (0x27f * -0xa + -0x52 * 0x1 + 0x86e * 0x3)) + -parseInt(aC(0x14f)) / (-0x6be * -0x3 + 0x13 * -0xfd + -0x170) + parseInt(aC(0x162)) / (0x3e * 0x5e + 0x1 * 0x1bb6 + -0x3276) + -parseInt(aC(0x13a)) / (-0x146e + -0x274 * -0x7 + 0x347) + parseInt(aC(0x105)) / (-0x1917 + -0xd7c + 0x2699) * (parseInt(aC(0x158)) / (-0x2513 * -0x1 + -0x3 * 0x8dd + 0x1 * -0xa75)) + parseInt(aD(0x126)) / (0xc31 + 0x8 * -0x144 + -0x209) + parseInt(aC(0xe6)) / (-0xdde + 0x144 + -0x5 * -0x287) * (-parseInt(aD(0xe7)) / (0x1 * -0x1c1b + -0x1e14 + 0x1 * 0x3a39));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0xbf9d7 + 0x13 * -0x4a65 + -0xcff * -0x1a));
var __importDefault = this && this[aE(0x14d) + aE(0xec)] || function (c) {
    const aG = aE;
    return c && c[aG(0xe3)] ? c : { 'default': c };
};
const s = {};
function a() {
    const aJ = [
        'xvoPA',
        'queueId',
        'sequelize',
        'nLBST',
        'isDeleted',
        'pending',
        'fromMe',
        'Welcome',
        'value',
        'YvAxu',
        'ZpmvK',
        'vices/help',
        '8022640SZtAWS',
        'tFhIw',
        'where',
        'isCreated',
        'waba',
        'order',
        'nContacts',
        'aOXgY',
        'sage',
        'AzIzQ',
        'XaoAc',
        'extraInfo',
        'oWGlQ',
        'dmCiW',
        'ZsIlx',
        'ers/Verify',
        'kdKmE',
        'whatsappId',
        'gTicketSer',
        'wallets',
        '2848025RlCZlX',
        'ywZYc',
        'nxNXR',
        'mRahm',
        './CreateLo',
        'instagram',
        'ls/Campaig',
        'okiKw',
        'isCampaign',
        'name',
        'TTRfd',
        'telegram',
        'DESC',
        'update',
        'WzyYH',
        'mYZYP',
        'startedAtt',
        'jCROS',
        'type',
        '__importDe',
        'ticketId',
        '679182WLOAqh',
        'updatedAt',
        'hatBotFlow',
        'MxcKm',
        'yFnOb',
        'channel',
        'PYwUf',
        'ticket:upd',
        'user',
        '427nJshqr',
        'ykJiA',
        'ContactBai',
        'associatio',
        'isGroup',
        'etService',
        'body',
        'ehmJr',
        'Ranoo',
        'VFVbH',
        '259704rGlPvp',
        'IpQMA',
        'unreadMess',
        'AsbOd',
        'MkRwN',
        'tenantId',
        'ls/User',
        'jbbUb',
        'ls/Contact',
        '149882TayKmE',
        'ticket',
        'Message',
        'sService',
        'yOMxm',
        'IUckW',
        'lCXTi',
        'contactId',
        'key',
        'includes',
        'find',
        '2XtqymZ',
        'payload',
        'tags',
        'leys',
        'NDhuj',
        '../../mode',
        'YuQba',
        'open',
        'SUGME',
        'whatsapp',
        'EZGoR',
        'include',
        'QxmdB',
        'GLzyf',
        'getTime',
        'JgfGV',
        'messenger',
        'contact',
        'nEakc',
        'ers/CheckC',
        'EjxCa',
        'ages',
        'kQWJq',
        'enabled',
        '../Setting',
        'Emit',
        'getBodyMes',
        '__esModule',
        'defineProp',
        'lastMessag',
        '900sdoHux',
        '45460JkjyMa',
        'findOne',
        'FcMlL',
        'istSetting',
        '../../help',
        'fault',
        'ls/Whatsap',
        'EXNGG',
        'IKSwy',
        'uOzmP',
        'DirectTick',
        'endanceAt',
        'ls/Ticket',
        'status',
        'XYmfF',
        'IwVgC',
        'default',
        'VjtcX',
        'ate',
        'hdpTJ',
        'getWallets',
        'ls/Message',
        'messageId',
        'niYXi',
        'eJrzs',
        'VtRPj',
        'erty',
        'InxgR',
        'OEjPy',
        'isFarewell',
        '82842lDmfcu',
        './ShowTick',
        'model',
        'setDataVal',
        'userId',
        'attributes',
        'create',
        '../WbotSer',
        'etsToWalle',
        'Services/L',
        'closed',
        'EyJfr',
        'lSWuD',
        'ZwMha',
        'xLheV',
        'rpNPU',
        'UGpTO',
        'vice',
        'otEeK',
        'ers/socket',
        'dLLpV'
    ];
    a = function () {
        return aJ;
    };
    return a();
}
s[aE(0x122)] = !![], Object[aE(0xe4) + aF(0x101)](exports, aF(0xe3), s);
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x4 * -0x1d3 + 0x2227 * -0x1 + -0x2a56 * -0x1);
        let h = e[f];
        return h;
    }, b(c, d);
}
const sequelize_1 = require(aF(0x11c)), Contact_1 = __importDefault(require(aE(0x17b) + aE(0x16a))), Ticket_1 = __importDefault(require(aE(0x17b) + aE(0xf3))), User_1 = __importDefault(require(aF(0x17b) + aE(0x168))), ShowTicketService_1 = __importDefault(require(aF(0x106) + aE(0x15d))), CampaignContacts_1 = __importDefault(require(aF(0x17b) + aF(0x140) + aE(0x12c))), socketEmit_1 = __importDefault(require(aF(0xeb) + aE(0x118) + aE(0x18f))), CheckChatBotFlowWelcome_1 = __importDefault(require(aE(0xeb) + aE(0x189) + aF(0x151) + aE(0x121))), CreateLogTicketService_1 = __importDefault(require(aE(0x13e) + aF(0x138) + aF(0x116))), Message_1 = __importDefault(require(aF(0x17b) + aF(0xfc))), ListSettingsService_1 = __importDefault(require(aE(0x18e) + aE(0x10e) + aF(0xea) + aE(0x16e))), Whatsapp_1 = __importDefault(require(aF(0x17b) + aE(0xed) + 'p')), VerifyContactBaileys_1 = require(aE(0x10c) + aE(0x125) + aE(0x135) + aE(0x15a) + aE(0x179)), FindOrCreateTicketService = async ({
        contact: G,
        whatsappId: H,
        unreadMessages: I,
        tenantId: J,
        groupContact: K,
        msg: L,
        isSync: M,
        channel: N
    }) => {
        const aH = aE, aI = aE, O = {};
        O[aH(0x153)] = aH(0x17d), O[aH(0xf5)] = function (a8, a9) {
            return a8 === a9;
        }, O[aI(0xff)] = aH(0x13f), O[aI(0x114)] = function (a8, a9) {
            return a8 !== a9;
        }, O[aI(0x127)] = aH(0xf6), O[aH(0x182)] = aI(0x148), O[aH(0x115)] = aH(0x166), O[aI(0xfe)] = function (a8, a9) {
            return a8 === a9;
        }, O[aH(0x152)] = aI(0x17f), O[aH(0x130)] = aH(0x103), O[aI(0x16f)] = aI(0x171), O[aI(0xf0)] = aH(0x149), O[aH(0x170)] = aH(0x110), O[aI(0x113)] = aH(0x136), O[aI(0x188)] = aH(0x163), O[aH(0x17a)] = aH(0x16c), O[aI(0x180)] = function (a8, a9) {
            return a8 === a9;
        }, O[aI(0x134)] = aH(0x10f), O[aI(0x12f)] = function (a8, a9) {
            return a8 === a9;
        }, O[aI(0xee)] = aH(0x18a), O[aH(0x13b)] = aH(0x13c), O[aH(0x111)] = aI(0x11f), O[aH(0xef)] = aH(0x187), O[aH(0x133)] = aH(0x131), O[aH(0x112)] = aI(0x178), O[aH(0x119)] = aH(0x139), O[aH(0x144)] = aH(0x143), O[aI(0x183)] = aI(0x157), O[aI(0x155)] = aH(0x11e), O[aI(0x14b)] = aI(0x15f), O[aI(0x132)] = aH(0x117), O[aI(0x18c)] = aH(0x145), O[aH(0x102)] = aH(0x12a), O[aH(0x160)] = aH(0x186), O[aH(0x13d)] = function (a8, a9) {
            return a8 > a9;
        }, O[aI(0x141)] = aH(0x156) + aI(0xf9), O[aI(0x11a)] = function (a8, a9) {
            return a8 !== a9;
        }, O[aI(0xe9)] = aI(0xfa), O[aI(0xf8)] = aI(0x123), O[aI(0x17c)] = aI(0x150), O[aH(0x12d)] = aH(0x146), O[aI(0x169)] = function (a8, a9) {
            return a8 === a9;
        }, O[aI(0x11d)] = aH(0x124), O[aI(0x17e)] = aI(0x159), O[aH(0x165)] = aI(0x18d), O[aI(0x161)] = aI(0x10b), O[aI(0x100)] = function (a8, a9) {
            return a8 && a9;
        }, O[aI(0x185)] = aH(0x129);
        const P = O;
        let Q;
        P[aI(0xf5)](N, P[aI(0xff)]) ? P[aH(0x114)](P[aI(0x127)], P[aI(0x182)]) ? Q = L[aI(0x120)] : e[aH(0x109)] = f[aH(0x109)] : P[aH(0xf5)](P[aH(0x115)], P[aH(0x115)]) ? Q = L[aI(0x173)][aI(0x120)] : (R[aH(0x109)] && (o[aH(0x109)] = p[aH(0x109)]), U[aH(0x11b)] && (q[aH(0x11b)] = r[aI(0x11b)]));
        if (P[aI(0xfe)](N, P[aH(0x152)]) && L && Q) {
            if (P[aI(0xfe)](P[aH(0x130)], P[aI(0x16f)]))
                e = f[aI(0x173)][aH(0x120)];
            else {
                const ab = {};
                ab[aI(0x172)] = G['id'], ab[aI(0xfd)] = L[aH(0x173)]?.['id'];
                const ac = {};
                ac[aI(0x128)] = ab;
                const ad = await CampaignContacts_1[aI(0xf7)][aH(0xe8)](ac);
                if (ad?.['id']) {
                    if (P[aI(0x114)](P[aH(0xf0)], P[aH(0x170)])) {
                        const ae = {};
                        return ae[aI(0x142) + aI(0x16d)] = !![], ae;
                    } else
                        ac[aI(0x11b)] = f[aH(0x11b)];
                }
            }
        }
        if (L && L[aH(0x120)]) {
            if (P[aI(0xf5)](P[aI(0x113)], P[aH(0x188)])) {
                const ah = d[aH(0x16c)];
                return ah[aI(0x104) + aI(0x16d)] = !![], ah;
            } else {
                const ah = {};
                ah[aI(0xfd)] = L[aI(0x173)]?.['id'];
                const ai = {};
                ai[aH(0x128)] = ah, ai[aH(0x181)] = [P[aI(0x17a)]];
                const aj = await Message_1[aH(0xf7)][aH(0xe8)](ai);
                if (P[aH(0x180)](aj?.[aI(0x16c)]?.[aI(0xf4)], P[aH(0x134)]) && P[aI(0x180)](aj?.[aI(0x16c)][aI(0xe5) + 'e'], L[aI(0x15e)])) {
                    if (P[aI(0x12f)](P[aH(0xee)], P[aH(0x13b)])) {
                        const al = {};
                        return al[aI(0x142) + aH(0x16d)] = !![], al;
                    } else {
                        const al = aj[aH(0x16c)];
                        return al[aH(0x104) + aH(0x16d)] = !![], al;
                    }
                }
            }
        }
        const R = {
                [sequelize_1['Op']['or']]: [
                    P[aH(0x153)],
                    P[aH(0x111)]
                ]
            }, S = {};
        S[aI(0xf4)] = R, S[aH(0x167)] = J, S[aH(0x137)] = H, S[aH(0x172)] = K ? K['id'] : G['id'];
        const T = {};
        T[aI(0x107)] = Contact_1[aI(0xf7)], T['as'] = P[aI(0xef)], T[aI(0x181)] = [
            P[aI(0x133)],
            P[aH(0x112)],
            {
                'association': P[aH(0x119)],
                'attributes': [
                    'id',
                    P[aH(0x144)]
                ]
            }
        ];
        const U = {};
        U[aI(0x107)] = User_1[aI(0xf7)], U['as'] = P[aI(0x183)], U[aH(0x10a)] = [
            'id',
            P[aH(0x144)]
        ];
        const V = {};
        V[aI(0x15b) + 'n'] = P[aI(0x152)], V[aI(0x10a)] = [
            'id',
            P[aH(0x144)],
            P[aI(0x155)]
        ];
        const W = {};
        W[aH(0x128)] = S, W[aI(0x181)] = [
            T,
            U,
            V
        ];
        let X = await Ticket_1[aH(0xf7)][aI(0xe8)](W);
        if (X) {
            if (P[aH(0x114)](P[aH(0x14b)], P[aH(0x132)])) {
                I = [
                    P[aH(0x18c)],
                    P[aI(0x102)],
                    P[aH(0xff)],
                    P[aH(0x160)]
                ][aH(0x174)](N) && P[aH(0x13d)](I, 0x1 * -0x25b7 + 0xde2 * 0x2 + 0x9f3) ? I += X[aH(0x164) + aH(0x18b)] : I;
                const am = {};
                am[aH(0x164) + aH(0x18b)] = I, await X[aH(0x147)](am);
                const an = {};
                return an[aI(0x167)] = J, an[aI(0x14c)] = P[aH(0x141)], an[aH(0x177)] = X, (-0xd3 * -0x11 + 0x1 * 0x26c9 + 0x1a66 * -0x2, socketEmit_1[aI(0xf7)])(an), X;
            } else
                e = f[aH(0x120)];
        }
        if (K) {
            if (P[aH(0x11a)](P[aH(0xe9)], P[aI(0xf8)])) {
                const ap = {};
                ap[aI(0x172)] = K['id'], ap[aH(0x167)] = J, ap[aH(0x137)] = H;
                const aq = {};
                aq[aH(0x128)] = ap, aq[aI(0x12b)] = [[
                        P[aH(0x17c)],
                        P[aH(0x12d)]
                    ]], aq[aH(0x181)] = [
                    {
                        'model': Contact_1[aH(0xf7)],
                        'as': P[aI(0xef)],
                        'include': [
                            P[aH(0x133)],
                            P[aI(0x112)],
                            {
                                'association': P[aH(0x119)],
                                'attributes': [
                                    'id',
                                    P[aI(0x144)]
                                ]
                            }
                        ]
                    },
                    {
                        'model': User_1[aH(0xf7)],
                        'as': P[aH(0x183)],
                        'attributes': [
                            'id',
                            P[aI(0x144)]
                        ]
                    },
                    {
                        'association': P[aH(0x152)],
                        'attributes': [
                            'id',
                            P[aH(0x144)],
                            P[aI(0x155)]
                        ]
                    }
                ], X = await Ticket_1[aI(0xf7)][aH(0xe8)](aq);
                if (X) {
                    if (P[aI(0x169)](P[aH(0x11d)], P[aH(0x17e)]))
                        h[aH(0xf4)] = P[aI(0x153)], R[aI(0x109)] = S[-0x7 * -0x48b + -0x1884 + -0x749]['id'], T[aI(0x14a) + aI(0xf2)] = new U()[aI(0x184)]();
                    else {
                        const as = {};
                        as[aI(0xf4)] = P[aI(0x111)], as[aH(0x109)] = null, as[aH(0x164) + aH(0x18b)] = I, await X[aH(0x147)](as);
                        const at = {};
                        return at[aI(0x167)] = J, at[aI(0x14c)] = P[aH(0x141)], at[aH(0x177)] = X, (-0x25a6 * -0x1 + -0xa3 * -0x26 + -0x8 * 0x7bb, socketEmit_1[aI(0xf7)])(at), X;
                    }
                }
            } else {
                const av = {};
                return av[aI(0xf7)] = S, g && h[aH(0xe3)] ? R : av;
            }
        } else {
            const av = {
                    [sequelize_1['Op']['in']]: [
                        P[aH(0x153)],
                        P[aI(0x111)]
                    ]
                }, aw = {};
            aw[aH(0xf4)] = av, aw[aI(0x167)] = J, aw[aH(0x137)] = H, aw[aH(0x172)] = G['id'];
            const ax = {};
            ax[aI(0x128)] = aw, ax[aH(0x12b)] = [[
                    P[aH(0x17c)],
                    P[aH(0x12d)]
                ]], ax[aI(0x181)] = [
                {
                    'model': Contact_1[aI(0xf7)],
                    'as': P[aH(0xef)],
                    'include': [
                        P[aH(0x133)],
                        P[aH(0x112)],
                        {
                            'association': P[aH(0x119)],
                            'attributes': [
                                'id',
                                P[aH(0x144)]
                            ]
                        }
                    ]
                },
                {
                    'model': User_1[aI(0xf7)],
                    'as': P[aH(0x183)],
                    'attributes': [
                        'id',
                        P[aH(0x144)]
                    ]
                },
                {
                    'association': P[aI(0x152)],
                    'attributes': [
                        'id',
                        P[aI(0x144)],
                        P[aI(0x155)]
                    ]
                }
            ], X = await Ticket_1[aI(0xf7)][aH(0xe8)](ax);
            if (X) {
                const ay = {};
                ay[aI(0xf4)] = P[aH(0x111)], ay[aI(0x109)] = null, ay[aI(0x164) + aH(0x18b)] = I, await X[aI(0x147)](ay);
                const az = {};
                return az[aH(0x167)] = J, az[aI(0x14c)] = P[aI(0x141)], az[aH(0x177)] = X, (-0x2d * 0xc2 + 0x1482 + 0x3a * 0x3c, socketEmit_1[aI(0xf7)])(az), X;
            }
        }
        const Y = P[aI(0x12f)]((await (0xe02 + -0x241e + 0x5 * 0x46c, ListSettingsService_1[aI(0xf7)])(J))?.[aH(0x175)](aA => aA[aI(0x173)] === aI(0xf1) + aH(0x10d) + 'ts')?.[aI(0x122)], P[aI(0x165)]) || ![], Z = {};
        Z[aI(0x172)] = K ? K['id'] : G['id'], Z[aH(0xf4)] = P[aH(0x111)], Z[aI(0x15c)] = !!K, Z[aI(0x164) + aH(0x18b)] = I, Z[aI(0x137)] = H, Z[aI(0x167)] = J, Z[aH(0x154)] = N;
        const a0 = Z, a1 = {};
        a1['id'] = H;
        const a2 = {};
        a2[aH(0x128)] = a1;
        const a3 = await Whatsapp_1[aI(0xf7)][aH(0xe8)](a2);
        a3 && (a3[aH(0x109)] && (a0[aH(0x109)] = a3[aI(0x109)]), a3[aH(0x11b)] && (a0[aH(0x11b)] = a3[aH(0x11b)]));
        if (Y && G['id']) {
            const aA = G, aB = await aA[aI(0xfb)]();
            aB && aB[-0x64c + 0x2379 + 0x61 * -0x4d]?.['id'] && (a0[aI(0xf4)] = P[aI(0x153)], a0[aI(0x109)] = aB[0x6 * 0x4a5 + 0x804 * -0x3 + 0x146 * -0x3]['id'], a0[aH(0x14a) + aH(0xf2)] = new Date()[aI(0x184)]());
        }
        L && (a0[aI(0xe5) + 'e'] = await (-0x2195 + -0x267d + 0x802 * 0x9, VerifyContactBaileys_1[aH(0x190) + aI(0x12e)])(L));
        const a4 = await Ticket_1[aH(0xf7)][aI(0x10b)](a0), a5 = {};
        a5[aH(0x14e)] = a4['id'], a5[aH(0x14c)] = P[aH(0x161)], await (0x1c03 + 0xd95 + 0xa66 * -0x4, CreateLogTicketService_1[aI(0xf7)])(a5);
        (P[aH(0x100)](L, !Q) || M) && await (0x211b + 0x625 * -0x2 + -0x14d1, CheckChatBotFlowWelcome_1[aH(0xf7)])(a4);
        const a6 = {};
        a6['id'] = a4['id'], a6[aI(0x167)] = J, X = await (0x105c + 0xefa * 0x2 + 0x4 * -0xb94, ShowTicketService_1[aI(0xf7)])(a6), X[aI(0x108) + 'ue'](P[aI(0x185)], !![]);
        const a7 = {};
        return a7[aH(0x167)] = J, a7[aI(0x14c)] = P[aI(0x141)], a7[aI(0x177)] = X, (-0x1 * 0xffb + -0x78a + -0x29d * -0x9, socketEmit_1[aI(0xf7)])(a7), X;
    };
exports[aF(0xf7)] = FindOrCreateTicketService;