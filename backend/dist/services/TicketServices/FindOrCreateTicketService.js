'use strict';
const aE = b, aF = b;
(function (c, d) {
    const aC = b, aD = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(aC(0x138)) / (-0x3bf + -0x1044 + 0x1404) + -parseInt(aD(0x11c)) / (0x1 * -0x281 + -0x5c1 + -0x5c * -0x17) * (parseInt(aC(0xf9)) / (0x1b7c + 0xf64 + 0x1 * -0x2add)) + parseInt(aD(0x119)) / (-0x1 * 0x7c7 + -0xac3 + -0xa * -0x1db) * (parseInt(aC(0x11b)) / (-0x10be + 0xd33 + 0x390)) + parseInt(aC(0xea)) / (0x2469 + -0x1892 + -0xbd1) * (parseInt(aC(0x139)) / (-0x16d1 + 0x2282 + -0xbaa)) + -parseInt(aD(0x158)) / (-0x1207 + -0x1 * 0x18e5 + 0x2af4) + parseInt(aC(0x10b)) / (-0x9ae + -0xf6 + 0xaad) + parseInt(aD(0x130)) / (-0x7a * -0xa + 0x1e18 + -0x22d2);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x87 * -0x88a + -0x3943a * 0x3 + 0x1df * 0x727));
function a() {
    const aJ = [
        'model',
        'isCampaign',
        'ls/Contact',
        'qMWAS',
        'dZsmd',
        'ticketId',
        'name',
        'zvfdj',
        'create',
        'getWallets',
        '6109506oiuGgF',
        'NmMCs',
        'pPKEx',
        'messageId',
        'zgsci',
        'tenantId',
        'ls/User',
        'etsToWalle',
        'nContacts',
        'ticket:upd',
        'oAeFz',
        'wallets',
        'vice',
        'JLhPF',
        '12TacAoF',
        'extraInfo',
        '934505aQWHHo',
        '116GMipSq',
        'ContactBai',
        'hrWAx',
        'tags',
        'ZThta',
        'ers/CheckC',
        'userId',
        'contactId',
        'QOKIt',
        'vices/help',
        'ate',
        'cphHq',
        'ers/socket',
        'startedAtt',
        'instagram',
        'fUNUk',
        'ticket',
        'key',
        'ls/Campaig',
        'wQACa',
        '8473140Jwcuiu',
        'isDeleted',
        'whatsapp',
        './ShowTick',
        'waba',
        '__esModule',
        'ZPGDy',
        'unreadMess',
        '637999xbrQls',
        '1189657PmyaXi',
        'RyIbm',
        'getTime',
        'gHqGE',
        'isGroup',
        'enabled',
        'HBsFg',
        'erty',
        'find',
        'DESC',
        'setDataVal',
        'ls/Message',
        'OgMga',
        'includes',
        './CreateLo',
        'DonFk',
        'queueId',
        'YfIWd',
        'lhheG',
        'isFarewell',
        'include',
        'RUpbn',
        'hvbFd',
        'hatBotFlow',
        '__importDe',
        'DirectTick',
        'EgqGt',
        'AcLIn',
        'ers/Verify',
        'htWPD',
        'sequelize',
        '5581016ayVbgO',
        'fromMe',
        'attributes',
        'nhzXu',
        'messenger',
        'ages',
        'user',
        'zMVCq',
        'gEvHm',
        'nhQFF',
        'etService',
        'getBodyMes',
        'uguKB',
        'StxCF',
        'ls/Whatsap',
        'BwOUb',
        'JCtOc',
        'fault',
        'Emit',
        'KXapq',
        '../WbotSer',
        'associatio',
        'contact',
        'oSdnN',
        'VgFQV',
        'TrOtU',
        'telegram',
        'ls/Ticket',
        'lastMessag',
        'leys',
        'zamPO',
        'IBcDj',
        'aCNIi',
        'kYqhQ',
        'csaeB',
        'default',
        'pQIKc',
        'status',
        'value',
        'FdscE',
        'whatsappId',
        'pending',
        'body',
        'WWWvB',
        '../../mode',
        'type',
        'update',
        'YwTaE',
        'FQRAJ',
        'Message',
        'RPBsm',
        'isCreated',
        'where',
        'istSetting',
        'sage',
        'inlmu',
        '12HlEkVv',
        'JkUtj',
        'open',
        '../Setting',
        'findOne',
        'Services/L',
        'nWmvF',
        'endanceAt',
        'Welcome',
        'order',
        'bMWUG',
        'sService',
        'kJwbb',
        'gLURW',
        'channel',
        '32205pxeLGv',
        'payload',
        'gTicketSer',
        'WeSef',
        'defineProp',
        'closed',
        'updatedAt',
        '../../help'
    ];
    a = function () {
        return aJ;
    };
    return a();
}
var __importDefault = this && this[aE(0x151) + aE(0x169)] || function (c) {
    const aG = aE;
    return c && c[aG(0x135)] ? c : { 'default': c };
};
const s = {};
s[aE(0x17e)] = !![], Object[aF(0xfd) + aE(0x140)](exports, aF(0x135), s);
const sequelize_1 = require(aF(0x157)), Contact_1 = __importDefault(require(aE(0x184) + aF(0x103))), Ticket_1 = __importDefault(require(aE(0x184) + aE(0x173))), User_1 = __importDefault(require(aF(0x184) + aE(0x111))), ShowTicketService_1 = __importDefault(require(aE(0x133) + aF(0x162))), CampaignContacts_1 = __importDefault(require(aE(0x184) + aE(0x12e) + aF(0x113))), socketEmit_1 = __importDefault(require(aE(0x100) + aE(0x128) + aE(0x16a))), CheckChatBotFlowWelcome_1 = __importDefault(require(aF(0x100) + aF(0x121) + aF(0x150) + aF(0xf2))), CreateLogTicketService_1 = __importDefault(require(aE(0x147) + aF(0xfb) + aF(0x117))), Message_1 = __importDefault(require(aE(0x184) + aF(0x144))), ListSettingsService_1 = __importDefault(require(aE(0xed) + aE(0xef) + aE(0xe7) + aF(0xf5))), Whatsapp_1 = __importDefault(require(aF(0x184) + aE(0x166) + 'p')), VerifyContactBaileys_1 = require(aF(0x16c) + aF(0x125) + aE(0x155) + aE(0x11d) + aF(0x175)), FindOrCreateTicketService = async ({
        contact: G,
        whatsappId: H,
        unreadMessages: I,
        tenantId: J,
        groupContact: K,
        msg: L,
        isSync: M,
        channel: N
    }) => {
        const aH = aF, aI = aF, O = {};
        O[aH(0x167)] = aI(0xec), O[aH(0xe2)] = function (a8, a9) {
            return a8 === a9;
        }, O[aH(0x104)] = aI(0x12a), O[aI(0x17c)] = function (a8, a9) {
            return a8 === a9;
        }, O[aH(0x177)] = aH(0x136), O[aH(0x14f)] = aH(0xf7), O[aH(0xe9)] = aI(0x170), O[aI(0x124)] = function (a8, a9) {
            return a8 === a9;
        }, O[aH(0x16b)] = aI(0x132), O[aH(0x156)] = function (a8, a9) {
            return a8 !== a9;
        }, O[aH(0xf6)] = aI(0xf0), O[aH(0x13c)] = aI(0x165), O[aH(0x164)] = function (a8, a9) {
            return a8 !== a9;
        }, O[aI(0xe4)] = aH(0x14a), O[aI(0x17f)] = aH(0x115), O[aI(0x118)] = aH(0x12c), O[aI(0x14e)] = aI(0xfe), O[aI(0x105)] = aI(0x168), O[aH(0x13f)] = aI(0x181), O[aH(0x120)] = aH(0x16e), O[aH(0xeb)] = aI(0x11a), O[aH(0xe1)] = aH(0x11f), O[aI(0x161)] = aI(0x116), O[aH(0x160)] = aI(0x107), O[aI(0x14b)] = aI(0x15e), O[aI(0x179)] = aI(0x131), O[aH(0xf4)] = function (a8, a9) {
            return a8 !== a9;
        }, O[aH(0x148)] = aI(0x171), O[aI(0xfc)] = aH(0x172), O[aI(0x127)] = aI(0x134), O[aH(0x15f)] = aI(0x15c), O[aI(0x12b)] = function (a8, a9) {
            return a8 > a9;
        }, O[aH(0x176)] = aI(0x114) + aH(0x126), O[aI(0x11e)] = function (a8, a9) {
            return a8 !== a9;
        }, O[aI(0x10f)] = aH(0x154), O[aH(0x108)] = aI(0x13a), O[aH(0x145)] = aH(0xff), O[aH(0x10d)] = aH(0x142), O[aH(0x12f)] = function (a8, a9) {
            return a8 !== a9;
        }, O[aI(0x15b)] = aH(0x17a), O[aH(0x16f)] = function (a8, a9) {
            return a8 === a9;
        }, O[aH(0x153)] = aH(0x13e), O[aH(0x183)] = aI(0x109), O[aH(0x178)] = function (a8, a9) {
            return a8 && a9;
        }, O[aI(0x10c)] = aI(0xe5);
        const P = O;
        let Q;
        if (P[aH(0xe2)](N, P[aH(0x104)]))
            P[aH(0x17c)](P[aI(0x177)], P[aI(0x177)]) ? Q = L[aI(0x159)] : (h[aI(0x17d)] = P[aH(0x167)], R[aI(0x122)] = S[0xe3a + -0x222b + 0x13f1 * 0x1]['id'], T[aI(0x129) + aH(0xf1)] = new U()[aI(0x13b)]());
        else {
            if (P[aH(0xe2)](P[aH(0x14f)], P[aH(0xe9)])) {
                const aa = {};
                return aa[aI(0x17b)] = S, g && h[aI(0x135)] ? R : aa;
            } else
                Q = L[aI(0x12d)][aH(0x159)];
        }
        if (P[aH(0x124)](N, P[aH(0x16b)]) && L && Q) {
            if (P[aI(0x156)](P[aI(0xf6)], P[aI(0xf6)]))
                e[aH(0x122)] = f[aI(0x122)];
            else {
                const ab = {};
                ab[aI(0x123)] = G['id'], ab[aH(0x10e)] = L[aH(0x12d)]?.['id'];
                const ac = {};
                ac[aH(0xe6)] = ab;
                const ad = await CampaignContacts_1[aI(0x17b)][aH(0xee)](ac);
                if (ad?.['id']) {
                    if (P[aH(0x124)](P[aI(0x13c)], P[aI(0x13c)])) {
                        const ae = {};
                        return ae[aI(0x102) + aH(0xe3)] = !![], ae;
                    } else {
                        const ag = {};
                        return ag[aH(0x102) + aH(0xe3)] = !![], ag;
                    }
                }
            }
        }
        if (L && L[aI(0x159)]) {
            if (P[aH(0x164)](P[aH(0xe4)], P[aH(0x17f)])) {
                const ag = {};
                ag[aH(0x10e)] = L[aI(0x12d)]?.['id'];
                const ah = {};
                ah[aI(0xe6)] = ag, ah[aI(0x14d)] = [P[aH(0x118)]];
                const ai = await Message_1[aI(0x17b)][aI(0xee)](ah);
                if (P[aI(0xe2)](ai?.[aH(0x12c)]?.[aI(0x17d)], P[aI(0x14e)]) && P[aI(0xe2)](ai?.[aI(0x12c)][aH(0x174) + 'e'], L[aI(0x182)])) {
                    if (P[aH(0x124)](P[aH(0x105)], P[aI(0x105)])) {
                        const aj = ai[aH(0x12c)];
                        return aj[aH(0x14c) + aI(0xe3)] = !![], aj;
                    } else
                        e[aI(0x149)] = f[aH(0x149)];
                }
            } else
                e = f[aI(0x12d)][aI(0x159)];
        }
        const R = {
                [sequelize_1['Op']['or']]: [
                    P[aI(0x167)],
                    P[aH(0x13f)]
                ]
            }, S = {};
        S[aI(0x17d)] = R, S[aH(0x110)] = J, S[aI(0x180)] = H, S[aH(0x123)] = K ? K['id'] : G['id'];
        const T = {};
        T[aH(0x101)] = Contact_1[aH(0x17b)], T['as'] = P[aI(0x120)], T[aH(0x14d)] = [
            P[aH(0xeb)],
            P[aH(0xe1)],
            {
                'association': P[aI(0x161)],
                'attributes': [
                    'id',
                    P[aH(0x160)]
                ]
            }
        ];
        const U = {};
        U[aH(0x101)] = User_1[aH(0x17b)], U['as'] = P[aI(0x14b)], U[aH(0x15a)] = [
            'id',
            P[aH(0x160)]
        ];
        const V = {};
        V[aI(0x16d) + 'n'] = P[aH(0x16b)], V[aI(0x15a)] = [
            'id',
            P[aH(0x160)],
            P[aI(0x179)]
        ];
        const W = {};
        W[aH(0xe6)] = S, W[aH(0x14d)] = [
            T,
            U,
            V
        ];
        let X = await Ticket_1[aH(0x17b)][aI(0xee)](W);
        if (X) {
            if (P[aI(0xf4)](P[aH(0x148)], P[aI(0x148)]))
                R[aH(0x122)] && (o[aH(0x122)] = p[aH(0x122)]), U[aH(0x149)] && (q[aH(0x149)] = r[aI(0x149)]);
            else {
                I = [
                    P[aH(0xfc)],
                    P[aH(0x127)],
                    P[aH(0x104)],
                    P[aH(0x15f)]
                ][aH(0x146)](N) && P[aH(0x12b)](I, 0x1 * 0xbdd + -0xb9 + 0x17 * -0x7c) ? I += X[aH(0x137) + aI(0x15d)] : I;
                const an = {};
                an[aI(0x137) + aH(0x15d)] = I, await X[aH(0xe0)](an);
                const ao = {};
                return ao[aH(0x110)] = J, ao[aH(0xdf)] = P[aH(0x176)], ao[aH(0xfa)] = X, (0xe00 * 0x2 + 0x51e * -0x3 + 0x1 * -0xca6, socketEmit_1[aH(0x17b)])(ao), X;
            }
        }
        if (K) {
            if (P[aH(0x11e)](P[aH(0x10f)], P[aH(0x108)])) {
                const ap = {};
                ap[aI(0x123)] = K['id'], ap[aH(0x110)] = J, ap[aH(0x180)] = H;
                const aq = {};
                aq[aH(0xe6)] = ap, aq[aI(0xf3)] = [[
                        P[aH(0x145)],
                        P[aI(0x10d)]
                    ]], aq[aH(0x14d)] = [
                    {
                        'model': Contact_1[aI(0x17b)],
                        'as': P[aH(0x120)],
                        'include': [
                            P[aI(0xeb)],
                            P[aH(0xe1)],
                            {
                                'association': P[aI(0x161)],
                                'attributes': [
                                    'id',
                                    P[aH(0x160)]
                                ]
                            }
                        ]
                    },
                    {
                        'model': User_1[aI(0x17b)],
                        'as': P[aH(0x14b)],
                        'attributes': [
                            'id',
                            P[aI(0x160)]
                        ]
                    },
                    {
                        'association': P[aH(0x16b)],
                        'attributes': [
                            'id',
                            P[aH(0x160)],
                            P[aI(0x179)]
                        ]
                    }
                ], X = await Ticket_1[aH(0x17b)][aI(0xee)](aq);
                if (X) {
                    if (P[aH(0x12f)](P[aI(0x15b)], P[aI(0x15b)])) {
                        const as = d[aI(0x12c)];
                        return as[aH(0x14c) + aI(0xe3)] = !![], as;
                    } else {
                        const as = {};
                        as[aI(0x17d)] = P[aI(0x13f)], as[aH(0x122)] = null, as[aH(0x137) + aH(0x15d)] = I, await X[aI(0xe0)](as);
                        const at = {};
                        return at[aH(0x110)] = J, at[aI(0xdf)] = P[aH(0x176)], at[aH(0xfa)] = X, (-0xd2f + 0xd * -0x2e6 + 0x1 * 0x32dd, socketEmit_1[aI(0x17b)])(at), X;
                    }
                }
            } else
                e = f[aH(0x159)];
        } else {
            const av = {
                    [sequelize_1['Op']['in']]: [
                        P[aI(0x167)],
                        P[aI(0x13f)]
                    ]
                }, aw = {};
            aw[aI(0x17d)] = av, aw[aI(0x110)] = J, aw[aH(0x180)] = H, aw[aI(0x123)] = G['id'];
            const ax = {};
            ax[aH(0xe6)] = aw, ax[aI(0xf3)] = [[
                    P[aH(0x145)],
                    P[aI(0x10d)]
                ]], ax[aI(0x14d)] = [
                {
                    'model': Contact_1[aI(0x17b)],
                    'as': P[aH(0x120)],
                    'include': [
                        P[aH(0xeb)],
                        P[aH(0xe1)],
                        {
                            'association': P[aH(0x161)],
                            'attributes': [
                                'id',
                                P[aI(0x160)]
                            ]
                        }
                    ]
                },
                {
                    'model': User_1[aH(0x17b)],
                    'as': P[aH(0x14b)],
                    'attributes': [
                        'id',
                        P[aI(0x160)]
                    ]
                },
                {
                    'association': P[aI(0x16b)],
                    'attributes': [
                        'id',
                        P[aH(0x160)],
                        P[aI(0x179)]
                    ]
                }
            ], X = await Ticket_1[aI(0x17b)][aI(0xee)](ax);
            if (X) {
                const ay = {};
                ay[aI(0x17d)] = P[aI(0x13f)], ay[aH(0x122)] = null, ay[aH(0x137) + aI(0x15d)] = I, await X[aI(0xe0)](ay);
                const az = {};
                return az[aH(0x110)] = J, az[aI(0xdf)] = P[aI(0x176)], az[aI(0xfa)] = X, (0x112c * 0x1 + 0x6 * -0x4f1 + 0xc7a, socketEmit_1[aI(0x17b)])(az), X;
            }
        }
        const Y = P[aI(0x16f)]((await (0x2310 + 0x4 * -0x615 + 0x55e * -0x2, ListSettingsService_1[aI(0x17b)])(J))?.[aH(0x141)](aA => aA[aH(0x12d)] === aH(0x152) + aH(0x112) + 'ts')?.[aI(0x17e)], P[aI(0x153)]) || ![], Z = {};
        Z[aI(0x123)] = K ? K['id'] : G['id'], Z[aI(0x17d)] = P[aI(0x13f)], Z[aI(0x13d)] = !!K, Z[aI(0x137) + aH(0x15d)] = I, Z[aI(0x180)] = H, Z[aI(0x110)] = J, Z[aI(0xf8)] = N;
        const a0 = Z, a1 = {};
        a1['id'] = H;
        const a2 = {};
        a2[aH(0xe6)] = a1;
        const a3 = await Whatsapp_1[aI(0x17b)][aI(0xee)](a2);
        a3 && (a3[aH(0x122)] && (a0[aH(0x122)] = a3[aH(0x122)]), a3[aH(0x149)] && (a0[aH(0x149)] = a3[aI(0x149)]));
        if (Y && G['id']) {
            const aA = G, aB = await aA[aI(0x10a)]();
            aB && aB[-0x182a + 0x15ed + 0x23d]?.['id'] && (a0[aI(0x17d)] = P[aI(0x167)], a0[aI(0x122)] = aB[0x148 + -0x23 * 0x5e + -0xb92 * -0x1]['id'], a0[aH(0x129) + aI(0xf1)] = new Date()[aH(0x13b)]());
        }
        L && (a0[aH(0x174) + 'e'] = await (0x1 * 0x2709 + 0xb7 * -0x25 + -0xc96, VerifyContactBaileys_1[aH(0x163) + aI(0xe8)])(L));
        const a4 = await Ticket_1[aH(0x17b)][aI(0x109)](a0), a5 = {};
        a5[aI(0x106)] = a4['id'], a5[aH(0xdf)] = P[aI(0x183)], await (-0x961 + -0x7 * 0x14a + 0x1267, CreateLogTicketService_1[aI(0x17b)])(a5);
        (P[aH(0x178)](L, !Q) || M) && await (-0xd17 + -0xf60 + 0x97d * 0x3, CheckChatBotFlowWelcome_1[aH(0x17b)])(a4);
        const a6 = {};
        a6['id'] = a4['id'], a6[aH(0x110)] = J, X = await (0x4f * 0x6a + 0x1bb + -0x3 * 0xb7b, ShowTicketService_1[aH(0x17b)])(a6), X[aH(0x143) + 'ue'](P[aH(0x10c)], !![]);
        const a7 = {};
        return a7[aH(0x110)] = J, a7[aH(0xdf)] = P[aI(0x176)], a7[aI(0xfa)] = X, (0x21b3 + -0x2653 * -0x1 + 0x4806 * -0x1, socketEmit_1[aI(0x17b)])(a7), X;
    };
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x108d + 0x21f2 + -0x1086);
        let h = e[f];
        return h;
    }, b(c, d);
}
exports[aF(0x17b)] = FindOrCreateTicketService;