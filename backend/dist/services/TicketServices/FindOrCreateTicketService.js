'use strict';
const aE = b, aF = b;
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x17 * 0x37 + -0x3 * -0x40e + -0xffa);
        let h = e[f];
        return h;
    }, b(c, d);
}
(function (c, d) {
    const aC = b, aD = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(aC(0x180)) / (-0x5d5 * -0x1 + 0x239 * 0xb + -0x1e47) * (parseInt(aC(0x1a1)) / (-0x1cf + -0xca + 0x29b)) + parseInt(aD(0x157)) / (0x25 * -0xf3 + 0x1 * -0xe69 + -0x481 * -0xb) + parseInt(aD(0x1ac)) / (-0x2334 + 0x2 * -0xcac + 0x3c90) + parseInt(aC(0x1a9)) / (0x1bdb + 0x606 + -0xc5 * 0x2c) + parseInt(aC(0x134)) / (-0x2 * 0xcc9 + 0x521 + -0xa9 * -0x1f) * (-parseInt(aC(0x140)) / (0x534 + 0x1c75 + -0x21a2)) + -parseInt(aD(0x162)) / (-0x138c + -0x225c + 0x35f0) + parseInt(aD(0x1aa)) / (0x22d4 + -0x5 * -0x777 + -0x481e) * (parseInt(aC(0x1c2)) / (0x32d * -0x8 + -0x1418 + 0x2d8a));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x306b8 + 0x1d79d + -0x2c069 * -0x1));
var __importDefault = this && this[aE(0x153) + aE(0x1b7)] || function (c) {
    const aG = aE;
    return c && c[aG(0x135)] ? c : { 'default': c };
};
function a() {
    const aJ = [
        'status',
        'messenger',
        'enabled',
        'associatio',
        'getTime',
        'mkqqz',
        'Nrwfh',
        '526420sJsZkB',
        '9OqGmUC',
        'instagram',
        '22788eJMqbe',
        './ShowTick',
        'QgFlP',
        'ContactBai',
        'ByaxL',
        'tenantId',
        'isFarewell',
        'uZlMv',
        'YRyuc',
        'channel',
        'UnjwQ',
        'fault',
        'IiDKZ',
        'vice',
        'fromMe',
        'PguCu',
        'find',
        'user',
        'XSNZf',
        'setDataVal',
        'zwzlE',
        'update',
        '606670TgmPny',
        'defineProp',
        'vices/help',
        'etService',
        'tags',
        'isCampaign',
        'leys',
        'kOkCT',
        'qrwyj',
        'wlAHt',
        'akVso',
        'ls/User',
        'include',
        'etsToWalle',
        'sage',
        'cKNpY',
        'sService',
        'HKIoJ',
        'DDXGy',
        'ticketId',
        '../../mode',
        'oZyWD',
        'CcFcm',
        'PCaxO',
        '998322BEEPKx',
        '__esModule',
        'waba',
        'oLsNt',
        'istSetting',
        'ls/Contact',
        'updatedAt',
        'Hlxyn',
        'findOne',
        'YntWB',
        'ticket:upd',
        'contact',
        '7PaCqFk',
        'GPMFU',
        'KbxZU',
        'includes',
        'JiJaW',
        'qzeHr',
        'nContacts',
        'DirectTick',
        'ers/socket',
        'lastMessag',
        'ZQvRi',
        'getBodyMes',
        'vCpLC',
        'open',
        'lKupO',
        'isCreated',
        'messageId',
        'key',
        './CreateLo',
        '__importDe',
        'order',
        'type',
        'whatsapp',
        '568134CRtYqT',
        'Message',
        'endanceAt',
        'DOwyZ',
        'OzbXS',
        'XRrKf',
        'userId',
        'ncKOy',
        'ers/Verify',
        'zBQVc',
        'erty',
        '466792CFaeQE',
        'BTljf',
        '../Setting',
        'QMycr',
        'raRYY',
        'nIOrs',
        'value',
        'gTicketSer',
        'DUEIJ',
        'ers/CheckC',
        'queueId',
        'NyVRa',
        'body',
        'ANHpR',
        'Welcome',
        'ls/Whatsap',
        'ls/Ticket',
        'attributes',
        'payload',
        'YcEmE',
        'vXSMr',
        'nYtom',
        'ls/Message',
        '../../help',
        'ls/Campaig',
        'bKWPE',
        'extraInfo',
        'sequelize',
        'isDeleted',
        'AqgSc',
        '2lSZVSh',
        'telegram',
        'QsnnL',
        'startedAtt',
        'PyMMT',
        'xremD',
        'whatsappId',
        'ate',
        'pending',
        'faNHg',
        'create',
        'unreadMess',
        'getWallets',
        'where',
        'ticket',
        'NduTp',
        'closed',
        '../WbotSer',
        'default',
        'RLCAq',
        'OjIMb',
        'hatBotFlow',
        'isGroup',
        'Emit',
        'DESC',
        'jXlvy',
        'model',
        'wallets',
        'Services/L',
        'contactId',
        'TPyfl',
        'name',
        'ages',
        '33556dtpWvZ'
    ];
    a = function () {
        return aJ;
    };
    return a();
}
const s = {};
s[aE(0x168)] = !![], Object[aF(0x1c3) + aE(0x161)](exports, aE(0x135), s);
const sequelize_1 = require(aE(0x17d)), Contact_1 = __importDefault(require(aF(0x130) + aF(0x139))), Ticket_1 = __importDefault(require(aF(0x130) + aE(0x172))), User_1 = __importDefault(require(aE(0x130) + aF(0x127))), ShowTicketService_1 = __importDefault(require(aE(0x1ad) + aF(0x1c5))), CampaignContacts_1 = __importDefault(require(aF(0x130) + aE(0x17a) + aE(0x146))), socketEmit_1 = __importDefault(require(aF(0x179) + aE(0x148) + aF(0x197))), CheckChatBotFlowWelcome_1 = __importDefault(require(aE(0x179) + aE(0x16b) + aF(0x195) + aE(0x170))), CreateLogTicketService_1 = __importDefault(require(aE(0x152) + aE(0x169) + aF(0x1b9))), Message_1 = __importDefault(require(aF(0x130) + aF(0x178))), ListSettingsService_1 = __importDefault(require(aF(0x164) + aE(0x19c) + aE(0x138) + aF(0x12c))), Whatsapp_1 = __importDefault(require(aE(0x130) + aF(0x171) + 'p')), VerifyContactBaileys_1 = require(aF(0x191) + aF(0x1c4) + aF(0x15f) + aF(0x1af) + aE(0x122)), FindOrCreateTicketService = async ({
        contact: G,
        whatsappId: H,
        unreadMessages: I,
        tenantId: J,
        groupContact: K,
        msg: L,
        isSync: M,
        channel: N
    }) => {
        const aH = aF, aI = aF, O = {};
        O[aH(0x13d)] = aI(0x14d), O[aI(0x145)] = function (a8, a9) {
            return a8 === a9;
        }, O[aI(0x1be)] = aI(0x1ab), O[aH(0x189)] = function (a8, a9) {
            return a8 === a9;
        }, O[aI(0x141)] = aI(0x167), O[aI(0x16f)] = aH(0x199), O[aH(0x194)] = function (a8, a9) {
            return a8 === a9;
        }, O[aH(0x1b4)] = aH(0x16a), O[aH(0x17b)] = function (a8, a9) {
            return a8 === a9;
        }, O[aH(0x1a8)] = aI(0x156), O[aH(0x1b0)] = aI(0x133), O[aH(0x177)] = aH(0x193), O[aH(0x17f)] = function (a8, a9) {
            return a8 !== a9;
        }, O[aI(0x14e)] = aH(0x160), O[aH(0x15c)] = function (a8, a9) {
            return a8 !== a9;
        }, O[aI(0x14c)] = aH(0x165), O[aI(0x126)] = aI(0x18e), O[aI(0x182)] = function (a8, a9) {
            return a8 === a9;
        }, O[aI(0x185)] = aH(0x190), O[aI(0x124)] = aI(0x19e), O[aH(0x1b6)] = aI(0x188), O[aI(0x166)] = aI(0x13f), O[aH(0x16d)] = aI(0x17c), O[aH(0x1c0)] = aI(0x1c6), O[aI(0x14a)] = aH(0x19b), O[aH(0x1ae)] = aI(0x19f), O[aI(0x12e)] = aH(0x1bd), O[aI(0x1a7)] = aH(0x17e), O[aI(0x137)] = function (a8, a9) {
            return a8 !== a9;
        }, O[aH(0x176)] = aH(0x15e), O[aH(0x12b)] = aH(0x181), O[aI(0x15a)] = aI(0x136), O[aH(0x125)] = aH(0x1a3), O[aH(0x132)] = function (a8, a9) {
            return a8 > a9;
        }, O[aH(0x142)] = aI(0x13e) + aI(0x187), O[aH(0x163)] = function (a8, a9) {
            return a8 === a9;
        }, O[aH(0x131)] = aI(0x1bb), O[aH(0x175)] = aH(0x13a), O[aI(0x184)] = aI(0x198), O[aI(0x1b8)] = function (a8, a9) {
            return a8 !== a9;
        }, O[aI(0x15b)] = aH(0x13b), O[aH(0x18f)] = function (a8, a9) {
            return a8 === a9;
        }, O[aH(0x1b3)] = aI(0x1a4), O[aI(0x123)] = aI(0x18a), O[aH(0x144)] = function (a8, a9) {
            return a8 && a9;
        }, O[aH(0x12d)] = aI(0x14f);
        const P = O;
        let Q;
        if (P[aI(0x145)](N, P[aI(0x1be)]))
            P[aH(0x189)](P[aI(0x141)], P[aI(0x16f)]) ? (h[aH(0x1a2)] = P[aH(0x13d)], R[aI(0x15d)] = S[0x201 + -0x39 * -0x4e + -0x135f]['id'], T[aH(0x183) + aH(0x159)] = new U()[aH(0x1a6)]()) : Q = L[aI(0x1ba)];
        else {
            if (P[aI(0x194)](P[aI(0x1b4)], P[aI(0x1b4)]))
                Q = L[aI(0x151)][aH(0x1ba)];
            else {
                const aa = {};
                return aa[aH(0x121) + aH(0x158)] = !![], aa;
            }
        }
        if (P[aH(0x17b)](N, P[aH(0x1a8)]) && L && Q) {
            if (P[aI(0x194)](P[aH(0x1b0)], P[aI(0x177)]))
                e = f[aH(0x151)][aH(0x1ba)];
            else {
                const ab = {};
                ab[aI(0x19d)] = G['id'], ab[aH(0x150)] = L[aI(0x151)]?.['id'];
                const ac = {};
                ac[aH(0x18d)] = ab;
                const ad = await CampaignContacts_1[aI(0x192)][aI(0x13c)](ac);
                if (ad?.['id']) {
                    if (P[aI(0x17f)](P[aH(0x14e)], P[aI(0x14e)])) {
                        const af = {};
                        return af[aH(0x192)] = S, g && h[aI(0x135)] ? R : af;
                    } else {
                        const af = {};
                        return af[aI(0x121) + aI(0x158)] = !![], af;
                    }
                }
            }
        }
        if (L && L[aI(0x1ba)]) {
            if (P[aI(0x15c)](P[aH(0x14c)], P[aI(0x14c)]))
                e[aI(0x15d)] = f[aH(0x15d)];
            else {
                const ah = {};
                ah[aI(0x150)] = L[aH(0x151)]?.['id'];
                const ai = {};
                ai[aI(0x18d)] = ah, ai[aI(0x128)] = [P[aI(0x126)]];
                const aj = await Message_1[aH(0x192)][aI(0x13c)](ai);
                if (P[aI(0x182)](aj?.[aI(0x18e)]?.[aH(0x1a2)], P[aH(0x185)]) && P[aI(0x182)](aj?.[aH(0x18e)][aI(0x149) + 'e'], L[aI(0x16e)])) {
                    if (P[aH(0x17f)](P[aI(0x124)], P[aH(0x124)]))
                        R[aH(0x15d)] && (o[aI(0x15d)] = p[aH(0x15d)]), U[aH(0x16c)] && (q[aI(0x16c)] = r[aI(0x16c)]);
                    else {
                        const al = aj[aH(0x18e)];
                        return al[aI(0x1b2) + aI(0x158)] = !![], al;
                    }
                }
            }
        }
        const R = {
                [sequelize_1['Op']['or']]: [
                    P[aI(0x13d)],
                    P[aH(0x1b6)]
                ]
            }, S = {};
        S[aI(0x1a2)] = R, S[aH(0x1b1)] = J, S[aH(0x186)] = H, S[aH(0x19d)] = K ? K['id'] : G['id'];
        const T = {};
        T[aH(0x19a)] = Contact_1[aH(0x192)], T['as'] = P[aH(0x166)], T[aI(0x128)] = [
            P[aI(0x16d)],
            P[aI(0x1c0)],
            {
                'association': P[aH(0x14a)],
                'attributes': [
                    'id',
                    P[aH(0x1ae)]
                ]
            }
        ];
        const U = {};
        U[aH(0x19a)] = User_1[aI(0x192)], U['as'] = P[aI(0x12e)], U[aI(0x173)] = [
            'id',
            P[aH(0x1ae)]
        ];
        const V = {};
        V[aH(0x1a5) + 'n'] = P[aI(0x1a8)], V[aI(0x173)] = [
            'id',
            P[aH(0x1ae)],
            P[aI(0x1a7)]
        ];
        const W = {};
        W[aI(0x18d)] = S, W[aI(0x128)] = [
            T,
            U,
            V
        ];
        let X = await Ticket_1[aI(0x192)][aI(0x13c)](W);
        if (X) {
            if (P[aI(0x137)](P[aH(0x176)], P[aH(0x176)]))
                e[aH(0x16c)] = f[aH(0x16c)];
            else {
                I = [
                    P[aH(0x12b)],
                    P[aI(0x15a)],
                    P[aI(0x1be)],
                    P[aI(0x125)]
                ][aI(0x143)](N) && P[aI(0x132)](I, -0x42 + -0xca * -0x13 + -0xa4 * 0x17) ? I += X[aH(0x18b) + aI(0x1a0)] : I;
                const an = {};
                an[aI(0x18b) + aI(0x1a0)] = I, await X[aH(0x1c1)](an);
                const ao = {};
                return ao[aI(0x1b1)] = J, ao[aI(0x155)] = P[aI(0x142)], ao[aI(0x174)] = X, (0x1 * 0xaf1 + -0x1d * -0x2d + -0x805 * 0x2, socketEmit_1[aI(0x192)])(ao), X;
            }
        }
        if (K) {
            if (P[aI(0x163)](P[aH(0x131)], P[aH(0x131)])) {
                const ap = {};
                ap[aH(0x19d)] = K['id'], ap[aI(0x1b1)] = J, ap[aI(0x186)] = H;
                const aq = {};
                aq[aI(0x18d)] = ap, aq[aH(0x154)] = [[
                        P[aH(0x175)],
                        P[aH(0x184)]
                    ]], aq[aI(0x128)] = [
                    {
                        'model': Contact_1[aI(0x192)],
                        'as': P[aI(0x166)],
                        'include': [
                            P[aH(0x16d)],
                            P[aH(0x1c0)],
                            {
                                'association': P[aI(0x14a)],
                                'attributes': [
                                    'id',
                                    P[aI(0x1ae)]
                                ]
                            }
                        ]
                    },
                    {
                        'model': User_1[aI(0x192)],
                        'as': P[aI(0x12e)],
                        'attributes': [
                            'id',
                            P[aI(0x1ae)]
                        ]
                    },
                    {
                        'association': P[aH(0x1a8)],
                        'attributes': [
                            'id',
                            P[aI(0x1ae)],
                            P[aH(0x1a7)]
                        ]
                    }
                ], X = await Ticket_1[aH(0x192)][aI(0x13c)](aq);
                if (X) {
                    if (P[aI(0x1b8)](P[aH(0x15b)], P[aI(0x15b)])) {
                        const as = d[aH(0x18e)];
                        return as[aH(0x1b2) + aH(0x158)] = !![], as;
                    } else {
                        const as = {};
                        as[aH(0x1a2)] = P[aI(0x1b6)], as[aH(0x15d)] = null, as[aH(0x18b) + aI(0x1a0)] = I, await X[aI(0x1c1)](as);
                        const at = {};
                        return at[aI(0x1b1)] = J, at[aH(0x155)] = P[aH(0x142)], at[aH(0x174)] = X, (0x231d + 0x2420 + -0x473d, socketEmit_1[aH(0x192)])(at), X;
                    }
                }
            } else
                e = f[aH(0x1ba)];
        } else {
            const av = {
                    [sequelize_1['Op']['in']]: [
                        P[aH(0x13d)],
                        P[aI(0x1b6)]
                    ]
                }, aw = {};
            aw[aI(0x1a2)] = av, aw[aI(0x1b1)] = J, aw[aI(0x186)] = H, aw[aH(0x19d)] = G['id'];
            const ax = {};
            ax[aI(0x18d)] = aw, ax[aI(0x154)] = [[
                    P[aI(0x175)],
                    P[aI(0x184)]
                ]], ax[aH(0x128)] = [
                {
                    'model': Contact_1[aH(0x192)],
                    'as': P[aH(0x166)],
                    'include': [
                        P[aI(0x16d)],
                        P[aI(0x1c0)],
                        {
                            'association': P[aI(0x14a)],
                            'attributes': [
                                'id',
                                P[aH(0x1ae)]
                            ]
                        }
                    ]
                },
                {
                    'model': User_1[aI(0x192)],
                    'as': P[aI(0x12e)],
                    'attributes': [
                        'id',
                        P[aH(0x1ae)]
                    ]
                },
                {
                    'association': P[aH(0x1a8)],
                    'attributes': [
                        'id',
                        P[aH(0x1ae)],
                        P[aH(0x1a7)]
                    ]
                }
            ], X = await Ticket_1[aI(0x192)][aH(0x13c)](ax);
            if (X) {
                const ay = {};
                ay[aI(0x1a2)] = P[aI(0x1b6)], ay[aH(0x15d)] = null, ay[aI(0x18b) + aI(0x1a0)] = I, await X[aI(0x1c1)](ay);
                const az = {};
                return az[aI(0x1b1)] = J, az[aI(0x155)] = P[aI(0x142)], az[aH(0x174)] = X, (0x2260 + -0x11da + -0x1086, socketEmit_1[aI(0x192)])(az), X;
            }
        }
        const Y = P[aI(0x18f)]((await (-0x1369 + -0x3 * 0xca6 + 0x395b, ListSettingsService_1[aI(0x192)])(J))?.[aH(0x1bc)](aA => aA[aI(0x151)] === aH(0x147) + aI(0x129) + 'ts')?.[aH(0x168)], P[aH(0x1b3)]) || ![], Z = {};
        Z[aH(0x19d)] = K ? K['id'] : G['id'], Z[aH(0x1a2)] = P[aI(0x1b6)], Z[aH(0x196)] = !!K, Z[aH(0x18b) + aI(0x1a0)] = I, Z[aI(0x186)] = H, Z[aI(0x1b1)] = J, Z[aH(0x1b5)] = N;
        const a0 = Z, a1 = {};
        a1['id'] = H;
        const a2 = {};
        a2[aI(0x18d)] = a1;
        const a3 = await Whatsapp_1[aH(0x192)][aI(0x13c)](a2);
        a3 && (a3[aH(0x15d)] && (a0[aH(0x15d)] = a3[aI(0x15d)]), a3[aI(0x16c)] && (a0[aH(0x16c)] = a3[aI(0x16c)]));
        if (Y && G['id']) {
            const aA = G, aB = await aA[aH(0x18c)]();
            aB && aB[0x1 * -0x8ad + -0x1 * 0x1965 + 0x1109 * 0x2]?.['id'] && (a0[aI(0x1a2)] = P[aI(0x13d)], a0[aH(0x15d)] = aB[0xa77 + -0xc17 * -0x1 + 0x2 * -0xb47]['id'], a0[aI(0x183) + aI(0x159)] = new Date()[aH(0x1a6)]());
        }
        L && (a0[aH(0x149) + 'e'] = await (0x15c * -0x7 + -0x2123 + 0x2aa7, VerifyContactBaileys_1[aI(0x14b) + aI(0x12a)])(L));
        const a4 = await Ticket_1[aH(0x192)][aH(0x18a)](a0), a5 = {};
        a5[aI(0x12f)] = a4['id'], a5[aH(0x155)] = P[aH(0x123)], await (0x17f * -0x17 + -0x1d * 0xdb + 0x3b38, CreateLogTicketService_1[aI(0x192)])(a5);
        (P[aI(0x144)](L, !Q) || M) && await (-0x885 + -0x1465 + 0xe75 * 0x2, CheckChatBotFlowWelcome_1[aI(0x192)])(a4);
        const a6 = {};
        a6['id'] = a4['id'], a6[aI(0x1b1)] = J, X = await (-0x21c6 + 0x1da2 + 0x424, ShowTicketService_1[aI(0x192)])(a6), X[aI(0x1bf) + 'ue'](P[aH(0x12d)], !![]);
        const a7 = {};
        return a7[aI(0x1b1)] = J, a7[aI(0x155)] = P[aH(0x142)], a7[aH(0x174)] = X, (-0x10d0 + -0x1 * 0xa37 + 0x1b07, socketEmit_1[aI(0x192)])(a7), X;
    };
exports[aE(0x192)] = FindOrCreateTicketService;