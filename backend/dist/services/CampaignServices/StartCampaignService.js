'use strict';
const H = b, I = b;
(function (c, d) {
    const F = b, G = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(F(0x12a)) / (0x153 + -0x9 * 0x109 + 0x7ff) * (-parseInt(G(0xf3)) / (0xe17 * -0x1 + 0x347 * 0x5 + -0x24a)) + -parseInt(G(0xf8)) / (-0x26ed + 0x1 * 0xce5 + 0x1a0b) + -parseInt(G(0xfd)) / (0x1 * -0xf6 + 0x116e + -0x41d * 0x4) * (parseInt(F(0xce)) / (0x252c + -0x749 * -0x3 + -0x3b02)) + -parseInt(G(0x114)) / (-0x8 * -0x37c + -0x1 * -0x1048 + -0x21a * 0x15) * (parseInt(G(0xca)) / (-0x72b * -0x5 + -0x1bbc + -0x814)) + parseInt(F(0x108)) / (0x198f + 0x1265 + -0x2bec) * (parseInt(F(0xd8)) / (-0x42 + -0x6 * -0xd3 + -0x4a7)) + -parseInt(F(0xcd)) / (-0x17 * -0x125 + -0x107c * 0x2 + 0x6af) * (parseInt(F(0x11e)) / (0x3ca * 0x1 + 0x1529 * -0x1 + 0x6 * 0x2e7)) + parseInt(G(0xd5)) / (0x1e43 + 0x1 * 0x88c + -0x26c3) * (parseInt(F(0x119)) / (0x89 * 0x2b + -0x1 * 0x2471 + 0x1 * 0xd7b));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x1 * 0xe7ee3 + -0x1cd2b + 0x4427 * -0x12));
function a() {
    const Y = [
        'jdXqd',
        'terval',
        'cudKg',
        'session',
        'getMinutes',
        '_contact_',
        'isWithinIn',
        'rWGnJ',
        'HPKGA',
        'lCCzv',
        'eWhatsappC',
        'date-fns',
        'vNHlw',
        'random',
        '../../mode',
        'XDzrk',
        'ls/Campaig',
        '../../erro',
        'Ophro',
        'value',
        '14yxIbAt',
        'gTzSg',
        'split',
        '310YjcDxK',
        '1540920nLjCBg',
        'default',
        'tenantId',
        'YMmZb',
        'getHours',
        'jZMEU',
        'MyYgu',
        '47640UgDwbu',
        'FWNIQ',
        'vHDNe',
        '442998HHmWuV',
        'SendMessag',
        'isBefore',
        'WPMDn',
        '../../util',
        'BUpkK',
        'erty',
        'kuBpH',
        'findAll',
        'MBIMd',
        'isAfter',
        'uPtwK',
        'ZwLmk',
        'oRJdv',
        'BlfOl',
        'fault',
        'contactId',
        'InDays',
        'message',
        'rdZzC',
        'message3',
        'ImaJb',
        'GN_CONTACT',
        'XISTS',
        'ebLwl',
        'AfVZb',
        'eNINN',
        '105242NvOhAn',
        'name',
        'SiPPr',
        'mgMfD',
        'InSeconds',
        '355269hhJiLi',
        'kuyAo',
        'campaginId',
        'ampaign',
        '_id_',
        '4CwrvkR',
        'NRWpq',
        '/Queue',
        'message1',
        'rTAAK',
        'ZmQLA',
        'number',
        'floor',
        'addDays',
        'delay',
        'SxkNE',
        '136OKFLfT',
        'nContacts',
        'cBEIL',
        's/pupa',
        'S_NOT_EXIS',
        'Qjcvb',
        'lHAhK',
        '../../libs',
        'Pbqjm',
        'HoPLR',
        'BJVlD',
        'uwvdD',
        '2828526QFpyML',
        'where',
        'oUtc',
        'scheduled',
        'sessionId',
        '3497brDCSc',
        'MgRxN',
        'mediaUrl',
        'ERROR_CAMP',
        '08:00',
        '360932MUurAU',
        'start',
        'map',
        'setMinutes',
        'update',
        'o_Paulo',
        'llmDM',
        'addSeconds',
        'ERR_CAMPAI',
        '20:00',
        'GZylD',
        'zonedTimeT',
        '19xHjQpK',
        'status',
        'txbue',
        'fDVcw',
        'iZcGv',
        'HH:mm',
        'parse',
        'IPotL',
        '__esModule',
        'oNDgP',
        'KprVU',
        'XOubN',
        '__importDe',
        'zaGjt',
        'difference',
        'IIvqA',
        'setHours',
        'pupa',
        'findOne',
        'SaOLg',
        'yXAbR',
        'qnSyT',
        'contact',
        'uovLc',
        'WwxWG',
        'eCmqe',
        'end',
        'IJBcQ',
        'xgLqa',
        'AIGN_NOT_E',
        'jssSw',
        'DMZnx',
        'rs/AppErro',
        'include',
        'campaignId',
        'America/Sa',
        'TIxzl',
        'getTime',
        'length',
        'yBvlq',
        'message2',
        'ZSZWt',
        'MjFaw',
        'nqGfS',
        'date-fns-t',
        'qrXhN',
        'IVYdj',
        'DtKtF',
        'add',
        'REifJ',
        'defineProp',
        'GsraN'
    ];
    a = function () {
        return Y;
    };
    return a();
}
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x6 * 0xb6 + -0x9 * 0x31d + 0x20d6);
        let h = e[f];
        return h;
    }, b(c, d);
}
var __importDefault = this && this[H(0x8e) + I(0xe7)] || function (c) {
    const J = I;
    return c && c[J(0x132)] ? c : { 'default': c };
};
const E = {};
E[H(0xc9)] = !![], Object[H(0xb4) + I(0xde)](exports, I(0x132), E);
const pupa_1 = require(I(0xdc) + H(0x10b)), date_fns_1 = require(I(0xc1)), date_fns_tz_1 = require(H(0xae) + 'z'), Campaign_1 = __importDefault(require(I(0xc4) + I(0xc6) + 'n')), AppError_1 = __importDefault(require(I(0xc7) + H(0xa2) + 'r')), CampaignContacts_1 = __importDefault(require(I(0xc4) + H(0xc6) + H(0x109))), Queue_1 = __importDefault(require(H(0x10f) + H(0xff))), cArquivoName = d => {
        const K = H, L = H, e = {};
        e[K(0xd3)] = function (i, j) {
            return i - j;
        };
        const f = e;
        if (!d)
            return '';
        const g = d[K(0xcc)]('/'), h = g[f[L(0xd3)](g[K(0xa8)], -0x1f3a + 0xfb9 + 0xf82)];
        return h;
    }, randomInteger = (d, e) => {
        const M = I, N = H, f = {};
        f[M(0xcb)] = function (h, i) {
            return h + i;
        }, f[N(0xb1)] = function (h, i) {
            return h * i;
        }, f[M(0x8f)] = function (h, i) {
            return h + i;
        }, f[M(0xe1)] = function (h, i) {
            return h - i;
        };
        const g = f;
        return g[N(0xcb)](Math[M(0x104)](g[N(0xb1)](Math[N(0xc3)](), g[N(0x8f)](g[N(0xe1)](e, d), -0x1106 * 0x1 + 0x8d0 + 0x2bd * 0x3))), d);
    }, mountMessageData = (d, e, f) => {
        const O = H, P = I, g = {
                'ImaJb': function (k, l, m) {
                    return k(l, m);
                },
                'nqGfS': function (k, l) {
                    return k === l;
                },
                'BUpkK': function (k, l) {
                    return k === l;
                },
                'jssSw': function (k, l) {
                    return k || l;
                },
                'WPMDn': function (k, l) {
                    return k(l);
                }
            }, h = g[O(0xed)](randomInteger, 0x1252 + 0xd39 + -0x1f8a, 0x247f * -0x1 + 0x2086 + -0xaa * -0x6);
        let i = '';
        if (g[O(0xad)](h, -0x2fb * 0x5 + 0x2316 + -0x142e))
            i = d[O(0x100)];
        if (g[P(0xdd)](h, -0x2019 + 0xa * -0x2c5 + 0x3bcd))
            i = d[P(0xaa)];
        if (g[O(0xad)](h, -0x1936 + 0x13c7 + -0x22 * -0x29))
            i = d[P(0xec)];
        const j = {};
        return j[O(0xf4)] = e[P(0x98)][P(0xf4)], i = (0x1 * -0xbd9 + -0x3 * 0x443 + 0x18a2, pupa_1[P(0x93)])(g[P(0xa0)](i, ''), j), {
            'whatsappId': d[O(0x118)],
            'message': i,
            'number': e[P(0x98)][O(0x103)],
            'mediaUrl': d[O(0x11b)],
            'mediaName': g[O(0xdb)](cArquivoName, d[P(0x11b)]),
            'messageRandom': O(0xea) + h,
            'campaignContact': e,
            'options': f
        };
    }, nextDayHoursValid = d => {
        const Q = H, R = H, e = {
                'MgRxN': function (o, p) {
                    return o * p;
                },
                'uPtwK': function (o, p) {
                    return o + p;
                },
                'TIxzl': function (o, p) {
                    return o / p;
                },
                'vHDNe': function (o, p, q, r) {
                    return o(p, q, r);
                },
                'XDzrk': function (o, p, q) {
                    return o(p, q);
                },
                'SaOLg': function (o, p) {
                    return o === p;
                },
                'SiPPr': function (o, p) {
                    return o === p;
                },
                'xgLqa': function (o, p) {
                    return o === p;
                },
                'txbue': function (o, p) {
                    return o || p;
                },
                'kuyAo': function (o, p) {
                    return o(p);
                },
                'REifJ': function (o, p) {
                    return o < p;
                },
                'oNDgP': function (o, p) {
                    return o !== p;
                },
                'HoPLR': Q(0xf0),
                'fDVcw': function (o, p) {
                    return o * p;
                },
                'YMmZb': function (o, p) {
                    return o < p;
                },
                'lCCzv': function (o, p) {
                    return o === p;
                },
                'GZylD': R(0x10e),
                'WwxWG': Q(0x11d),
                'kuBpH': Q(0x12f),
                'FWNIQ': Q(0x127),
                'ZSZWt': function (o, p) {
                    return o && p;
                },
                'rTAAK': function (o, p) {
                    return o === p;
                },
                'AfVZb': R(0xaf),
                'XOubN': Q(0xeb),
                'qnSyT': function (o, p) {
                    return o && p;
                },
                'NRWpq': R(0x96),
                'Ophro': Q(0xf2),
                'MyYgu': function (o, p) {
                    return o > p;
                },
                'IJBcQ': R(0x99)
            };
        let f = d;
        const g = new Date(), h = (-0xa90 + -0x2d8 + 0xd68, date_fns_1[Q(0x90) + R(0xe9)])(f, new Date());
        e[R(0xb3)](h, -0x3d7 + 0x13fa * 0x1 + 0x51 * -0x33) && (e[R(0x133)](e[R(0x111)], e[R(0x111)]) ? g = (0x222 * -0x1 + -0xbb * 0x1f + 0x18c7, h[R(0x105)])(i, e[Q(0x11a)](j, -(-0xc39 + 0xfdd + -0x3a3))) : f = (-0x757 * -0x1 + -0xd8a + 0x633, date_fns_1[R(0x105)])(f, e[Q(0x12d)](h, -(-0x1cb1 + 0x256e + -0x8bc))));
        if (e[R(0xd1)](f[R(0xa7)](), g[Q(0xa7)]())) {
            if (e[Q(0xbf)](e[R(0x128)], e[Q(0x128)]))
                f = (-0x2139 + 0x223d + 0x5 * -0x34, date_fns_1[R(0x121)])((-0x2 * 0x737 + -0x1fc4 * 0x1 + 0x2e32, date_fns_1[Q(0x92)])(f, g[R(0xd2)]()), g[Q(0xba)]());
            else {
                const q = (0xe0c * 0x2 + 0x107 * -0x6 + -0x15ee * 0x1, g[Q(0x90) + R(0xf7)])(h, new i());
                return e[Q(0xe3)](e[R(0x11a)](q, -0x1f6 * -0x5 + 0x14b * -0x12 + -0x458 * -0x4), j);
            }
        }
        const i = (-0xc0b + 0xec7 + -0x32 * 0xe, date_fns_1[R(0x130)])(e[Q(0x9a)], e[R(0xdf)], f), j = (-0x1fe2 + -0x11ce + 0x31b0, date_fns_1[Q(0x130)])(e[Q(0xd6)], e[Q(0xdf)], f), k = {};
        k[R(0x11f)] = i, k[R(0x9c)] = j;
        const l = (0x5f3 + -0x1 * -0x6ad + -0xca0 * 0x1, date_fns_1[Q(0xbc) + Q(0xb7)])(f, k), m = (-0x82a + -0x2c7 + -0xaf1 * -0x1, date_fns_1[R(0xda)])(i, f), n = (-0x5 * -0x58a + -0x36d * -0x5 + -0x2cd3, date_fns_1[R(0xe2)])(j, f);
        e[R(0xab)](!l, m) && (e[R(0x101)](e[R(0xf1)], e[R(0x8d)]) ? f = (0x25f7 + 0x1e1a + 0x4411 * -0x1, g[R(0x92)])(h, -0x8 * 0xe8 + -0x110 + 0x164 * 0x6) : f = (-0x1 * -0x105d + 0x2236 + -0x3293, date_fns_1[Q(0x121)])((-0x2e3 * 0xb + -0x24f7 + 0x8 * 0x897, date_fns_1[Q(0x92)])(f, 0xd7 * 0xb + -0x951 + -0x1c * -0x1), 0x103 * 0x1 + 0x1051 + -0x1136));
        if (e[R(0x97)](!l, n) && e[Q(0x101)](h, 0x2 * -0x6d9 + 0x1d42 + 0x3e4 * -0x4)) {
            if (e[R(0x95)](e[Q(0xfe)], e[R(0xc8)]))
                return q = (0x24ec + 0x605 * 0x1 + -0x2af1, r[Q(0x125)])(s, e[R(0xa6)](t, 0x203f + -0x181d + -0x1 * 0x43a)), e[Q(0xd7)](u, v, w, {
                    ...x,
                    'jobId': R(0xfa) + '_' + y['id'] + R(0xbb) + z[Q(0xe8)] + R(0xfc) + A['id'],
                    'delay': e[R(0xc5)](B, C, D)
                });
            else
                f = (0x150b + -0x1 * 0x6d4 + 0x3 * -0x4bd, date_fns_1[Q(0x105)])((-0xffb * 0x1 + 0xd5e + 0x29d, date_fns_1[Q(0x92)])(f, 0x1 * 0xfad + -0x1f2d + 0xf88), -0x3f2 * 0x1 + 0x1939 + 0xaa3 * -0x2);
        }
        if (e[R(0xab)](!l, n) && e[Q(0xd4)](h, 0x5 * -0x5 + 0x1fa3 + -0x1f8a)) {
            if (e[Q(0x95)](e[Q(0x9d)], e[Q(0x9d)]))
                f = (0xa1f * -0x1 + -0xd3 * -0x10 + -0x311, date_fns_1[Q(0x92)])(f, -0x1 * -0x1056 + -0x1 * -0x1c37 + -0x2c85);
            else {
                const t = e[R(0xc5)](p, -0xf6 * -0x4 + 0x29d * 0x3 + 0x73 * -0x1a, 0xa * -0x2b7 + -0xe4a + 0x2973);
                let u = '';
                if (e[R(0x95)](t, -0x2651 + -0xafa + 0x277 * 0x14))
                    u = q[Q(0x100)];
                if (e[Q(0xf5)](t, -0x10da + -0x609 + 0x16e5 * 0x1))
                    u = r[R(0xaa)];
                if (e[R(0x9e)](t, 0x1 * -0xcdd + 0xfe2 + -0x302))
                    u = s[Q(0xec)];
                const v = {};
                return v[R(0xf4)] = u[Q(0x98)][Q(0xf4)], u = (0xe9 * -0x2 + -0x830 + -0x2 * -0x501, t[Q(0x93)])(e[R(0x12c)](u, ''), v), {
                    'whatsappId': v[R(0x118)],
                    'message': u,
                    'number': w[Q(0x98)][R(0x103)],
                    'mediaUrl': x[Q(0x11b)],
                    'mediaName': e[R(0xf9)](y, z[Q(0x11b)]),
                    'messageRandom': Q(0xea) + t,
                    'campaignContact': A,
                    'options': B
                };
            }
        }
        return f;
    }, calcDelay = (d, e) => {
        const S = I, T = H, f = {};
        f[S(0x110)] = function (i, j) {
            return i + j;
        }, f[T(0xc2)] = function (i, j) {
            return i * j;
        };
        const g = f, h = (-0x72a + 0x1d * 0xf2 + 0x6 * -0x360, date_fns_1[S(0x90) + S(0xf7)])(d, new Date());
        return g[T(0x110)](g[S(0xc2)](h, -0x11 * 0x59 + 0xe00 + -0x42f), e);
    }, StartCampaignService = async ({
        campaignId: h,
        tenantId: i,
        options: j
    }) => {
        const U = H, V = I, k = {
                'GsraN': U(0x126) + V(0xee) + U(0x10c) + 'TS',
                'Qjcvb': function (v, w) {
                    return v === w;
                },
                'IPotL': U(0x12e),
                'rWGnJ': V(0x107),
                'DMZnx': function (v, w) {
                    return v / w;
                },
                'IIvqA': function (v, w, x, y) {
                    return v(w, x, y);
                },
                'BJVlD': function (v, w, x) {
                    return v(w, x);
                },
                'jdXqd': V(0xb9),
                'BlfOl': function (v, w) {
                    return v === w;
                },
                'MjFaw': V(0x134),
                'cBEIL': U(0x11c) + V(0x9f) + V(0xef),
                'HPKGA': V(0x98),
                'yBvlq': function (v, w) {
                    return v !== w;
                },
                'oRJdv': V(0x102),
                'ZwLmk': U(0x9b),
                'cudKg': function (v, w) {
                    return v * w;
                },
                'uwvdD': V(0xa5) + U(0x123),
                'llmDM': V(0xd9) + U(0xc0) + V(0xfb),
                'mgMfD': V(0x117)
            }, l = {};
        l['id'] = h, l[V(0xd0)] = i;
        const m = {};
        m[V(0x115)] = l, m[U(0xa3)] = [k[U(0xb6)]];
        const n = await Campaign_1[V(0xcf)][U(0x94)](m);
        if (!n) {
            if (k[V(0xe6)](k[U(0xac)], k[U(0xac)]))
                throw new AppError_1[(U(0xcf))](k[U(0x10a)], -0x1 * -0xdd3 + 0x2073 + -0x2cb2);
            else
                u = (-0xed6 + 0x184 * 0x19 + -0x170e, h[U(0x105)])((0x7 * -0x7 + -0x1 * -0x79d + -0x76c, i[U(0x92)])(j, 0x5c * 0x10 + -0x1fd0 + 0x5 * 0x538), 0x1b20 + -0x125a + 0x8c5 * -0x1);
        }
        const o = {};
        o[V(0xa4)] = h;
        const p = {};
        p[V(0x115)] = o, p[V(0xa3)] = [k[V(0xbe)]];
        const q = await CampaignContacts_1[V(0xcf)][V(0xe0)](p);
        if (!q) {
            if (k[V(0xa9)](k[V(0xe5)], k[V(0xe4)]))
                throw new AppError_1[(U(0xcf))](k[V(0xb5)], 0x2 * -0x48d + 0x8 * 0x48f + 0xce5 * -0x2);
            else
                i = (-0x7f * -0x41 + 0x505 * 0x1 + 0x12 * -0x212, j[U(0x121)])((-0xd * 0xe3 + -0xa * -0xdd + 0x2e5, k[U(0x92)])(l, m[V(0xd2)]()), n[U(0xba)]());
        }
        const r = n[V(0x106)] ? k[V(0xb8)](n[V(0x106)], 0x5 * -0x38a + -0xf1d + 0x24b7) : 0x1e6e + 0x21 * -0x37b + 0xa28d;
        let s = (-0x2 * -0x535 + -0x110a * -0x1 + -0x1b74, date_fns_tz_1[V(0x129) + V(0x116)])(n[U(0x11f)], k[U(0x113)]);
        const t = q[V(0x120)](x => {
            const W = V, X = U, y = {};
            y[W(0xb0)] = k[X(0xb5)];
            const z = y;
            if (k[W(0x10d)](k[W(0x131)], k[W(0xbd)]))
                throw new m[(X(0xcf))](z[X(0xb0)], 0xc8b + 0xe9d + -0x1994);
            else
                return s = (0x2d7 + -0x1d03 + 0x1a2c, date_fns_1[W(0x125)])(s, k[W(0xa1)](r, 0x19ff + 0x1bc3 * -0x1 + 0x5ac)), k[W(0x91)](mountMessageData, n, x, {
                    ...j,
                    'jobId': X(0xfa) + '_' + n['id'] + X(0xbb) + x[W(0xe8)] + W(0xfc) + x['id'],
                    'delay': k[X(0x112)](calcDelay, s, r)
                });
        });
        Queue_1[U(0xcf)][U(0xb2)](k[V(0x124)], t);
        const u = {};
        u[U(0x12b)] = k[U(0xf6)], await n[U(0x122)](u);
    };
exports[H(0xcf)] = StartCampaignService;