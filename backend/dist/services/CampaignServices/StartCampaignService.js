'use strict';
const J = b, K = b;
(function (c, d) {
    const H = b, I = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(H(0x13d)) / (-0x1 * -0x142b + -0x1b09 + 0x6df) * (-parseInt(I(0x15a)) / (-0x1c1 * -0x4 + -0x23cc + 0x1cca)) + -parseInt(I(0x19e)) / (-0xe * 0x2b + 0x6 * -0x610 + 0x26bd) * (parseInt(H(0x1a9)) / (0x124 * -0x13 + 0x1182 + 0x42e)) + -parseInt(H(0x170)) / (0x183 * -0x3 + -0x1 * 0x17e9 + 0x1c77 * 0x1) * (-parseInt(H(0x115)) / (-0x55 * -0x19 + 0x269 * 0xd + -0x279c)) + -parseInt(H(0x12c)) / (0x32 * -0xbf + -0x2 * -0x2ae + -0x5 * -0x665) + parseInt(I(0x199)) / (0x2b * 0x6b + 0x8db + -0x55c * 0x5) + -parseInt(I(0x153)) / (0x1d09 * 0x1 + 0xc * 0x255 + 0x1 * -0x38fc) + -parseInt(I(0x198)) / (-0xce1 * 0x3 + 0xfeb + 0x16c2);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0xdc81f + 0xeca8d * -0x1 + -0x3 * -0x37d51));
function a() {
    const a3 = [
        'bOBcr',
        'SWmxl',
        'date-fns',
        'eWhatsappC',
        'InSeconds',
        'vWktb',
        'message2',
        '__esModule',
        'Lksld',
        'message1',
        '08:00',
        '6094647bZFRxs',
        'terval',
        'ffMgP',
        'getMinutes',
        'value',
        'YtOCz',
        'addSeconds',
        '2022350oFvPBN',
        'upJet',
        'ZqAnZ',
        'add',
        'RzIqZ',
        'sessionId',
        'yWySg',
        'gyluE',
        'status',
        'wdcmj',
        'ls/Campaig',
        'OMihE',
        'TuMoR',
        'oUtc',
        'SmAHf',
        'GN_CONTACT',
        'Qsdqm',
        'ujJdX',
        'hdhLD',
        'delay',
        'HVQPX',
        'cpZwx',
        '5998145RqUhue',
        'S_NOT_EXIS',
        'rs/AppErro',
        'split',
        'random',
        'lhRZp',
        'IKQmY',
        'campaginId',
        'QNnne',
        'BfqEd',
        '../../erro',
        'length',
        'fault',
        'scheduled',
        'HcEiC',
        'aKURG',
        'setMinutes',
        'where',
        'KZjyQ',
        'include',
        'contact',
        '__importDe',
        'ljDjL',
        'IWjlF',
        '../../mode',
        'HufuT',
        'start',
        'nContacts',
        'pDxlm',
        'PDRdB',
        'HH:mm',
        'RijeN',
        'ERROR_CAMP',
        'contactId',
        'isAfter',
        'message3',
        'ampaign',
        'findAll',
        'cSMoS',
        'ZUCoF',
        '8039100umTeTR',
        '9226064oMuTOL',
        'qxSLQ',
        '_contact_',
        'rSIXk',
        'NIfRj',
        '20073csODBY',
        'isBefore',
        'message',
        '20:00',
        'mPGbc',
        'number',
        'setHours',
        'parse',
        'zonedTimeT',
        'gnEaQ',
        'defineProp',
        '492ozPOyu',
        'mediaUrl',
        'addDays',
        'DFoiL',
        'findOne',
        'WxXuI',
        'mHNEp',
        'bjWoW',
        'iKPyA',
        'HycNb',
        'getHours',
        'QTnbi',
        'JkUdW',
        'map',
        '6jIMVHp',
        'mAUJg',
        'InDays',
        'CBluU',
        'XISTS',
        'qMqZg',
        'default',
        'DtFzx',
        'xoAXt',
        'AIGN_NOT_E',
        'SendMessag',
        'yoVnw',
        'erty',
        'onoaL',
        'end',
        'campaignId',
        'pnHvC',
        'GzFfb',
        'isWithinIn',
        'getTime',
        'eMuCX',
        'floor',
        'ERR_CAMPAI',
        '3080469DNXcEZ',
        'OKxHO',
        'ARbQJ',
        'Rmykz',
        '_id_',
        'date-fns-t',
        'uLagE',
        '_time_',
        'HedBE',
        'o_Paulo',
        'uccgH',
        'blXwj',
        'session',
        'uBvMy',
        'update',
        '/Queue',
        'tenantId',
        '1cdZkSY',
        'qfpOG',
        'difference',
        'FdfKq',
        'PBKYN',
        '../../libs',
        'America/Sa',
        'FkEsL',
        'eifKg',
        'Epjcv',
        'VMBzt'
    ];
    a = function () {
        return a3;
    };
    return a();
}
var __importDefault = this && this[J(0x185) + J(0x17c)] || function (c) {
    const L = K;
    return c && c[L(0x14f)] ? c : { 'default': c };
};
const G = {};
G[J(0x157)] = !![], Object[K(0x1a8) + J(0x121)](exports, J(0x14f), G);
const date_fns_1 = require(J(0x14a)), date_fns_tz_1 = require(J(0x131) + 'z'), Campaign_1 = __importDefault(require(K(0x188) + K(0x164) + 'n')), AppError_1 = __importDefault(require(K(0x17a) + K(0x172) + 'r')), CampaignContacts_1 = __importDefault(require(K(0x188) + J(0x164) + K(0x18b))), Queue_1 = __importDefault(require(K(0x142) + J(0x13b))), cArquivoName = d => {
        const M = K, N = K, e = {};
        e[M(0x132)] = function (i, j) {
            return i - j;
        };
        const f = e;
        if (!d)
            return '';
        const g = d[M(0x173)]('/'), h = g[f[M(0x132)](g[M(0x17b)], -0x2cc * 0x5 + 0x633 + -0x1 * -0x7ca)];
        return h;
    }, randomInteger = (d, e) => {
        const O = K, P = J, f = {};
        f[O(0x15c)] = function (h, i) {
            return h + i;
        }, f[P(0x12f)] = function (h, i) {
            return h * i;
        }, f[P(0x182)] = function (h, i) {
            return h - i;
        };
        const g = f;
        return g[O(0x15c)](Math[P(0x12a)](g[P(0x12f)](Math[O(0x174)](), g[P(0x15c)](g[O(0x182)](e, d), 0x1da3 + -0x18 + 0x18e * -0x13))), d);
    }, mountMessageData = (c, d, e) => {
        const Q = K, R = J, f = {
                'SWmxl': function (i, j, k) {
                    return i(j, k);
                },
                'GzFfb': function (i, j) {
                    return i === j;
                },
                'blXwj': function (i, j) {
                    return i === j;
                },
                'vWktb': function (i, j) {
                    return i === j;
                },
                'bjWoW': function (i, j) {
                    return i(j);
                }
            }, g = f[Q(0x149)](randomInteger, -0x3e + 0x68a + -0x9 * 0xb3, 0x2 * 0x11d4 + -0xa11 + 0xcca * -0x2);
        let h = '';
        if (f[R(0x126)](g, -0x977 * 0x3 + 0x24f0 + -0x88a))
            h = c[Q(0x151)];
        if (f[R(0x137)](g, 0xae6 + -0x1 * 0x2204 + 0x1720))
            h = c[Q(0x14e)];
        if (f[R(0x14d)](g, -0xa3 * 0x37 + -0xa85 + -0x2d8d * -0x1))
            h = c[Q(0x193)];
        return {
            'whatsappId': c[R(0x15f)],
            'message': h,
            'number': d[R(0x184)][Q(0x1a3)],
            'mediaUrl': c[R(0x1aa)],
            'mediaName': f[Q(0x1b0)](cArquivoName, c[Q(0x1aa)]),
            'messageRandom': R(0x1a0) + g,
            'campaignContact': d,
            'options': e
        };
    }, nextDayHoursValid = d => {
        const S = J, T = J, e = {
                'PBKYN': function (o, p) {
                    return o + p;
                },
                'mAUJg': function (o, p) {
                    return o * p;
                },
                'eMuCX': function (o, p) {
                    return o - p;
                },
                'DFoiL': function (o, p) {
                    return o * p;
                },
                'gnEaQ': function (o, p, q) {
                    return o(p, q);
                },
                'upJet': function (o, p) {
                    return o === p;
                },
                'bOBcr': function (o, p) {
                    return o === p;
                },
                'DtFzx': function (o, p) {
                    return o === p;
                },
                'aKURG': function (o, p) {
                    return o(p);
                },
                'Epjcv': S(0x12b) + T(0x169) + T(0x171) + 'TS',
                'IKQmY': function (o, p) {
                    return o < p;
                },
                'onoaL': function (o, p) {
                    return o === p;
                },
                'OKxHO': T(0x1b1),
                'RzIqZ': S(0x16a),
                'cpZwx': T(0x152),
                'ZUCoF': S(0x18e),
                'wdcmj': S(0x1a1),
                'yWySg': function (o, p) {
                    return o && p;
                },
                'PDRdB': S(0x12e),
                'eifKg': T(0x196),
                'BfqEd': function (o, p) {
                    return o && p;
                },
                'HycNb': function (o, p) {
                    return o !== p;
                },
                'JkUdW': S(0x13e),
                'lhRZp': function (o, p) {
                    return o > p;
                },
                'qxSLQ': T(0x189),
                'QNnne': T(0x158)
            };
        let f = d;
        const g = new Date(), h = (-0x1727 + 0x17f5 + -0xce, date_fns_1[T(0x13f) + S(0x117)])(f, new Date());
        if (e[S(0x176)](h, 0xd01 * 0x2 + 0x9e6 + -0x2fe * 0xc)) {
            if (e[T(0x122)](e[T(0x12d)], e[S(0x12d)]))
                f = (0x2 * -0x49 + -0xe5 + 0x177, date_fns_1[T(0x1ab)])(f, e[S(0x1ac)](h, -(-0x2402 + 0xc7 * 0x2 + 0x2275 * 0x1)));
            else
                return e[T(0x141)](h[T(0x12a)](e[T(0x116)](i[T(0x174)](), e[T(0x141)](e[T(0x129)](j, k), 0x2 * -0xf47 + -0x146a + -0x32f9 * -0x1))), l);
        }
        if (e[T(0x176)](f[S(0x128)](), g[S(0x128)]())) {
            if (e[S(0x11c)](e[T(0x15e)], e[T(0x15e)]))
                f = (-0x2508 + -0x7bf + 0x2cc7 * 0x1, date_fns_1[S(0x180)])((0x899 + 0x19b7 + 0x3 * -0xb70, date_fns_1[T(0x1a4)])(f, g[T(0x1b3)]()), g[T(0x156)]());
            else {
                if (!e)
                    return '';
                const q = f[T(0x173)]('/'), r = q[e[S(0x129)](q[T(0x17b)], 0xf2b + -0x278 * 0x3 + -0x1 * 0x7c2)];
                return r;
            }
        }
        const i = (0x1 * 0x1d5c + 0x23b1 + -0x410d, date_fns_1[T(0x1a5)])(e[T(0x16f)], e[T(0x197)], f), j = (0x1813 + -0x1ebd + 0x6aa, date_fns_1[T(0x1a5)])(e[S(0x163)], e[T(0x197)], f), k = {};
        k[S(0x18a)] = i, k[T(0x123)] = j;
        const l = (0x214 * -0x6 + 0x25ab + 0x1933 * -0x1, date_fns_1[S(0x127) + T(0x154)])(f, k), m = (-0x15 * 0x89 + 0x5a * -0x11 + 0x1137, date_fns_1[S(0x19f)])(i, f), n = (-0x1b0d + 0x7e5 * -0x1 + -0x9 * -0x3e2, date_fns_1[T(0x192)])(j, f);
        if (e[T(0x160)](!l, m)) {
            if (e[S(0x15b)](e[S(0x18d)], e[S(0x145)])) {
                const r = (0x210e + 0x62b + -0x2739, g[T(0x13f) + S(0x14c)])(h, new i());
                return e[S(0x141)](e[S(0x1ac)](r, -0x1ec9 + -0x125b * 0x2 + -0x2a5 * -0x1b), j);
            } else
                f = (0xdbc * -0x1 + -0x12c5 * -0x1 + 0x1 * -0x509, date_fns_1[S(0x180)])((0x1ab8 * 0x1 + 0x17a3 + -0x10c9 * 0x3, date_fns_1[S(0x1a4)])(f, 0x1 * -0x9f7 + -0x648 + 0x1047), -0x1 * -0x1cb2 + 0x2561 + -0x5 * 0xd31);
        }
        if (e[S(0x179)](!l, n) && e[T(0x11c)](h, -0x22e6 + 0x1 * -0xfe2 + 0x32c8)) {
            if (e[S(0x1b2)](e[T(0x113)], e[S(0x113)])) {
                const s = e[T(0x1a7)](n, 0xb5e + -0x5ce * -0x1 + -0x1 * 0x112b, -0x67 * 0x19 + -0xb2 + 0xac4);
                let t = '';
                if (e[S(0x15b)](s, 0x2027 * 0x1 + -0xd * 0x255 + -0x1d5))
                    t = o[T(0x151)];
                if (e[T(0x148)](s, 0x3 * -0x424 + 0x86 + 0xfe * 0xc))
                    t = p[S(0x14e)];
                if (e[S(0x11c)](s, 0xa7b * 0x1 + -0xb7c + 0x104))
                    t = q[T(0x193)];
                return {
                    'whatsappId': r[T(0x15f)],
                    'message': t,
                    'number': s[S(0x184)][T(0x1a3)],
                    'mediaUrl': t[S(0x1aa)],
                    'mediaName': e[T(0x17f)](u, v[S(0x1aa)]),
                    'messageRandom': S(0x1a0) + s,
                    'campaignContact': w,
                    'options': x
                };
            } else
                f = (0x1a * 0xa + 0x186a + -0x196e, date_fns_1[S(0x1ab)])((-0x82a + 0x12 * 0x169 + -0x1138, date_fns_1[S(0x1a4)])(f, -0x915 + -0x8a + 0x9a7 * 0x1), 0x17c0 + -0x29b * -0x9 + 0x1 * -0x2f32);
        }
        if (e[T(0x179)](!l, n) && e[S(0x175)](h, 0x57 * 0x33 + -0x64c + -0xb09)) {
            if (e[S(0x1b2)](e[S(0x19a)], e[T(0x178)]))
                f = (0x219b + -0x1d35 + -0x1 * 0x466, date_fns_1[T(0x1a4)])(f, 0xefd + -0x22 * 0x79 + -0x1 * -0x11d);
            else
                throw new d[(T(0x11b))](e[T(0x146)], -0x1 * 0x56b + 0x1d96 + -0x1697);
        }
        return f;
    }, calcDelay = (d, e) => {
        const U = K, V = J, f = {};
        f[U(0x11d)] = function (i, j) {
            return i + j;
        }, f[V(0x18c)] = function (i, j) {
            return i * j;
        };
        const g = f, h = (0x91e + -0x1a * -0xfb + -0x229c, date_fns_1[U(0x13f) + U(0x14c)])(d, new Date());
        return g[V(0x11d)](g[V(0x18c)](h, 0x917 + -0xb95 + -0x222 * -0x3), e);
    }, StartCampaignService = async ({
        campaignId: h,
        tenantId: i,
        options: j
    }) => {
        const W = K, X = J, k = {
                'gyluE': function (v, w) {
                    return v / w;
                },
                'qMqZg': function (v, w, x, y) {
                    return v(w, x, y);
                },
                'yoVnw': function (v, w, x) {
                    return v(w, x);
                },
                'SmAHf': function (v, w) {
                    return v === w;
                },
                'WxXuI': W(0x140),
                'CBluU': W(0x165),
                'ujJdX': W(0x138),
                'HedBE': function (v, w) {
                    return v !== w;
                },
                'ffMgP': X(0x166),
                'uccgH': W(0x19d),
                'QTnbi': W(0x190) + X(0x11e) + W(0x119),
                'HVQPX': W(0x184),
                'HcEiC': function (v, w) {
                    return v === w;
                },
                'FkEsL': W(0x187),
                'pnHvC': W(0x186),
                'mPGbc': X(0x12b) + W(0x169) + X(0x171) + 'TS',
                'mHNEp': function (v, w) {
                    return v * w;
                },
                'rSIXk': W(0x143) + W(0x135),
                'VMBzt': W(0x11f) + X(0x14b) + X(0x194),
                'RijeN': W(0x17d)
            }, l = {};
        l['id'] = h, l[X(0x13c)] = i;
        const m = {};
        m[X(0x181)] = l, m[W(0x183)] = [k[W(0x16b)]];
        const n = await Campaign_1[W(0x11b)][X(0x1ad)](m);
        if (!n) {
            if (k[X(0x134)](k[X(0x155)], k[W(0x136)]))
                throw new AppError_1[(W(0x11b))](k[X(0x112)], 0x11ad + -0x1516 + 0x1 * 0x4fd);
            else
                u = (0x209b + 0x18 * 0x6d + -0x2ad3, h[W(0x1ab)])((0x1903 + -0x1 * 0xaff + -0x114 * 0xd, i[W(0x1a4)])(j, 0x93f * 0x1 + 0x1840 + -0x2177), -0x1fcd + -0x19 * -0xef + -0x1 * -0x877);
        }
        const o = {};
        o[X(0x124)] = h;
        const p = {};
        p[X(0x181)] = o, p[X(0x183)] = [k[W(0x16e)]];
        const q = await CampaignContacts_1[X(0x11b)][W(0x195)](p);
        if (!q) {
            if (k[W(0x17e)](k[W(0x144)], k[X(0x125)]))
                p = (0x17d7 + 0x2 * -0x7af + 0x2d3 * -0x3, u[W(0x1a4)])(h, 0x7a * -0x1d + -0xaa1 + 0x187b * 0x1);
            else
                throw new AppError_1[(W(0x11b))](k[X(0x1a2)], 0x1b8f + -0x8a0 + 0x1 * -0x115b);
        }
        const r = n[W(0x16d)] ? k[X(0x1af)](n[W(0x16d)], -0x18f3 + -0x1 * 0x563 + 0x223e) : -0x9116 + -0xbf * -0xbf + -0x3 * -0x1ae7;
        let s = (-0x1246 + 0x8f7 * 0x3 + -0x89f, date_fns_tz_1[X(0x1a6) + X(0x167)])(n[W(0x18a)], k[X(0x19c)]);
        const t = q[X(0x114)](x => {
            const a1 = X, a2 = W, y = {
                    'hdhLD': function (z, A) {
                        const Y = b;
                        return k[Y(0x161)](z, A);
                    },
                    'uBvMy': function (z, A, B, C) {
                        const Z = b;
                        return k[Z(0x11a)](z, A, B, C);
                    },
                    'Lksld': function (z, A, B) {
                        const a0 = b;
                        return k[a0(0x120)](z, A, B);
                    }
                };
            return k[a1(0x168)](k[a1(0x1ae)], k[a2(0x118)]) ? (r = (0x404 + -0x62a * -0x5 + -0x2 * 0x116b, s[a1(0x159)])(t, y[a2(0x16c)](u, 0x9d6 + -0x4a * -0x9 + 0x54 * -0x1a)), y[a2(0x139)](v, w, x, {
                ...y,
                'jobId': a1(0x177) + '_' + z['id'] + a2(0x19b) + A[a1(0x191)] + a1(0x130) + B['id'] + a1(0x133) + C[a1(0x18a)][a2(0x128)](),
                'delay': y[a1(0x150)](D, E, F)
            })) : (s = (0x199 * -0x1 + 0x84 * 0x35 + -0x1 * 0x19bb, date_fns_1[a2(0x159)])(s, k[a2(0x161)](r, 0x2f * 0x60 + 0x827 + -0x15df)), k[a1(0x11a)](mountMessageData, n, x, {
                ...j,
                'jobId': a1(0x177) + '_' + n['id'] + a2(0x19b) + x[a2(0x191)] + a2(0x130) + x['id'] + a1(0x133) + n[a1(0x18a)][a1(0x128)](),
                'delay': k[a2(0x120)](calcDelay, s, r)
            }));
        });
        Queue_1[X(0x11b)][W(0x15d)](k[X(0x147)], t);
        const u = {};
        u[W(0x162)] = k[W(0x18f)], await n[W(0x13a)](u);
    };
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x25c + -0x1193 + -0x1 * -0x1049);
        let h = e[f];
        return h;
    }, b(c, d);
}
exports[J(0x11b)] = StartCampaignService;