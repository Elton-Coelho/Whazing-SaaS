'use strict';
const J = b, K = b;
(function (c, d) {
    const H = b, I = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(H(0x9e)) / (0x8c5 + -0x16 * 0x181 + 0x1852) + parseInt(I(0xb5)) / (-0x1 * 0x111b + -0x16c7 * -0x1 + -0x5 * 0x122) * (-parseInt(I(0x9a)) / (-0x21ca + 0x17e7 + 0x9e6)) + -parseInt(H(0x102)) / (0x1dd2 + -0x1 * 0x12ad + -0xb21) * (parseInt(H(0xef)) / (0x620 + 0x727 + -0xd42)) + parseInt(H(0xeb)) / (-0x17 * 0x129 + 0x104a + 0xa6b) * (parseInt(I(0xbd)) / (-0x17b * 0x3 + 0x1 * 0x79 + 0x3ff)) + parseInt(H(0xe8)) / (-0xce8 + -0x1af6 + 0x27e6) + -parseInt(H(0xb2)) / (-0x233d + -0xa7 * 0x38 + 0x1a * 0x2c3) * (-parseInt(I(0xcf)) / (0x3 * -0x7af + -0xa * -0xd3 + -0x3 * -0x4f3)) + parseInt(H(0xd0)) / (0x16 * -0x4d + 0x1a79 + 0x4f4 * -0x4) * (-parseInt(H(0x11a)) / (-0xb * 0x5a + -0xffd + 0x13e7));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x1 * 0x12d7b9 + -0x9cf5 + -0x2 * 0x308fb));
function a() {
    const a0 = [
        'getMinutes',
        'LveAE',
        'SendMessag',
        'delay',
        '264ewLFzV',
        'date-fns-t',
        'S_NOT_EXIS',
        'value',
        '/Queue',
        'update',
        'WNlnj',
        'HzRZJ',
        'status',
        'uFfjc',
        'mediaUrl',
        'ERROR_CAMP',
        'MeWtX',
        'kXyDt',
        'sYLsr',
        'mNoGT',
        'UHMfr',
        'eWhatsappC',
        'WaKsO',
        'PxQKF',
        'include',
        '_id_',
        '__importDe',
        'BsTNz',
        'oUtc',
        'erty',
        'ELNaB',
        'VmXcC',
        'ViSCu',
        '402WDunvd',
        'ls/Campaig',
        'qeJSy',
        'mLLDp',
        '1412953GRSyuo',
        'session',
        'zDqED',
        'ZRibI',
        'isAfter',
        'getHours',
        'GN_CONTACT',
        'InDays',
        'end',
        'xIYQa',
        'BPzNF',
        'oHYES',
        'lbGEC',
        'Vvdqg',
        'cPIQw',
        'getTime',
        '08:00',
        'lyAxu',
        'fault',
        'campaignId',
        '72mQICZp',
        'KQopw',
        'difference',
        '1966osyKfR',
        'YMlDj',
        'oFmhc',
        'wELZJ',
        'floor',
        'findAll',
        'cOHrN',
        'where',
        '427reOlYV',
        'MKwbY',
        'CUsAF',
        'America/Sa',
        'psaLt',
        '../../erro',
        'tkOoC',
        'yTSRJ',
        'gIipS',
        'zWnFF',
        '20:00',
        '__esModule',
        'dKfsr',
        'split',
        'isWithinIn',
        'start',
        '_time_',
        'message2',
        '755420QVQmpv',
        '1232088DIacQd',
        'KHPty',
        '../../mode',
        'HfkTY',
        'AIGN_NOT_E',
        'map',
        'isBefore',
        'add',
        'date-fns',
        'fsNth',
        'mCDka',
        'message',
        'vaVKA',
        'addSeconds',
        'o_Paulo',
        'wlNad',
        'CapLQ',
        'campaginId',
        'lZPSF',
        'cnJmE',
        'message1',
        'InSeconds',
        'WQAzJ',
        'UHViR',
        '3282216lEoXCQ',
        'message3',
        'nContacts',
        '143994xgBjPD',
        'addDays',
        'HH:mm',
        '_contact_',
        '165gIZFdA',
        'parse',
        'findOne',
        'IzyTs',
        'contact',
        'HspGw',
        'yEHXF',
        'smqBV',
        'zXtPW',
        'ERR_CAMPAI',
        'random',
        'XISTS',
        'CvDVB',
        'default',
        'sessionId',
        'sjxgS',
        'scheduled',
        '../../libs',
        'CxMwF',
        '60452vOcUQX',
        'ampaign',
        'terval',
        'number',
        'eYhUf',
        'defineProp',
        'lzRVt',
        'XwCVR',
        'lyWMD',
        'setHours',
        'length',
        'setMinutes',
        'Bjyuf',
        'PMupm',
        'zonedTimeT',
        'rs/AppErro',
        'tenantId',
        'contactId',
        'cGcZB',
        'qECaI'
    ];
    a = function () {
        return a0;
    };
    return a();
}
var __importDefault = this && this[J(0x93) + J(0xb0)] || function (c) {
    const L = J;
    return c && c[L(0xc8)] ? c : { 'default': c };
};
const G = {};
G[J(0x11d)] = !![], Object[K(0x107) + K(0x96)](exports, K(0xc8), G);
const date_fns_1 = require(J(0xd8)), date_fns_tz_1 = require(J(0x11b) + 'z'), Campaign_1 = __importDefault(require(J(0xd2) + K(0x9b) + 'n')), AppError_1 = __importDefault(require(K(0xc2) + J(0x111) + 'r')), CampaignContacts_1 = __importDefault(require(J(0xd2) + K(0x9b) + K(0xea))), Queue_1 = __importDefault(require(K(0x100) + J(0x11e))), cArquivoName = d => {
        const M = J, N = J, e = {};
        e[M(0xfb)] = function (i, j) {
            return i - j;
        };
        const f = e;
        if (!d)
            return '';
        const g = d[N(0xca)]('/'), h = g[f[M(0xfb)](g[N(0x10c)], -0xb01 + 0x15fd + 0x3a9 * -0x3)];
        return h;
    }, randomInteger = (d, e) => {
        const O = K, P = J, f = {};
        f[O(0xab)] = function (h, i) {
            return h + i;
        }, f[O(0xb8)] = function (h, i) {
            return h * i;
        }, f[P(0x106)] = function (h, i) {
            return h + i;
        }, f[P(0xd9)] = function (h, i) {
            return h - i;
        };
        const g = f;
        return g[O(0xab)](Math[P(0xb9)](g[O(0xb8)](Math[P(0xf9)](), g[O(0x106)](g[P(0xd9)](e, d), 0xfb * 0xe + -0x1977 * -0x1 + 0x108 * -0x26))), d);
    }, mountMessageData = (c, d, e) => {
        const Q = K, R = J, f = {
                'Bjyuf': function (i, j, k) {
                    return i(j, k);
                },
                'gIipS': function (i, j) {
                    return i === j;
                },
                'BsTNz': function (i, j) {
                    return i(j);
                }
            }, g = f[Q(0x10e)](randomInteger, -0x3 * 0x89 + -0x13d7 + 0x121 * 0x13, -0x1b * -0x121 + 0x2fe + 0x2 * -0x10bb);
        let h = '';
        if (f[Q(0xc5)](g, 0x1 * -0x1712 + 0x1 * -0x13e1 + 0x2af4))
            h = c[R(0xe4)];
        if (f[R(0xc5)](g, 0x1052 + -0x2 * 0x143 + -0xdca))
            h = c[Q(0xce)];
        if (f[R(0xc5)](g, -0x1d6 * 0x5 + -0x9e3 + 0x1314))
            h = c[Q(0xe9)];
        return {
            'whatsappId': c[R(0xfd)],
            'message': h,
            'number': d[R(0xf3)][R(0x105)],
            'mediaUrl': c[Q(0x124)],
            'mediaName': f[Q(0x94)](cArquivoName, c[Q(0x124)]),
            'messageRandom': R(0xdb) + g,
            'campaignContact': d,
            'options': e
        };
    }, nextDayHoursValid = d => {
        const S = K, T = K, e = {
                'BPzNF': S(0x125) + S(0xd4) + T(0xfa),
                'KHPty': function (o, p) {
                    return o / p;
                },
                'CapLQ': function (o, p, q, r) {
                    return o(p, q, r);
                },
                'mLLDp': function (o, p, q) {
                    return o(p, q);
                },
                'UHMfr': T(0xf8) + S(0xa4) + T(0x11c) + 'TS',
                'cnJmE': function (o, p) {
                    return o < p;
                },
                'lZPSF': function (o, p) {
                    return o !== p;
                },
                'VmXcC': T(0xfe),
                'MKwbY': function (o, p) {
                    return o * p;
                },
                'dKfsr': function (o, p) {
                    return o < p;
                },
                'lbGEC': function (o, p) {
                    return o === p;
                },
                'WNlnj': S(0xa0),
                'PMupm': T(0xae),
                'oHYES': T(0xed),
                'KQopw': S(0xc7),
                'YMlDj': function (o, p) {
                    return o && p;
                },
                'qeJSy': function (o, p) {
                    return o !== p;
                },
                'smqBV': T(0xb7),
                'CxMwF': S(0x127),
                'psaLt': function (o, p) {
                    return o && p;
                },
                'tkOoC': function (o, p) {
                    return o === p;
                },
                'yEHXF': S(0x10a),
                'vaVKA': function (o, p) {
                    return o && p;
                },
                'CUsAF': function (o, p) {
                    return o > p;
                },
                'zXtPW': function (o, p) {
                    return o === p;
                },
                'sYLsr': S(0x90)
            };
        let f = d;
        const g = new Date(), h = (-0x10fd * -0x1 + -0x2ab * 0xa + 0x9b1, date_fns_1[T(0xb4) + T(0xa5)])(f, new Date());
        if (e[T(0xe3)](h, -0x3 * -0x40d + 0x1fa1 + -0x2bc8)) {
            if (e[S(0xe2)](e[T(0x98)], e[S(0x98)])) {
                const p = {};
                return p[S(0xfc)] = j, g && h[S(0xc8)] ? i : p;
            } else
                f = (-0x116 * 0x13 + -0x3 * -0xb32 + -0xcf4, date_fns_1[S(0xec)])(f, e[S(0xbe)](h, -(0xbed + 0xda * -0xd + -0xda)));
        }
        if (e[S(0xc9)](f[S(0xad)](), g[T(0xad)]())) {
            if (e[S(0xaa)](e[S(0x120)], e[S(0x120)]))
                f = (0x1a7c + 0x25f4 + -0x4070, date_fns_1[S(0x10d)])((-0x7 * 0x2a1 + 0x2 * -0x209 + 0x1679, date_fns_1[S(0x10b)])(f, g[T(0xa3)]()), g[T(0x116)]());
            else
                throw new d[(S(0xfc))](e[S(0xa8)], 0xa12 * 0x1 + 0x40e + -0xc8c);
        }
        const i = (0x1613 * -0x1 + -0x691 + 0x729 * 0x4, date_fns_1[T(0xf0)])(e[S(0x10f)], e[S(0xa9)], f), j = (0x2 * -0xddf + -0xdff + 0x29bd * 0x1, date_fns_1[S(0xf0)])(e[S(0xb3)], e[T(0xa9)], f), k = {};
        k[T(0xcc)] = i, k[T(0xa6)] = j;
        const l = (0x249c * -0x1 + 0x1 * -0x2365 + 0x1 * 0x4801, date_fns_1[T(0xcb) + S(0x104)])(f, k), m = (0x1 * -0x2481 + -0x206a + 0x44eb, date_fns_1[S(0xd6)])(i, f), n = (-0x83 * -0x29 + 0x1789 * 0x1 + -0x134 * 0x25, date_fns_1[T(0xa2)])(j, f);
        if (e[S(0xb6)](!l, m)) {
            if (e[S(0x9c)](e[S(0xf6)], e[T(0x101)]))
                f = (-0xc70 + 0x9b8 * -0x2 + -0x1fe0 * -0x1, date_fns_1[S(0x10d)])((0xde5 + 0x12b5 + -0x104d * 0x2, date_fns_1[T(0x10b)])(f, 0xce * 0x10 + -0x1471 + 0x1 * 0x799), 0x208e + 0x5 * 0x7cd + -0x4771);
            else
                return r = (0x18 * -0x125 + 0x1a54 + 0x124, s[S(0xdd)])(t, e[S(0xd1)](u, -0x1271 + -0x118 * -0xe + -0x709 * -0x1)), e[T(0xe0)](v, w, x, {
                    ...y,
                    'jobId': T(0xe1) + '_' + z['id'] + S(0xee) + A[S(0x113)] + T(0x92) + B['id'] + S(0xcd) + C[S(0xcc)][T(0xad)](),
                    'delay': e[T(0x9d)](D, E, F)
                });
        }
        e[S(0xc1)](!l, n) && e[S(0xaa)](h, -0x1bb9 + -0x100e + 0x2bc7) && (e[T(0xc3)](e[S(0xf5)], e[T(0xf5)]) ? f = (0xa * 0x31d + 0x1632 + -0x3554, date_fns_1[T(0xec)])((-0x10f3 * -0x2 + 0x18dd * -0x1 + 0x9 * -0x101, date_fns_1[T(0x10b)])(f, 0x163 * -0x17 + 0x2579 + -0x58c), -0x119 * 0xb + -0x1835 + 0x2449) : f = (0x126b + -0xe32 + -0x2f * 0x17, g[S(0x10b)])(h, 0x2 * 0x7d8 + -0x103 * -0x13 + -0x22e1));
        if (e[T(0xdc)](!l, n) && e[T(0xbf)](h, 0x18a1 + -0x206 + 0x283 * -0x9)) {
            if (e[T(0xf7)](e[S(0x128)], e[S(0x128)]))
                f = (0xbc2 + 0x1 * -0x1257 + -0x151 * -0x5, date_fns_1[S(0x10b)])(f, -0x7f5 + -0x11c3 * -0x1 + -0x342 * 0x3);
            else
                throw new d[(S(0xfc))](e[T(0x12a)], 0x2b * -0x8b + -0x4b3 + -0x2 * -0xed0);
        }
        return f;
    }, calcDelay = (d, e) => {
        const U = J, V = J, f = {};
        f[U(0xda)] = function (i, j) {
            return i + j;
        }, f[V(0x121)] = function (i, j) {
            return i * j;
        };
        const g = f, h = (0x1 * -0xd8e + 0x1ecd + 0x1 * -0x113f, date_fns_1[U(0xb4) + V(0xe5)])(d, new Date());
        return g[V(0xda)](g[V(0x121)](h, 0x1a * 0x17a + 0xdf * -0x25 + -0x1 * 0x241), e);
    }, StartCampaignService = async ({
        campaignId: h,
        tenantId: i,
        options: j
    }) => {
        const W = J, X = K, k = {
                'cGcZB': function (v, w) {
                    return v + w;
                },
                'wlNad': function (v, w) {
                    return v * w;
                },
                'zWnFF': function (v, w) {
                    return v !== w;
                },
                'ELNaB': W(0xac),
                'LveAE': X(0xf4),
                'ViSCu': function (v, w) {
                    return v / w;
                },
                'uFfjc': function (v, w, x, y) {
                    return v(w, x, y);
                },
                'ZRibI': function (v, w, x) {
                    return v(w, x);
                },
                'XwCVR': X(0x9f),
                'UHViR': function (v, w) {
                    return v !== w;
                },
                'MeWtX': W(0x115),
                'IzyTs': W(0x125) + W(0xd4) + W(0xfa),
                'HfkTY': X(0xf3),
                'mNoGT': function (v, w) {
                    return v !== w;
                },
                'WaKsO': X(0xc4),
                'lyAxu': X(0xf8) + X(0xa4) + W(0x11c) + 'TS',
                'cOHrN': function (v, w) {
                    return v * w;
                },
                'lzRVt': W(0xc0) + W(0xde),
                'WQAzJ': W(0x118) + W(0x8e) + X(0x103),
                'xIYQa': W(0xff)
            }, l = {};
        l['id'] = h, l[W(0x112)] = i;
        const m = {};
        m[W(0xbc)] = l, m[W(0x91)] = [k[W(0x109)]];
        const n = await Campaign_1[W(0xfc)][W(0xf1)](m);
        if (!n) {
            if (k[W(0xe7)](k[X(0x126)], k[W(0x126)]))
                u = (0x4b + -0x1e3 * 0xa + 0x1293, h[W(0xec)])((-0xf4c + 0x5b * 0x1a + -0x1f * -0x32, i[W(0x10b)])(j, 0x5 * -0x6dd + -0xb65 + 0x2dbe), -0x1f97 + -0x1910 + -0x7 * -0x818);
            else
                throw new AppError_1[(X(0xfc))](k[X(0xf2)], 0x5ef * -0x6 + 0x1 * 0x135d + -0x1 * -0x11d1);
        }
        const o = {};
        o[X(0xb1)] = h;
        const p = {};
        p[X(0xbc)] = o, p[X(0x91)] = [k[X(0xd3)]];
        const q = await CampaignContacts_1[W(0xfc)][W(0xba)](p);
        if (!q) {
            if (k[X(0x129)](k[X(0x8f)], k[X(0x8f)]))
                i = (0x1cf4 + -0x1 * -0xfa + 0x9fa * -0x3, j[X(0x10d)])((-0x6 * 0x354 + -0xd3e + 0x27 * 0xda, k[W(0x10b)])(l, m[X(0xa3)]()), n[X(0x116)]());
            else
                throw new AppError_1[(W(0xfc))](k[W(0xaf)], 0x9 * -0x1a3 + 0x1f * -0x3d + 0x17b2);
        }
        const r = n[X(0x119)] ? k[W(0xbb)](n[X(0x119)], -0x9 * -0x337 + 0x18f4 + -0xf * 0x355) : -0x13e8 + 0x2ed6 + -0x1999 * -0x2;
        let s = (-0x554 + 0xb44 + -0x5f0, date_fns_tz_1[X(0x110) + X(0x95)])(n[X(0xcc)], k[X(0x108)]);
        const t = q[X(0xd5)](x => {
            const Y = W, Z = W;
            if (k[Y(0xc6)](k[Y(0x97)], k[Y(0x117)]))
                return s = (0x24ba + -0x2237 + -0x283, date_fns_1[Z(0xdd)])(s, k[Y(0x99)](r, 0x655 + -0x54b + 0x1 * 0x2de)), k[Y(0x123)](mountMessageData, n, x, {
                    ...j,
                    'jobId': Z(0xe1) + '_' + n['id'] + Z(0xee) + x[Z(0x113)] + Z(0x92) + x['id'] + Z(0xcd) + n[Z(0xcc)][Y(0xad)](),
                    'delay': k[Y(0xa1)](calcDelay, s, r)
                });
            else {
                const z = (-0xa * 0x9 + -0xfab + -0x1 * -0x1005, u[Z(0xb4) + Y(0xe5)])(h, new i());
                return k[Y(0x114)](k[Y(0xdf)](z, -0xd88 + 0x239e + -0x122e), j);
            }
        });
        Queue_1[X(0xfc)][W(0xd7)](k[X(0xe6)], t);
        const u = {};
        u[X(0x122)] = k[X(0xa7)], await n[W(0x11f)](u);
    };
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x2 * 0xa1d + 0x79c + -0x1b48);
        let h = e[f];
        return h;
    }, b(c, d);
}
exports[K(0xfc)] = StartCampaignService;