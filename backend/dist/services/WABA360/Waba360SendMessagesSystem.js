'use strict';
const C = b, D = b;
function a() {
    const J = [
        'ldGFC',
        'ers/SetTic',
        'YVYhB',
        'dExIi',
        'document',
        'pending',
        'age',
        'kpHcV',
        'avlFt',
        '1808cKOwnh',
        'Emit',
        'dhdxn',
        'update',
        'DTNCu',
        '1342118xPnckI',
        'sended',
        'video',
        'buOzJ',
        'image',
        'PQcgt',
        'ls/Message',
        'ls/Whatsap',
        'tGjcr',
        'JLdko',
        'ack',
        'nlaNb',
        'fault',
        'sequelize',
        'mediaName',
        'YTWFv',
        'date\x20ok',
        'fYPEu',
        'messages',
        'gbywd',
        'OqBQL',
        'apiKey',
        'GMEcC',
        'status',
        'GuuCk',
        'mediaUrl',
        'voice',
        'HSIei',
        'biMti',
        '../../util',
        'RMezU',
        'NhleX',
        'tokenAPI',
        'text',
        'kIZSP',
        'dREGx',
        'WEoJG',
        'value',
        '6570FSYWRH',
        'logger',
        'cvfff',
        '360',
        'payload',
        'vXLJs',
        'dwBpp',
        'yuySL',
        'ketMessage',
        'ASC',
        'Aehuc',
        'wabaMediaI',
        'vSRjJ',
        'type',
        'contact',
        'createdAt',
        'individual',
        'DrXvF',
        'findAll',
        'fGSIO',
        '__importDe',
        'jJGAk',
        'applicatio',
        'luggm',
        '37299870vNTFup',
        's/logger',
        'where',
        'Message\x20Up',
        'erty',
        'SxWJA',
        '516373XMlcSd',
        'fkWvy',
        '8yvwYwv',
        'ers/socket',
        'timestamp',
        'waba',
        'wCXmL',
        './SentMess',
        'includes',
        '1973046FpZYzz',
        'XWzao',
        'bzZue',
        'chat',
        'wRiCN',
        '663700ccRGQt',
        '__esModule',
        'body',
        '207eIgsqK',
        'pVgDK',
        'kSclg',
        'lte',
        'sAsRead',
        'dataValues',
        'caption',
        'audio',
        '11eAKSrS',
        'whatsapp',
        'UgzLn',
        'jSKWK',
        'Lckyo',
        '../../help',
        'VCQnh',
        'number',
        'defineProp',
        'ls/Ticket',
        'qUylx',
        'iBkiu',
        'cxWzS',
        'BJYTI',
        'VFHVa',
        'ticket',
        'quotedMsg',
        'tenantId',
        '9121kXWREM',
        'info',
        'default',
        '../../mode',
        'UXFHY',
        'messageId',
        'message',
        'chat:ack',
        'mediaType'
    ];
    a = function () {
        return J;
    };
    return a();
}
(function (c, d) {
    const A = b, B = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(A(0xe7)) / (0x43 * -0x67 + -0xc04 + 0xcfe * 0x3) + -parseInt(B(0x129)) / (0x1a6 * 0x7 + -0x26 * 0x49 + 0x2 * -0x59) + -parseInt(B(0xf0)) / (0x1a5e + -0x10 * -0x95 + 0x1 * -0x23ab) + -parseInt(A(0xe9)) / (0x25a8 + -0x164f + -0x9d * 0x19) * (-parseInt(A(0xf5)) / (-0xf4c + 0x24c * 0x9 + -0x55b)) + -parseInt(A(0x14f)) / (-0x1d86 + 0xa6 * 0x1 + 0x6 * 0x4d1) * (parseInt(A(0x112)) / (-0xbc2 + -0x192c + -0x24f5 * -0x1)) + -parseInt(B(0x124)) / (0x2 * 0x542 + -0x165d + 0xbe1) * (parseInt(B(0xf8)) / (0x1 * 0x1d11 + -0x64 * -0x8 + -0x6 * 0x55c)) + -parseInt(B(0xe1)) / (0xa30 + 0x1 * 0x1ee3 + -0xb * 0x3bb) * (-parseInt(A(0x100)) / (0x5ba * -0x1 + 0x1 * -0x1ac9 + 0x3 * 0xada));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x20db * 0x71 + -0x1 * -0xca391 + -0x102e1a));
var __importDefault = this && this[C(0xdd) + C(0x135)] || function (c) {
    const E = C;
    return c && c[E(0xf6)] ? c : { 'default': c };
};
const m = {};
m[C(0x14e)] = !![], Object[D(0x108) + C(0xe5)](exports, C(0xf6), m);
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x3 * 0x74a + 0x5a4 + -0x1aab);
        let h = e[f];
        return h;
    }, b(c, d);
}
const sequelize_1 = require(C(0x136)), SetTicketMessagesAsRead_1 = __importDefault(require(D(0x105) + C(0x11c) + D(0x157) + D(0xfc))), socketEmit_1 = __importDefault(require(D(0x105) + C(0xea) + D(0x125))), Message_1 = __importDefault(require(D(0x115) + C(0x12f))), Ticket_1 = __importDefault(require(D(0x115) + D(0x109))), Whatsapp_1 = __importDefault(require(D(0x115) + D(0x130) + 'p')), logger_1 = require(C(0x146) + C(0xe2)), SentMessage_1 = __importDefault(require(C(0xee) + C(0x121))), buildWabaMessage360 = async (h, i) => {
        const F = C, G = C, j = {
                'HSIei': F(0x12b),
                'qUylx': G(0xff),
                'vSRjJ': F(0x12d),
                'dhdxn': function (l, o) {
                    return l(o);
                },
                'WEoJG': F(0xd9),
                'kSclg': F(0x14a),
                'jSKWK': function (l, o) {
                    return l === o;
                },
                'pVgDK': G(0xdf) + 'n',
                'YVYhB': function (l, o) {
                    return l === o;
                },
                'PQcgt': G(0x11f),
                'buOzJ': function (l, o) {
                    return l !== o;
                },
                'UXFHY': F(0x13f),
                'ldGFC': F(0x128),
                'cvfff': function (l, o) {
                    return l === o;
                },
                'XWzao': function (l, o) {
                    return l !== o;
                },
                'YTWFv': G(0xda),
                'jJGAk': F(0x155),
                'nlaNb': function (l, o) {
                    return l === o;
                },
                'OqBQL': function (l, o) {
                    return l === o;
                },
                'dREGx': G(0x156),
                'wCXmL': function (l, o) {
                    return l === o;
                },
                'vXLJs': F(0x143),
                'GuuCk': function (l, o) {
                    return l !== o;
                },
                'kpHcV': F(0x13a),
                'tGjcr': F(0xf3),
                'cxWzS': function (l, o) {
                    return l === o;
                },
                'VFHVa': F(0x123)
            };
        let k = {
            'timestamp': j[F(0x126)](String, h[F(0xeb)]),
            'recipient_type': j[F(0x14d)],
            'to': i,
            'type': j[F(0xfa)]
        };
        if (j[G(0x103)](h[G(0x11a)], j[G(0xf9)]) || j[F(0x11d)](h[G(0x11a)], j[G(0x12e)])) {
            if (j[F(0x12c)](j[F(0x116)], j[G(0x11b)])) {
                const l = {};
                l['id'] = h[G(0x15a) + 'd'], l[G(0xfe)] = h[G(0xf7)] || h[G(0x137)] || '' || '', k = {
                    ...k,
                    'type': j[G(0x12e)],
                    'document': l
                };
            } else {
                const p = {};
                p['id'] = j[F(0x15a) + 'd'], p[G(0xfe)] = k[G(0xf7)] || l[F(0x137)] || '';
                const q = { ...i };
                q[F(0x15c)] = j[G(0x144)], q[F(0x12b)] = p, h = q;
            }
        }
        if (j[G(0x151)](h[G(0x11a)], j[F(0x15b)])) {
            if (j[G(0xf1)](j[F(0x138)], j[G(0xde)])) {
                const p = {};
                p['id'] = h[F(0x15a) + 'd'], p[G(0xfe)] = h[F(0xf7)] || h[F(0x137)] || '', k = {
                    ...k,
                    'type': j[G(0x15b)],
                    'image': p
                };
            } else {
                const r = {};
                r['id'] = j[F(0x15a) + 'd'], r[F(0xfe)] = k[G(0xf7)] || l[F(0x137)] || '';
                const s = { ...i };
                s[F(0x15c)] = j[F(0x10a)], s[F(0xff)] = r, h = s;
            }
        }
        if (j[G(0x134)](h[G(0x11a)], j[F(0x144)])) {
            if (j[G(0x13d)](j[G(0x14c)], j[G(0x14c)])) {
                const r = {};
                r['id'] = h[G(0x15a) + 'd'], r[G(0xfe)] = h[G(0xf7)] || h[G(0x137)] || '', k = {
                    ...k,
                    'type': j[F(0x144)],
                    'video': r
                };
            } else {
                const t = {};
                return t[F(0x114)] = j, g && h[F(0xf6)] ? i : t;
            }
        }
        if (j[F(0x11d)](h[F(0x11a)], j[F(0x10a)]) || j[F(0xed)](h[G(0x11a)], j[F(0x154)])) {
            if (j[G(0x141)](j[G(0x122)], j[G(0x122)])) {
                const u = {};
                u[F(0xf7)] = h[G(0xf7)], u = {
                    ...g,
                    'text': u
                };
            } else {
                const u = {};
                u['id'] = h[F(0x15a) + 'd'], u[G(0xfe)] = h[F(0xf7)] || h[F(0x137)] || '', k = {
                    ...k,
                    'type': j[F(0x10a)],
                    'audio': u
                };
            }
        }
        if (j[F(0x134)](h[G(0x11a)], j[F(0x131)]) || j[G(0x151)](h[G(0x11a)], j[F(0xfa)])) {
            if (j[G(0x10c)](j[F(0x10e)], j[G(0x10e)])) {
                const v = {};
                v[F(0xf7)] = h[G(0xf7)], k = {
                    ...k,
                    'text': v
                };
            } else {
                const x = {};
                x['id'] = j[G(0x15a) + 'd'], x[F(0xfe)] = k[F(0xf7)] || l[F(0x137)] || '', x = {
                    ...i,
                    'type': j[G(0x15b)],
                    'image': x
                };
            }
        }
        return k;
    }, n = { [sequelize_1['Op']['is']]: null }, where = {
        'fromMe': !![],
        'messageId': n,
        'status': C(0x120),
        [sequelize_1['Op']['or']]: [
            { 'scheduleDate': { [sequelize_1['Op'][D(0xfb)]]: new Date() } },
            { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
        ]
    }, Waba360SendMessagesSystem = async i => {
        const H = D, I = C, j = {
                'NhleX': H(0x11f),
                'Lckyo': H(0xd7),
                'gbywd': H(0x10f),
                'iBkiu': I(0xec),
                'kIZSP': H(0x101),
                'Aehuc': I(0x152),
                'BJYTI': H(0x110),
                'SxWJA': I(0xd8),
                'dExIi': I(0x158),
                'UgzLn': function (l, o) {
                    return l !== o;
                },
                'biMti': I(0xdc),
                'VCQnh': function (l, o) {
                    return l(o);
                },
                'bzZue': I(0x14a),
                'fkWvy': H(0xf3),
                'JLdko': function (l, o, p) {
                    return l(o, p);
                },
                'luggm': H(0x12a),
                'wRiCN': I(0x119),
                'RMezU': H(0xe4) + H(0x139)
            }, k = await Message_1[I(0x114)][I(0xdb)]({
                'where': where,
                'include': [
                    j[I(0x104)],
                    {
                        'model': Ticket_1[I(0x114)],
                        'as': j[I(0x13c)],
                        'where': {
                            'tenantId': i[I(0x111)],
                            'channel': j[H(0x10b)]
                        },
                        'include': [
                            j[H(0x104)],
                            {
                                'model': Whatsapp_1[H(0x114)],
                                'as': j[I(0x14b)],
                                'where': {
                                    'id': i['id'],
                                    'type': j[I(0x10b)],
                                    'wabaBSP': j[I(0x159)]
                                }
                            }
                        ]
                    },
                    {
                        'model': Message_1[I(0x114)],
                        'as': j[H(0x10d)],
                        'include': [j[I(0x104)]]
                    }
                ],
                'order': [[
                        j[H(0xe6)],
                        j[H(0x11e)]
                    ]]
            });
        for (const l of k) {
            if (j[H(0x102)](j[H(0x145)], j[H(0x145)])) {
                const p = {};
                p['id'] = j[H(0x15a) + 'd'], p[I(0xfe)] = k[H(0xf7)] || l[I(0x137)] || '' || '';
                const q = { ...i };
                q[H(0x15c)] = j[I(0x148)], q[I(0x11f)] = p, h = q;
            } else {
                const {ticket: p} = l, q = j[I(0x106)](String, p[H(0xd7)][H(0x107)]);
                if (![
                        j[H(0xf2)],
                        j[H(0xe8)]
                    ][I(0xef)](l[I(0x11a)]) && l[H(0x142)] && !l[I(0x15a) + 'd']) {
                }
                const r = await j[H(0x132)](buildWabaMessage360, l, q), s = {};
                s[H(0x118)] = r, s[H(0x13e)] = i[H(0x149)];
                const t = await (0x20bd + -0x17c8 + -0x8f5, SentMessage_1[I(0x114)])(s), u = { ...l };
                u[H(0x117)] = t[I(0x13b)][-0xc * -0xaf + 0x6 * 0x2dd + 0x1962 * -0x1]['id'], u[I(0x140)] = j[H(0xe0)], u[H(0x133)] = 0x2;
                const v = u, w = { ...v }, x = {};
                x['id'] = l['id'];
                const y = {};
                y[I(0xe3)] = x, await Message_1[H(0x114)][H(0x127)](w, y);
                const z = {};
                z[I(0x111)] = p[H(0x111)], z[I(0x15c)] = j[H(0xf4)], z[I(0x153)] = { ...v[H(0xfd)] }, z[I(0x153)][I(0x142)] = l[H(0x142)], z[I(0x153)][H(0x117)] = v[I(0x117)], z[I(0x153)][I(0x140)] = j[H(0xe0)], z[I(0x153)][I(0x133)] = 0x2, (0x1686 + -0x5a5 * -0x1 + -0x1c2b, socketEmit_1[I(0x114)])(z), logger_1[I(0x150)][H(0x113)](j[I(0x147)]), await (0x8 * 0x4bb + -0x1e98 + -0x1 * 0x740, SetTicketMessagesAsRead_1[I(0x114)])(p);
            }
        }
    };
exports[C(0x114)] = Waba360SendMessagesSystem;