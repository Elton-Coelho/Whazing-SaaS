'use strict';
const C = b, D = b;
(function (c, d) {
    const A = b, B = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(A(0x240)) / (0x282 * 0x5 + -0x6c9 + -0x5c0) + -parseInt(B(0x1ef)) / (-0x11b3 + 0x1f07 + -0xd52) + -parseInt(A(0x224)) / (0x121d + -0x1ed + -0x102d) * (parseInt(A(0x26e)) / (0x5 * -0x32c + -0x1b00 + 0x2ae0)) + parseInt(B(0x24c)) / (-0x2 * -0x253 + 0x9ad + -0x1 * 0xe4e) * (parseInt(B(0x239)) / (0x1d2a * -0x1 + -0x14b0 + 0x10a * 0x30)) + parseInt(B(0x256)) / (0x1 * -0x1d93 + -0x515 * 0x5 + 0x3703) * (parseInt(B(0x227)) / (-0x1058 + -0x1 * -0x1123 + -0xc3)) + -parseInt(B(0x20f)) / (-0x3 * 0x376 + 0xff6 * -0x2 + 0x2a57) * (-parseInt(A(0x226)) / (-0x74 * 0x6 + -0x109a + 0x3 * 0x674)) + -parseInt(B(0x23f)) / (0x21aa + 0x1666 + -0x1 * 0x3805) * (-parseInt(B(0x21b)) / (-0x2 * -0xa8c + -0x1c6 * -0x12 + 0xd3e * -0x4));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0xb4488 + -0x1d8e + -0x3 * 0xd089));
var __importDefault = this && this[C(0x25e) + D(0x221)] || function (c) {
    const E = C;
    return c && c[E(0x202)] ? c : { 'default': c };
};
function a() {
    const J = [
        'sended',
        'pending',
        'MclGG',
        'createdAt',
        'tokenAPI',
        'flKaX',
        'caption',
        'dataValues',
        '162zJtqDS',
        '../../mode',
        '../../help',
        'message',
        'ers/socket',
        'YTEVO',
        'sfolu',
        'waba',
        'wabaMediaI',
        'body',
        'sAsRead',
        'PjoUb',
        '282204QrAQWX',
        'defineProp',
        'text',
        'YNETq',
        'vWZGw',
        'document',
        'fault',
        'xPNqK',
        'where',
        '3vuamnS',
        'ojJvQ',
        '382610kJdHSF',
        '82040FMFehC',
        'ticket',
        'applicatio',
        'status',
        'ofUjq',
        'date\x20ok',
        'quotedMsg',
        'whatsapp',
        'age',
        'xNMiU',
        'sequelize',
        'ack',
        'messages',
        'SYXmU',
        'OSwRN',
        'includes',
        'gUBGN',
        'vPTRZ',
        '1818scWECl',
        'Message\x20Up',
        'tenantId',
        'audio',
        'ytkVq',
        'ls/Whatsap',
        '869vexFfF',
        '1080213KJhjuZ',
        'OIIRe',
        'image',
        'EOaGf',
        'SGziv',
        'ers/SetTic',
        'Wkvkx',
        'ls/Ticket',
        '360',
        'update',
        'EYMRH',
        'jsDET',
        '3735FcqWTC',
        'seYnW',
        'mediaName',
        'ZInQT',
        'oJZaW',
        'EuKGV',
        'number',
        'findAll',
        'XijZY',
        'xlUHw',
        '259UMMukD',
        'XrTZf',
        'individual',
        'ASC',
        'timestamp',
        'logger',
        'chat:ack',
        'PezKE',
        '__importDe',
        'lyMYS',
        's/logger',
        'ilvEA',
        'contact',
        'mediaType',
        'lte',
        'default',
        'WMrDn',
        'KnDtq',
        'value',
        'info',
        'kXJso',
        'chat',
        'JaBkR',
        'YJJlP',
        '3853272zMOaUo',
        'mediaUrl',
        'apiKey',
        'ZXHPL',
        'XKdZX',
        'vacnT',
        '1076134ZjtEwl',
        'OmiIn',
        'Emit',
        'type',
        '../../util',
        'VyETI',
        'pznHK',
        'ZkIdZ',
        'messageId',
        'BUjQv',
        'video',
        'qQVLF',
        'vShfj',
        'ls/Message',
        'erty',
        './SentMess',
        'AnlZR',
        'ketMessage',
        'gxcod',
        '__esModule',
        'payload',
        'LCdjS',
        'voice',
        'ZiSUr'
    ];
    a = function () {
        return J;
    };
    return a();
}
const m = {};
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x24c8 * 0x1 + -0xd6e + 0x1 * -0x156d);
        let h = e[f];
        return h;
    }, b(c, d);
}
m[D(0x268)] = !![], Object[C(0x21c) + D(0x1fd)](exports, D(0x202), m);
const sequelize_1 = require(C(0x231)), SetTicketMessagesAsRead_1 = __importDefault(require(D(0x211) + D(0x245) + C(0x200) + C(0x219))), socketEmit_1 = __importDefault(require(D(0x211) + D(0x213) + D(0x1f1))), Message_1 = __importDefault(require(D(0x210) + C(0x1fc))), Ticket_1 = __importDefault(require(C(0x210) + C(0x247))), Whatsapp_1 = __importDefault(require(C(0x210) + C(0x23e) + 'p')), logger_1 = require(D(0x1f3) + D(0x260)), SentMessage_1 = __importDefault(require(C(0x1fe) + C(0x22f))), buildWabaMessage360 = async (h, i) => {
        const F = D, G = D, j = {
                'lyMYS': F(0x220),
                'EOaGf': F(0x23c),
                'XrTZf': F(0x242),
                'ilvEA': function (l, o) {
                    return l(o);
                },
                'ZXHPL': F(0x258),
                'VyETI': F(0x21d),
                'LCdjS': function (l, o) {
                    return l === o;
                },
                'MclGG': F(0x229) + 'n',
                'vShfj': G(0x222),
                'PjoUb': F(0x266),
                'vWZGw': function (l, o) {
                    return l === o;
                },
                'PezKE': G(0x24a),
                'ZkIdZ': function (l, o) {
                    return l === o;
                },
                'ZInQT': G(0x1f9),
                'ytkVq': function (l, o) {
                    return l === o;
                },
                'JaBkR': F(0x22b),
                'pznHK': function (l, o) {
                    return l === o;
                },
                'seYnW': F(0x205),
                'flKaX': function (l, o) {
                    return l !== o;
                },
                'ZiSUr': G(0x214),
                'xlUHw': F(0x215),
                'vacnT': F(0x26b),
                'jsDET': G(0x1ed),
                'gxcod': F(0x244)
            };
        let k = {
            'timestamp': j[G(0x261)](String, h[G(0x25a)]),
            'recipient_type': j[G(0x271)],
            'to': i,
            'type': j[G(0x1f4)]
        };
        if (j[G(0x204)](h[F(0x263)], j[G(0x209)]) || j[F(0x204)](h[F(0x263)], j[F(0x25f)])) {
            if (j[F(0x204)](j[G(0x1fb)], j[G(0x21a)])) {
                const o = {};
                o['id'] = j[G(0x217) + 'd'], o[G(0x20d)] = k[F(0x218)] || l[G(0x24e)] || '' || '';
                const p = { ...i };
                p[G(0x1f2)] = j[F(0x25f)], p[F(0x220)] = o, h = p;
            } else {
                const o = {};
                o['id'] = h[F(0x217) + 'd'], o[G(0x20d)] = h[F(0x218)] || h[F(0x24e)] || '' || '', k = {
                    ...k,
                    'type': j[F(0x25f)],
                    'document': o
                };
            }
        }
        if (j[G(0x204)](h[G(0x263)], j[G(0x257)])) {
            if (j[F(0x21f)](j[G(0x25d)], j[G(0x25d)])) {
                const p = {};
                p['id'] = h[F(0x217) + 'd'], p[F(0x20d)] = h[F(0x218)] || h[G(0x24e)] || '', k = {
                    ...k,
                    'type': j[F(0x257)],
                    'image': p
                };
            } else {
                const r = {};
                r['id'] = j[F(0x217) + 'd'], r[F(0x20d)] = k[G(0x218)] || l[G(0x24e)] || '';
                const s = { ...i };
                s[G(0x1f2)] = j[F(0x243)], s[G(0x23c)] = r, h = s;
            }
        }
        if (j[G(0x1f6)](h[G(0x263)], j[G(0x24f)])) {
            if (j[G(0x23d)](j[F(0x26c)], j[G(0x26c)])) {
                const r = {};
                r['id'] = h[G(0x217) + 'd'], r[G(0x20d)] = h[F(0x218)] || h[G(0x24e)] || '', k = {
                    ...k,
                    'type': j[F(0x24f)],
                    'video': r
                };
            } else {
                const t = {};
                return t[F(0x265)] = j, g && h[G(0x202)] ? i : t;
            }
        }
        if (j[G(0x1f5)](h[G(0x263)], j[G(0x243)]) || j[G(0x204)](h[F(0x263)], j[F(0x24d)])) {
            if (j[F(0x20c)](j[F(0x206)], j[F(0x255)])) {
                const t = {};
                t['id'] = h[G(0x217) + 'd'], t[F(0x20d)] = h[F(0x218)] || h[G(0x24e)] || '', k = {
                    ...k,
                    'type': j[G(0x243)],
                    'audio': t
                };
            } else {
                const v = {};
                v[F(0x218)] = w[F(0x218)];
                const w = { ...v };
                w[F(0x21d)] = v, f = w;
            }
        }
        if (j[F(0x204)](h[G(0x263)], j[G(0x1ee)]) || j[F(0x1f5)](h[G(0x263)], j[G(0x1f4)])) {
            if (j[G(0x1f5)](j[G(0x24b)], j[F(0x201)])) {
                const w = {};
                w['id'] = j[G(0x217) + 'd'], w[F(0x20d)] = k[F(0x218)] || l[G(0x24e)] || '';
                const x = { ...i };
                x[G(0x1f2)] = j[F(0x257)], x[G(0x242)] = w, x = x;
            } else {
                const w = {};
                w[G(0x218)] = h[F(0x218)], k = {
                    ...k,
                    'text': w
                };
            }
        }
        return k;
    }, n = { [sequelize_1['Op']['is']]: null }, where = {
        'fromMe': !![],
        'messageId': n,
        'status': D(0x208),
        [sequelize_1['Op']['or']]: [
            { 'scheduleDate': { [sequelize_1['Op'][C(0x264)]]: new Date() } },
            { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
        ]
    }, Waba360SendMessagesSystem = async i => {
        const H = C, I = D, j = {
                'Wkvkx': H(0x1f9),
                'oJZaW': H(0x262),
                'kXJso': I(0x228),
                'XijZY': I(0x216),
                'YNETq': I(0x22e),
                'AnlZR': H(0x248),
                'OIIRe': H(0x22d),
                'YJJlP': H(0x20a),
                'qQVLF': H(0x259),
                'ojJvQ': function (l, o) {
                    return l !== o;
                },
                'OmiIn': H(0x237),
                'KnDtq': function (l, o) {
                    return l(o);
                },
                'SYXmU': H(0x21d),
                'EuKGV': H(0x26b),
                'OSwRN': function (l, o, p) {
                    return l(o, p);
                },
                'vPTRZ': I(0x207),
                'BUjQv': H(0x25c),
                'xNMiU': H(0x23a) + I(0x22c)
            }, k = await Message_1[I(0x265)][H(0x253)]({
                'where': where,
                'include': [
                    j[H(0x250)],
                    {
                        'model': Ticket_1[H(0x265)],
                        'as': j[H(0x26a)],
                        'where': {
                            'tenantId': i[H(0x23b)],
                            'channel': j[H(0x254)]
                        },
                        'include': [
                            j[H(0x250)],
                            {
                                'model': Whatsapp_1[H(0x265)],
                                'as': j[I(0x21e)],
                                'where': {
                                    'id': i['id'],
                                    'type': j[H(0x254)],
                                    'wabaBSP': j[H(0x1ff)]
                                }
                            }
                        ]
                    },
                    {
                        'model': Message_1[H(0x265)],
                        'as': j[I(0x241)],
                        'include': [j[H(0x250)]]
                    }
                ],
                'order': [[
                        j[H(0x26d)],
                        j[I(0x1fa)]
                    ]]
            });
        for (const l of k) {
            if (j[I(0x225)](j[H(0x1f0)], j[H(0x1f0)])) {
                const p = {};
                p['id'] = j[H(0x217) + 'd'], p[I(0x20d)] = k[H(0x218)] || l[I(0x24e)] || '';
                const q = { ...i };
                q[I(0x1f2)] = j[H(0x246)], q[I(0x1f9)] = p, h = q;
            } else {
                const {ticket: p} = l, q = j[I(0x267)](String, p[H(0x262)][H(0x252)]);
                if (![
                        j[I(0x234)],
                        j[H(0x251)]
                    ][H(0x236)](l[I(0x263)]) && l[I(0x26f)] && !l[H(0x217) + 'd']) {
                }
                const r = await j[H(0x235)](buildWabaMessage360, l, q), s = {};
                s[I(0x212)] = r, s[H(0x270)] = i[I(0x20b)];
                const t = await (0x540 * 0x1 + 0xd0e + -0x124e, SentMessage_1[I(0x265)])(s), u = { ...l };
                u[I(0x1f7)] = t[I(0x233)][-0x1f31 + -0x16b6 + 0x35e7]['id'], u[I(0x22a)] = j[I(0x238)], u[H(0x232)] = 0x2;
                const v = u, w = { ...v }, x = {};
                x['id'] = l['id'];
                const y = {};
                y[I(0x223)] = x, await Message_1[H(0x265)][I(0x249)](w, y);
                const z = {};
                z[H(0x23b)] = p[I(0x23b)], z[H(0x1f2)] = j[H(0x1f8)], z[H(0x203)] = { ...v[H(0x20e)] }, z[H(0x203)][I(0x26f)] = l[I(0x26f)], z[H(0x203)][I(0x1f7)] = v[H(0x1f7)], z[H(0x203)][I(0x22a)] = j[I(0x238)], z[H(0x203)][H(0x232)] = 0x2, (-0xb * -0x254 + 0x2634 + -0x3fd0, socketEmit_1[H(0x265)])(z), logger_1[I(0x25b)][H(0x269)](j[H(0x230)]), await (0x26f6 + 0x1b49 + 0x423f * -0x1, SetTicketMessagesAsRead_1[H(0x265)])(p);
            }
        }
    };
exports[C(0x265)] = Waba360SendMessagesSystem;