'use strict';
function a() {
    const P = [
        'BTlCo',
        'erty',
        'VgCto',
        '15064550vcleeS',
        'fFUmY',
        'xJNTY',
        'wmaGG',
        'jXQML',
        'jCbdG',
        'mYJoX',
        'oyzKo',
        'method',
        '272GeNONs',
        'TdPfS',
        'error',
        'headers',
        'NREKs',
        '__importDe',
        'qfnwU',
        '1945602jYKmxK',
        'beDEV',
        'length',
        'data',
        'env',
        'voice',
        'iRjlP',
        '121345SPnogj',
        'logger',
        'dmxvF',
        'HWjei',
        'mime_type',
        'PHGRu',
        '1101408rPuTay',
        '__esModule',
        'qqDLH',
        'zCAFi',
        'VhChM',
        'IA:\x20',
        'wEaOZ',
        '/v1/media/',
        'filename',
        'axios',
        'rs/AppErro',
        'WNLOAD_MED',
        'KiHMH',
        'image',
        '../../erro',
        'public',
        'join',
        'zbkZo',
        'audio',
        '3715836qkujLO',
        'tFYbb',
        '3adRbgU',
        'D360-API-K',
        'rCeeD',
        '549145DkNUcf',
        'url',
        'IoQMJ',
        'uwZvA',
        'value',
        'lvjPJ',
        's/logger',
        'default',
        '9RvCYWF',
        'LOAD',
        'tokenAPI',
        '../../util',
        'nubpn',
        'GET',
        'tweUB',
        'path',
        'oHomy',
        'API_URL_36',
        'yMVhL',
        'pdyiN',
        'VlbZw',
        'responseTy',
        'finish',
        'video',
        'createWrit',
        '3536304Myjtwj',
        'AeSTh',
        'vMkQH',
        'uPQBk',
        'eStream',
        'BaIYp',
        'QHpAd',
        'PSeMQ',
        'stream',
        'getTime',
        'XRLId',
        'defineProp',
        'ujajn',
        '360_NOT_DO',
        'pipe',
        'fEyMn',
        'KRINn',
        'fault',
        'ERROR\x20DONW',
        'KHhPJ',
        'DrTMD',
        'KxOni',
        'split',
        'sBpoZ',
        'document',
        'DZJLE'
    ];
    a = function () {
        return P;
    };
    return a();
}
const z = b, A = b;
(function (c, d) {
    const x = b, y = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(x(0x143)) / (0x1796 + -0x204d + 0x6 * 0x174) + -parseInt(y(0x136)) / (0x1091 * -0x1 + -0x79 * -0x29 + -0x2ce) * (-parseInt(x(0x158)) / (0x14ed + -0x8d8 + -0xc12)) + -parseInt(x(0x156)) / (0x1d8f + 0x1 * -0x962 + 0x1 * -0x1429) + parseInt(x(0xf0)) / (0x21c * -0x9 + -0x2706 + -0x1 * -0x3a07) + -parseInt(x(0x109)) / (-0x9d * 0x2 + 0x1f * -0x13d + -0x27a3 * -0x1) + parseInt(y(0x13d)) / (0x11e * 0xb + -0x25b4 + 0x1971) * (parseInt(y(0x12f)) / (0x876 + 0x1cc9 + -0x1 * 0x2537)) + -parseInt(x(0xf8)) / (-0x46 * 0x17 + -0x11a * 0x1 + 0x76d) * (-parseInt(x(0x126)) / (0x264f + -0x138f * -0x1 + -0x39d4));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x3a8b7 + -0x3a2fb * -0x3 + 0x2 * 0xa325));
var __importDefault = this && this[z(0x134) + A(0x11a)] || function (c) {
    const B = A;
    return c && c[B(0x144)] ? c : { 'default': c };
};
const u = {};
u[z(0xf4)] = !![], Object[A(0x114) + A(0x124)](exports, z(0x144), u);
const axios_1 = __importDefault(require(z(0x14c))), fs_1 = require('fs'), path_1 = require(A(0xff)), AppError_1 = __importDefault(require(z(0x151) + A(0x14d) + 'r')), logger_1 = require(z(0xfb) + z(0xf6)), downloadFile = async (e, f, g) => {
        const C = z, D = A, h = {
                'wEaOZ': function (n, o) {
                    return n !== o;
                },
                'KxOni': C(0x103),
                'rCeeD': C(0x147),
                'IoQMJ': D(0x11b) + D(0xf9),
                'HWjei': function (n, o) {
                    return n(o);
                },
                'ujajn': function (n, o) {
                    return n === o;
                },
                'BaIYp': D(0x12b),
                'dmxvF': C(0x106),
                'BTlCo': D(0x131),
                'sBpoZ': D(0x152),
                'qqDLH': D(0xfd),
                'TdPfS': C(0x111)
            }, i = process[D(0x13a)][C(0x101) + '0'] + D(0x14a) + f, j = (0x3ae + -0x1 * 0x6c3 + 0x315, path_1[D(0x153)])(__dirname, '..', '..', h[D(0x120)], g), k = {};
        k[D(0x159) + 'EY'] = e;
        const l = {};
        l[C(0xf1)] = i, l[C(0x12e)] = h[D(0x145)], l[D(0x105) + 'pe'] = h[D(0x130)], l[D(0x132)] = k;
        const m = await (-0x1403 + -0x1ba5 + -0x5f5 * -0x8, axios_1[D(0xf7)])(l);
        await new Promise((n, o) => {
            const F = C, G = D, p = {
                    'oHomy': function (q, r) {
                        const E = b;
                        return h[E(0x149)](q, r);
                    },
                    'xJNTY': h[F(0x11e)],
                    'lvjPJ': h[F(0xef)],
                    'tFYbb': h[F(0xf2)],
                    'zbkZo': function (q, r) {
                        const H = F;
                        return h[H(0x140)](q, r);
                    }
                };
            h[G(0x115)](h[F(0x10e)], h[F(0x10e)]) ? m[G(0x139)][F(0x117)]((0x1 * -0x48d + -0x1 * -0x7e9 + -0x35c, fs_1[F(0x108) + G(0x10d)])(j))['on'](h[G(0x13f)], async () => n(!![]))['on'](h[G(0x123)], q => {
                const I = F, J = F;
                p[I(0x100)](p[J(0x128)], p[J(0xf5)]) ? (console[I(0x131)](p[J(0x157)], q), p[I(0x154)](o, new Error(q))) : (g = h[I(0x155)]['id'] || '', i = j[J(0x155)][I(0x141)]);
            }) : (g = h[F(0x150)]['id'] || '', i = j[F(0x150)][F(0x141)]);
        });
    }, GetMediaWaba360 = async ({
        channel: c,
        msg: d,
        ticket: e
    }) => {
        const K = z, L = A, f = {
                'KRINn': function (g, h) {
                    return g > h;
                },
                'NREKs': K(0x11b) + L(0xf9),
                'DrTMD': function (g, h) {
                    return g(h);
                },
                'wmaGG': K(0x106),
                'fEyMn': L(0x131),
                'XRLId': function (g, h) {
                    return g !== h;
                },
                'QHpAd': K(0x137),
                'zCAFi': L(0x127),
                'VlbZw': function (g, h) {
                    return g === h;
                },
                'qfnwU': L(0x12c),
                'yMVhL': K(0xfc),
                'KiHMH': L(0x12d),
                'uwZvA': L(0x12a),
                'DZJLE': function (g, h) {
                    return g === h;
                },
                'PHGRu': K(0x110),
                'VgCto': L(0x11c),
                'vMkQH': function (g, h, i, j) {
                    return g(h, i, j);
                },
                'AeSTh': K(0x10c)
            };
        try {
            if (f[K(0x113)](f[L(0x10f)], f[L(0x146)])) {
                let g = '', h, i;
                if (d?.[K(0x121)]) {
                    if (f[K(0x104)](f[L(0x135)], f[K(0x135)]))
                        g = d[L(0x121)]['id'] || '', h = d[L(0x121)][L(0x14b)], i = d[K(0x121)][L(0x141)];
                    else {
                        h = i[K(0x13b)]['id'] || '';
                        const o = j[L(0x13b)][L(0x141)] || '', p = o[L(0x11f)](';');
                        k = f[K(0x119)](p[K(0x138)], 0x156f + -0x1 * -0xac5 + 0x1 * -0x2033) ? p[0xf * 0x61 + -0x16c2 + 0x1 * 0x1113] : l[L(0x13b)][K(0x141)];
                    }
                }
                if (d?.[L(0x150)]) {
                    if (f[K(0x104)](f[K(0x102)], f[L(0x102)]))
                        g = d[L(0x150)]['id'] || '', i = d[K(0x150)][K(0x141)];
                    else {
                        g[K(0x13e)][K(0x131)](h);
                        throw new i[(L(0xf7))](K(0x116) + L(0x14e) + L(0x148) + j);
                    }
                }
                if (d?.[K(0x107)]) {
                    if (f[L(0x113)](f[K(0x14f)], f[K(0x14f)])) {
                        const p = {
                            'iRjlP': f[K(0x133)],
                            'tweUB': function (q, r) {
                                const M = L;
                                return f[M(0x11d)](q, r);
                            }
                        };
                        j[K(0x139)][K(0x117)]((-0x3d * -0x3a + -0x19bb + 0xbe9, k[L(0x108) + L(0x10d)])(l))['on'](f[L(0x129)], async () => q(!![]))['on'](f[L(0x118)], v => {
                            const N = L, O = K;
                            q[N(0x131)](p[N(0x13c)], v), p[O(0xfe)](r, new s(v));
                        });
                    } else
                        g = d[K(0x107)]['id'] || '', i = d[L(0x107)][L(0x141)];
                }
                if (d?.[K(0x13b)]) {
                    if (f[L(0x113)](f[L(0xf3)], f[L(0xf3)]))
                        h[L(0x131)](f[K(0x133)], i), f[K(0x11d)](j, new k(l));
                    else {
                        g = d[K(0x13b)]['id'] || '';
                        const q = d[K(0x13b)][K(0x141)] || '', r = q[K(0x11f)](';');
                        i = f[L(0x119)](r[K(0x138)], -0x1860 + 0x24ab + -0xc4a) ? r[0x6 * -0x575 + -0x1 * -0x1a93 + 0x62b] : d[K(0x13b)][K(0x141)];
                    }
                }
                d?.[L(0x155)] && (f[L(0x122)](f[L(0x142)], f[K(0x125)]) ? (g = h[L(0x107)]['id'] || '', i = j[L(0x107)][L(0x141)]) : (g = d[K(0x155)]['id'] || '', i = d[K(0x155)][K(0x141)]));
                const j = i?.[L(0x11f)]('/')[-0x23eb + 0x1004 + -0x188 * -0xd][K(0x11f)](';')[0x4 * -0x70c + 0x1f6 + -0x9 * -0x2ea], k = new Date()[L(0x112)](), l = h ? h + '_' + e['id'] + '_' + g + '_' + k + '.' + j : e['id'] + '_' + g + '_' + k + '.' + j;
                return await f[L(0x10b)](downloadFile, c[L(0xfa)], g, l), l;
            } else {
                const v = {};
                return v[L(0xf7)] = j, g && h[K(0x144)] ? i : v;
            }
        } catch (v) {
            if (f[K(0x104)](f[K(0x10a)], f[L(0x10a)])) {
                logger_1[K(0x13e)][L(0x131)](v);
                throw new AppError_1[(L(0xf7))](L(0x116) + L(0x14e) + K(0x148) + v);
            } else
                i = j[L(0x121)]['id'] || '', k = l[K(0x121)][L(0x14b)], m = n[K(0x121)][K(0x141)];
        }
    };
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x613 + 0xf * 0xe5 + -0x669);
        let h = e[f];
        return h;
    }, b(c, d);
}
exports[A(0xf7)] = GetMediaWaba360;