'use strict';
const z = b, A = b;
(function (c, d) {
    const x = b, y = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(x(0x170)) / (-0x2b * -0x45 + -0x1bbc + 0x1 * 0x1026) * (parseInt(x(0x152)) / (-0x8 * 0x44c + 0x13 * -0xa7 + 0x1df * 0x19)) + parseInt(y(0x14e)) / (0x6cf + 0x2 * 0xd6c + -0x21a4) * (-parseInt(y(0x15c)) / (0x1b3d + -0x55d + -0x15dc)) + parseInt(x(0x137)) / (-0x1bc5 + 0x23b * 0x10 + 0x3f3 * -0x2) * (parseInt(y(0x146)) / (0x577 * -0x2 + 0x4c + 0x4 * 0x2aa)) + parseInt(x(0x181)) / (0x308 * 0x3 + -0x2481 + -0x1 * -0x1b70) + -parseInt(x(0x113)) / (-0x3b6 * -0x5 + -0xe24 + -0x176 * 0x3) + -parseInt(x(0x16e)) / (0x1 * 0x156b + 0x11bd + -0x271f) * (parseInt(y(0x11c)) / (-0x1358 + 0x5c9 * 0x4 + -0x3c2)) + -parseInt(x(0x142)) / (-0x1c * 0x11 + -0x4e3 * -0x1 + -0x2 * 0x17e) * (-parseInt(x(0x179)) / (-0x2e0 + -0x2 * 0x32c + 0x2 * 0x4a2));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x195d5 + 0x144f6 + -0x507b * -0x1f));
function a() {
    const P = [
        'wEftK',
        '42eJAEgK',
        'responseTy',
        'zEIAw',
        'lECdm',
        'fault',
        'image',
        'rs/AppErro',
        'JmSvK',
        'DZrye',
        'filename',
        '148PqRsai',
        'ELuDQ',
        'createWrit',
        'video',
        'error',
        'qjTOg',
        '../../util',
        '__esModule',
        'axios',
        'RsVTd',
        'AkHCo',
        'finish',
        'headers',
        'url',
        'liOLM',
        'split',
        'UuxBL',
        'voice',
        '3951441keeHGc',
        'mZmJG',
        '53065tVawam',
        'rQBpN',
        'vXtvb',
        'gPzzM',
        'method',
        'tokenAPI',
        'qXGPT',
        'getTime',
        'mObFV',
        '1620TBXFmp',
        'length',
        'defineProp',
        'ZwcGl',
        'D360-API-K',
        'dteDW',
        'value',
        'pipe',
        '68215tukpnw',
        'oLZBo',
        'IA:\x20',
        '360_NOT_DO',
        'ERROR\x20DONW',
        's/logger',
        'PREMv',
        'kABgR',
        '8293040RjplIj',
        'EqjJo',
        'haVYF',
        'JnXBN',
        'iGdMs',
        'mnMrl',
        'DltQR',
        'BiGig',
        'MtnUl',
        '10vyCZGx',
        'uvtZJ',
        'ZtWzo',
        'LxrqO',
        'PPJnP',
        'fKGYh',
        'nwJsF',
        'data',
        'gLEbe',
        '__importDe',
        'FYdeA',
        'nIDDI',
        'WNLOAD_MED',
        'mime_type',
        'LOAD',
        'SmEBm',
        'stream',
        'PaBOd',
        'eStream',
        'knvXS',
        'HRujW',
        'hSDRX',
        'public',
        'cOKus',
        'default',
        'document',
        '/v1/media/',
        '20285jMFbQL',
        'LShWs',
        'cvAzL',
        'join',
        'gIGEA',
        'lLeoP',
        'OFnHv',
        'env',
        'NuXlf',
        'kKupD',
        'API_URL_36',
        '276595BIOTnB',
        'nWFaU',
        'GET',
        'PqGlU',
        '786vUIcsJ',
        'YdKmJ',
        'path',
        'audio',
        '../../erro',
        'DxDsf',
        'QwNtF',
        'logger',
        '59007gBTbGo',
        'hodGK',
        'erty'
    ];
    a = function () {
        return P;
    };
    return a();
}
var __importDefault = this && this[z(0x125) + A(0x156)] || function (c) {
    const B = A;
    return c && c[B(0x163)] ? c : { 'default': c };
};
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0xb84 + -0x159 * 0x12 + -0xd0 * -0x11);
        let h = e[f];
        return h;
    }, b(c, d);
}
const u = {};
u[A(0x17f)] = !![], Object[A(0x17b) + A(0x150)](exports, A(0x163), u);
const axios_1 = __importDefault(require(A(0x164))), fs_1 = require('fs'), path_1 = require(A(0x148)), AppError_1 = __importDefault(require(A(0x14a) + z(0x158) + 'r')), logger_1 = require(A(0x162) + A(0x186)), downloadFile = async (e, f, g) => {
        const C = z, D = z, h = {
                'BiGig': C(0x185) + C(0x12a),
                'wEftK': function (n, o) {
                    return n(o);
                },
                'hSDRX': function (n, o) {
                    return n !== o;
                },
                'lECdm': C(0x15a),
                'liOLM': C(0x13f),
                'ELuDQ': function (n, o) {
                    return n === o;
                },
                'QwNtF': D(0x14b),
                'kABgR': D(0x187),
                'YdKmJ': D(0x167),
                'uvtZJ': D(0x160),
                'PPJnP': D(0x132),
                'RsVTd': D(0x144),
                'fKGYh': D(0x12c)
            }, i = process[D(0x13e)][D(0x141) + '0'] + D(0x136) + f, j = (0x1285 + -0x1 * 0x7e1 + -0xaa4, path_1[D(0x13a)])(__dirname, '..', '..', h[C(0x120)], g), k = {};
        k[D(0x17d) + 'EY'] = e;
        const l = {};
        l[D(0x169)] = i, l[C(0x174)] = h[C(0x165)], l[D(0x153) + 'pe'] = h[C(0x121)], l[D(0x168)] = k;
        const m = await (0xd24 + -0x1dae + -0x2 * -0x845, axios_1[D(0x134)])(l);
        await new Promise((n, o) => {
            const E = C, H = D, p = {
                    'oLZBo': h[E(0x11a)],
                    'cvAzL': function (q, r) {
                        const F = E;
                        return h[F(0x151)](q, r);
                    },
                    'mZmJG': function (q, r) {
                        const G = E;
                        return h[G(0x131)](q, r);
                    },
                    'LxrqO': h[H(0x155)],
                    'MtnUl': h[E(0x16a)]
                };
            h[H(0x15d)](h[E(0x14c)], h[E(0x112)]) ? (h[E(0x160)](p[E(0x182)], i), p[E(0x139)](j, new k(l))) : m[E(0x123)][H(0x180)]((0x2 * 0x8bd + 0x2 * 0x12da + -0x372e, fs_1[H(0x15e) + H(0x12e)])(j))['on'](h[E(0x147)], async () => n(!![]))['on'](h[E(0x11d)], r => {
                const I = E, J = E;
                p[I(0x16f)](p[I(0x11f)], p[I(0x11b)]) ? (console[I(0x160)](p[I(0x182)], r), p[I(0x139)](o, new Error(r))) : (i = j[I(0x135)]['id'] || '', k = l[I(0x135)][J(0x15b)], m = n[I(0x135)][J(0x129)]);
            });
        });
    }, GetMediaWaba360 = async ({
        channel: c,
        msg: d,
        ticket: e
    }) => {
        const K = z, L = A, f = {
                'FYdeA': K(0x185) + L(0x12a),
                'EqjJo': function (g, h) {
                    return g(h);
                },
                'ZwcGl': K(0x167),
                'rQBpN': K(0x160),
                'vXtvb': function (g, h) {
                    return g > h;
                },
                'PaBOd': function (g, h) {
                    return g !== h;
                },
                'dteDW': L(0x115),
                'qjTOg': K(0x173),
                'lLeoP': function (g, h) {
                    return g !== h;
                },
                'cOKus': L(0x14f),
                'UuxBL': L(0x13b),
                'nIDDI': function (g, h) {
                    return g !== h;
                },
                'HRujW': K(0x138),
                'ZtWzo': K(0x145),
                'nWFaU': L(0x154),
                'AkHCo': L(0x12f),
                'JmSvK': function (g, h) {
                    return g > h;
                },
                'kKupD': function (g, h) {
                    return g === h;
                },
                'iGdMs': L(0x13d),
                'gLEbe': function (g, h, i, j) {
                    return g(h, i, j);
                },
                'qXGPT': function (g, h) {
                    return g === h;
                },
                'DltQR': L(0x12b),
                'mnMrl': K(0x178)
            };
        try {
            if (f[K(0x12d)](f[K(0x17e)], f[K(0x161)])) {
                let g = '', h, i;
                d?.[K(0x135)] && (f[K(0x13c)](f[K(0x133)], f[L(0x16c)]) ? (g = d[L(0x135)]['id'] || '', h = d[K(0x135)][K(0x15b)], i = d[L(0x135)][K(0x129)]) : (g = h[K(0x15f)]['id'] || '', i = j[K(0x15f)][K(0x129)]));
                if (d?.[K(0x157)]) {
                    if (f[L(0x127)](f[L(0x130)], f[K(0x130)])) {
                        const o = {
                            'JnXBN': f[L(0x126)],
                            'nwJsF': function (p, q) {
                                const M = L;
                                return f[M(0x114)](p, q);
                            }
                        };
                        j[K(0x123)][L(0x180)]((0x1b1 * 0x2 + -0x1f4a + 0x1be8, k[L(0x15e) + L(0x12e)])(l))['on'](f[L(0x17c)], async () => q(!![]))['on'](f[L(0x171)], v => {
                            const N = L, O = L;
                            q[N(0x160)](o[N(0x116)], v), o[O(0x122)](r, new s(v));
                        });
                    } else
                        g = d[L(0x157)]['id'] || '', i = d[L(0x157)][L(0x129)];
                }
                if (d?.[L(0x15f)]) {
                    if (f[K(0x13c)](f[L(0x11e)], f[K(0x11e)])) {
                        const p = {};
                        return p[K(0x134)] = j, g && h[L(0x163)] ? i : p;
                    } else
                        g = d[L(0x15f)]['id'] || '', i = d[L(0x15f)][K(0x129)];
                }
                if (d?.[K(0x16d)]) {
                    if (f[L(0x12d)](f[L(0x143)], f[K(0x166)])) {
                        g = d[L(0x16d)]['id'] || '';
                        const p = d[L(0x16d)][K(0x129)] || '', q = p[K(0x16b)](';');
                        i = f[K(0x159)](q[L(0x17a)], 0x136f + 0x3a4 * -0x2 + 0xc26 * -0x1) ? q[0xd25 + 0x21e9 * -0x1 + 0x14c4] : d[K(0x16d)][L(0x129)];
                    } else
                        g = h[K(0x149)]['id'] || '', i = j[K(0x149)][L(0x129)];
                }
                if (d?.[K(0x149)]) {
                    if (f[K(0x140)](f[L(0x117)], f[K(0x117)]))
                        g = d[K(0x149)]['id'] || '', i = d[L(0x149)][L(0x129)];
                    else {
                        g[L(0x14d)][L(0x160)](h);
                        throw new i[(L(0x134))](L(0x184) + K(0x128) + K(0x183) + j);
                    }
                }
                const j = i?.[K(0x16b)]('/')[-0x3 * -0x163 + -0x1081 + 0xc59][K(0x16b)](';')[0xa91 + -0x924 + 0x16d * -0x1], k = new Date()[K(0x177)](), l = h ? h + '_' + e['id'] + '_' + g + '_' + k + '.' + j : e['id'] + '_' + g + '_' + k + '.' + j;
                return await f[K(0x124)](downloadFile, c[L(0x175)], g, l), l;
            } else {
                h = i[L(0x16d)]['id'] || '';
                const v = j[L(0x16d)][L(0x129)] || '', w = v[K(0x16b)](';');
                k = f[L(0x172)](w[L(0x17a)], 0x23c0 * -0x1 + 0x7a * 0x41 + 0x4c7) ? w[-0x2531 * -0x1 + 0xc34 * -0x3 + -0x95] : l[L(0x16d)][L(0x129)];
            }
        } catch (v) {
            if (f[K(0x176)](f[K(0x119)], f[K(0x118)]))
                g = h[K(0x157)]['id'] || '', i = j[L(0x157)][L(0x129)];
            else {
                logger_1[L(0x14d)][K(0x160)](v);
                throw new AppError_1[(L(0x134))](L(0x184) + L(0x128) + K(0x183) + v);
            }
        }
    };
exports[z(0x134)] = GetMediaWaba360;