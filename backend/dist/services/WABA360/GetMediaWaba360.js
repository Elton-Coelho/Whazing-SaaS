'use strict';
const A = b, B = b;
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x14f6 + -0xb2e * -0x2 + 0x41);
        let h = e[f];
        return h;
    }, b(c, d);
}
(function (c, d) {
    const y = b, z = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(y(0x20a)) / (-0x1b7 * 0x5 + -0x2 * -0x1046 + -0x2 * 0xbfc) + -parseInt(z(0x1d4)) / (-0x20 * 0x12a + -0x1f7f + 0x3 * 0x16eb) * (parseInt(y(0x1d2)) / (-0x3 * -0x10f + -0xda2 + 0xa78)) + -parseInt(y(0x1ff)) / (-0x2 * -0x1274 + 0x1438 + 0x1c8e * -0x2) + parseInt(z(0x1e5)) / (-0x1 * 0xe6b + 0x26bf + -0x184f) + parseInt(z(0x1fd)) / (-0x5 * -0x31 + -0x2 * -0x8 + -0xff) * (parseInt(y(0x1ef)) / (0xd * 0xaf + 0x1354 + -0x1c30)) + -parseInt(y(0x1ce)) / (0x1919 + -0x1 * 0x2653 + 0xd42 * 0x1) + -parseInt(y(0x1dd)) / (0x1465 + 0x3 * -0x1fd + -0xe65) * (-parseInt(y(0x210)) / (0x7d * -0x4d + 0xc49 + 0x195a));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0xda5b2 * -0x1 + 0x13136 * -0xb + 0x8c647));
function a() {
    const P = [
        'XdMYI',
        'default',
        'DLIiM',
        's/logger',
        '../../erro',
        'WfvLb',
        'responseTy',
        'KOsWG',
        'QMgkC',
        'nwzoj',
        '../../util',
        'Mgnlo',
        'pPmMl',
        'SfHSr',
        'WNLOAD_MED',
        'XXoeB',
        'dQPek',
        'eStream',
        'EGNKo',
        'document',
        'KyJaf',
        'vQytF',
        'dahgc',
        'length',
        '__importDe',
        'sCVYh',
        'defineProp',
        'IA:\x20',
        'method',
        'public',
        'kLQpy',
        'erty',
        'IcfqY',
        'xoZTI',
        'GET',
        'geHhV',
        'API_URL_36',
        'vtaIE',
        'error',
        '6990824OfvCSZ',
        'env',
        'getTime',
        'image',
        '6189DurCvs',
        'AkZlM',
        '1126vobZBY',
        'path',
        'sbGpw',
        'finish',
        'AEOoB',
        'data',
        'lWdoy',
        'createWrit',
        'bjXDH',
        '29781WnwVjP',
        'ypUiF',
        'fEYdI',
        'iNZmG',
        'axios',
        'Hzxun',
        'csnmL',
        'audio',
        '5862325jkjIem',
        'value',
        'fault',
        'PGVeQ',
        'OdDPO',
        'nYRVS',
        'bzdFg',
        'ERROR\x20DONW',
        'url',
        'kBZCK',
        '63511OXDoXp',
        'rs/AppErro',
        'headers',
        'logger',
        'join',
        '__esModule',
        'bJFGq',
        'rPDTT',
        'tokenAPI',
        '360_NOT_DO',
        'mime_type',
        'GjxeP',
        'filename',
        'RADql',
        '138oFPGqb',
        'xhdyy',
        '4297992lSafEG',
        'FykiQ',
        'JaOUB',
        'aRYim',
        'pipe',
        'eWqwQ',
        'stream',
        'eOqoI',
        'EwQiG',
        'split',
        'vGlGs',
        '793332hyfGxi',
        'voice',
        'D360-API-K',
        'video',
        'laAAi',
        'aTYgJ',
        '4670liNsdP',
        'LOAD',
        '/v1/media/'
    ];
    a = function () {
        return P;
    };
    return a();
}
var __importDefault = this && this[A(0x1bf) + B(0x1e7)] || function (c) {
    const C = B;
    return c && c[C(0x1f4)] ? c : { 'default': c };
};
const u = {};
u[B(0x1e6)] = !![], Object[B(0x1c1) + A(0x1c6)](exports, B(0x1f4), u);
const axios_1 = __importDefault(require(A(0x1e1))), fs_1 = require('fs'), path_1 = require(A(0x1d5)), AppError_1 = __importDefault(require(A(0x1ab) + A(0x1f0) + 'r')), logger_1 = require(A(0x1b1) + B(0x1aa)), downloadFile = async (e, f, g) => {
        const D = A, E = B, h = {
                'IcfqY': function (n, o) {
                    return n !== o;
                },
                'Mgnlo': D(0x1e0),
                'FykiQ': E(0x207),
                'AkZlM': D(0x1ec) + D(0x211),
                'JaOUB': function (n, o) {
                    return n(o);
                },
                'AEOoB': function (n, o) {
                    return n > o;
                },
                'nwzoj': function (n, o) {
                    return n(o);
                },
                'dahgc': function (n, o) {
                    return n !== o;
                },
                'RADql': D(0x1f6),
                'WfvLb': D(0x1d7),
                'aTYgJ': E(0x1cd),
                'laAAi': E(0x1c4),
                'QMgkC': D(0x1c9),
                'sbGpw': E(0x205)
            }, i = process[E(0x1cf)][E(0x1cb) + '0'] + D(0x212) + f, j = (-0x12bf * 0x1 + 0x1ac3 + -0xe4 * 0x9, path_1[D(0x1f3)])(__dirname, '..', '..', h[D(0x20e)], g), k = {};
        k[E(0x20c) + 'EY'] = e;
        const l = {};
        l[D(0x1ed)] = i, l[D(0x1c3)] = h[E(0x1af)], l[E(0x1ad) + 'pe'] = h[D(0x1d6)], l[D(0x1f1)] = k;
        const m = await (-0x16b1 * 0x1 + -0x22d5 + 0x25 * 0x18e, axios_1[E(0x1a8)])(l);
        await new Promise((n, o) => {
            const G = D, I = D, p = {
                    'dQPek': function (q, r) {
                        const F = b;
                        return h[F(0x1d8)](q, r);
                    },
                    'sCVYh': h[G(0x1d3)],
                    'aRYim': function (q, r) {
                        const H = G;
                        return h[H(0x1b0)](q, r);
                    }
                };
            if (h[G(0x1bd)](h[I(0x1fc)], h[I(0x1fc)])) {
                h = i[G(0x20b)]['id'] || '';
                const r = j[I(0x20b)][I(0x1f9)] || '', s = r[I(0x208)](';');
                k = p[I(0x1b7)](s[G(0x1be)], -0x9e5 + -0x3a * -0x37 + -0x290) ? s[0x355 * -0x5 + 0x1725 + -0x67c] : l[I(0x20b)][I(0x1f9)];
            } else
                m[I(0x1d9)][G(0x203)]((-0xe27 + -0x21bd * 0x1 + 0x1 * 0x2fe4, fs_1[G(0x1db) + I(0x1b8)])(j))['on'](h[G(0x1ac)], async () => n(!![]))['on'](h[I(0x20f)], r => {
                    const J = G, K = I;
                    h[J(0x1c7)](h[K(0x1b2)], h[J(0x200)]) ? (console[K(0x1cd)](h[K(0x1d3)], r), h[J(0x201)](o, new Error(r))) : (h[J(0x1cd)](p[K(0x1c0)], i), p[K(0x202)](j, new k(l)));
                });
        });
    }, GetMediaWaba360 = async ({
        channel: c,
        msg: d,
        ticket: e
    }) => {
        const L = A, M = A, f = {
                'EGNKo': L(0x1ec) + M(0x211),
                'kLQpy': function (g, h) {
                    return g(h);
                },
                'bzdFg': L(0x1d7),
                'XXoeB': L(0x1cd),
                'SfHSr': function (g, h) {
                    return g === h;
                },
                'eOqoI': M(0x1ee),
                'OdDPO': function (g, h) {
                    return g !== h;
                },
                'bjXDH': M(0x204),
                'fEYdI': L(0x1ae),
                'DLIiM': L(0x1b3),
                'geHhV': L(0x1f5),
                'vGlGs': M(0x1cc),
                'vQytF': M(0x1de),
                'XdMYI': M(0x1fa),
                'Hzxun': function (g, h) {
                    return g > h;
                },
                'lWdoy': L(0x1ea),
                'PGVeQ': L(0x1bb),
                'xhdyy': function (g, h, i, j) {
                    return g(h, i, j);
                },
                'xoZTI': L(0x1e3)
            };
        try {
            if (f[M(0x1b4)](f[L(0x206)], f[L(0x206)])) {
                let g = '', h, i;
                if (d?.[M(0x1ba)]) {
                    if (f[L(0x1e9)](f[M(0x1dc)], f[L(0x1dc)])) {
                        g[L(0x1f2)][L(0x1cd)](h);
                        throw new i[(L(0x1a8))](M(0x1f8) + M(0x1b5) + L(0x1c2) + j);
                    } else
                        g = d[L(0x1ba)]['id'] || '', h = d[M(0x1ba)][M(0x1fb)], i = d[M(0x1ba)][L(0x1f9)];
                }
                d?.[L(0x1d1)] && (f[L(0x1e9)](f[M(0x1df)], f[M(0x1a9)]) ? (g = d[L(0x1d1)]['id'] || '', i = d[M(0x1d1)][M(0x1f9)]) : (i = j[M(0x1ba)]['id'] || '', k = l[L(0x1ba)][M(0x1fb)], m = n[L(0x1ba)][M(0x1f9)]));
                d?.[L(0x20d)] && (f[M(0x1e9)](f[L(0x1ca)], f[M(0x209)]) ? (g = d[L(0x20d)]['id'] || '', i = d[L(0x20d)][L(0x1f9)]) : (g = h[L(0x20d)]['id'] || '', i = j[M(0x20d)][M(0x1f9)]));
                if (d?.[L(0x20b)]) {
                    if (f[L(0x1b4)](f[L(0x1bc)], f[M(0x1a7)]))
                        g = h[L(0x1d1)]['id'] || '', i = j[M(0x1d1)][L(0x1f9)];
                    else {
                        g = d[M(0x20b)]['id'] || '';
                        const q = d[L(0x20b)][M(0x1f9)] || '', r = q[L(0x208)](';');
                        i = f[L(0x1e2)](r[M(0x1be)], 0x9 * 0x187 + -0x1 * 0x1b01 + 0xd43) ? r[0x1 * 0x7be + 0x25f7 + -0x2db5 * 0x1] : d[L(0x20b)][L(0x1f9)];
                    }
                }
                d?.[L(0x1e4)] && (f[L(0x1e9)](f[L(0x1da)], f[M(0x1e8)]) ? (g = d[L(0x1e4)]['id'] || '', i = d[L(0x1e4)][L(0x1f9)]) : (g = h[L(0x1e4)]['id'] || '', i = j[M(0x1e4)][L(0x1f9)]));
                const j = i?.[M(0x208)]('/')[0xc12 + -0x1bc2 + 0xfb1][M(0x208)](';')[-0x1d4e + -0x252b * 0x1 + 0x4279], k = new Date()[L(0x1d0)](), l = h ? h + '_' + e['id'] + '_' + g + '_' + k + '.' + j : e['id'] + '_' + g + '_' + k + '.' + j;
                return await f[L(0x1fe)](downloadFile, c[M(0x1f7)], g, l), l;
            } else
                j[L(0x1d9)][M(0x203)]((0x1d21 + -0x26 * 0x4c + -0x11d9, k[L(0x1db) + M(0x1b8)])(l))['on'](f[L(0x1eb)], async () => q(!![]))['on'](f[L(0x1b6)], v => {
                    const N = L, O = M;
                    q[N(0x1cd)](f[N(0x1b9)], v), f[N(0x1c5)](r, new s(v));
                });
        } catch (v) {
            if (f[L(0x1b4)](f[M(0x1c8)], f[M(0x1c8)])) {
                logger_1[M(0x1f2)][L(0x1cd)](v);
                throw new AppError_1[(L(0x1a8))](M(0x1f8) + M(0x1b5) + L(0x1c2) + v);
            } else {
                const x = {};
                return x[L(0x1a8)] = j, g && h[M(0x1f4)] ? i : x;
            }
        }
    };
exports[B(0x1a8)] = GetMediaWaba360;