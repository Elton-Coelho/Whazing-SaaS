'use strict';
const F = b, G = b;
function a() {
    const T = [
        'TDRHF',
        'RBrDT',
        'AQZJl',
        'IfEyH',
        'arquivo',
        'apzxq',
        'GQmXs',
        'ExmxN',
        'imagem',
        'YEKHY',
        'ERROR\x20DONW',
        'SSxjN',
        'voice_medi',
        'MAUDG',
        'getTime',
        'video',
        'KFuJx',
        '4667679pVuxQV',
        'MQuDZ',
        'value',
        'toString',
        'fault',
        'applicatio',
        'video_vers',
        'split',
        '4|2|3|1|0',
        '371790XuRccL',
        '4|1|0|2|3',
        'BsrtE',
        'dIMFP',
        'stream',
        '../Message',
        'media_type',
        '30XpVLIk',
        'CBArj',
        'path',
        'WdpYf',
        'audio_src',
        'SLPqV',
        '197329zmHAFZ',
        'ions2',
        'viLeH',
        'eStream',
        'gkzRS',
        'QYZLo',
        'LOAD',
        'sended',
        'default',
        'url',
        '0|2|4|1|3',
        'item_type',
        'message',
        'áudio',
        'finish',
        'createWrit',
        'EuYpO',
        'OtXAe',
        '__esModule',
        'SYZCi',
        'GGwGi',
        'rnEbx',
        'error',
        'FLxqt',
        'media',
        '__importDe',
        'zWwVq',
        'image',
        'erty',
        '3252954DTfPvt',
        'pipe',
        'defineProp',
        'kupWC',
        'snrfz',
        'join',
        'caption',
        'COlDJ',
        'reateMessa',
        'BoyFs',
        'XSFjl',
        'vídeo',
        '0|1|2|4|3',
        'text',
        'HOjQd',
        'IkiwG',
        'fBUhk',
        'LJSmY',
        'iGSoV',
        'aaGWH',
        'received',
        'messageDat',
        'nZbQI',
        'yDsOa',
        'dIpRj',
        'sBISO',
        '0|4|1|3|2',
        'geService',
        'zvOsp',
        'update',
        'EMKjM',
        'FxSSn',
        'XRNDb',
        '591izZCbz',
        'BvclE',
        'YASWC',
        'vEABO',
        'audio',
        'length',
        'eNwqf',
        'ions',
        'epjmY',
        'sxFUP',
        '3058504XKLEou',
        'HUdZX',
        'tenantId',
        'bgwrt',
        'image_vers',
        '934896MYlBWV',
        'Services/C',
        'candidates',
        'data',
        'UWjZg',
        'item_id',
        'axios',
        'public',
        '2|0|4|3|1',
        'zWjPi',
        '5CCCQrW',
        '7yhUuEx',
        'xuEVV',
        '1094bpWXku',
        'gWQJC',
        'GET'
    ];
    a = function () {
        return T;
    };
    return a();
}
(function (c, d) {
    const D = b, E = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(D(0x1ab)) / (0x1 * 0xc08 + -0x1 * -0x17a1 + -0x23a8) + -parseInt(D(0x18e)) / (-0x959 * 0x4 + -0xfde * -0x2 + 0x2d5 * 0x2) * (-parseInt(D(0x172)) / (-0xefa + 0xf19 + -0x1c)) + parseInt(D(0x181)) / (-0x2f6 * 0x9 + 0x2 * -0x42d + 0x12 * 0x1f2) + -parseInt(D(0x18b)) / (-0x69c + -0x1 * 0x16c3 + -0x759 * -0x4) * (parseInt(D(0x1d5)) / (-0xf11 * 0x2 + -0x494 * 0x1 + 0x156 * 0x1a)) + -parseInt(E(0x18c)) / (-0x350 * -0x1 + 0xde * -0x20 + 0x1877) * (-parseInt(E(0x17c)) / (-0x21 * -0x90 + 0x1 * -0x11c9 + -0xbf)) + parseInt(D(0x1a2)) / (0xa * 0x19b + 0xca + -0x10cf) + parseInt(E(0x1b2)) / (-0x2042 + -0x272 * -0x5 + 0xa09 * 0x2) * (parseInt(D(0x1b8)) / (-0x1e71 + 0xd3a + 0x2f * 0x5e));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x60c1c + 0x1367 * -0x65 + -0x1 * -0x138916));
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x24a + 0x7f9 * -0x4 + 0x2394);
        let h = e[f];
        return h;
    }, b(c, d);
}
var __importDefault = this && this[F(0x1d1) + G(0x1a6)] || function (c) {
    const H = F;
    return c && c[H(0x1ca)] ? c : { 'default': c };
};
const u = {};
u[G(0x1a4)] = !![], Object[G(0x1d7) + G(0x1d4)](exports, F(0x1ca), u);
const path_1 = require(F(0x1b4)), fs_1 = require('fs'), axios_1 = __importDefault(require(G(0x187))), CreateMessageService_1 = __importDefault(require(F(0x1b0) + G(0x182) + F(0x1dd) + G(0x16c))), getExt = d => {
        const I = F, J = F, e = {};
        e[I(0x185)] = function (j, k) {
            return j - k;
        };
        const f = e, g = d[J(0x1a9)]('?'), h = g[-0x26f1 + 0x25f * -0xb + 0x4106][I(0x1a9)]('/'), i = h[f[J(0x185)](h[J(0x177)], -0x1523 + 0x16 * -0x48 + 0x1b54)][I(0x1a9)]('.');
        return i[-0x55 * -0x36 + -0x1 * -0xea6 + -0x2093];
    }, downloadFile = async (c, d) => {
        const K = G, L = F, e = {
                'EMKjM': K(0x1aa),
                'zWwVq': K(0x1c5),
                'QYZLo': K(0x176),
                'IfEyH': function (g, h) {
                    return g(h);
                },
                'BvclE': function (g, h) {
                    return g === h;
                },
                'HOjQd': K(0x1cd),
                'snrfz': K(0x169),
                'ExmxN': L(0x19b) + K(0x1be),
                'BoyFs': K(0x1ac),
                'YASWC': function (g, h) {
                    return g(h);
                },
                'zvOsp': L(0x1d3),
                'GQmXs': K(0x199),
                'RBrDT': function (g, h) {
                    return g === h;
                },
                'TDRHF': L(0x1e5),
                'dIMFP': K(0x1c6),
                'yDsOa': L(0x1ce),
                'sxFUP': L(0x190),
                'SSxjN': K(0x1af)
            }, f = await (0x1 * -0x1ad1 + -0x13e * 0xf + -0x41 * -0xb3, axios_1[L(0x1c0)])({
                'url': c[L(0x1a5)](),
                'method': e[K(0x17b)],
                'responseType': e[L(0x19c)]
            });
        await new Promise((g, h) => {
            const M = K, N = L;
            if (e[M(0x192)](e[M(0x191)], e[M(0x191)]))
                f[N(0x184)][N(0x1d6)]((-0x25cf + -0xff6 + 0x35c5, fs_1[M(0x1c7) + N(0x1bb)])(d))['on'](e[M(0x1ae)], async () => g(!![]))['on'](e[M(0x168)], i => {
                    const O = M, P = N, j = {
                            'iGSoV': e[O(0x16f)],
                            'BsrtE': e[O(0x1d2)],
                            'zWjPi': e[P(0x1bd)],
                            'kupWC': function (k, l) {
                                const Q = P;
                                return e[Q(0x194)](k, l);
                            }
                        };
                    if (e[P(0x173)](e[O(0x1e3)], e[O(0x1d9)])) {
                        const l = j[P(0x1e7)][O(0x1a9)]('|');
                        let m = 0x117f * -0x1 + 0x98 * 0x14 + 0x59f * 0x1;
                        while (!![]) {
                            switch (l[m++]) {
                            case '0':
                                t = j[O(0x1ad)];
                                continue;
                            case '1':
                                s = j[O(0x18a)];
                                continue;
                            case '2':
                                n = o[P(0x1c4)][O(0x19d) + 'a'][P(0x1d0)][P(0x176)];
                                continue;
                            case '3':
                                p = j[O(0x1d8)](q, r[O(0x1b6)]);
                                continue;
                            case '4':
                                l = m[P(0x1c4)][O(0x19d) + 'a'][P(0x1d0)];
                                continue;
                            }
                            break;
                        }
                    } else
                        console[O(0x1ce)](e[P(0x198)], i), e[P(0x194)](h, new Error(i));
                });
            else {
                const j = e[M(0x1de)][N(0x1a9)]('|');
                let k = 0x9 * -0x2d7 + 0x2 * 0xed7 + -0xd3 * 0x5;
                while (!![]) {
                    switch (j[k++]) {
                    case '0':
                        p = e[N(0x174)](q, r[M(0x1c1)]);
                        continue;
                    case '1':
                        [n] = o[M(0x1c4)][N(0x1d0)][N(0x180) + M(0x1b9)][N(0x183)];
                        continue;
                    case '2':
                        s = e[M(0x16d)];
                        continue;
                    case '3':
                        t = e[M(0x197)];
                        continue;
                    case '4':
                        l = m[M(0x1c4)][N(0x1d0)];
                        continue;
                    }
                    break;
                }
            }
        });
    }, VerifyMediaMessage = async (d, e, f, g) => {
        const R = F, S = G, h = {
                'nZbQI': R(0x1e1),
                'aaGWH': function (t, v) {
                    return t(v);
                },
                'XRNDb': R(0x1e0),
                'LJSmY': S(0x1a0),
                'MQuDZ': function (t, v) {
                    return t - v;
                },
                'vEABO': S(0x1a7) + 'n',
                'sBISO': S(0x195),
                'MAUDG': function (t, v) {
                    return t === v;
                },
                'XSFjl': function (t, v) {
                    return t === v;
                },
                'GGwGi': R(0x18f),
                'viLeH': R(0x1c2),
                'eNwqf': R(0x1d3),
                'OtXAe': S(0x199),
                'SLPqV': function (t, v) {
                    return t(v);
                },
                'EuYpO': function (t, v) {
                    return t !== v;
                },
                'YEKHY': S(0x18d),
                'AQZJl': S(0x16b),
                'FxSSn': function (t, v) {
                    return t(v);
                },
                'IkiwG': S(0x19d) + 'a',
                'KFuJx': R(0x1bc),
                'HUdZX': R(0x189),
                'CBArj': R(0x1c5),
                'FLxqt': R(0x176),
                'SYZCi': function (t, v) {
                    return t(v);
                },
                'apzxq': S(0x188),
                'COlDJ': function (t, v, w) {
                    return t(v, w);
                },
                'epjmY': S(0x1bf),
                'WdpYf': R(0x1e9),
                'bgwrt': function (t, v) {
                    return t || v;
                }
            };
        let i, j, k, l = h[R(0x175)], m = h[R(0x16a)];
        if (h[S(0x19e)](d[R(0x1c4)]?.[S(0x1d0)]?.[R(0x1b1)], 0x9db + -0xb * 0xcd + -0x59 * 0x3)) {
            if (h[S(0x1df)](h[R(0x1cc)], h[R(0x1cc)])) {
                const t = h[R(0x1ba)][S(0x1a9)]('|');
                let v = 0x5 * -0x12f + -0xb53 + -0x113e * -0x1;
                while (!![]) {
                    switch (t[v++]) {
                    case '0':
                        j = d[S(0x1c4)][S(0x1d0)];
                        continue;
                    case '1':
                        l = h[S(0x178)];
                        continue;
                    case '2':
                        [i] = d[S(0x1c4)][R(0x1d0)][S(0x180) + S(0x1b9)][R(0x183)];
                        continue;
                    case '3':
                        m = h[R(0x1c9)];
                        continue;
                    case '4':
                        k = h[R(0x1b7)](getExt, i[R(0x1c1)]);
                        continue;
                    }
                    break;
                }
            } else {
                const x = h[S(0x167)][R(0x1a9)]('|');
                let y = -0x1 * 0xba5 + 0x1418 + -0x873;
                while (!![]) {
                    switch (x[y++]) {
                    case '0':
                        l = m[R(0x1c4)][S(0x1d0)];
                        continue;
                    case '1':
                        [n] = o[S(0x1c4)][R(0x1d0)][R(0x1a8) + S(0x179)];
                        continue;
                    case '2':
                        p = h[S(0x1e8)](q, r[R(0x1c1)]);
                        continue;
                    case '3':
                        t = h[S(0x171)];
                        continue;
                    case '4':
                        s = h[S(0x1e6)];
                        continue;
                    }
                    break;
                }
            }
        }
        if (h[R(0x1df)](d[R(0x1c4)]?.[R(0x1d0)]?.[S(0x1b1)], 0x1 * -0x1e4 + 0x3 * 0xc15 + -0x3 * 0xb73)) {
            if (h[R(0x1c8)](h[R(0x19a)], h[R(0x19a)])) {
                const y = d[R(0x1a9)]('?'), z = y[-0xc * -0x31a + 0xc0b + 0x1 * -0x3143][R(0x1a9)]('/'), A = z[h[S(0x1a3)](z[S(0x177)], -0xbf1 * 0x2 + -0x2465 + 0x3c48)][S(0x1a9)]('.');
                return A[0x203d + 0x1 * 0x779 + -0x27b5];
            } else {
                const y = h[S(0x193)][R(0x1a9)]('|');
                let z = 0x10 * -0x15c + -0x95 * -0x1d + 0x4df * 0x1;
                while (!![]) {
                    switch (y[z++]) {
                    case '0':
                        j = d[S(0x1c4)][S(0x1d0)];
                        continue;
                    case '1':
                        k = h[R(0x170)](getExt, i[S(0x1c1)]);
                        continue;
                    case '2':
                        m = h[S(0x171)];
                        continue;
                    case '3':
                        l = h[S(0x1e6)];
                        continue;
                    case '4':
                        [i] = d[R(0x1c4)][R(0x1d0)][R(0x1a8) + R(0x179)];
                        continue;
                    }
                    break;
                }
            }
        }
        if (h[R(0x19e)](d[R(0x1c4)]?.[S(0x1c3)], h[S(0x1e4)])) {
            if (h[S(0x1c8)](h[S(0x1a1)], h[S(0x1a1)])) {
                const B = {};
                return B[S(0x1c0)] = j, g && h[R(0x1ca)] ? i : B;
            } else {
                const B = h[S(0x17d)][R(0x1a9)]('|');
                let C = 0x13 * -0x59 + -0x1cb * 0x1 + 0x866;
                while (!![]) {
                    switch (B[C++]) {
                    case '0':
                        i = d[S(0x1c4)][R(0x19d) + 'a'][R(0x1d0)][S(0x176)];
                        continue;
                    case '1':
                        m = h[R(0x1b3)];
                        continue;
                    case '2':
                        j = d[S(0x1c4)][R(0x19d) + 'a'][S(0x1d0)];
                        continue;
                    case '3':
                        l = h[R(0x1cf)];
                        continue;
                    case '4':
                        k = h[S(0x1cb)](getExt, i[S(0x1b6)]);
                        continue;
                    }
                    break;
                }
            }
        }
        const n = f['id'] + '_' + j['id'] + '_' + new Date()[R(0x19f)]() + '.' + k, o = (-0xb9d + -0x748 * 0x1 + -0x7 * -0x2b3, path_1[S(0x1da)])(__dirname, '..', '..', '..', h[S(0x196)], n), p = h[S(0x1df)](d[S(0x1c4)][S(0x1c3)], h[R(0x1e4)]) ? i[R(0x1b6)] : i[R(0x1c1)];
        await h[R(0x1dc)](downloadFile, p, o);
        const q = {
            'messageId': h[S(0x1e8)](String, d[S(0x1c4)]?.[R(0x186)]),
            'ticketId': f['id'],
            'contactId': e ? undefined : g['id'],
            'body': d[S(0x1c4)]?.[R(0x1e2)] || d[R(0x1c4)]?.[R(0x1db)] || m,
            'fromMe': e,
            'read': e,
            'mediaUrl': n,
            'mediaType': l,
            'quotedMsgId': '',
            'timestamp': new Date()[S(0x19f)](),
            'status': e ? h[S(0x17a)] : h[R(0x1b5)]
        };
        await f[R(0x16e)]({
            'lastMessage': d[R(0x1c4)]?.[S(0x1e2)] || d[S(0x1c4)]?.[S(0x1db)] || m,
            'lastMessageAt': new Date()[R(0x19f)](),
            'answered': h[S(0x17f)](e, ![])
        });
        const r = {};
        r[R(0x166) + 'a'] = q, r[S(0x17e)] = f[R(0x17e)];
        const s = await (0x13fb + 0x1a67 * -0x1 + 0x66c, CreateMessageService_1[S(0x1c0)])(r);
        return s;
    };
exports[F(0x1c0)] = VerifyMediaMessage;