'use strict';
const F = b, G = b;
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x10d6 + 0x5 * 0x5a5 + -0xe * 0x317);
        let h = e[f];
        return h;
    }, b(c, d);
}
(function (c, d) {
    const D = b, E = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(D(0x233)) / (-0x15c8 + 0x20e + 0x13bb) * (parseInt(D(0x23a)) / (-0x18e4 + 0x1ad9 + -0x1 * 0x1f3)) + parseInt(D(0x215)) / (0x1fd6 + -0xe * 0x29c + 0x5 * 0xf1) + parseInt(E(0x231)) / (-0xfd * -0x1f + -0x4af + -0x19f * 0x10) * (-parseInt(D(0x22c)) / (-0x1859 + 0x46 * 0x63 + -0x2b4)) + -parseInt(E(0x209)) / (0x26b7 + -0x2553 + -0xa * 0x23) + parseInt(E(0x1e7)) / (-0x55 * 0x47 + 0x2eb + 0x14af) * (-parseInt(D(0x24b)) / (0x2 * -0x7fd + 0xaad * 0x2 + -0x98 * 0x9)) + -parseInt(D(0x244)) / (0x272 + -0x17c8 + 0x155f) + parseInt(E(0x21f)) / (0xa36 + -0x5e7 * 0x5 + 0x1357 * 0x1) * (parseInt(E(0x238)) / (0x25ce * -0x1 + 0x11 * 0xb9 + 0x1990));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0xf3591 + -0x11c5b5 + 0x2fbd6d));
var __importDefault = this && this[F(0x223) + F(0x21b)] || function (c) {
    const H = F;
    return c && c[H(0x1ce)] ? c : { 'default': c };
};
const u = {};
function a() {
    const Y = [
        'createWrit',
        'image',
        'FbFIl',
        'candidates',
        'dnhsc',
        'UgBHt',
        'uaCdl',
        '9752697nKsXpo',
        'uPcHt',
        'xgoit',
        'message',
        'messageDat',
        'stream',
        'vídeo',
        '8SqSTbY',
        'join',
        'tcbfv',
        'tPFpX',
        'BxnTB',
        'erty',
        'url',
        '__esModule',
        'media_type',
        'image_vers',
        'length',
        'ZcLbj',
        'mdKPW',
        'CeMVC',
        'RzlXK',
        'EoJyl',
        'pipe',
        'OWPrW',
        '1|3|4|2|0',
        'text',
        'TBgoL',
        'reateMessa',
        'fgbDC',
        'update',
        'EZiYC',
        'value',
        'path',
        'audio',
        'audio_src',
        'IEFiC',
        'eStream',
        'Services/C',
        '10220819qsaKNJ',
        'voice_medi',
        'ggquD',
        'DrHyb',
        'KktQE',
        'VRMIC',
        'media',
        'public',
        'wuUNx',
        'jeswS',
        'OMSWt',
        'osNuN',
        'video',
        'ubjdh',
        'caption',
        'ERROR\x20DONW',
        'ions',
        'vEDcJ',
        'defineProp',
        'Gfzyl',
        'arquivo',
        'IMEkx',
        'finish',
        'NJQxH',
        'item_type',
        'default',
        'VOoax',
        'axios',
        'VzicX',
        'GZeCm',
        'getTime',
        'fGRDw',
        'split',
        'áudio',
        '5066538ZQHrWa',
        'gZSvY',
        'gSOsR',
        'DSUaB',
        'etYmW',
        'toString',
        'odFue',
        'tenantId',
        'error',
        'QDnml',
        'item_id',
        'imagem',
        '4906851tTlQZB',
        'TTfef',
        'ZGxrY',
        'YXdKI',
        'WReTl',
        'jEIpP',
        'fault',
        'vlEQf',
        'jaxBW',
        'LOAD',
        '460fKcbod',
        'IrLTw',
        'bibdm',
        'data',
        '__importDe',
        '1|4|0|2|3',
        'XrLBw',
        '3|0|4|2|1',
        'eLgpu',
        'GGwln',
        'QLqIc',
        'SUNGg',
        'SDxQY',
        '9626155iNSlzg',
        '../Message',
        'applicatio',
        'video_vers',
        '4|1|2|0|3',
        '4gsRJml',
        'GET',
        '1Ceevsr',
        'vjycN',
        'received',
        'rxZQo',
        'ions2',
        '1038334mIWuXB',
        'geService',
        '605740UOWdLf',
        'sended',
        'Telps'
    ];
    a = function () {
        return Y;
    };
    return a();
}
u[F(0x1e0)] = !![], Object[F(0x1f9) + G(0x250)](exports, F(0x1ce), u);
const path_1 = require(F(0x1e1)), fs_1 = require('fs'), axios_1 = __importDefault(require(G(0x202))), CreateMessageService_1 = __importDefault(require(F(0x22d) + F(0x1e6) + F(0x1dc) + G(0x239))), getExt = d => {
        const I = F, J = F, e = {};
        e[I(0x227)] = function (j, k) {
            return j - k;
        };
        const f = e, g = d[J(0x207)]('?'), h = g[0x2265 + -0x247a + 0x215][J(0x207)]('/'), i = h[f[J(0x227)](h[I(0x1d1)], 0x5ce + -0x5f * 0x2c + 0xa87)][I(0x207)]('.');
        return i[-0x26e1 + 0x2 * 0x4b6 + 0x1d76];
    }, downloadFile = async (c, d) => {
        const K = F, L = G, e = {
                'QLqIc': function (g, h) {
                    return g === h;
                },
                'TBgoL': K(0x1fe),
                'vEDcJ': L(0x1f6) + L(0x21e),
                'ZcLbj': function (g, h) {
                    return g(h);
                },
                'XrLBw': function (g, h) {
                    return g(h);
                },
                'VRMIC': K(0x1fd),
                'OMSWt': L(0x211),
                'uaCdl': function (g, h) {
                    return g === h;
                },
                'KktQE': K(0x23f),
                'YXdKI': K(0x232),
                'UgBHt': L(0x249)
            }, f = await (0xb0b + 0x416 + -0x3 * 0x50b, axios_1[L(0x200)])({
                'url': c[K(0x20e)](),
                'method': e[L(0x218)],
                'responseType': e[K(0x242)]
            });
        await new Promise((g, h) => {
            const N = K, O = K, i = {
                    'fgbDC': function (j, k) {
                        const M = b;
                        return e[M(0x229)](j, k);
                    },
                    'ggquD': e[N(0x1db)],
                    'DSUaB': e[N(0x1f8)],
                    'Telps': function (j, k) {
                        const P = N;
                        return e[P(0x1d2)](j, k);
                    },
                    'vlEQf': function (j, k) {
                        const Q = N;
                        return e[Q(0x225)](j, k);
                    },
                    'ubjdh': e[N(0x1ec)],
                    'gSOsR': e[N(0x1f1)]
                };
            if (e[O(0x243)](e[N(0x1eb)], e[O(0x1eb)]))
                f[O(0x222)][N(0x1d7)]((0x1a73 + 0x358 + -0x1dcb, fs_1[N(0x23d) + N(0x1e5)])(d))['on'](e[O(0x1ec)], async () => g(!![]))['on'](e[O(0x1f1)], j => {
                    const R = N, S = N;
                    if (i[R(0x1dd)](i[S(0x1e9)], i[R(0x1e9)]))
                        console[S(0x211)](i[S(0x20c)], j), i[R(0x23c)](h, new Error(j));
                    else {
                        const l = {};
                        return l[S(0x200)] = j, g && h[S(0x1ce)] ? i : l;
                    }
                });
            else {
                const k = {
                    'OWPrW': i[N(0x20c)],
                    'etYmW': function (l, m) {
                        const T = O;
                        return i[T(0x21c)](l, m);
                    }
                };
                j[O(0x222)][O(0x1d7)]((-0x17 * 0xb5 + -0xa * 0x1ac + 0x20fb, k[N(0x23d) + N(0x1e5)])(l))['on'](i[O(0x1f4)], async () => q(!![]))['on'](i[O(0x20b)], v => {
                    const U = N, V = N;
                    q[U(0x211)](k[U(0x1d8)], v), k[V(0x20d)](r, new s(v));
                });
            }
        });
    }, VerifyMediaMessage = async (d, e, f, g) => {
        const W = G, X = F, h = {
                'wuUNx': W(0x1f6) + X(0x21e),
                'jaxBW': function (t, v) {
                    return t(v);
                },
                'SDxQY': W(0x230),
                'BxnTB': X(0x1e2),
                'DrHyb': function (t, v) {
                    return t(v);
                },
                'Gfzyl': X(0x208),
                'IEFiC': X(0x1f3),
                'tcbfv': function (t, v) {
                    return t(v);
                },
                'jEIpP': X(0x24a),
                'EZiYC': X(0x22e) + 'n',
                'TTfef': W(0x1fb),
                'mdKPW': function (t, v) {
                    return t === v;
                },
                'QDnml': function (t, v) {
                    return t === v;
                },
                'GZeCm': X(0x20f),
                'GGwln': X(0x1d6),
                'jeswS': W(0x226),
                'vjycN': X(0x214),
                'rxZQo': X(0x23e),
                'WReTl': function (t, v) {
                    return t(v);
                },
                'ZGxrY': function (t, v) {
                    return t !== v;
                },
                'bibdm': W(0x245),
                'RzlXK': X(0x1d9),
                'IrLTw': function (t, v) {
                    return t(v);
                },
                'fGRDw': function (t, v) {
                    return t === v;
                },
                'CeMVC': X(0x1e8) + 'a',
                'VOoax': W(0x1f2),
                'IMEkx': W(0x224),
                'SUNGg': X(0x1ee),
                'xgoit': function (t, v, w) {
                    return t(v, w);
                },
                'dnhsc': function (t, v) {
                    return t(v);
                },
                'gZSvY': W(0x23b),
                'tPFpX': W(0x235),
                'VzicX': function (t, v) {
                    return t || v;
                }
            };
        let i, j, k, l = h[W(0x1df)], m = h[W(0x216)];
        if (h[W(0x1d3)](d[W(0x247)]?.[X(0x1ed)]?.[X(0x1cf)], 0x464 * -0x7 + 0x86d * -0x3 + 0x1de * 0x1e)) {
            if (h[W(0x212)](h[W(0x204)], h[W(0x228)]))
                h[W(0x211)](h[W(0x1ef)], i), h[W(0x21d)](j, new k(l));
            else {
                const v = h[W(0x1f0)][X(0x207)]('|');
                let w = -0xf27 + -0x1711 * -0x1 + -0x7ea * 0x1;
                while (!![]) {
                    switch (v[w++]) {
                    case '0':
                        [i] = d[W(0x247)][W(0x1ed)][W(0x1d0) + X(0x237)][W(0x240)];
                        continue;
                    case '1':
                        m = h[X(0x234)];
                        continue;
                    case '2':
                        l = h[X(0x236)];
                        continue;
                    case '3':
                        j = d[X(0x247)][W(0x1ed)];
                        continue;
                    case '4':
                        k = h[X(0x219)](getExt, i[W(0x1cd)]);
                        continue;
                    }
                    break;
                }
            }
        }
        if (h[W(0x212)](d[X(0x247)]?.[X(0x1ed)]?.[W(0x1cf)], -0x1a8e + -0xa9 * -0x25 + 0x223)) {
            if (h[W(0x217)](h[W(0x221)], h[W(0x221)])) {
                const y = h[X(0x22b)][W(0x207)]('|');
                let z = 0x1ac6 + 0x36d * 0x5 + -0x2be7;
                while (!![]) {
                    switch (y[z++]) {
                    case '0':
                        s = h[X(0x24f)];
                        continue;
                    case '1':
                        n = o[W(0x247)][W(0x1e8) + 'a'][X(0x1ed)][X(0x1e2)];
                        continue;
                    case '2':
                        p = h[X(0x1ea)](q, r[W(0x1e3)]);
                        continue;
                    case '3':
                        t = h[X(0x1fa)];
                        continue;
                    case '4':
                        l = m[X(0x247)][W(0x1e8) + 'a'][X(0x1ed)];
                        continue;
                    }
                    break;
                }
            } else {
                const y = h[X(0x1d5)][X(0x207)]('|');
                let z = -0x1ef2 + -0x15ef + 0x34e1;
                while (!![]) {
                    switch (y[z++]) {
                    case '0':
                        m = h[X(0x21a)];
                        continue;
                    case '1':
                        j = d[W(0x247)][W(0x1ed)];
                        continue;
                    case '2':
                        l = h[X(0x1e4)];
                        continue;
                    case '3':
                        [i] = d[X(0x247)][X(0x1ed)][X(0x22f) + X(0x1f7)];
                        continue;
                    case '4':
                        k = h[X(0x220)](getExt, i[W(0x1cd)]);
                        continue;
                    }
                    break;
                }
            }
        }
        if (h[X(0x206)](d[W(0x247)]?.[X(0x1ff)], h[W(0x1d4)])) {
            if (h[W(0x217)](h[X(0x201)], h[W(0x201)])) {
                const B = h[W(0x22b)][X(0x207)]('|');
                let C = -0x7b * 0x18 + 0x14e7 + 0x1 * -0x95f;
                while (!![]) {
                    switch (B[C++]) {
                    case '0':
                        s = h[X(0x1e4)];
                        continue;
                    case '1':
                        [n] = o[X(0x247)][X(0x1ed)][X(0x22f) + X(0x1f7)];
                        continue;
                    case '2':
                        p = h[W(0x24d)](q, r[X(0x1cd)]);
                        continue;
                    case '3':
                        t = h[X(0x21a)];
                        continue;
                    case '4':
                        l = m[X(0x247)][X(0x1ed)];
                        continue;
                    }
                    break;
                }
            } else {
                const B = h[X(0x1fc)][X(0x207)]('|');
                let C = 0x1 * 0x13c7 + 0x2 * -0xacf + 0x1d7 * 0x1;
                while (!![]) {
                    switch (B[C++]) {
                    case '0':
                        k = h[W(0x220)](getExt, i[W(0x1e3)]);
                        continue;
                    case '1':
                        j = d[W(0x247)][X(0x1e8) + 'a'][W(0x1ed)];
                        continue;
                    case '2':
                        l = h[X(0x24f)];
                        continue;
                    case '3':
                        m = h[W(0x1fa)];
                        continue;
                    case '4':
                        i = d[W(0x247)][X(0x1e8) + 'a'][W(0x1ed)][X(0x1e2)];
                        continue;
                    }
                    break;
                }
            }
        }
        const n = f['id'] + '_' + j['id'] + '_' + new Date()[W(0x205)]() + '.' + k, o = (-0x129 * -0x1d + 0x2 * 0x47e + -0x2aa1, path_1[X(0x24c)])(__dirname, '..', '..', '..', h[X(0x22a)], n), p = h[W(0x1d3)](d[W(0x247)][X(0x1ff)], h[W(0x1d4)]) ? i[W(0x1e3)] : i[W(0x1cd)];
        await h[W(0x246)](downloadFile, p, o);
        const q = {
            'messageId': h[W(0x241)](String, d[X(0x247)]?.[W(0x213)]),
            'ticketId': f['id'],
            'contactId': e ? undefined : g['id'],
            'body': d[W(0x247)]?.[X(0x1da)] || d[X(0x247)]?.[W(0x1f5)] || m,
            'fromMe': e,
            'read': e,
            'mediaUrl': n,
            'mediaType': l,
            'quotedMsgId': '',
            'timestamp': new Date()[W(0x205)](),
            'status': e ? h[W(0x20a)] : h[X(0x24e)]
        };
        await f[X(0x1de)]({
            'lastMessage': d[X(0x247)]?.[X(0x1da)] || d[X(0x247)]?.[X(0x1f5)] || m,
            'lastMessageAt': new Date()[X(0x205)](),
            'answered': h[W(0x203)](e, ![])
        });
        const r = {};
        r[X(0x248) + 'a'] = q, r[X(0x210)] = f[X(0x210)];
        const s = await (-0x11 * -0x9e + -0x17b4 + 0xd36 * 0x1, CreateMessageService_1[W(0x200)])(r);
        return s;
    };
exports[F(0x200)] = VerifyMediaMessage;