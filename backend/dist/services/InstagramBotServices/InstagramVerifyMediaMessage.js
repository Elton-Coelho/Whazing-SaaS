'use strict';
const H = b, I = b;
(function (c, d) {
    const F = b, G = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(F(0x7b)) / (-0xcf1 + 0x74c * -0x1 + 0x143e) + -parseInt(F(0xec)) / (-0x36 * -0x53 + -0x384 + 0x2 * -0x6fe) + parseInt(F(0x81)) / (-0x35e * -0x7 + 0xe15 + -0x25a4) * (-parseInt(G(0xf4)) / (0x48f * -0x5 + 0x388 + 0x1 * 0x1347)) + -parseInt(G(0x97)) / (-0x3 * 0x86f + -0x31 * -0xa2 + -0x5b0) * (-parseInt(F(0xb8)) / (-0x1239 + -0x15a4 + -0x1 * -0x27e3)) + parseInt(G(0xee)) / (-0x17 * 0x115 + -0x2 * 0xad + 0x1a44) * (-parseInt(F(0xd9)) / (0x1170 + 0xb * 0x32d + 0x3457 * -0x1)) + -parseInt(F(0xaa)) / (-0x1e06 + 0x4d0 + 0x193f) + -parseInt(G(0xdd)) / (0x1469 + -0x346 + 0x5b3 * -0x3) * (-parseInt(F(0xed)) / (0x37 * -0x2a + 0x1c94 * 0x1 + 0x25 * -0x87));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x20654 + 0x34cd + 0x8 * 0x7cc1));
function a() {
    const V = [
        'item_id',
        'xplCd',
        'default',
        'Flsmh',
        'szfEJ',
        'GET',
        'gjJAe',
        'ERROR\x20DONW',
        '451332TfJjpS',
        'update',
        'CPzxR',
        'gtHxD',
        'XGlyo',
        '0|1|4|3|2',
        'SPzFJ',
        'iGgRp',
        'data',
        'messageDat',
        'ions',
        'split',
        'XENck',
        'path',
        '983574tIVdoC',
        'arquivo',
        'url',
        'value',
        'uHviJ',
        'ijnEW',
        'pgLig',
        'audio_src',
        'isHQi',
        'CcXbY',
        'CqbCt',
        'stHTV',
        'dCpYy',
        '__esModule',
        'sBmgb',
        'RqrOm',
        'gAqdm',
        'tenantId',
        '__importDe',
        'ions2',
        'toString',
        'item_type',
        'join',
        'OPxhM',
        'CDrio',
        'rkzVU',
        'sended',
        'TrTWG',
        'flihD',
        'tjGvx',
        'Vxacb',
        'SqlSr',
        'wilrS',
        '2248KpmTNY',
        'wGcdX',
        'ycMpB',
        'applicatio',
        '390FONHmB',
        '1|4|2|0|3',
        '3|4|2|0|1',
        'psgxh',
        'reateMessa',
        'nZSNb',
        'Pmvqi',
        'axios',
        'HBCni',
        'qgpTi',
        'text',
        'image_vers',
        'LOAD',
        'pipe',
        'TuNVc',
        '395100VGbHfT',
        '173063iFVoGx',
        '5026VlLdzd',
        'audio',
        'finish',
        'media',
        'video_vers',
        'Jnlxl',
        '430948RvYUMz',
        'received',
        'voice_medi',
        'fhNXm',
        '../Message',
        'Services/C',
        'cHtHu',
        'eStream',
        'video',
        'image',
        'imagem',
        '0|2|3|1|4',
        'defineProp',
        '84002hhToCs',
        'fault',
        'uNCtr',
        'rOnUd',
        'ccZHW',
        'message',
        '3hFHUyA',
        '2|1|3|4|0',
        'JRoTa',
        'media_type',
        'createWrit',
        'fpiMJ',
        'tPACS',
        'áudio',
        'length',
        'gXNSy',
        'erty',
        'YKRIH',
        'YwZJB',
        'vRukC',
        '4|3|0|2|1',
        'caption',
        'lheMP',
        'lxECk',
        'getTime',
        'nOeNg',
        'stream',
        'error',
        '5TbqNXq',
        'cIDcx',
        'candidates',
        'jcPSc',
        'vídeo',
        'SYBQY',
        'ItEcC',
        'vEnLW',
        'public',
        'ImSnu',
        'geService'
    ];
    a = function () {
        return V;
    };
    return a();
}
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x2 * -0x5bf + 0xe33 * 0x2 + -0x106d);
        let h = e[f];
        return h;
    }, b(c, d);
}
var __importDefault = this && this[H(0xca) + I(0x7c)] || function (c) {
    const J = H;
    return c && c[J(0xc5)] ? c : { 'default': c };
};
const u = {};
u[H(0xbb)] = !![], Object[I(0x100) + H(0x8b)](exports, H(0xc5), u);
const path_1 = require(I(0xb7)), fs_1 = require('fs'), axios_1 = __importDefault(require(H(0xe4))), CreateMessageService_1 = __importDefault(require(H(0xf8) + I(0xf9) + I(0xe1) + I(0xa1))), getExt = d => {
        const K = I, L = H, e = {};
        e[K(0x9d)] = function (j, k) {
            return j - k;
        };
        const f = e, g = d[K(0xb5)]('?'), h = g[-0x2b * -0xbb + -0x259 * -0xb + -0xde * 0x42][L(0xb5)]('/'), i = h[f[L(0x9d)](h[K(0x89)], -0x11 * 0x39 + 0x939 * -0x2 + 0x58f * 0x4)][L(0xb5)]('.');
        return i[-0x14ba * -0x1 + 0x1f26 + 0x10f * -0x31];
    }, downloadFile = async (c, d) => {
        const M = H, N = I, e = {
                'Flsmh': function (g, h) {
                    return g !== h;
                },
                'xplCd': M(0x8d),
                'wGcdX': M(0xa9) + N(0xe9),
                'tjGvx': function (g, h) {
                    return g(h);
                },
                'lheMP': N(0xde),
                'gXNSy': N(0xfd),
                'qgpTi': M(0xfe),
                'XGlyo': M(0xdf),
                'stHTV': N(0xef),
                'uHviJ': N(0x88),
                'OPxhM': function (g, h) {
                    return g !== h;
                },
                'fpiMJ': M(0xc4),
                'pgLig': M(0x9a),
                'isHQi': M(0xf0),
                'ccZHW': M(0x96),
                'sBmgb': M(0xa7),
                'Vxacb': M(0x95)
            }, f = await (-0x2 * -0x1292 + -0x109d + 0x1487 * -0x1, axios_1[M(0xa4)])({
                'url': c[M(0xcc)](),
                'method': e[N(0xc6)],
                'responseType': e[N(0xd6)]
            });
        await new Promise((g, h) => {
            const O = M, P = N, i = {
                    'lxECk': e[O(0xae)],
                    'rkzVU': e[P(0xc3)],
                    'fhNXm': e[P(0xbc)],
                    'TuNVc': function (j, k) {
                        const Q = O;
                        return e[Q(0xd5)](j, k);
                    }
                };
            if (e[O(0xcf)](e[P(0x86)], e[O(0xbe)]))
                f[P(0xb2)][O(0xea)]((0x6d + 0x6 * -0x5cb + -0x31f * -0xb, fs_1[O(0x85) + P(0xfb)])(d))['on'](e[O(0xc0)], async () => g(!![]))['on'](e[O(0x7f)], j => {
                    const R = P, S = O;
                    if (e[R(0xa5)](e[S(0xa3)], e[R(0xa3)])) {
                        const l = i[R(0x92)][S(0xb5)]('|');
                        let m = -0x75b + -0x241 * -0x10 + -0x1cb5 * 0x1;
                        while (!![]) {
                            switch (l[m++]) {
                            case '0':
                                s = i[S(0xd1)];
                                continue;
                            case '1':
                                t = i[S(0xf7)];
                                continue;
                            case '2':
                                p = i[S(0xeb)](q, r[S(0xbf)]);
                                continue;
                            case '3':
                                l = m[S(0x80)][R(0xf6) + 'a'][S(0xf1)];
                                continue;
                            case '4':
                                n = o[R(0x80)][S(0xf6) + 'a'][S(0xf1)][R(0xef)];
                                continue;
                            }
                            break;
                        }
                    } else
                        console[R(0x96)](e[R(0xda)], j), e[R(0xd5)](h, new Error(j));
                });
            else {
                const k = e[O(0x91)][O(0xb5)]('|');
                let l = -0xff2 * 0x1 + 0x2 * 0x39b + -0xac * -0xd;
                while (!![]) {
                    switch (k[l++]) {
                    case '0':
                        s = e[P(0x8a)];
                        continue;
                    case '1':
                        l = m[O(0x80)][P(0xf1)];
                        continue;
                    case '2':
                        p = e[O(0xd5)](q, r[O(0xba)]);
                        continue;
                    case '3':
                        t = e[O(0xe6)];
                        continue;
                    case '4':
                        [n] = o[O(0x80)][O(0xf1)][O(0xe8) + O(0xcb)][O(0x99)];
                        continue;
                    }
                    break;
                }
            }
        });
    }, VerifyMediaMessage = async (d, e, f, g) => {
        const T = H, U = H, h = {
                'wilrS': function (t, v) {
                    return t - v;
                },
                'RqrOm': T(0xff),
                'TrTWG': T(0xfc),
                'gtHxD': function (t, v) {
                    return t(v);
                },
                'ImSnu': T(0x9b),
                'CcXbY': U(0xdc) + 'n',
                'ycMpB': U(0xb9),
                'uNCtr': function (t, v) {
                    return t === v;
                },
                'flihD': U(0xf3),
                'vRukC': U(0x8f),
                'SqlSr': function (t, v) {
                    return t(v);
                },
                'gAqdm': T(0xfe),
                'JRoTa': T(0xfd),
                'HBCni': function (t, v) {
                    return t === v;
                },
                'vEnLW': function (t, v) {
                    return t === v;
                },
                'SYBQY': U(0xe3),
                'tPACS': U(0x82),
                'nZSNb': function (t, v) {
                    return t(v);
                },
                'rOnUd': U(0xf6) + 'a',
                'psgxh': function (t, v) {
                    return t !== v;
                },
                'iGgRp': U(0xb0),
                'CDrio': T(0xfa),
                'cIDcx': T(0xaf),
                'YKRIH': T(0x88),
                'szfEJ': U(0xef),
                'XENck': T(0x9f),
                'CqbCt': function (t, v, w) {
                    return t(v, w);
                },
                'gjJAe': function (t, v) {
                    return t(v);
                },
                'CPzxR': U(0xd2),
                'nOeNg': T(0xf5),
                'ijnEW': function (t, v) {
                    return t || v;
                }
            };
        let i, j, k, l = h[T(0xc1)], m = h[U(0xdb)];
        if (h[U(0x7d)](d[T(0x80)]?.[T(0xf1)]?.[U(0x84)], 0x16eb + -0x2262 + -0x4 * -0x2de)) {
            if (h[T(0x7d)](h[U(0xd4)], h[T(0xd4)])) {
                const t = h[U(0x8e)][U(0xb5)]('|');
                let v = -0x1064 + 0x1 * -0x17ea + -0xe * -0x2e1;
                while (!![]) {
                    switch (t[v++]) {
                    case '0':
                        k = h[U(0xd7)](getExt, i[T(0xba)]);
                        continue;
                    case '1':
                        m = h[T(0xc8)];
                        continue;
                    case '2':
                        l = h[U(0x83)];
                        continue;
                    case '3':
                        [i] = d[T(0x80)][T(0xf1)][T(0xe8) + U(0xcb)][T(0x99)];
                        continue;
                    case '4':
                        j = d[T(0x80)][U(0xf1)];
                        continue;
                    }
                    break;
                }
            } else {
                const x = {};
                return x[U(0xa4)] = j, g && h[T(0xc5)] ? i : x;
            }
        }
        if (h[T(0xe5)](d[T(0x80)]?.[U(0xf1)]?.[U(0x84)], 0xd9f + -0xfc2 + 0x225)) {
            if (h[U(0x9e)](h[T(0x9c)], h[T(0x9c)])) {
                const x = h[U(0x87)][U(0xb5)]('|');
                let y = 0x1 * 0x1e09 + -0xdf * 0x1 + -0x1d2a;
                while (!![]) {
                    switch (x[y++]) {
                    case '0':
                        m = h[U(0xa0)];
                        continue;
                    case '1':
                        [i] = d[T(0x80)][T(0xf1)][T(0xf2) + U(0xb4)];
                        continue;
                    case '2':
                        j = d[U(0x80)][U(0xf1)];
                        continue;
                    case '3':
                        k = h[U(0xe2)](getExt, i[T(0xba)]);
                        continue;
                    case '4':
                        l = h[T(0xd3)];
                        continue;
                    }
                    break;
                }
            } else {
                const A = d[U(0xb5)]('?'), B = A[0x3 * 0x5ab + 0x263b + -0x373c][U(0xb5)]('/'), C = B[h[U(0xd8)](B[T(0x89)], 0x1b12 + -0x2 * -0xb01 + -0x1 * 0x3113)][T(0xb5)]('.');
                return C[0xc73 + 0x1147 + 0x1 * -0x1db9];
            }
        }
        if (h[T(0xe5)](d[T(0x80)]?.[U(0xcd)], h[U(0x7e)])) {
            if (h[U(0xe0)](h[U(0xb1)], h[U(0xd0)])) {
                const A = h[U(0x98)][U(0xb5)]('|');
                let B = 0x17b9 * -0x1 + 0x26c8 + -0xf0f;
                while (!![]) {
                    switch (A[B++]) {
                    case '0':
                        j = d[U(0x80)][T(0xf6) + 'a'][U(0xf1)];
                        continue;
                    case '1':
                        i = d[T(0x80)][U(0xf6) + 'a'][T(0xf1)][T(0xef)];
                        continue;
                    case '2':
                        m = h[T(0x8c)];
                        continue;
                    case '3':
                        l = h[T(0xa6)];
                        continue;
                    case '4':
                        k = h[T(0xe2)](getExt, i[T(0xbf)]);
                        continue;
                    }
                    break;
                }
            } else {
                const D = h[T(0xc7)][U(0xb5)]('|');
                let E = -0x194f + 0x964 + 0xfeb;
                while (!![]) {
                    switch (D[E++]) {
                    case '0':
                        l = m[T(0x80)][T(0xf1)];
                        continue;
                    case '1':
                        s = h[U(0xd3)];
                        continue;
                    case '2':
                        [n] = o[U(0x80)][U(0xf1)][U(0xf2) + T(0xb4)];
                        continue;
                    case '3':
                        p = h[T(0xad)](q, r[T(0xba)]);
                        continue;
                    case '4':
                        t = h[U(0xa0)];
                        continue;
                    }
                    break;
                }
            }
        }
        const n = f['id'] + '_' + j['id'] + '_' + new Date()[T(0x93)]() + '.' + k, o = (0x2ad * 0x1 + -0x1 * 0x1ed3 + 0x1 * 0x1c26, path_1[T(0xce)])(__dirname, '..', '..', '..', h[T(0xb6)], n), p = h[T(0xe5)](d[T(0x80)][U(0xcd)], h[T(0x7e)]) ? i[U(0xbf)] : i[U(0xba)];
        await h[T(0xc2)](downloadFile, p, o);
        const q = {
            'messageId': h[U(0xa8)](String, d[U(0x80)]?.[T(0xa2)]),
            'ticketId': f['id'],
            'contactId': e ? undefined : g['id'],
            'body': d[T(0x80)]?.[U(0xe7)] || d[U(0x80)]?.[U(0x90)] || m,
            'fromMe': e,
            'read': e,
            'mediaUrl': n,
            'mediaType': l,
            'quotedMsgId': '',
            'timestamp': new Date()[T(0x93)](),
            'status': e ? h[U(0xac)] : h[T(0x94)]
        };
        await f[U(0xab)]({
            'lastMessage': d[T(0x80)]?.[U(0xe7)] || d[T(0x80)]?.[T(0x90)] || m,
            'lastMessageAt': new Date()[T(0x93)](),
            'answered': h[T(0xbd)](e, ![])
        });
        const r = {};
        r[U(0xb3) + 'a'] = q, r[U(0xc9)] = f[U(0xc9)];
        const s = await (0x176e * -0x1 + -0x33b + -0x8e3 * -0x3, CreateMessageService_1[T(0xa4)])(r);
        return s;
    };
exports[H(0xa4)] = VerifyMediaMessage;