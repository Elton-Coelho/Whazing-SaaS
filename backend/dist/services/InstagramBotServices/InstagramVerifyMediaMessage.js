'use strict';
const H = b, I = b;
(function (c, d) {
    const F = b, G = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(F(0x249)) / (-0x2516 + -0x8be + 0x2dd5) + parseInt(F(0x24b)) / (-0xec + 0x1488 + 0x1 * -0x139a) * (parseInt(G(0x1ea)) / (-0x5 * 0x70b + -0x7 * 0xa6 + 0x1fd * 0x14)) + -parseInt(F(0x1dd)) / (0x564 + 0x1230 + 0xd0 * -0x1d) * (parseInt(F(0x1e1)) / (-0x3 * 0xaf7 + -0xe * 0xed + -0x1 * -0x2de0)) + -parseInt(F(0x1da)) / (-0x43e + -0x221f + 0x2663 * 0x1) * (-parseInt(G(0x228)) / (0x1693 + 0x153d * -0x1 + -0x14f)) + -parseInt(G(0x24c)) / (0x2208 + -0x2385 + -0x185 * -0x1) + parseInt(G(0x254)) / (-0x8 * 0x33f + 0x10ce + 0x933) + -parseInt(G(0x218)) / (0x5f * -0x4a + -0x67 * 0x14 + 0x5 * 0x71c);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x1cfc2 + -0x43723 * -0x1 + -0x2e627));
function a() {
    const a0 = [
        'error',
        'Ffzuv',
        'oomAp',
        'image_vers',
        '1|3|2|0|4',
        'ptzRP',
        'ERROR\x20DONW',
        '1|4|2|3|0',
        'dMIbK',
        'yFCBh',
        'item_type',
        'length',
        'WzhEk',
        'candidates',
        'split',
        '__esModule',
        'YxMtL',
        'createWrit',
        'public',
        'fault',
        'imPlq',
        'iMhQW',
        'yZeXd',
        'Muahn',
        '2063740RgKMvg',
        'media_type',
        '__importDe',
        'lheCY',
        'finish',
        'update',
        'HkzQK',
        'stream',
        'wtFFg',
        'ZqYgJ',
        'ohycf',
        'ymcCV',
        'eStream',
        'SivOX',
        'join',
        'media',
        '14uJeaNP',
        'iFLzo',
        'caption',
        'bfRIh',
        'sbRjv',
        'toString',
        'OPlLG',
        'XLAWd',
        'bEMDF',
        'arquivo',
        'audio_src',
        'vEFIP',
        'PWdBU',
        'default',
        'text',
        'jLTrE',
        'audio',
        'oKSsg',
        'Services/C',
        'sended',
        'dEEab',
        'zdGdm',
        'KRxSj',
        'Bhuaj',
        'IfqHr',
        'data',
        'kHTnb',
        'voice_medi',
        'UcJFl',
        '0|2|3|1|4',
        'OSHmy',
        'tenantId',
        'KyCCL',
        '277696aeQLMt',
        'IQljl',
        '254eZUiaV',
        '2092184IZTBKd',
        'beLmy',
        'kGDlZ',
        'DixXv',
        'fKDjc',
        'YeYro',
        'TRPcD',
        'vZIEQ',
        '3454074wAAEDA',
        'dIAhz',
        'bVImu',
        'ncczM',
        'MJgwb',
        'vídeo',
        'ACFQP',
        'LOAD',
        'reateMessa',
        'message',
        'received',
        'image',
        'nYWvm',
        'applicatio',
        'fGNOU',
        'qbmmp',
        'video',
        '659676HDayGO',
        'ocgnr',
        'imagem',
        '1208VWfcWL',
        'ions2',
        'qkExM',
        'gTUrt',
        '5935KrwFhF',
        'defineProp',
        'RrwlD',
        'url',
        'erty',
        'video_vers',
        'wRbMN',
        '../Message',
        'zbalN',
        '3543FJzxeD',
        'DzQvK',
        'XqpPA',
        'getTime',
        'CPWwL',
        'ZwOZW',
        '3|0|2|1|4',
        'item_id',
        'zPaUl',
        'IQkmA',
        'dnpFL',
        'pipe',
        'geService',
        'path',
        'GET',
        'áudio',
        'value',
        'ions',
        'messageDat',
        'axios',
        'yWiDt',
        'GVWiG'
    ];
    a = function () {
        return a0;
    };
    return a();
}
var __importDefault = this && this[H(0x21a) + I(0x213)] || function (c) {
    const J = H;
    return c && c[J(0x20f)] ? c : { 'default': c };
};
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x1 * -0x1f1 + 0x22a9 + 0x183 * -0x17);
        let h = e[f];
        return h;
    }, b(c, d);
}
const u = {};
u[H(0x1fa)] = !![], Object[H(0x1e2) + I(0x1e5)](exports, H(0x20f), u);
const path_1 = require(I(0x1f7)), fs_1 = require('fs'), axios_1 = __importDefault(require(I(0x1fd))), CreateMessageService_1 = __importDefault(require(I(0x1e8) + I(0x23a) + I(0x25c) + H(0x1f6))), getExt = d => {
        const K = H, L = H, e = {};
        e[K(0x257)] = function (j, k) {
            return j - k;
        };
        const f = e, g = d[L(0x20e)]('?'), h = g[0x1 * 0xb07 + -0x1eed + 0x1 * 0x13e6][K(0x20e)]('/'), i = h[f[K(0x257)](h[K(0x20b)], -0x1eb7 + 0x449 + 0x1a6f * 0x1)][L(0x20e)]('.');
        return i[0x9de * 0x2 + 0x125c + -0x571 * 0x7];
    }, downloadFile = async (c, d) => {
        const M = I, N = H, e = {
                'gTUrt': M(0x1f0),
                'IfqHr': N(0x25f),
                'zdGdm': function (g, h) {
                    return g(h);
                },
                'ZqYgJ': M(0x1dc),
                'CPWwL': function (g, h) {
                    return g === h;
                },
                'beLmy': M(0x223),
                'WzhEk': N(0x206) + M(0x25b),
                'yFCBh': function (g, h) {
                    return g === h;
                },
                'vEFIP': M(0x23f),
                'UcJFl': N(0x21c),
                'XqpPA': M(0x200),
                'nYWvm': M(0x1f8),
                'sbRjv': M(0x21f)
            }, f = await (-0x1532 + -0x1804 + 0x2d36, axios_1[N(0x235)])({
                'url': c[N(0x22d)](),
                'method': e[M(0x1d5)],
                'responseType': e[N(0x22c)]
            });
        await new Promise((g, h) => {
            const O = N, P = M, i = {
                    'ACFQP': e[O(0x1e0)],
                    'PWdBU': e[O(0x240)],
                    'Muahn': function (j, k) {
                        const Q = O;
                        return e[Q(0x23d)](j, k);
                    },
                    'zbalN': e[P(0x221)],
                    'vZIEQ': function (j, k) {
                        const R = O;
                        return e[R(0x1ee)](j, k);
                    },
                    'Ffzuv': e[O(0x24d)],
                    'dMIbK': e[O(0x20c)]
                };
            e[P(0x209)](e[O(0x233)], e[P(0x233)]) ? f[O(0x241)][P(0x1f5)]((-0x1948 * -0x1 + -0x9d2 + -0x1 * 0xf76, fs_1[P(0x211) + P(0x224)])(d))['on'](e[O(0x244)], async () => g(!![]))['on'](e[O(0x1ec)], j => {
                const S = P, T = O, k = {
                        'OSHmy': i[S(0x25a)],
                        'iFLzo': i[T(0x234)],
                        'IQkmA': function (l, m) {
                            const U = T;
                            return i[U(0x217)](l, m);
                        },
                        'iMhQW': i[S(0x1e9)]
                    };
                if (i[S(0x253)](i[T(0x201)], i[S(0x201)]))
                    console[T(0x200)](i[S(0x208)], j), i[S(0x217)](h, new Error(j));
                else {
                    const m = k[S(0x246)][T(0x20e)]('|');
                    let n = 0x1 * -0x6b5 + 0x23f7 + -0x1d42;
                    while (!![]) {
                        switch (m[n++]) {
                        case '0':
                            [n] = o[T(0x25d)][S(0x227)][S(0x203) + S(0x1de)][S(0x20d)];
                            continue;
                        case '1':
                            s = k[T(0x229)];
                            continue;
                        case '2':
                            p = k[T(0x1f3)](q, r[T(0x1e4)]);
                            continue;
                        case '3':
                            l = m[S(0x25d)][T(0x227)];
                            continue;
                        case '4':
                            t = k[T(0x215)];
                            continue;
                        }
                        break;
                    }
                }
            }) : (h[P(0x200)](i[O(0x208)], i), i[P(0x217)](j, new k(l)));
        });
    }, VerifyMediaMessage = async (d, e, f, g) => {
        const V = I, W = I, h = {
                'IQljl': V(0x206) + W(0x25b),
                'KyCCL': function (t, v) {
                    return t(v);
                },
                'OPlLG': V(0x21c),
                'fKDjc': V(0x200),
                'dnpFL': function (t, v) {
                    return t - v;
                },
                'yWiDt': V(0x207),
                'XLAWd': W(0x1f9),
                'oomAp': W(0x238),
                'ocgnr': V(0x1d6) + 'n',
                'wtFFg': W(0x231),
                'TRPcD': function (t, v) {
                    return t === v;
                },
                'HkzQK': function (t, v) {
                    return t !== v;
                },
                'oKSsg': V(0x214),
                'RrwlD': W(0x245),
                'qkExM': W(0x25f),
                'dIAhz': W(0x1dc),
                'DzQvK': function (t, v) {
                    return t === v;
                },
                'jLTrE': W(0x1ef),
                'YeYro': W(0x258),
                'bfRIh': W(0x204),
                'kGDlZ': V(0x1d9),
                'ptzRP': function (t, v) {
                    return t(v);
                },
                'yZeXd': W(0x259),
                'bVImu': function (t, v) {
                    return t === v;
                },
                'wRbMN': V(0x243) + 'a',
                'SivOX': function (t, v) {
                    return t !== v;
                },
                'dEEab': V(0x242),
                'ohycf': V(0x21b),
                'zPaUl': W(0x212),
                'KRxSj': function (t, v) {
                    return t === v;
                },
                'DixXv': function (t, v, w) {
                    return t(v, w);
                },
                'bEMDF': W(0x23b),
                'fGNOU': V(0x25e),
                'GVWiG': function (t, v) {
                    return t || v;
                }
            };
        let i, j, k, l = h[V(0x1db)], m = h[W(0x220)];
        if (h[W(0x252)](d[W(0x25d)]?.[V(0x227)]?.[V(0x219)], 0x1bb4 + -0x1d3f + -0x6 * -0x42)) {
            if (h[W(0x21e)](h[V(0x239)], h[V(0x239)])) {
                const v = {
                    'qbmmp': h[W(0x24a)],
                    'YxMtL': function (w, x) {
                        const X = V;
                        return h[X(0x248)](w, x);
                    }
                };
                j[W(0x241)][V(0x1f5)]((-0x1114 * -0x1 + -0x2 * -0x1181 + 0xe2 * -0x3b, k[V(0x211) + V(0x224)])(l))['on'](h[W(0x22e)], async () => q(!![]))['on'](h[W(0x250)], w => {
                    const Y = V, Z = W;
                    q[Y(0x200)](v[Z(0x1d8)], w), v[Z(0x210)](r, new s(w));
                });
            } else {
                const v = h[W(0x1e3)][V(0x20e)]('|');
                let w = 0x1 * -0x315 + -0xdb8 + 0x1 * 0x10cd;
                while (!![]) {
                    switch (v[w++]) {
                    case '0':
                        j = d[V(0x25d)][W(0x227)];
                        continue;
                    case '1':
                        l = h[V(0x1df)];
                        continue;
                    case '2':
                        [i] = d[V(0x25d)][V(0x227)][V(0x203) + V(0x1de)][W(0x20d)];
                        continue;
                    case '3':
                        k = h[V(0x248)](getExt, i[W(0x1e4)]);
                        continue;
                    case '4':
                        m = h[W(0x255)];
                        continue;
                    }
                    break;
                }
            }
        }
        if (h[W(0x1eb)](d[W(0x25d)]?.[V(0x227)]?.[V(0x219)], -0x939 + -0x1f93 * -0x1 + -0x1658)) {
            if (h[W(0x21e)](h[W(0x237)], h[V(0x251)])) {
                const x = h[W(0x22b)][V(0x20e)]('|');
                let y = -0x12c6 + 0x3b1 + 0xf15;
                while (!![]) {
                    switch (x[y++]) {
                    case '0':
                        l = h[W(0x24e)];
                        continue;
                    case '1':
                        j = d[W(0x25d)][W(0x227)];
                        continue;
                    case '2':
                        k = h[W(0x205)](getExt, i[V(0x1e4)]);
                        continue;
                    case '3':
                        [i] = d[W(0x25d)][W(0x227)][V(0x1e6) + V(0x1fb)];
                        continue;
                    case '4':
                        m = h[V(0x216)];
                        continue;
                    }
                    break;
                }
            } else {
                const A = d[V(0x20e)]('?'), B = A[0x1015 * -0x2 + 0x2a0 + 0x1d8a][V(0x20e)]('/'), C = B[h[W(0x1f4)](B[W(0x20b)], 0xb * 0x374 + -0x4a2 * -0x5 + 0x3d25 * -0x1)][W(0x20e)]('.');
                return C[0x16d9 + 0x1 * 0x126e + 0x6e1 * -0x6];
            }
        }
        if (h[V(0x256)](d[V(0x25d)]?.[V(0x20a)], h[W(0x1e7)])) {
            if (h[W(0x225)](h[V(0x23c)], h[W(0x222)])) {
                const A = h[W(0x1e3)][V(0x20e)]('|');
                let B = -0x758 + -0x747 + 0xe9f;
                while (!![]) {
                    switch (A[B++]) {
                    case '0':
                        j = d[W(0x25d)][W(0x243) + 'a'][W(0x227)];
                        continue;
                    case '1':
                        l = h[V(0x202)];
                        continue;
                    case '2':
                        i = d[W(0x25d)][W(0x243) + 'a'][V(0x227)][W(0x238)];
                        continue;
                    case '3':
                        k = h[V(0x248)](getExt, i[V(0x232)]);
                        continue;
                    case '4':
                        m = h[V(0x22f)];
                        continue;
                    }
                    break;
                }
            } else {
                const D = h[V(0x1fe)][W(0x20e)]('|');
                let E = 0x4 * -0x241 + 0x1 * 0x8c1 + 0x43 * 0x1;
                while (!![]) {
                    switch (D[E++]) {
                    case '0':
                        t = h[V(0x22f)];
                        continue;
                    case '1':
                        l = m[W(0x25d)][V(0x243) + 'a'][V(0x227)];
                        continue;
                    case '2':
                        p = h[W(0x248)](q, r[W(0x232)]);
                        continue;
                    case '3':
                        s = h[V(0x202)];
                        continue;
                    case '4':
                        n = o[W(0x25d)][V(0x243) + 'a'][W(0x227)][V(0x238)];
                        continue;
                    }
                    break;
                }
            }
        }
        const n = f['id'] + '_' + j['id'] + '_' + new Date()[V(0x1ed)]() + '.' + k, o = (-0x49 * 0x75 + -0x5 * 0x5d6 + -0x3e8b * -0x1, path_1[W(0x226)])(__dirname, '..', '..', '..', h[V(0x1f2)], n), p = h[V(0x23e)](d[W(0x25d)][V(0x20a)], h[V(0x1e7)]) ? i[V(0x232)] : i[W(0x1e4)];
        await h[V(0x24f)](downloadFile, p, o);
        const q = {
            'messageId': h[V(0x248)](String, d[V(0x25d)]?.[W(0x1f1)]),
            'ticketId': f['id'],
            'contactId': e ? undefined : g['id'],
            'body': d[W(0x25d)]?.[W(0x236)] || d[W(0x25d)]?.[W(0x22a)] || m,
            'fromMe': e,
            'read': e,
            'mediaUrl': n,
            'mediaType': l,
            'quotedMsgId': '',
            'timestamp': new Date()[W(0x1ed)](),
            'status': e ? h[V(0x230)] : h[V(0x1d7)]
        };
        await f[V(0x21d)]({
            'lastMessage': d[V(0x25d)]?.[W(0x236)] || d[V(0x25d)]?.[W(0x22a)] || m,
            'lastMessageAt': new Date()[W(0x1ed)](),
            'answered': h[W(0x1ff)](e, ![])
        });
        const r = {};
        r[V(0x1fc) + 'a'] = q, r[V(0x247)] = f[W(0x247)];
        const s = await (-0xa79 + -0x9eb * 0x1 + 0x1464, CreateMessageService_1[W(0x235)])(r);
        return s;
    };
exports[H(0x235)] = VerifyMediaMessage;