'use strict';
const T = b, U = b;
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x765 + 0x44f * -0x9 + 0x2f7e * 0x1);
        let h = e[f];
        return h;
    }, b(c, d);
}
(function (c, d) {
    const R = b, S = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(R(0x18f)) / (0x1784 + -0x4 * -0x64a + -0x30ab) + parseInt(S(0x1a6)) / (0x347 * -0x5 + -0x263b * 0x1 + 0x8 * 0x6d4) * (parseInt(S(0x1b9)) / (-0x1ab7 + 0x8ea * 0x1 + 0x11d * 0x10)) + parseInt(S(0x15a)) / (0x1 * -0xcaa + 0x14e + 0xb60) * (-parseInt(R(0x168)) / (-0x908 + 0x1c * -0x4b + 0x1 * 0x1141)) + parseInt(S(0x1b4)) / (-0x1509 + -0x17d8 + 0x2ce7) * (parseInt(S(0x1d4)) / (0x1 * 0x1f9f + -0xf2 * 0xb + -0x1532)) + -parseInt(R(0x19c)) / (0x1 * 0x198a + -0x2 * -0x9fe + -0x2 * 0x16bf) * (parseInt(R(0x1c8)) / (-0x2572 * 0x1 + -0x1dcf + 0x434a)) + -parseInt(R(0x190)) / (0x341 + -0x11c8 + 0xe91) * (parseInt(S(0x1d9)) / (0x45 * -0x6 + -0xbed + -0x6cb * -0x2)) + -parseInt(R(0x1da)) / (0x1883 + -0x8e3 + -0x4 * 0x3e5) * (-parseInt(R(0x1ca)) / (-0x796 + -0x21cf + 0x84a * 0x5));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x3a * 0x27e3 + -0xb1e55 + 0x1d358b * 0x1));
var __importDefault = this && this[T(0x188) + T(0x1a5)] || function (c) {
    const V = T;
    return c && c[V(0x1d0)] ? c : { 'default': c };
};
const q = {};
q[U(0x18b)] = !![], Object[T(0x1cb) + T(0x181)](exports, U(0x1d0), q);
function a() {
    const a0 = [
        'sleepRando',
        '__esModule',
        'update',
        'tenantId',
        'aWAHV',
        '5817AKgOzE',
        's/logger',
        ')::\x20',
        'sharp',
        'closed',
        '5023678kHoeqH',
        '19407372HXThoQ',
        'oDdZH',
        'xyNxM',
        'Message\x20Up',
        'yboCM',
        'image',
        'split',
        'cYaZd',
        'log',
        '3596fsBwPh',
        'ticket',
        'includes',
        'hoto',
        'ls/Message',
        'audio',
        'where',
        'timestamp',
        '.mp4',
        'mediaType',
        'mTime',
        'pending',
        'ECCHd',
        'AeoCu',
        '5245vRNGDx',
        'ASC',
        'join',
        '../../util',
        'JjjHC',
        'ers/socket',
        'mediaName',
        'messageId',
        'payload',
        'ext',
        'broadcastV',
        'domTime',
        'status',
        'oice',
        'XXMLi',
        'wegAl',
        'sendMessag',
        'tPaab',
        'mediaUrl',
        'LMzgX',
        'broadcastP',
        'text',
        'quotedMsg',
        'CFtGG',
        'jpeg',
        'erty',
        'chat',
        'type',
        'ptt',
        'peg',
        'ideo',
        'e\x20media',
        '__importDe',
        'OlScR',
        'Error\x20send',
        'value',
        's/sleepRan',
        'mp4',
        'directThre',
        '991686GjLKyW',
        '10hYanKy',
        'nant:\x20',
        'logger',
        'Nwluh',
        'ack',
        'body',
        'sequelize',
        'findAll',
        'sended',
        'e\x20text',
        'SzTcm',
        'createdAt',
        '3560HNgDpC',
        'ePnXD',
        'default',
        'UMfAc',
        'readFile',
        'fxVuK',
        'ls/Ticket',
        'info',
        'Emit',
        'fault',
        '4eQGjkX',
        '\x20message\x20(',
        'jPQjw',
        '../../help',
        'fluent-ffm',
        'sfZUL',
        'LyGHY',
        'broadcastT',
        'saveToFile',
        'fs/promise',
        'chat:ack',
        'XaLEa',
        'dataValues',
        'path',
        '6078kWIboZ',
        'file',
        'instagramP',
        'entity',
        'contact',
        '1634277wnGYhc',
        'date\x20ok',
        'item_id',
        'PYopj',
        'lte',
        'toBuffer',
        'tYsiX',
        'end',
        'instagram',
        'video',
        'public',
        '\x20|\x20Ticket:',
        'id:\x20',
        'uBNxc',
        '../../mode',
        '11403xkMVNG',
        'Error\x20mess',
        '13RkqVrC',
        'defineProp',
        'toFormat',
        'error',
        'age\x20is\x20(te'
    ];
    a = function () {
        return a0;
    };
    return a();
}
const promises_1 = require(U(0x1af) + 's'), fluent_ffmpeg_1 = __importDefault(require(T(0x1aa) + T(0x185))), path_1 = require(T(0x1b3)), sequelize_1 = require(U(0x196)), sharp_1 = __importDefault(require(T(0x1d7))), socketEmit_1 = __importDefault(require(U(0x1a9) + U(0x16d) + T(0x1a4))), Message_1 = __importDefault(require(U(0x1c7) + U(0x15e))), Ticket_1 = __importDefault(require(U(0x1c7) + U(0x1a2))), logger_1 = require(U(0x16b) + T(0x1d5)), sleepRandomTime_1 = require(U(0x16b) + U(0x18c) + T(0x173)), SendMessagesSystemWbot = async (l, m) => {
        const W = U, X = T, n = {
                'wegAl': W(0x18d),
                'oDdZH': W(0x1cd),
                'uBNxc': X(0x1c0),
                'UMfAc': W(0x165),
                'fxVuK': X(0x1b8),
                'yboCM': X(0x15b),
                'PYopj': W(0x1d8),
                'LMzgX': W(0x1c1),
                'ECCHd': X(0x17e),
                'JjjHC': X(0x19b),
                'SzTcm': X(0x169),
                'sfZUL': W(0x182),
                'jPQjw': X(0x17d),
                'CFtGG': W(0x1c3),
                'cYaZd': function (t, u) {
                    return t === u;
                },
                'XXMLi': X(0x15f),
                'LyGHY': W(0x184),
                'OlScR': X(0x156),
                'tPaab': W(0x1c2),
                'XaLEa': X(0x178) + X(0x187),
                'Nwluh': W(0x178) + W(0x199),
                'ePnXD': W(0x198),
                'tYsiX': X(0x1b0),
                'xyNxM': X(0x154) + W(0x1ba),
                'aWAHV': function (t, u) {
                    return t(u);
                },
                'AeoCu': function (t, u) {
                    return t(u);
                }
            }, o = { [sequelize_1['Op']['is']]: null }, p = {
                'fromMe': !![],
                'messageId': o,
                'status': n[W(0x19f)],
                [sequelize_1['Op']['or']]: [
                    { 'scheduleDate': { [sequelize_1['Op'][W(0x1bd)]]: new Date() } },
                    { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
                ]
            }, r = await Message_1[X(0x19e)][W(0x197)]({
                'where': p,
                'include': [
                    n[X(0x1a1)],
                    {
                        'model': Ticket_1[X(0x19e)],
                        'as': n[W(0x155)],
                        'where': {
                            'tenantId': m,
                            [sequelize_1['Op']['or']]: {
                                'status': { [sequelize_1['Op']['ne']]: n[X(0x1bc)] },
                                'isFarewellMessage': !![]
                            },
                            'channel': n[X(0x17b)],
                            'whatsappId': l['id']
                        },
                        'include': [n[W(0x1a1)]]
                    },
                    {
                        'model': Message_1[X(0x19e)],
                        'as': n[W(0x166)],
                        'include': [n[W(0x1a1)]]
                    }
                ],
                'order': [[
                        n[X(0x16c)],
                        n[X(0x19a)]
                    ]]
            });
        let s;
        for (const t of r) {
            const u = t, {ticket: v} = u, w = v[W(0x1b8)][W(0x1b6) + 'K'], x = await l[X(0x1b7)][W(0x18e) + 'ad']([w]);
            try {
                if (![
                        n[X(0x1ab)],
                        n[W(0x1a8)]
                    ][X(0x15c)](u[X(0x163)]) && u[W(0x16e)]) {
                    const E = (-0x4 * 0x928 + -0x96b + 0x2e0b, path_1[X(0x16a)])(__dirname, '..', '..', '..', n[W(0x17f)]), F = (0xa40 + -0x2a1 * 0x2 + -0x4fe * 0x1, path_1[X(0x16a)])(E, u[W(0x16e)]), G = await (-0x1951 * 0x1 + 0x759 + 0x47e * 0x4, promises_1[W(0x1a0)])(F);
                    console[W(0x159)](F);
                    if (n[X(0x158)](u[X(0x163)], n[W(0x176)]) || n[W(0x158)](u[X(0x163)], n[W(0x1ac)])) {
                        const H = u[X(0x16e)][W(0x157)]('.'), I = (-0x25 * 0xb5 + 0x1728 + 0x301, path_1[X(0x16a)])(E, H[-0x5 * 0x97 + -0x4 * -0x70d + -0x1941] + X(0x162));
                        await new Promise((L, M) => {
                            const Y = X, Z = W;
                            (-0x22d5 * -0x1 + -0x3b7 * 0x3 + -0x17b0, fluent_ffmpeg_1[Y(0x19e)])(F)[Z(0x1cc)](n[Y(0x177)])['on'](n[Z(0x152)], N => M(N))['on'](n[Y(0x1c6)], () => L(!![]))[Y(0x1ae)](I);
                        });
                        const J = await (-0x18d2 + -0xbd8 * 0x2 + 0x3082 * 0x1, promises_1[X(0x1a0)])(I), K = {};
                        K[W(0x1b5)] = J, s = await x[X(0x172) + W(0x175)](K);
                    }
                    if (n[W(0x158)](u[X(0x163)], n[X(0x189)])) {
                        const L = await (0x2 * 0xaef + -0xa1e + -0x2 * 0x5e0, sharp_1[X(0x19e)])(G)[X(0x180)]()[X(0x1be)](), M = {};
                        M[X(0x1b5)] = L, s = await x[W(0x17c) + W(0x15d)](M);
                    }
                    if (n[W(0x158)](u[W(0x163)], n[W(0x179)])) {
                        const N = {};
                        N[W(0x1c2)] = G, s = await x[X(0x172) + W(0x186)](N);
                    }
                    logger_1[X(0x192)][W(0x1a3)](n[W(0x1b1)]);
                }
                [
                    n[W(0x1ab)],
                    n[X(0x1a8)]
                ][W(0x15c)](u[W(0x163)]) && !u[X(0x16e)] && (s = await x[W(0x1ad) + W(0x171)](u[W(0x195)]), logger_1[W(0x192)][W(0x1a3)](n[X(0x193)]));
                const y = {
                    ...u,
                    ...s
                };
                y['id'] = u['id'], y[X(0x161)] = u[X(0x161)], y[X(0x16f)] = s[X(0x1bb)], y[X(0x174)] = n[W(0x19d)], y[X(0x194)] = 0x2;
                const z = y, A = { ...z }, B = {};
                B['id'] = u['id'];
                const C = {};
                C[W(0x160)] = B, await Message_1[W(0x19e)][X(0x1d1)](A, C);
                const D = {};
                D[X(0x1d2)] = v[W(0x1d2)], D[W(0x183)] = n[X(0x1bf)], D[X(0x170)] = { ...u[X(0x1b2)] }, D[X(0x170)][X(0x17a)] = u[W(0x17a)], D[X(0x170)]['id'] = u['id'], D[X(0x170)][W(0x161)] = u[W(0x161)], D[X(0x170)][X(0x16f)] = s[W(0x1bb)], D[X(0x170)][X(0x174)] = n[W(0x19d)], D[X(0x170)][W(0x194)] = 0x2, (0x1747 + -0xbe3 + -0xb64, socketEmit_1[W(0x19e)])(D), logger_1[W(0x192)][X(0x1a3)](n[W(0x153)]), await (-0x1d7 + 0x1118 * 0x1 + -0xb * 0x163, sleepRandomTime_1[W(0x1cf) + X(0x164)])({
                    'minMilliseconds': n[W(0x1d3)](Number, 0xdee * 0x1 + 0x21 * -0xa1 + 0x1 * 0xea3),
                    'maxMilliseconds': n[W(0x167)](Number, -0x1 * 0x1249 + -0x1 * 0x2265 + 0x2 * 0x2033)
                });
            } catch (O) {
                const P = u['id'], Q = u[X(0x15b)]['id'];
                logger_1[W(0x192)][W(0x1cd)](X(0x1c9) + W(0x1ce) + X(0x191) + m + (X(0x1c4) + '\x20') + Q + ')'), logger_1[W(0x192)][W(0x1cd)](W(0x18a) + W(0x1a7) + W(0x1c5) + P + X(0x1d6) + O);
            }
        }
    };
exports[U(0x19e)] = SendMessagesSystemWbot;