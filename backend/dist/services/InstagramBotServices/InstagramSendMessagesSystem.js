'use strict';
const T = b, U = b;
(function (c, d) {
    const R = b, S = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(R(0xa7)) / (0x7 * 0x542 + 0x1 * 0xea4 + 0xd * -0x3f5) + parseInt(R(0xfa)) / (0x1f7e + -0x89 * 0xd + 0x5b * -0x45) * (parseInt(R(0x94)) / (-0xb * -0x7b + 0x90 + -0x3 * 0x1f2)) + -parseInt(S(0xee)) / (0x2 * -0x67e + -0x31 * -0xa3 + -0x1233) + -parseInt(R(0x9d)) / (0xf1 * -0x21 + 0xb6c + -0x6 * -0x347) + -parseInt(S(0x8f)) / (0x1467 + 0x2275 + -0x36d6) + -parseInt(R(0xf6)) / (-0x1d89 * -0x1 + -0x305 * -0x6 + -0x2fa0) * (-parseInt(S(0xa0)) / (0x6d8 + 0x1940 + 0x2 * -0x1008)) + -parseInt(S(0x81)) / (0x506 + -0x1 * -0xc0d + -0x110a);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x1f * -0x2469 + 0x3c7d * -0x43 + 0xe2705 * 0x2));
var __importDefault = this && this[T(0x87) + U(0xb6)] || function (c) {
    const V = U;
    return c && c[V(0xe1)] ? c : { 'default': c };
};
function a() {
    const a0 = [
        'type',
        'audio',
        'broadcastP',
        'ideo',
        'where',
        'NbQmn',
        'image',
        '4814667CvIazW',
        'fluent-ffm',
        'Message\x20Up',
        'broadcastV',
        'quotedMsg',
        'defineProp',
        '__importDe',
        '../../help',
        '\x20|\x20Ticket:',
        'UQqbc',
        'klGhA',
        'toFormat',
        'log',
        'NUsNI',
        '2207478elQpWo',
        'sendMessag',
        'end',
        'default',
        'QuIfl',
        '9Somkpb',
        'ODfFs',
        's/sleepRan',
        'e\x20text',
        'timestamp',
        'GCIoO',
        'chat',
        'body',
        'ext',
        '887695rNHdlg',
        'instagram',
        'domTime',
        '488lqFkLn',
        'DFSQy',
        'entity',
        'logger',
        'fWXdX',
        '../../mode',
        'age\x20is\x20(te',
        '742491SbmtBl',
        'messageId',
        'erty',
        'sended',
        'join',
        'lte',
        'AQecT',
        'saveToFile',
        'e\x20media',
        'mediaType',
        'mediaUrl',
        'aLvgM',
        'ASC',
        'ptt',
        'sleepRando',
        'fault',
        'BAqhN',
        'ticket',
        'contact',
        'sharp',
        'mTime',
        '.mp4',
        'khdRr',
        'Emit',
        'toBuffer',
        's/logger',
        'ls/Message',
        'dataValues',
        'tenantId',
        'sequelize',
        'video',
        'mCFZT',
        'dmmBD',
        'sorkA',
        'fHxQY',
        'error',
        'bZmsM',
        'createdAt',
        'instagramP',
        'payload',
        'broadcastT',
        'id:\x20',
        'oice',
        ')::\x20',
        'ack',
        'jpeg',
        'info',
        'public',
        'mFFbT',
        'chat:ack',
        'path',
        'split',
        'YdUmM',
        'date\x20ok',
        'JPTSK',
        'mediaName',
        'update',
        'pending',
        '__esModule',
        'directThre',
        'EfQsA',
        'hrWDX',
        'item_id',
        'WNgcX',
        'closed',
        'peg',
        'status',
        'nant:\x20',
        'text',
        '\x20message\x20(',
        'Error\x20mess',
        '2454344mJwdwt',
        'mp4',
        'Error\x20send',
        'ers/socket',
        'findAll',
        '../../util',
        'fyuKz',
        'rvnWR',
        '113421tVFGuQ',
        'hoto',
        'value',
        'RGjzI',
        '327778wDCVYH',
        'readFile',
        'pDWuH',
        'ls/Ticket',
        'file',
        'includes',
        'fs/promise'
    ];
    a = function () {
        return a0;
    };
    return a();
}
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x1e0a + -0x47 * 0x6f + -0x3d4b * -0x1);
        let h = e[f];
        return h;
    }, b(c, d);
}
const q = {};
q[U(0xf8)] = !![], Object[T(0x86) + T(0xa9)](exports, T(0xe1), q);
const promises_1 = require(T(0x79) + 's'), fluent_ffmpeg_1 = __importDefault(require(U(0x82) + T(0xe8))), path_1 = require(T(0xd9)), sequelize_1 = require(U(0xc4)), sharp_1 = __importDefault(require(U(0xba))), socketEmit_1 = __importDefault(require(T(0x88) + T(0xf1) + U(0xbe))), Message_1 = __importDefault(require(T(0xa5) + U(0xc1))), Ticket_1 = __importDefault(require(U(0xa5) + T(0xfd))), logger_1 = require(U(0xf3) + T(0xc0)), sleepRandomTime_1 = require(T(0xf3) + T(0x96) + U(0x9f)), SendMessagesSystemWbot = async (l, m) => {
        const W = U, X = U, n = {
                'GCIoO': W(0xef),
                'ODfFs': W(0xca),
                'mFFbT': W(0x91),
                'khdRr': W(0xe0),
                'NUsNI': W(0xb9),
                'sorkA': W(0xb8),
                'fyuKz': W(0xe7),
                'hrWDX': X(0x9e),
                'dmmBD': X(0x85),
                'UQqbc': X(0xcc),
                'rvnWR': W(0xb3),
                'DFSQy': W(0x9a),
                'fHxQY': W(0xeb),
                'JPTSK': W(0xd6),
                'NbQmn': function (t, u) {
                    return t === u;
                },
                'mCFZT': W(0x7b),
                'bZmsM': function (t, u) {
                    return t === u;
                },
                'EfQsA': W(0xb4),
                'QuIfl': function (t, u) {
                    return t === u;
                },
                'fWXdX': W(0x80),
                'aLvgM': X(0xc5),
                'klGhA': W(0x90) + X(0xaf),
                'RGjzI': W(0x90) + X(0x97),
                'pDWuH': W(0xaa),
                'AQecT': W(0xd8),
                'WNgcX': W(0x83) + W(0xdc),
                'BAqhN': function (t, u) {
                    return t(u);
                },
                'YdUmM': function (t, u) {
                    return t(u);
                }
            }, o = { [sequelize_1['Op']['is']]: null }, p = {
                'fromMe': !![],
                'messageId': o,
                'status': n[X(0xbd)],
                [sequelize_1['Op']['or']]: [
                    { 'scheduleDate': { [sequelize_1['Op'][W(0xac)]]: new Date() } },
                    { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
                ]
            }, r = await Message_1[X(0x92)][W(0xf2)]({
                'where': p,
                'include': [
                    n[X(0x8e)],
                    {
                        'model': Ticket_1[X(0x92)],
                        'as': n[W(0xc8)],
                        'where': {
                            'tenantId': m,
                            [sequelize_1['Op']['or']]: {
                                'status': { [sequelize_1['Op']['ne']]: n[W(0xf4)] },
                                'isFarewellMessage': !![]
                            },
                            'channel': n[X(0xe4)],
                            'whatsappId': l['id']
                        },
                        'include': [n[W(0x8e)]]
                    },
                    {
                        'model': Message_1[X(0x92)],
                        'as': n[X(0xc7)],
                        'include': [n[W(0x8e)]]
                    }
                ],
                'order': [[
                        n[X(0x8a)],
                        n[W(0xf5)]
                    ]]
            });
        let s;
        for (const t of r) {
            const u = t, {ticket: v} = u, w = v[X(0xb9)][W(0xcd) + 'K'], x = await l[W(0xa2)][X(0xe2) + 'ad']([w]);
            try {
                if (![
                        n[X(0xa1)],
                        n[X(0xc9)]
                    ][W(0x78)](u[W(0xb0)]) && u[X(0xde)]) {
                    const E = (0x1 * -0x5db + 0x295 * -0x5 + -0x2 * -0x962, path_1[X(0xab)])(__dirname, '..', '..', '..', n[W(0xdd)]), F = (0x2 * 0x1387 + -0x1a2e + -0xce0, path_1[X(0xab)])(E, u[W(0xde)]), G = await (0x1144 + 0x15 * 0x135 + -0x2a9d, promises_1[X(0xfb)])(F);
                    console[X(0x8d)](F);
                    if (n[X(0x7f)](u[W(0xb0)], n[W(0xc6)]) || n[W(0xcb)](u[X(0xb0)], n[W(0xe3)])) {
                        const H = u[X(0xde)][W(0xda)]('.'), I = (0x21eb * 0x1 + 0x1 * 0x1e80 + 0x1 * -0x406b, path_1[X(0xab)])(E, H[-0x185a + -0x1314 + 0x2b6e] + X(0xbc));
                        await new Promise((L, M) => {
                            const Y = X, Z = X;
                            (0xfa7 * -0x2 + 0x9e * -0x2a + -0x19 * -0x24a, fluent_ffmpeg_1[Y(0x92)])(F)[Y(0x8c)](n[Z(0x99)])['on'](n[Y(0x95)], N => M(N))['on'](n[Z(0xd7)], () => L(!![]))[Y(0xae)](I);
                        });
                        const J = await (0x1 * -0x1fd + -0x1 * 0x15db + 0x17d8, promises_1[X(0xfb)])(I), K = {};
                        K[X(0xfe)] = J, s = await x[X(0x84) + X(0xd1)](K);
                    }
                    if (n[X(0x93)](u[X(0xb0)], n[W(0xa4)])) {
                        const L = await (0x1 * 0x1239 + -0x81 * 0x43 + -0x132 * -0xd, sharp_1[W(0x92)])(G)[W(0xd4)]()[X(0xbf)](), M = {};
                        M[X(0xfe)] = L, s = await x[X(0x7c) + W(0xf7)](M);
                    }
                    if (n[X(0x7f)](u[W(0xb0)], n[X(0xb2)])) {
                        const N = {};
                        N[X(0xc5)] = G, s = await x[X(0x84) + W(0x7d)](N);
                    }
                    logger_1[X(0xa3)][X(0xd5)](n[W(0x8b)]);
                }
                [
                    n[W(0xa1)],
                    n[X(0xc9)]
                ][X(0x78)](u[W(0xb0)]) && !u[W(0xde)] && (s = await x[W(0xcf) + W(0x9c)](u[W(0x9b)]), logger_1[W(0xa3)][X(0xd5)](n[W(0xf9)]));
                const y = {
                    ...u,
                    ...s
                };
                y['id'] = u['id'], y[X(0x98)] = u[W(0x98)], y[W(0xa8)] = s[W(0xe5)], y[X(0xe9)] = n[W(0xfc)], y[W(0xd3)] = 0x2;
                const z = y, A = { ...z }, B = {};
                B['id'] = u['id'];
                const C = {};
                C[X(0x7e)] = B, await Message_1[W(0x92)][X(0xdf)](A, C);
                const D = {};
                D[X(0xc3)] = v[W(0xc3)], D[W(0x7a)] = n[X(0xad)], D[W(0xce)] = { ...u[X(0xc2)] }, D[W(0xce)][X(0xb1)] = u[W(0xb1)], D[W(0xce)]['id'] = u['id'], D[W(0xce)][X(0x98)] = u[W(0x98)], D[W(0xce)][W(0xa8)] = s[W(0xe5)], D[W(0xce)][W(0xe9)] = n[X(0xfc)], D[W(0xce)][W(0xd3)] = 0x2, (0xb1 * 0x29 + -0xdb4 + 0x1 * -0xea5, socketEmit_1[X(0x92)])(D), logger_1[X(0xa3)][W(0xd5)](n[W(0xe6)]), await (0x65 * -0x31 + 0x8 * -0x2aa + -0x821 * -0x5, sleepRandomTime_1[X(0xb5) + X(0xbb)])({
                    'minMilliseconds': n[X(0xb7)](Number, -0x212e + 0xe3e + -0x6b0 * -0x4),
                    'maxMilliseconds': n[X(0xdb)](Number, -0xa6c + -0x1d67 + -0x1d * -0x1c7)
                });
            } catch (O) {
                const P = u['id'], Q = u[W(0xb8)]['id'];
                logger_1[X(0xa3)][W(0xca)](W(0xed) + X(0xa6) + X(0xea) + m + (X(0x89) + '\x20') + Q + ')'), logger_1[X(0xa3)][W(0xca)](W(0xf0) + W(0xec) + X(0xd0) + P + X(0xd2) + O);
            }
        }
    };
exports[T(0x92)] = SendMessagesSystemWbot;