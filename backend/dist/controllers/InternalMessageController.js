'use strict';
function a() {
    const af = [
        'receiverId',
        'indexOf',
        'Message/Li',
        'substr',
        'all',
        'kLzpA',
        '__esModule',
        'marcadas\x20c',
        'KOxRJ',
        'agens',
        'data',
        'RbJAx',
        'sagem.',
        'default',
        'include',
        'query',
        'InternalMe',
        'iDJzd',
        '4668312FdBLvV',
        'ontar\x20as\x20m',
        'acao',
        'IlOqG',
        ':mensagem-',
        'sgQfT',
        'Ã£o\x20lidas.',
        'count',
        'WzdhW',
        'length',
        'DSLXq',
        'RgTQX',
        'sqZjA',
        'receiver',
        'no-notific',
        'name',
        'model',
        'Znzuv',
        'gem',
        'getIO',
        'true',
        '4429500PNHlLC',
        'mediaUrl',
        'update',
        'Mensagems\x20',
        'rclSK',
        'senderId',
        'BGiAr',
        'timestamp',
        'eosEf',
        'mo\x20lida.',
        'omo\x20lida.',
        'NYPyT',
        'defineProp',
        'wlGem',
        '311697DSFfpU',
        'attributes',
        'agemNaoLid',
        'CeQLd',
        '50760RGetbv',
        'user',
        'findByPk',
        'BoyOt',
        'marcarMens',
        'listCountU',
        'mqqpA',
        'DDpxr',
        '_SYSTEM',
        'ogger',
        'hrOBn',
        'mimetype',
        'iobZX',
        'mensagens',
        '__importDe',
        'GBpzf',
        '90685DhQAzH',
        'wJrPv',
        'logger',
        'listarMens',
        '7943vQrnbH',
        'HADgW',
        'nQHuF',
        'ervice',
        'rNDvv',
        'adMessageS',
        'KxnKZ',
        'json',
        'xLpef',
        'uHPjA',
        'lWoeK',
        '180WHexBZ',
        'params',
        'gJWsQ',
        '\x20erro\x20ao\x20m',
        'userId',
        'Reoqc',
        'ssageServi',
        'aeiAk',
        'Ocorreu\x20um',
        'fiZPb',
        'criarMensa',
        'chat-inter',
        'ensagens\x20n',
        'diGsJ',
        'mediaType',
        'qwtdS',
        'OqxNm',
        'error',
        'jFMuo',
        '\x20erro\x20ao\x20l',
        '9USCdgF',
        '158290jgLIup',
        '488774grlkLK',
        'uYkeX',
        'SREmk',
        'isGroup',
        'map',
        'wIsFL',
        'riar\x20a\x20men',
        'IMKce',
        'mvrEL',
        'sender',
        '426mOFtqn',
        'Message/Me',
        'text',
        'ensagens.',
        't-interno',
        ':unread-me',
        '36gdVunH',
        'rrdxv',
        'nsagens\x20co',
        'findOne',
        'JyGXb',
        'chat',
        'KBwmg',
        'User',
        'mensagem',
        'istar\x20as\x20m',
        'value',
        'status',
        '../service',
        'okDVf',
        'XVPcu',
        'UQfOL',
        'BJJfZ',
        '1mzOnmG',
        '../models/',
        'eadMessage',
        'KynrG',
        'AJpwP',
        'body',
        'action',
        'Message/Re',
        'oIslk',
        'filename',
        'ERR_CREATI',
        'split',
        'groupId',
        'GbTZt',
        'mediaName',
        '../libs/so',
        'files',
        'ALaKV',
        'MvLlN',
        'nreadMessa',
        'NG_MESSAGE',
        's/Internal',
        'message',
        'cket',
        'getTime',
        'originalna',
        '\x20erro\x20ao\x20c',
        'emit',
        'hxJRC',
        'where',
        'PHIHJ',
        'stCountUnr',
        'arcar\x20a\x20me',
        'fault',
        'nsagem-cha',
        '../utils/l',
        'OBpJr',
        'ssage',
        'erty',
        'UZgIb'
    ];
    a = function () {
        return af;
    };
    return a();
}
const a2 = b, a3 = b;
(function (c, d) {
    const a0 = b, a1 = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(a0(0x181)) / (0x1 * 0x1bb + -0x141 * 0x3 + 0x209) * (parseInt(a0(0x160)) / (0x838 * 0x3 + -0x1 * -0x313 + -0x97 * 0x2f)) + parseInt(a1(0x1de)) / (0x24ae + -0xb37 + -0x4 * 0x65d) * (parseInt(a0(0x170)) / (-0x1 * 0x159d + -0x2436 + -0x367 * -0x11)) + -parseInt(a1(0x1d0)) / (0x1c52 + 0xbcb * -0x1 + 0x2 * -0x841) + -parseInt(a1(0x16a)) / (-0x5b8 + 0x17 * -0x52 + 0xd1c) * (parseInt(a0(0x1f2)) / (0x37e + -0x5 * 0x64b + 0x1c00)) + parseInt(a0(0x1bb)) / (0x1 * 0x1f0f + 0x1357 + -0x325e) * (-parseInt(a1(0x15e)) / (-0x3 * 0x815 + -0x1 * 0x4c0 + 0x1d08)) + parseInt(a1(0x201)) / (0x11aa + -0x975 * 0x2 + 0x14a) * (-parseInt(a1(0x15f)) / (-0x2094 + -0x1b22 * 0x1 + -0x3 * -0x13eb)) + -parseInt(a0(0x1e2)) / (0xdcf + -0x5 * 0x537 + 0x1 * 0xc50) * (-parseInt(a0(0x1f6)) / (-0x1533 + -0x14e7 * -0x1 + -0x1 * -0x59));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x941 * 0x47 + -0xabc18 + 0x9275 * 0x1f));
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x23eb + -0x1 * -0x9be + 0x1b89);
        let h = e[f];
        return h;
    }, b(c, d);
}
var __importDefault = this && this[a2(0x1f0) + a3(0x1a2)] || function (c) {
    const a4 = a3;
    return c && c[a4(0x1af)] ? c : { 'default': c };
};
const o = {};
o[a3(0x17a)] = !![], Object[a2(0x1dc) + a2(0x1a7)](exports, a3(0x1af), o), exports[a3(0x1e7) + a3(0x194) + 'ge'] = exports[a3(0x1e6) + a2(0x1e0) + 'a'] = exports[a2(0x20b) + a2(0x1cd)] = exports[a3(0x1f5) + a3(0x1b2)] = void (-0x234d + -0x2155 + 0x44a2);
const socket_1 = require(a3(0x190) + a2(0x198)), InternalMessage_1 = __importDefault(require(a3(0x182) + a2(0x1b9) + a2(0x1a6))), User_1 = __importDefault(require(a2(0x182) + a2(0x177))), ListCountUnreadMessage_1 = __importDefault(require(a2(0x17c) + a2(0x196) + a2(0x1ab) + a2(0x1a0) + a2(0x183))), MessageService_1 = __importDefault(require(a2(0x17c) + a3(0x196) + a2(0x16b) + a2(0x207) + 'ce')), ReadMessageService_1 = __importDefault(require(a2(0x17c) + a3(0x196) + a3(0x188) + a3(0x1fb) + a3(0x1f9))), logger_1 = require(a2(0x1a4) + a2(0x1eb)), listarMensagens = async (f, g) => {
        const a5 = a2, a6 = a3, h = {};
        h[a5(0x1d4)] = a6(0x209) + a6(0x204) + a5(0x1a1) + a5(0x172) + a5(0x1d9), h[a6(0x203)] = function (j, k) {
            return j === k;
        }, h[a5(0x161)] = a5(0x185), h[a5(0x167)] = a6(0x162), h[a6(0x1ec)] = function (j, k) {
            return j === k;
        }, h[a6(0x17e)] = a6(0x1a8), h[a5(0x19f)] = a5(0x15c), h[a5(0x20e)] = a5(0x209) + a6(0x15d) + a6(0x179) + a5(0x16d);
        const i = h;
        try {
            if (i[a6(0x203)](i[a5(0x161)], i[a6(0x167)])) {
                if (!g[a5(0x18a)]) {
                    const k = k[a6(0x1ed)][a5(0x18c)]('/')[-0x24d3 + 0x1119 * 0x1 + 0x1 * 0x13bb][a6(0x18c)](';')[0x10b5 + -0xaff + -0x5b6];
                    l[a6(0x18a)] = new m()[a5(0x199)]() + '.' + k;
                }
            } else {
                const {id: k} = f[a5(0x1e3)], {userId: l} = f[a6(0x202)], {isGroup: m} = f[a6(0x1b8)], n = await MessageService_1[a6(0x1b6)][a5(0x1f5) + a5(0x1b2)](k, l, m), p = {};
                return p[a5(0x1ef)] = n, g[a6(0x17b)](-0x10 * -0x47 + 0x16ae + -0x1a56)[a5(0x1fd)](p);
            }
        } catch (q) {
            if (i[a6(0x1ec)](i[a6(0x17e)], i[a6(0x19f)])) {
                f[a5(0x212)](g);
                const s = {};
                return s[a6(0x212)] = i[a5(0x1d4)], h[a5(0x17b)](0x1 * -0xce2 + -0x1ceb * 0x1 + -0x2bc1 * -0x1)[a6(0x1fd)](s);
            } else {
                console[a5(0x212)](q);
                const s = {};
                return s[a5(0x212)] = i[a6(0x20e)], g[a6(0x17b)](-0x22ee + 0x19f7 + 0xaeb)[a6(0x1fd)](s);
            }
        }
    };
exports[a3(0x1f5) + a2(0x1b2)] = listarMensagens;
const criarMensagem = async (n, p) => {
    const a7 = a3, a8 = a2, q = {};
    q[a7(0x1c5)] = a8(0x209) + a7(0x19b) + a7(0x166) + a8(0x1b5), q[a7(0x1c7)] = a7(0x209) + a8(0x19b) + a8(0x1bc) + a7(0x20d) + a7(0x1c1), q[a7(0x1f7)] = a7(0x209) + a8(0x15d) + a7(0x179) + a7(0x16d), q[a8(0x165)] = a8(0x18b) + a8(0x195) + a7(0x1ea), q[a7(0x1e1)] = function (s, t) {
        return s === t;
    }, q[a7(0x211)] = a8(0x168), q[a8(0x17f)] = a7(0x1fa), q[a8(0x206)] = function (s, t) {
        return s !== t;
    }, q[a7(0x176)] = a7(0x1ba), q[a8(0x200)] = function (s, t) {
        return s !== t;
    }, q[a7(0x1f3)] = a7(0x20a), q[a8(0x1c0)] = a8(0x193), q[a7(0x174)] = a7(0x171), q[a8(0x208)] = function (s, t) {
        return s === t;
    }, q[a8(0x1c3)] = a7(0x1b4), q[a7(0x1e8)] = a8(0x175), q[a7(0x19d)] = function (s, t) {
        return s === t;
    }, q[a7(0x1ee)] = function (s, t) {
        return s === t;
    }, q[a7(0x1e5)] = a8(0x1cf), q[a8(0x1fe)] = a8(0x210), q[a7(0x189)] = function (s, t) {
        return s > t;
    }, q[a8(0x1cc)] = function (s, t) {
        return s === t;
    }, q[a7(0x17d)] = a8(0x192), q[a7(0x1d8)] = a7(0x1d6), q[a8(0x1db)] = function (s, t) {
        return s === t;
    }, q[a7(0x1b1)] = a7(0x184), q[a8(0x1be)] = a7(0x169), q[a8(0x18e)] = a7(0x1ca), q[a8(0x1c6)] = a7(0x1c8), q[a7(0x1f8)] = a7(0x1d2);
    const r = q;
    try {
        const {
                text: s,
                timestamp: t,
                receiverId: u,
                isGroup: v
            } = n[a7(0x186)], {
                id: w,
                tenantId: x
            } = n[a8(0x1e3)], y = n[a8(0x191)], z = (0x1 * 0x12d + -0x267f + -0x2 * -0x12a9, socket_1[a7(0x1ce)])(), A = {
                'text': s,
                'timestamp': t,
                'receiverId': u,
                'senderId': w,
                'tenantId': x,
                'groupId': null,
                'mediaType': r[a8(0x1e8)],
                'mediaUrl': undefined,
                'createdAt': new Date(),
                'updatedAt': new Date()
            };
        if (r[a7(0x19d)](v, !![]) || r[a7(0x1ee)](v, r[a8(0x1e5)])) {
            if (r[a7(0x208)](r[a7(0x1fe)], r[a8(0x1fe)]))
                A[a8(0x1a9)] = undefined, A[a8(0x18d)] = u;
            else {
                const N = {};
                return N[a7(0x1b6)] = J, F && H[a7(0x1af)] ? I : N;
            }
        }
        let B = {};
        if (y && r[a8(0x189)](y[a8(0x1c4)], -0x2339 + 0x303 * 0x5 + 0xb2 * 0x1d))
            r[a7(0x1cc)](r[a7(0x17d)], r[a7(0x1d8)]) ? D[a7(0x1f4)][a7(0x212)](E) : await Promise[a7(0x1ad)](y[a8(0x164)](async O => {
                const a9 = a7, aa = a8, P = {};
                P[a9(0x1dd)] = r[aa(0x1c7)], P[aa(0x1fc)] = r[a9(0x1f7)], P[aa(0x1ae)] = r[a9(0x165)];
                const Q = P;
                if (r[aa(0x1e1)](r[aa(0x211)], r[aa(0x17f)]))
                    F[aa(0x1a9)] = H, I[a9(0x18d)] = J;
                else {
                    try {
                        if (r[aa(0x206)](r[aa(0x176)], r[a9(0x176)])) {
                            E[aa(0x212)](F);
                            const V = {};
                            return V[a9(0x212)] = Q[aa(0x1dd)], H[aa(0x17b)](-0x1cd5 + -0x1786 + 0x364f * 0x1)[a9(0x1fd)](V);
                        } else {
                            if (!O[aa(0x18a)]) {
                                if (r[aa(0x200)](r[aa(0x1f3)], r[aa(0x1f3)])) {
                                    E[a9(0x212)](F);
                                    const W = {};
                                    return W[a9(0x212)] = r[a9(0x1c5)], H[a9(0x17b)](0x1 * 0x11ea + 0x1567 + -0x255d * 0x1)[aa(0x1fd)](W);
                                } else {
                                    const W = O[a9(0x1ed)][a9(0x18c)]('/')[0x26d3 + 0x10e6 + -0x37b8][a9(0x18c)](';')[-0x1a74 + -0xcc2 * 0x2 + 0x33f8];
                                    O[aa(0x18a)] = new Date()[aa(0x199)]() + '.' + W;
                                }
                            }
                        }
                    } catch (X) {
                        if (r[a9(0x1e1)](r[aa(0x1c0)], r[a9(0x174)])) {
                            E[a9(0x212)](F);
                            const Z = {};
                            return Z[a9(0x212)] = Q[a9(0x1fc)], H[aa(0x17b)](0x148c + -0xc * -0x24c + -0x2e28)[a9(0x1fd)](Z);
                        } else
                            logger_1[a9(0x1f4)][aa(0x212)](X);
                    }
                    const S = {
                            ...A,
                            'text': O[a9(0x19a) + 'me'],
                            'mediaUrl': O[aa(0x18a)],
                            'mediaType': O[a9(0x20f)] || O[a9(0x1ed)][a9(0x1ac)](0x1a * -0x8d + -0x357 * -0x5 + -0x261, O[aa(0x1ed)][aa(0x1aa)]('/'))
                        }, T = await MessageService_1[a9(0x1b6)][aa(0x20b) + a9(0x1cd)](S);
                    B = await InternalMessage_1[a9(0x1b6)][a9(0x1e4)](T['id']);
                    if (!B) {
                        if (r[a9(0x208)](r[a9(0x1c3)], r[a9(0x1c3)]))
                            throw new Error(r[a9(0x165)]);
                        else
                            throw new P(Q[a9(0x1ae)]);
                    }
                }
            }));
        else {
            if (r[a7(0x1db)](r[a8(0x1b1)], r[a7(0x1b1)]))
                B = await MessageService_1[a7(0x1b6)][a8(0x20b) + a7(0x1cd)](A);
            else {
                const P = E[a8(0x1ed)][a7(0x18c)]('/')[-0x6b * 0x53 + -0xbf * 0x27 + 0x3fcb][a8(0x18c)](';')[0x1a5a + 0x1e01 + 0x15 * -0x2af];
                F[a8(0x18a)] = new H()[a7(0x199)]() + '.' + P;
            }
        }
        const C = {};
        C['id'] = B['id'];
        const D = {};
        D[a7(0x1cb)] = User_1[a7(0x1b6)], D['as'] = r[a7(0x1be)], D[a8(0x1df)] = [
            'id',
            r[a7(0x18e)]
        ];
        const E = {};
        E[a8(0x1cb)] = User_1[a8(0x1b6)], E['as'] = r[a7(0x1c6)], E[a8(0x1df)] = [
            'id',
            r[a8(0x18e)]
        ];
        const F = {};
        F[a7(0x19e)] = C, F[a7(0x1b7)] = [
            D,
            E
        ];
        const G = await InternalMessage_1[a7(0x1b6)][a7(0x173)](F), H = {};
        H['id'] = G['id'], H[a8(0x1a9)] = G[a8(0x1a9)], H[a7(0x20f)] = G[a8(0x20f)], H[a7(0x18f)] = G[a7(0x18f)], H[a8(0x1d1)] = G[a8(0x1d1)], H[a7(0x1d5)] = w, H[a8(0x1d7)] = G[a8(0x1d7)], H[a7(0x169)] = G[a7(0x169)], H[a7(0x18d)] = G[a8(0x18d)], H[a8(0x1c8)] = G[a8(0x1c8)], H[a7(0x16c)] = s;
        const I = {};
        I[a7(0x187)] = r[a7(0x1f8)], I[a7(0x1b3)] = H, z[a8(0x19c)](x + (a7(0x1bf) + a8(0x20c) + 'no'), I);
        const J = {};
        J['id'] = G['id'], J[a7(0x1a9)] = u, J[a7(0x1d5)] = w, J[a8(0x20f)] = G[a7(0x20f)], J[a8(0x1d7)] = G[a7(0x1d7)], J[a7(0x169)] = G[a8(0x169)], J[a7(0x18d)] = G[a8(0x18d)], J[a7(0x1c8)] = G[a7(0x1c8)], J[a7(0x16c)] = s;
        const K = {};
        K[a7(0x187)] = r[a7(0x1f8)], K[a8(0x1b3)] = J, z[a8(0x19c)](x + (a7(0x1bf) + a7(0x20c) + a7(0x1c9) + a8(0x1bd)), K);
        const L = {};
        return L[a7(0x178)] = G, p[a7(0x17b)](0x11 * -0x39 + -0x3f3 * 0x1 + -0x2d7 * -0x3)[a7(0x1fd)](L);
    } catch (P) {
        console[a8(0x212)](P);
        const Q = {};
        return Q[a7(0x212)] = r[a8(0x1c5)], p[a7(0x17b)](0x25 * 0xf7 + 0x7 * -0xda + -0x1bc9)[a8(0x1fd)](Q);
    }
};
exports[a2(0x20b) + a2(0x1cd)] = criarMensagem;
const marcarMensagemNaoLida = async (f, g) => {
    const ab = a3, ac = a2, h = {
            'DDpxr': ab(0x1d2),
            'OBpJr': function (i, j) {
                return i(j);
            },
            'GBpzf': ab(0x1d3) + ab(0x1b0) + ab(0x1da),
            'uHPjA': ab(0x209) + ac(0x204) + ac(0x1a1) + ac(0x172) + ab(0x1d9)
        };
    try {
        const {contactId: i} = f[ac(0x202)], {
                id: j,
                tenantId: k
            } = f[ac(0x1e3)], {isGroup: l} = f[ab(0x186)], m = (-0x1ecd + 0x1e1c + -0x3 * -0x3b, socket_1[ac(0x1ce)])(), n = {};
        n[ab(0x205)] = j, n[ab(0x1d5)] = i, n[ab(0x163)] = l, await (0x6f9 + 0x19ee + -0x1 * 0x20e7, ReadMessageService_1[ab(0x1b6)])(n), m[ac(0x19c)](k + (ac(0x16f) + ab(0x1a3) + ab(0x16e)), {
            'action': h[ac(0x1e9)],
            'data': {
                'receiverId': j,
                'isGroup': l,
                'senderId': h[ac(0x1a5)](Number, i)
            }
        });
        const p = {};
        return p[ac(0x197)] = h[ac(0x1f1)], g[ab(0x17b)](0x5 * -0x361 + 0x1 * -0x13d + -0x2 * -0x975)[ab(0x1fd)](p);
    } catch (q) {
        console[ac(0x212)](q);
        const r = {};
        return r[ab(0x212)] = h[ac(0x1ff)], g[ab(0x17b)](0x40 * 0x7c + -0x1762 + 0x122 * -0x5)[ac(0x1fd)](r);
    }
};
exports[a3(0x1e6) + a3(0x1e0) + 'a'] = marcarMensagemNaoLida;
const listCountUnreadMessage = async (f, g) => {
    const ad = a3, ae = a2, h = {};
    h[ad(0x180)] = ad(0x209) + ae(0x19b) + ad(0x1bc) + ae(0x20d) + ae(0x1c1);
    const i = h;
    try {
        const {id: j} = f[ae(0x1e3)], k = await (0x331 * 0xb + 0x13 * 0x20b + 0x26 * -0x1f2, ListCountUnreadMessage_1[ae(0x1b6)])(j), l = {};
        return l[ae(0x1c2)] = k, g[ad(0x17b)](0x26ce + -0x1fac + -0x65a)[ae(0x1fd)](l);
    } catch (m) {
        console[ad(0x212)](m);
        const n = {};
        return n[ad(0x212)] = i[ae(0x180)], g[ad(0x17b)](0x1 * 0x1e8f + 0xb * 0x235 + -0x1a71 * 0x2)[ad(0x1fd)](n);
    }
};
exports[a3(0x1e7) + a3(0x194) + 'ge'] = listCountUnreadMessage;