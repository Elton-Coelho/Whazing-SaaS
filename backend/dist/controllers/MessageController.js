'use strict';
const E = b, F = b;
(function (c, d) {
    const C = b, D = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(C(0x16f)) / (-0xce9 + -0x17b5 + 0x249f) + -parseInt(D(0x137)) / (-0x1bbe + 0x1b * -0x38 + 0x21a8) + -parseInt(C(0x179)) / (0x1643 + 0xb5d * 0x2 + 0x167d * -0x2) + parseInt(C(0x166)) / (0x1 * -0xbf3 + 0x1 * 0x2415 + -0x181e) + parseInt(C(0x15c)) / (0xd2 + -0xa0c + 0x1 * 0x93f) * (-parseInt(C(0x14f)) / (0x3 * 0x4c0 + 0x972 * -0x2 + 0x4aa)) + -parseInt(C(0x142)) / (-0x2 * -0x5ce + -0x81f * -0x1 + -0x13b4) + parseInt(D(0x170)) / (-0x431 + -0x1 * -0x2524 + -0x20eb);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x2fd58 + -0x5 * -0x5e71 + 0x42c08));
function a() {
    const V = [
        'status',
        'MBSbJ',
        'temService',
        'messagesOf',
        'noAqT',
        'wbWle',
        '249039oinFPs',
        'sendType',
        'UWLBp',
        'mNXuH',
        'cruHx',
        'cvgwN',
        'sageSystem',
        'try\x20Create',
        'MessagesAs',
        'igin',
        'vPXXh',
        'G:\x20',
        'scheduleDa',
        'XhFCu',
        'TeWnN',
        'value',
        's/WbotServ',
        'rvices/Sho',
        'messageId',
        'wPaok',
        'contact',
        'ticketIdOr',
        'length',
        'dMessageSe',
        'error',
        'uNhGa',
        'fLine',
        'remove',
        'hasMore',
        'pending',
        '/SetTicket',
        'ead',
        'YobSV',
        'vsNkA',
        '/DeleteMes',
        '__importDe',
        'NYGis',
        'isztZ',
        's/MessageS',
        'kytxh',
        'ListCountM',
        'ticket',
        'MessageSys',
        'essagesAsR',
        'kBGpz',
        'ogger',
        '../service',
        'medias',
        'params',
        'jDYHu',
        'fault',
        'cJykg',
        'defineProp',
        '_SYSTEM_MS',
        'default',
        'user',
        'MICum',
        'message',
        'body',
        'ticketId',
        'idFront',
        'LMMHy',
        'files',
        'ensagens',
        'log',
        'eateForwar',
        'Ocorreu\x20um',
        'KJFJM',
        'ERR_DELETE',
        '../models/',
        'ERR_EDITIN',
        'stMessages',
        'eSystemSer',
        'lVywQ',
        '../errors/',
        'aIwLN',
        'Read',
        'fromMe',
        '\x20erro\x20ao\x20c',
        'QHLqV',
        '355724clblDW',
        'hpxmj',
        'ensagens.',
        'lZXgk',
        'json',
        'chat',
        'QPWvK',
        'tiftq',
        'vIZOA',
        'ervices/Li',
        'PLugY',
        '232946bOAEIf',
        'WBNSc',
        'messages',
        'SetTicketM',
        'sage',
        '../helpers',
        '../utils/l',
        'edit',
        'pageNumber',
        'wTicketSer',
        'isArray',
        'query',
        'hatsAppMes',
        '96Dbiego',
        'ontar\x20as\x20m',
        'msg',
        'Service',
        'YtgBh',
        'G_WAPP_MSG',
        'ices/EditW',
        'tBxvV',
        'vice',
        'forEach',
        'AppError',
        'rehEL',
        'erty',
        '37365YJahHW',
        '__esModule',
        'UBXTx',
        'send',
        'forward',
        'count',
        'mediaUrl',
        'index',
        'store',
        'rvice',
        '32484bKeIhG',
        'hHShD',
        'DeGko',
        'ervices/Cr',
        'logger',
        'eateMessag',
        'KdtBa',
        'userId',
        'tenantId',
        '352475xCCVZM',
        '2011984NsWgHc',
        'Message',
        's/TicketSe'
    ];
    a = function () {
        return V;
    };
    return a();
}
var __importDefault = this && this[E(0x10a) + F(0x119)] || function (c) {
    const G = E;
    return c && c[G(0x15d)] ? c : { 'default': c };
};
const q = {};
q[F(0x188)] = !![], Object[E(0x11b) + F(0x15b)](exports, E(0x15d), q), exports[E(0x160)] = exports[F(0x194)] = exports[E(0x149)] = exports[E(0x164)] = exports[F(0x10f) + F(0x126)] = exports[E(0x163)] = void (0x1 * -0x2035 + 0x7d3 + 0xc31 * 0x2);
const AppError_1 = __importDefault(require(E(0x131) + E(0x159))), DeleteMessageSystem_1 = __importDefault(require(E(0x147) + E(0x109) + E(0x17f))), SetTicketMessagesAsRead_1 = __importDefault(require(F(0x147) + F(0x197) + E(0x181) + E(0x133))), Message_1 = __importDefault(require(E(0x12c) + E(0x171))), CreateForwardMessageService_1 = __importDefault(require(E(0x115) + F(0x10d) + F(0x169) + E(0x128) + E(0x190) + E(0x165))), CreateMessageSystemService_1 = __importDefault(require(F(0x115) + F(0x10d) + E(0x169) + E(0x16b) + E(0x12f) + F(0x157))), ListMessagesService_1 = __importDefault(require(F(0x115) + F(0x10d) + F(0x140) + E(0x12e) + E(0x152))), ShowTicketService_1 = __importDefault(require(E(0x115) + E(0x172) + F(0x18a) + E(0x14b) + E(0x157))), logger_1 = require(F(0x148) + E(0x114)), EditWhatsAppMessage_1 = __importDefault(require(F(0x115) + F(0x189) + F(0x155) + F(0x14e) + E(0x146))), index = async (e, f) => {
        const H = E, I = F, {ticketId: g} = e[H(0x117)], {pageNumber: h} = e[H(0x14d)], {tenantId: i} = e[I(0x11e)], j = {};
        j[H(0x14a)] = h, j[I(0x122)] = g, j[I(0x16e)] = i;
        const {
            count: k,
            messages: l,
            messagesOffLine: m,
            ticket: n,
            hasMore: o
        } = await (0x2660 + 0x3dd * 0x3 + -0x31f7, ListMessagesService_1[I(0x11d)])(j);
        (0x2015 + 0x1de9 + -0xe6 * 0x45, SetTicketMessagesAsRead_1[I(0x11d)])(n);
        const p = {};
        return p[I(0x161)] = k, p[I(0x144)] = l, p[H(0x176) + H(0x193)] = m, p[I(0x110)] = n, p[H(0x195)] = o, f[I(0x13b)](p);
    };
exports[F(0x163)] = index;
const ListCountMensagens = async (f, g) => {
    const J = E, K = F, h = {};
    h[J(0x11f)] = function (j, k) {
        return j instanceof k;
    }, h[K(0x10b)] = function (j, k) {
        return j === k;
    }, h[J(0x177)] = K(0x12d) + J(0x154), h[J(0x153)] = K(0x180) + K(0x111) + K(0x175), h[K(0x124)] = function (j, k) {
        return j !== k;
    }, h[K(0x13f)] = J(0x10e), h[J(0x167)] = K(0x130), h[J(0x16c)] = J(0x12a), h[K(0x192)] = J(0x129) + J(0x135) + J(0x150) + K(0x139);
    const i = h;
    try {
        if (i[J(0x124)](i[J(0x13f)], i[J(0x167)])) {
            const j = await Message_1[K(0x11d)][K(0x161)](), k = {};
            return k[K(0x161)] = j, g[J(0x13b)](k);
        } else {
            if (i[J(0x11f)](i, j[K(0x11d)]) && i[J(0x10b)](k[K(0x120)], i[J(0x177)])) {
                const m = {};
                return m[K(0x191)] = p[K(0x120)], o[J(0x173)](-0xae7 + -0xb9 + -0x1a6 * -0x8)[J(0x13b)](m);
            }
            throw n;
        }
    } catch (m) {
        if (i[J(0x10b)](i[J(0x16c)], i[K(0x16c)])) {
            const n = {};
            return n[J(0x191)] = i[K(0x192)], g[J(0x173)](0x1707 + 0xe * 0xac + -0x1e7b)[J(0x13b)](n);
        } else
            e[K(0x127)](i[J(0x153)], f);
    }
};
exports[F(0x10f) + F(0x126)] = ListCountMensagens;
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x254 + 0x577 * -0x1 + 0x42b);
        let h = e[f];
        return h;
    }, b(c, d);
}
const store = async (g, h) => {
    const L = F, M = E, i = {};
    i[L(0x174)] = M(0x12b) + M(0x11c) + 'G', i[L(0x141)] = L(0x145) + M(0x112) + L(0x198), i[L(0x17e)] = M(0x129) + M(0x135) + L(0x150) + L(0x139), i[M(0x186)] = function (s, t) {
        return s !== t;
    }, i[M(0x168)] = M(0x136), i[M(0x17b)] = L(0x13c), i[L(0x132)] = L(0x196), i[M(0x143)] = function (s, t) {
        return s === t;
    }, i[L(0x187)] = L(0x13e), i[L(0x113)] = function (s, t) {
        return s !== t;
    }, i[M(0x138)] = L(0x17c), i[L(0x199)] = M(0x11a), i[L(0x183)] = L(0x17d), i[L(0x13a)] = function (s, t) {
        return s > t;
    }, i[L(0x13d)] = L(0x156), i[M(0x178)] = M(0x118), i[M(0x18c)] = M(0x180) + M(0x111) + M(0x175);
    const j = i, {ticketId: k} = g[M(0x117)], {
            tenantId: l,
            id: m
        } = g[M(0x11e)], n = g[M(0x121)], o = g[L(0x125)], p = {};
    p['id'] = k, p[M(0x16e)] = l;
    const r = await (-0x4fd + -0x1359 + 0x1856, ShowTicketService_1[L(0x11d)])(p);
    try {
        if (j[L(0x143)](j[L(0x187)], j[L(0x187)]))
            await (-0xfa3 * -0x1 + 0x21a * 0x7 + -0x1e59, SetTicketMessagesAsRead_1[L(0x11d)])(r);
        else {
            f[L(0x16a)][L(0x191)](M(0x12b) + L(0x11c) + L(0x184) + g);
            throw new h[(M(0x11d))](j[L(0x174)]);
        }
    } catch (t) {
        j[L(0x113)](j[L(0x138)], j[L(0x138)]) ? e[L(0x127)](j[M(0x141)], f) : console[L(0x127)](j[M(0x141)], t);
    }
    try {
        if (n[L(0x162)]) {
            if (j[L(0x143)](j[L(0x199)], j[M(0x183)])) {
                const w = {};
                return w[L(0x11d)] = j, g && h[L(0x15d)] ? i : w;
            } else {
                const w = {};
                w[L(0x151)] = n, w[M(0x16e)] = l, w[L(0x116)] = o, w[M(0x110)] = r, w[L(0x16d)] = m, w[M(0x185) + 'te'] = n[L(0x185) + 'te'], w[M(0x17a)] = n[L(0x17a)] || j[M(0x17b)], w[L(0x173)] = j[M(0x132)], w[L(0x123)] = n[M(0x123)], await (-0x1 * -0x10f + -0x2063 * -0x1 + -0x593 * 0x6, CreateMessageSystemService_1[L(0x11d)])(w);
            }
        } else {
            if (o && j[L(0x13a)](o[L(0x18f)], -0x436 * 0x2 + -0x3 * 0x64b + 0x1d * 0xf1)) {
                if (j[M(0x143)](j[L(0x13d)], j[L(0x178)])) {
                    const y = {};
                    return y[M(0x191)] = y[M(0x120)], e[L(0x173)](0x1 * -0x1ba9 + -0x284 + 0x1fbd)[L(0x13b)](y);
                } else
                    o[M(0x158)](async (y, z) => {
                        const N = M, O = L;
                        if (j[N(0x186)](j[O(0x168)], j[N(0x168)])) {
                            const B = {};
                            return B[N(0x191)] = j[N(0x17e)], p[N(0x173)](-0xf24 + -0xb5f + -0x3 * -0x97d)[N(0x13b)](B);
                        } else {
                            const B = {
                                'fromMe': n[O(0x134)],
                                'body': Array[O(0x14c)](n[N(0x121)]) ? n[O(0x121)][z] : n[O(0x121)],
                                'idFront': Array[O(0x14c)](n[O(0x123)]) ? n[N(0x123)][z] : n[N(0x123)],
                                'read': ![]
                            };
                            await (-0x54f + -0x24e3 + 0x2a32 * 0x1, CreateMessageSystemService_1[O(0x11d)])({
                                'msg': B,
                                'tenantId': l,
                                'medias': [y],
                                'ticket': r,
                                'userId': m,
                                'scheduleDate': n[N(0x185) + 'te'] ? new Date(Array[N(0x14c)](n[O(0x185) + 'te']) ? n[N(0x185) + 'te'][z] : n[O(0x185) + 'te']) : undefined,
                                'sendType': n[O(0x17a)] || j[N(0x17b)],
                                'status': j[N(0x132)],
                                'idFront': Array[O(0x14c)](n[N(0x123)]) ? n[N(0x123)][z] : n[N(0x123)]
                            });
                        }
                    });
            } else {
                const y = {};
                y[M(0x151)] = n, y[M(0x16e)] = l, y[L(0x116)] = o, y[L(0x110)] = r, y[M(0x16d)] = m, y[M(0x185) + 'te'] = n[M(0x185) + 'te'], y[M(0x17a)] = n[L(0x17a)] || j[M(0x17b)], y[M(0x173)] = j[M(0x132)], y[L(0x123)] = n[M(0x123)], await (0x107 * -0x19 + -0x1 * -0x2226 + -0x877, CreateMessageSystemService_1[M(0x11d)])(y);
            }
        }
    } catch (z) {
        console[M(0x127)](j[L(0x18c)], z);
    }
    return h[L(0x15f)]();
};
exports[F(0x164)] = store;
const edit = async (f, g) => {
    const P = F, Q = F, h = {};
    h[P(0x15a)] = function (n, o) {
        return n instanceof o;
    }, h[P(0x108)] = function (n, o) {
        return n === o;
    }, h[P(0x15e)] = P(0x12d) + P(0x154);
    const i = h, {messageId: j} = f[P(0x117)], {tenantId: k} = f[Q(0x11e)], l = +k, {body: m} = f[P(0x121)];
    try {
        const n = {};
        n[Q(0x18b)] = j, n[P(0x16e)] = l, n[Q(0x121)] = m;
        const {
            ticketId: o,
            message: p
        } = await (-0x17a3 + -0x1 * -0x19b7 + -0x214, EditWhatsAppMessage_1[P(0x11d)])(n);
    } catch (r) {
        if (i[Q(0x15a)](r, AppError_1[Q(0x11d)]) && i[Q(0x108)](r[Q(0x120)], i[P(0x15e)])) {
            const s = {};
            return s[Q(0x191)] = r[P(0x120)], g[P(0x173)](-0x42a + 0x1 * -0x1ebb + 0x3 * 0xc27)[Q(0x13b)](s);
        }
        throw r;
    }
    return g[Q(0x15f)]();
};
exports[F(0x149)] = edit;
const remove = async (d, e) => {
    const R = F, S = F, f = {};
    f[R(0x10c)] = R(0x12b) + R(0x11c) + 'G';
    const g = f, {messageId: h} = d[S(0x117)], {tenantId: i} = d[S(0x11e)];
    try {
        await (0xb39 * -0x2 + -0xd * 0x2cd + 0x3adb, DeleteMessageSystem_1[R(0x11d)])(d[R(0x121)]['id'], h, i);
    } catch (j) {
        logger_1[R(0x16a)][S(0x191)](S(0x12b) + R(0x11c) + S(0x184) + j);
        throw new AppError_1[(R(0x11d))](g[R(0x10c)]);
    }
    return e[R(0x15f)]();
};
exports[E(0x194)] = remove;
const forward = async (d, e) => {
    const T = E, U = E, f = d[T(0x121)], {user: g} = d;
    for (const h of f[T(0x144)]) {
        const i = {};
        i[U(0x16d)] = g['id'], i[U(0x16e)] = g[T(0x16e)], i[T(0x120)] = h, i[U(0x18d)] = f[T(0x18d)], i[T(0x18e) + U(0x182)] = h[T(0x122)], await (-0x20b * -0x9 + -0x1 * 0x177b + 0x518, CreateForwardMessageService_1[T(0x11d)])(i);
    }
    return e[U(0x15f)]();
};
exports[E(0x160)] = forward;