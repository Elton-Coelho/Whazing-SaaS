'use strict';
const E = b, F = b;
(function (c, d) {
    const C = b, D = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(C(0x164)) / (-0x4fd * 0x6 + 0x2ff + 0x1af0) * (-parseInt(D(0x174)) / (-0x15a0 + 0x1 * 0x1f97 + 0x1 * -0x9f5)) + -parseInt(D(0x16b)) / (-0x4 * 0x36f + -0x19 * 0x18e + 0x349d) * (parseInt(D(0x10f)) / (0x22ca + 0x48 * 0x2d + -0x2f6e * 0x1)) + -parseInt(D(0x14a)) / (-0x1837 + 0x8b6 + -0xf86 * -0x1) + -parseInt(C(0x143)) / (-0x13 * 0x35 + 0x1d19 + -0x1924) + -parseInt(D(0x17d)) / (-0x5 * 0x61b + 0x156f * 0x1 + 0x91f) + parseInt(D(0x147)) / (-0x7 * -0x4a0 + -0x59 * -0x4f + -0x3bcf) * (parseInt(D(0x169)) / (0x5 * 0x6bc + -0x17d3 + -0x1 * 0x9d0)) + parseInt(C(0x130)) / (0x1 * -0x14b1 + -0x154d + -0x2 * -0x1504);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x7cd * 0x47 + -0x13 * 0x2173 + -0xb * -0xa4c1));
function a() {
    const V = [
        'dMessageSe',
        '4cPxvWF',
        'length',
        '../helpers',
        'fCpyi',
        'wTicketSer',
        'hcqfe',
        'TENYD',
        'eSystemSer',
        'DbxJR',
        'eateForwar',
        'kymXO',
        'erty',
        'GlkuH',
        '/DeleteMes',
        'temService',
        'medias',
        'ticket',
        'YoVTr',
        'hasMore',
        's/TicketSe',
        'vice',
        'log',
        'epnWG',
        'params',
        '/SetTicket',
        'rBgZt',
        'ervices/Li',
        'ogger',
        'sageSystem',
        'send',
        'mediaUrl',
        'body',
        'OaHcj',
        '6686600OKkUPI',
        'RoBSp',
        'messagesOf',
        'ClZJg',
        'pending',
        'MessagesAs',
        'zaFwn',
        'status',
        'tenantId',
        'ices/EditW',
        'ghQhZ',
        'scheduleDa',
        'xFNCk',
        'TFyAP',
        'SetTicketM',
        'ontar\x20as\x20m',
        'HSvbv',
        'Service',
        '__importDe',
        '1283862JIaJTJ',
        'messageId',
        'forEach',
        '../service',
        '8nQZpKy',
        'rvices/Sho',
        'messages',
        '1103320TvTlcj',
        'AppError',
        'pdKjI',
        'ERR_DELETE',
        'hatsAppMes',
        'wuBfF',
        'MessageSys',
        'defineProp',
        'VyyPr',
        'msg',
        'NLQGc',
        '_SYSTEM_MS',
        'ensagens',
        'essagesAsR',
        'error',
        'mxOQv',
        'sendType',
        'aGzkH',
        'json',
        '../models/',
        'forward',
        'DIMff',
        'query',
        'chat',
        'oNGoS',
        'Read',
        '55903fDgEUg',
        'ticketIdOr',
        'logger',
        '__esModule',
        'qpUsZ',
        '2234340iIWTwp',
        'try\x20Create',
        '258597ZBMjvD',
        'lwhiz',
        'BeBzn',
        '../errors/',
        'message',
        'Ahtzw',
        'Message',
        'rvice',
        'ListCountM',
        '2eymqia',
        'igin',
        'iJnIh',
        'HVcRz',
        'index',
        'idFront',
        'fCEfH',
        'stMessages',
        's/MessageS',
        '2047640pudZij',
        'ead',
        'gOFyN',
        'eateMessag',
        'files',
        'ensagens.',
        'fromMe',
        'BbkEi',
        'fLine',
        'default',
        'WtiLI',
        'count',
        'Ocorreu\x20um',
        'EQAQm',
        'fault',
        's/WbotServ',
        'ERR_EDITIN',
        'G_WAPP_MSG',
        'store',
        'user',
        'sage',
        'edit',
        '\x20erro\x20ao\x20c',
        'LLAfH',
        'ervices/Cr',
        'hjNnO',
        'zJPRV',
        'kdvde',
        'RdvHQ',
        'FSTiP',
        'userId',
        'G:\x20',
        'remove',
        'swmVx',
        'pageNumber',
        'isArray',
        '../utils/l',
        'ticketId',
        'value',
        'contact'
    ];
    a = function () {
        return V;
    };
    return a();
}
var __importDefault = this && this[E(0x142) + E(0xf4)] || function (c) {
    const G = E;
    return c && c[G(0x167)] ? c : { 'default': c };
};
const q = {};
q[E(0x10c)] = !![], Object[E(0x151) + E(0x11a)](exports, E(0x167), q), exports[F(0x15e)] = exports[F(0x106)] = exports[E(0xfb)] = exports[F(0xf8)] = exports[E(0x173) + F(0x156)] = exports[F(0x178)] = void (-0x10cd + -0x2f * -0x7d + -0x626);
const AppError_1 = __importDefault(require(E(0x16e) + F(0x14b))), DeleteMessageSystem_1 = __importDefault(require(E(0x111) + E(0x11c) + F(0x12b))), SetTicketMessagesAsRead_1 = __importDefault(require(F(0x111) + F(0x127) + E(0x135) + E(0x163))), Message_1 = __importDefault(require(E(0x15d) + E(0x171))), CreateForwardMessageService_1 = __importDefault(require(E(0x146) + E(0x17c) + E(0xfe) + F(0x118) + F(0x10e) + F(0x172))), CreateMessageSystemService_1 = __importDefault(require(F(0x146) + E(0x17c) + E(0xfe) + E(0x180) + E(0x116) + E(0x123))), ListMessagesService_1 = __importDefault(require(F(0x146) + E(0x17c) + F(0x129) + F(0x17b) + F(0x141))), ShowTicketService_1 = __importDefault(require(F(0x146) + E(0x122) + E(0x148) + F(0x113) + E(0x123))), logger_1 = require(E(0x10a) + E(0x12a)), EditWhatsAppMessage_1 = __importDefault(require(F(0x146) + F(0xf5) + E(0x139) + E(0x14e) + F(0xfa))), index = async (e, f) => {
        const H = E, I = E, {ticketId: g} = e[H(0x126)], {pageNumber: h} = e[H(0x160)], {tenantId: i} = e[H(0xf9)], j = {};
        j[H(0x108)] = h, j[H(0x10b)] = g, j[I(0x138)] = i;
        const {
            count: k,
            messages: l,
            messagesOffLine: m,
            ticket: n,
            hasMore: o
        } = await (0x1d5a + 0xcbb * 0x3 + 0x438b * -0x1, ListMessagesService_1[H(0x186)])(j);
        (0x4 * -0x815 + 0x1e3 * -0xb + 0x3515 * 0x1, SetTicketMessagesAsRead_1[I(0x186)])(n);
        const p = {};
        return p[H(0xf1)] = k, p[H(0x149)] = l, p[I(0x132) + I(0x185)] = m, p[H(0x11f)] = n, p[H(0x121)] = o, f[H(0x15c)](p);
    };
exports[F(0x178)] = index;
const ListCountMensagens = async (f, g) => {
    const J = F, K = F, h = {};
    h[J(0xff)] = K(0x13e) + J(0x157) + K(0x17e), h[J(0x120)] = K(0x16a) + K(0x150) + K(0x11d), h[K(0x107)] = function (j, k) {
        return j === k;
    }, h[K(0x184)] = K(0x115), h[K(0x14f)] = K(0x177), h[J(0x100)] = function (j, k) {
        return j !== k;
    }, h[K(0x13a)] = J(0x17a), h[J(0xfd)] = J(0x119), h[J(0x112)] = K(0xf2) + K(0xfc) + K(0x13f) + J(0x182);
    const i = h;
    try {
        if (i[K(0x107)](i[J(0x184)], i[J(0x14f)]))
            e[J(0x124)](i[K(0xff)], f);
        else {
            const k = await Message_1[J(0x186)][J(0xf1)](), l = {};
            return l[J(0xf1)] = k, g[J(0x15c)](l);
        }
    } catch (m) {
        if (i[K(0x100)](i[K(0x13a)], i[J(0xfd)])) {
            const n = {};
            return n[K(0x158)] = i[J(0x112)], g[K(0x137)](0x109 * 0x1e + -0x1bb2 + -0x78 * 0x3)[K(0x15c)](n);
        } else
            e[K(0x124)](i[J(0x120)], f);
    }
};
exports[E(0x173) + E(0x156)] = ListCountMensagens;
const store = async (g, h) => {
    const L = E, M = E, i = {};
    i[L(0x140)] = L(0x14d) + M(0x155) + 'G', i[L(0x117)] = function (s, t) {
        return s instanceof t;
    }, i[L(0x15b)] = function (s, t) {
        return s === t;
    }, i[M(0x128)] = M(0xf6) + L(0xf7), i[L(0x12f)] = M(0xf2) + M(0xfc) + L(0x13f) + L(0x182), i[M(0x13d)] = function (s, t) {
        return s !== t;
    }, i[L(0x170)] = M(0x154), i[L(0x16d)] = L(0x161), i[L(0x152)] = M(0x134), i[M(0x125)] = M(0x176), i[L(0x101)] = M(0x15f), i[M(0x162)] = function (s, t) {
        return s === t;
    }, i[L(0x136)] = M(0x102), i[L(0x13c)] = M(0x13e) + M(0x157) + M(0x17e), i[L(0x168)] = M(0x14c), i[M(0x133)] = function (s, t) {
        return s > t;
    }, i[L(0x114)] = L(0x16c), i[L(0xf3)] = L(0x131), i[M(0x17f)] = L(0x16a) + L(0x150) + L(0x11d);
    const j = i, {ticketId: k} = g[M(0x126)], {
            tenantId: l,
            id: m
        } = g[L(0xf9)], n = g[L(0x12e)], o = g[L(0x181)], p = {};
    p['id'] = k, p[L(0x138)] = l;
    const r = await (-0x20a0 + 0x214 + 0x17 * 0x154, ShowTicketService_1[L(0x186)])(p);
    try {
        if (j[M(0x13d)](j[M(0x125)], j[L(0x101)]))
            await (-0x1d59 + -0x1d01 * -0x1 + 0x58 * 0x1, SetTicketMessagesAsRead_1[M(0x186)])(r);
        else {
            f[L(0x166)][L(0x158)](L(0x14d) + M(0x155) + L(0x105) + g);
            throw new h[(M(0x186))](j[L(0x140)]);
        }
    } catch (t) {
        if (j[M(0x162)](j[M(0x136)], j[M(0x136)]))
            console[M(0x124)](j[M(0x13c)], t);
        else {
            if (j[M(0x117)](i, j[L(0x186)]) && j[M(0x15b)](k[M(0x16f)], j[M(0x128)])) {
                const v = {};
                return v[M(0x158)] = p[L(0x16f)], o[M(0x137)](-0x12f5 + -0x2 * 0xa58 + 0x2935)[L(0x15c)](v);
            }
            throw n;
        }
    }
    try {
        if (n[L(0x12d)]) {
            if (j[L(0x13d)](j[M(0x168)], j[L(0x168)])) {
                const w = {};
                return w[M(0x186)] = j, g && h[L(0x167)] ? i : w;
            } else {
                const w = {};
                w[L(0x153)] = n, w[L(0x138)] = l, w[M(0x11e)] = o, w[M(0x11f)] = r, w[M(0x104)] = m, w[M(0x13b) + 'te'] = n[M(0x13b) + 'te'], w[L(0x15a)] = n[M(0x15a)] || j[L(0x16d)], w[L(0x137)] = j[L(0x152)], w[M(0x179)] = n[M(0x179)], await (0x133a * -0x2 + 0x241 * 0x1 + 0xc11 * 0x3, CreateMessageSystemService_1[L(0x186)])(w);
            }
        } else {
            if (o && j[L(0x133)](o[L(0x110)], 0x1e39 + 0x2 * 0x204 + -0x2241)) {
                if (j[L(0x162)](j[L(0x114)], j[M(0xf3)])) {
                    const y = {};
                    return y[L(0x158)] = y[L(0x16f)], e[L(0x137)](0x1f62 + -0x1a * -0x16a + 0x1632 * -0x3)[M(0x15c)](y);
                } else
                    o[M(0x145)](async (y, z) => {
                        const N = L, O = M;
                        if (j[N(0x13d)](j[O(0x170)], j[N(0x170)])) {
                            const B = {};
                            return B[N(0x158)] = j[N(0x12f)], p[O(0x137)](0x21d9 * -0x1 + -0x2667 + 0x4a34)[O(0x15c)](B);
                        } else {
                            const B = {
                                'fromMe': n[N(0x183)],
                                'body': Array[O(0x109)](n[N(0x12e)]) ? n[O(0x12e)][z] : n[N(0x12e)],
                                'idFront': Array[O(0x109)](n[N(0x179)]) ? n[O(0x179)][z] : n[O(0x179)],
                                'read': ![]
                            };
                            await (0xb1d * 0x1 + 0x87b + -0x1398, CreateMessageSystemService_1[O(0x186)])({
                                'msg': B,
                                'tenantId': l,
                                'medias': [y],
                                'ticket': r,
                                'userId': m,
                                'scheduleDate': n[O(0x13b) + 'te'] ? new Date(Array[O(0x109)](n[N(0x13b) + 'te']) ? n[N(0x13b) + 'te'][z] : n[O(0x13b) + 'te']) : undefined,
                                'sendType': n[O(0x15a)] || j[O(0x16d)],
                                'status': j[N(0x152)],
                                'idFront': Array[N(0x109)](n[O(0x179)]) ? n[N(0x179)][z] : n[N(0x179)]
                            });
                        }
                    });
            } else {
                const y = {};
                y[M(0x153)] = n, y[L(0x138)] = l, y[L(0x11e)] = o, y[M(0x11f)] = r, y[M(0x104)] = m, y[L(0x13b) + 'te'] = n[M(0x13b) + 'te'], y[L(0x15a)] = n[M(0x15a)] || j[L(0x16d)], y[L(0x137)] = j[L(0x152)], y[M(0x179)] = n[M(0x179)], await (-0x1d80 + -0xa * -0x2f2 + 0xc, CreateMessageSystemService_1[L(0x186)])(y);
            }
        }
    } catch (z) {
        console[L(0x124)](j[L(0x17f)], z);
    }
    return h[L(0x12c)]();
};
exports[F(0xf8)] = store;
const edit = async (f, g) => {
    const P = E, Q = F, h = {};
    h[P(0x103)] = function (n, o) {
        return n instanceof o;
    }, h[P(0x187)] = function (n, o) {
        return n === o;
    }, h[P(0x11b)] = Q(0xf6) + Q(0xf7);
    const i = h, {messageId: j} = f[Q(0x126)], {tenantId: k} = f[Q(0xf9)], l = +k, {body: m} = f[Q(0x12e)];
    try {
        const n = {};
        n[P(0x144)] = j, n[Q(0x138)] = l, n[Q(0x12e)] = m;
        const {
            ticketId: o,
            message: p
        } = await (0x1e97 + 0xb08 + -0x299f, EditWhatsAppMessage_1[Q(0x186)])(n);
    } catch (r) {
        if (i[P(0x103)](r, AppError_1[Q(0x186)]) && i[P(0x187)](r[Q(0x16f)], i[P(0x11b)])) {
            const s = {};
            return s[P(0x158)] = r[Q(0x16f)], g[Q(0x137)](-0x18e3 + -0x33a + 0x1 * 0x1dad)[Q(0x15c)](s);
        }
        throw r;
    }
    return g[Q(0x12c)]();
};
exports[E(0xfb)] = edit;
const remove = async (d, e) => {
    const R = E, S = E, f = {};
    f[R(0x159)] = R(0x14d) + S(0x155) + 'G';
    const g = f, {messageId: h} = d[S(0x126)], {tenantId: i} = d[R(0xf9)];
    try {
        await (0x11fb + -0x1 * -0x24a6 + 0x1 * -0x36a1, DeleteMessageSystem_1[R(0x186)])(d[R(0x12e)]['id'], h, i);
    } catch (j) {
        logger_1[R(0x166)][R(0x158)](S(0x14d) + S(0x155) + R(0x105) + j);
        throw new AppError_1[(S(0x186))](g[R(0x159)]);
    }
    return e[S(0x12c)]();
};
exports[E(0x106)] = remove;
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x3ec * -0x7 + 0x1bdb * 0x1 + -0x365e);
        let h = e[f];
        return h;
    }, b(c, d);
}
const forward = async (d, e) => {
    const T = F, U = E, f = d[T(0x12e)], {user: g} = d;
    for (const h of f[U(0x149)]) {
        const i = {};
        i[T(0x104)] = g['id'], i[T(0x138)] = g[T(0x138)], i[T(0x16f)] = h, i[U(0x10d)] = f[U(0x10d)], i[T(0x165) + U(0x175)] = h[T(0x10b)], await (-0xb3 * 0x7 + -0x17ae + 0x1c93, CreateForwardMessageService_1[T(0x186)])(i);
    }
    return e[U(0x12c)]();
};
exports[E(0x15e)] = forward;